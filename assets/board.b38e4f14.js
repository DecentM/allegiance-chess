import{d as k,ai as Wr}from"./index.3556de96.js";var pe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Kt={exports:{}},si={},Se={},ta={},fi=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},Uf=fi,ui=function(){return Uf()&&!!Symbol.toStringTag},Ki=typeof Symbol!="undefined"&&Symbol,qf=fi,Wf=function(){return typeof Ki!="function"||typeof Symbol!="function"||typeof Ki("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:qf()},Yi={foo:{}},Gf=Object,Hf=function(){return{__proto__:Yi}.foo===Yi.foo&&!({__proto__:null}instanceof Gf)},Vf="Function.prototype.bind called on incompatible ",gn=Array.prototype.slice,zf=Object.prototype.toString,Kf="[object Function]",Yf=function(e){var r=this;if(typeof r!="function"||zf.call(r)!==Kf)throw new TypeError(Vf+r);for(var n=gn.call(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,n.concat(gn.call(arguments)));return Object(h)===h?h:this}else return r.apply(e,n.concat(gn.call(arguments)))},a=Math.max(0,r.length-n.length),s=[],u=0;u<a;u++)s.push("$"+u);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Jf=Yf,ci=Function.prototype.bind||Jf,Xf=ci,Qf=Xf.call(Function.call,Object.prototype.hasOwnProperty),N,At=SyntaxError,ra=Function,bt=TypeError,mn=function(t){try{return ra('"use strict"; return ('+t+").constructor;")()}catch{}},tt=Object.getOwnPropertyDescriptor;if(tt)try{tt({},"")}catch{tt=null}var vn=function(){throw new bt},Zf=tt?function(){try{return arguments.callee,vn}catch{try{return tt(arguments,"callee").get}catch{return vn}}}():vn,ht=Wf(),eu=Hf(),Q=Object.getPrototypeOf||(eu?function(t){return t.__proto__}:null),mt={},tu=typeof Uint8Array=="undefined"||!Q?N:Q(Uint8Array),rt={"%AggregateError%":typeof AggregateError=="undefined"?N:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?N:ArrayBuffer,"%ArrayIteratorPrototype%":ht&&Q?Q([][Symbol.iterator]()):N,"%AsyncFromSyncIteratorPrototype%":N,"%AsyncFunction%":mt,"%AsyncGenerator%":mt,"%AsyncGeneratorFunction%":mt,"%AsyncIteratorPrototype%":mt,"%Atomics%":typeof Atomics=="undefined"?N:Atomics,"%BigInt%":typeof BigInt=="undefined"?N:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?N:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?N:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?N:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?N:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?N:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?N:FinalizationRegistry,"%Function%":ra,"%GeneratorFunction%":mt,"%Int8Array%":typeof Int8Array=="undefined"?N:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?N:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?N:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ht&&Q?Q(Q([][Symbol.iterator]())):N,"%JSON%":typeof JSON=="object"?JSON:N,"%Map%":typeof Map=="undefined"?N:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!ht||!Q?N:Q(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?N:Promise,"%Proxy%":typeof Proxy=="undefined"?N:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?N:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?N:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!ht||!Q?N:Q(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?N:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ht&&Q?Q(""[Symbol.iterator]()):N,"%Symbol%":ht?Symbol:N,"%SyntaxError%":At,"%ThrowTypeError%":Zf,"%TypedArray%":tu,"%TypeError%":bt,"%Uint8Array%":typeof Uint8Array=="undefined"?N:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?N:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?N:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?N:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?N:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?N:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?N:WeakSet};if(Q)try{null.error}catch(t){var ru=Q(Q(t));rt["%Error.prototype%"]=ru}var nu=function t(e){var r;if(e==="%AsyncFunction%")r=mn("async function () {}");else if(e==="%GeneratorFunction%")r=mn("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=mn("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Q&&(r=Q(i.prototype))}return rt[e]=r,r},Ji={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Yt=ci,Mr=Qf,iu=Yt.call(Function.call,Array.prototype.concat),ou=Yt.call(Function.apply,Array.prototype.splice),Xi=Yt.call(Function.call,String.prototype.replace),$r=Yt.call(Function.call,String.prototype.slice),au=Yt.call(Function.call,RegExp.prototype.exec),su=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fu=/\\(\\)?/g,uu=function(e){var r=$r(e,0,1),n=$r(e,-1);if(r==="%"&&n!=="%")throw new At("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new At("invalid intrinsic syntax, expected opening `%`");var i=[];return Xi(e,su,function(o,a,s,u){i[i.length]=s?Xi(u,fu,"$1"):a||o}),i},cu=function(e,r){var n=e,i;if(Mr(Ji,n)&&(i=Ji[n],n="%"+i[0]+"%"),Mr(rt,n)){var o=rt[n];if(o===mt&&(o=nu(n)),typeof o=="undefined"&&!r)throw new bt("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new At("intrinsic "+e+" does not exist!")},Jt=function(e,r){if(typeof e!="string"||e.length===0)throw new bt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new bt('"allowMissing" argument must be a boolean');if(au(/^%?[^%]*%?$/,e)===null)throw new At("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=uu(e),i=n.length>0?n[0]:"",o=cu("%"+i+"%",r),a=o.name,s=o.value,u=!1,c=o.alias;c&&(i=c[0],ou(n,iu([0,1],c)));for(var h=1,d=!0;h<n.length;h+=1){var v=n[h],S=$r(v,0,1),w=$r(v,-1);if((S==='"'||S==="'"||S==="`"||w==='"'||w==="'"||w==="`")&&S!==w)throw new At("property names with quotes must have matching quotes");if((v==="constructor"||!d)&&(u=!0),i+="."+v,a="%"+i+"%",Mr(rt,a))s=rt[a];else if(s!=null){if(!(v in s)){if(!r)throw new bt("base intrinsic for "+e+" exists, but the property is not available.");return}if(tt&&h+1>=n.length){var A=tt(s,v);d=!!A,d&&"get"in A&&!("originalValue"in A.get)?s=A.get:s=s[v]}else d=Mr(s,v),s=s[v];d&&!u&&(rt[a]=s)}}return s},Xt={exports:{}};(function(t){var e=ci,r=Jt,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),a=r("%Object.getOwnPropertyDescriptor%",!0),s=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}t.exports=function(d){var v=o(e,i,arguments);if(a&&s){var S=a(v,"length");S.configurable&&s(v,"length",{value:1+u(0,d.length-(arguments.length-1))})}return v};var c=function(){return o(e,n,arguments)};s?s(t.exports,"apply",{value:c}):t.exports.apply=c})(Xt);var na=Jt,ia=Xt.exports,lu=ia(na("String.prototype.indexOf")),Gr=function(e,r){var n=na(e,!!r);return typeof n=="function"&&lu(e,".prototype.")>-1?ia(n):n},pu=ui(),hu=Gr,Un=hu("Object.prototype.toString"),Hr=function(e){return pu&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Un(e)==="[object Arguments]"},oa=function(e){return Hr(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Un(e)!=="[object Array]"&&Un(e.callee)==="[object Function]"},du=function(){return Hr(arguments)}();Hr.isLegacyArguments=oa;var yu=du?Hr:oa,gu=Object.prototype.toString,mu=Function.prototype.toString,vu=/^\s*(?:function)?\*/,aa=ui(),bn=Object.getPrototypeOf,bu=function(){if(!aa)return!1;try{return Function("return function*() {}")()}catch{}},wn,wu=function(e){if(typeof e!="function")return!1;if(vu.test(mu.call(e)))return!0;if(!aa){var r=gu.call(e);return r==="[object GeneratorFunction]"}if(!bn)return!1;if(typeof wn=="undefined"){var n=bu();wn=n?bn(n):!1}return bn(e)===wn},sa=Function.prototype.toString,vt=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,qn,br;if(typeof vt=="function"&&typeof Object.defineProperty=="function")try{qn=Object.defineProperty({},"length",{get:function(){throw br}}),br={},vt(function(){throw 42},null,qn)}catch(t){t!==br&&(vt=null)}else vt=null;var Su=/^\s*class\b/,Wn=function(e){try{var r=sa.call(e);return Su.test(r)}catch{return!1}},Sn=function(e){try{return Wn(e)?!1:(sa.call(e),!0)}catch{return!1}},wr=Object.prototype.toString,Eu="[object Object]",_u="[object Function]",ku="[object GeneratorFunction]",Au="[object HTMLAllCollection]",Ou="[object HTML document.all class]",Ru="[object HTMLCollection]",ju=typeof Symbol=="function"&&!!Symbol.toStringTag,Pu=!(0 in[,]),Gn=function(){return!1};if(typeof document=="object"){var Tu=document.all;wr.call(Tu)===wr.call(document.all)&&(Gn=function(e){if((Pu||!e)&&(typeof e=="undefined"||typeof e=="object"))try{var r=wr.call(e);return(r===Au||r===Ou||r===Ru||r===Eu)&&e("")==null}catch{}return!1})}var Nu=vt?function(e){if(Gn(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{vt(e,null,qn)}catch(r){if(r!==br)return!1}return!Wn(e)&&Sn(e)}:function(e){if(Gn(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(ju)return Sn(e);if(Wn(e))return!1;var r=wr.call(e);return r!==_u&&r!==ku&&!/^\[object HTML/.test(r)?!1:Sn(e)},Cu=Nu,Mu=Object.prototype.toString,fa=Object.prototype.hasOwnProperty,$u=function(e,r,n){for(var i=0,o=e.length;i<o;i++)fa.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Iu=function(e,r,n){for(var i=0,o=e.length;i<o;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},Du=function(e,r,n){for(var i in e)fa.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Lu=function(e,r,n){if(!Cu(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Mu.call(e)==="[object Array]"?$u(e,r,i):typeof e=="string"?Iu(e,r,i):Du(e,r,i)},Bu=Lu,En=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Fu=typeof globalThis=="undefined"?pe:globalThis,xu=function(){for(var e=[],r=0;r<En.length;r++)typeof Fu[En[r]]=="function"&&(e[e.length]=En[r]);return e},Uu=Jt,Sr=Uu("%Object.getOwnPropertyDescriptor%",!0);if(Sr)try{Sr([],"length")}catch{Sr=null}var ua=Sr,Ir=Bu,qu=xu,Qi=Xt.exports,li=Gr,Er=ua,Wu=li("Object.prototype.toString"),ca=ui(),Zi=typeof globalThis=="undefined"?pe:globalThis,Hn=qu(),pi=li("String.prototype.slice"),_n=Object.getPrototypeOf,Gu=li("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},Dr={__proto__:null};ca&&Er&&_n?Ir(Hn,function(t){var e=new Zi[t];if(Symbol.toStringTag in e){var r=_n(e),n=Er(r,Symbol.toStringTag);if(!n){var i=_n(r);n=Er(i,Symbol.toStringTag)}Dr["$"+t]=Qi(n.get)}}):Ir(Hn,function(t){var e=new Zi[t];Dr["$"+t]=Qi(e.slice)});var Hu=function(e){var r=!1;return Ir(Dr,function(n,i){if(!r)try{"$"+n(e)===i&&(r=pi(i,1))}catch{}}),r},Vu=function(e){var r=!1;return Ir(Dr,function(n,i){if(!r)try{n(e),r=pi(i,1)}catch{}}),r},la=function(e){if(!e||typeof e!="object")return!1;if(!ca){var r=pi(Wu(e),8,-1);return Gu(Hn,r)>-1?r:r!=="Object"?!1:Vu(e)}return Er?Hu(e):null},zu=la,Ku=function(e){return!!zu(e)};(function(t){var e=yu,r=wu,n=la,i=Ku;function o(m){return m.call.bind(m)}var a=typeof BigInt!="undefined",s=typeof Symbol!="undefined",u=o(Object.prototype.toString),c=o(Number.prototype.valueOf),h=o(String.prototype.valueOf),d=o(Boolean.prototype.valueOf);if(a)var v=o(BigInt.prototype.valueOf);if(s)var S=o(Symbol.prototype.valueOf);function w(m,ft){if(typeof m!="object")return!1;try{return ft(m),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function A(m){return typeof Promise!="undefined"&&m instanceof Promise||m!==null&&typeof m=="object"&&typeof m.then=="function"&&typeof m.catch=="function"}t.isPromise=A;function F(m){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(m):i(m)||y(m)}t.isArrayBufferView=F;function j(m){return n(m)==="Uint8Array"}t.isUint8Array=j;function U(m){return n(m)==="Uint8ClampedArray"}t.isUint8ClampedArray=U;function G(m){return n(m)==="Uint16Array"}t.isUint16Array=G;function ne(m){return n(m)==="Uint32Array"}t.isUint32Array=ne;function te(m){return n(m)==="Int8Array"}t.isInt8Array=te;function W(m){return n(m)==="Int16Array"}t.isInt16Array=W;function O(m){return n(m)==="Int32Array"}t.isInt32Array=O;function Y(m){return n(m)==="Float32Array"}t.isFloat32Array=Y;function ie(m){return n(m)==="Float64Array"}t.isFloat64Array=ie;function Ae(m){return n(m)==="BigInt64Array"}t.isBigInt64Array=Ae;function _e(m){return n(m)==="BigUint64Array"}t.isBigUint64Array=_e;function ue(m){return u(m)==="[object Map]"}ue.working=typeof Map!="undefined"&&ue(new Map);function it(m){return typeof Map=="undefined"?!1:ue.working?ue(m):m instanceof Map}t.isMap=it;function ge(m){return u(m)==="[object Set]"}ge.working=typeof Set!="undefined"&&ge(new Set);function Ne(m){return typeof Set=="undefined"?!1:ge.working?ge(m):m instanceof Set}t.isSet=Ne;function Ce(m){return u(m)==="[object WeakMap]"}Ce.working=typeof WeakMap!="undefined"&&Ce(new WeakMap);function Tt(m){return typeof WeakMap=="undefined"?!1:Ce.working?Ce(m):m instanceof WeakMap}t.isWeakMap=Tt;function Me(m){return u(m)==="[object WeakSet]"}Me.working=typeof WeakSet!="undefined"&&Me(new WeakSet);function me(m){return Me(m)}t.isWeakSet=me;function M(m){return u(m)==="[object ArrayBuffer]"}M.working=typeof ArrayBuffer!="undefined"&&M(new ArrayBuffer);function ot(m){return typeof ArrayBuffer=="undefined"?!1:M.working?M(m):m instanceof ArrayBuffer}t.isArrayBuffer=ot;function p(m){return u(m)==="[object DataView]"}p.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&p(new DataView(new ArrayBuffer(1),0,1));function y(m){return typeof DataView=="undefined"?!1:p.working?p(m):m instanceof DataView}t.isDataView=y;var b=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function R(m){return u(m)==="[object SharedArrayBuffer]"}function $(m){return typeof b=="undefined"?!1:(typeof R.working=="undefined"&&(R.working=R(new b)),R.working?R(m):m instanceof b)}t.isSharedArrayBuffer=$;function L(m){return u(m)==="[object AsyncFunction]"}t.isAsyncFunction=L;function P(m){return u(m)==="[object Map Iterator]"}t.isMapIterator=P;function C(m){return u(m)==="[object Set Iterator]"}t.isSetIterator=C;function B(m){return u(m)==="[object Generator]"}t.isGeneratorObject=B;function Z(m){return u(m)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=Z;function Oe(m){return w(m,c)}t.isNumberObject=Oe;function at(m){return w(m,h)}t.isStringObject=at;function Re(m){return w(m,d)}t.isBooleanObject=Re;function ze(m){return a&&w(m,v)}t.isBigIntObject=ze;function st(m){return s&&w(m,S)}t.isSymbolObject=st;function or(m){return Oe(m)||at(m)||Re(m)||ze(m)||st(m)}t.isBoxedPrimitive=or;function an(m){return typeof Uint8Array!="undefined"&&(ot(m)||$(m))}t.isAnyArrayBuffer=an,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(m){Object.defineProperty(t,m,{enumerable:!1,value:function(){throw new Error(m+" is not supported in userland")}})})})(ta);var Yu=function(e){return e instanceof k.Buffer},Pe={exports:{}};typeof Object.create=="function"?Pe.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Pe.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};(function(t){var e=Object.getOwnPropertyDescriptors||function(y){for(var b=Object.keys(y),R={},$=0;$<b.length;$++)R[b[$]]=Object.getOwnPropertyDescriptor(y,b[$]);return R},r=/%[sdj%]/g;t.format=function(p){if(!te(p)){for(var y=[],b=0;b<arguments.length;b++)y.push(a(arguments[b]));return y.join(" ")}for(var b=1,R=arguments,$=R.length,L=String(p).replace(r,function(C){if(C==="%%")return"%";if(b>=$)return C;switch(C){case"%s":return String(R[b++]);case"%d":return Number(R[b++]);case"%j":try{return JSON.stringify(R[b++])}catch{return"[Circular]"}default:return C}}),P=R[b];b<$;P=R[++b])U(P)||!ie(P)?L+=" "+P:L+=" "+a(P);return L},t.deprecate=function(p,y){if(typeof k.process!="undefined"&&k.process.noDeprecation===!0)return p;if(typeof k.process=="undefined")return function(){return t.deprecate(p,y).apply(this,arguments)};var b=!1;function R(){if(!b){if(k.process.throwDeprecation)throw new Error(y);k.process.traceDeprecation?console.trace(y):console.error(y),b=!0}return p.apply(this,arguments)}return R};var n={},i=/^$/;if({}.NODE_DEBUG){var o={}.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}t.debuglog=function(p){if(p=p.toUpperCase(),!n[p])if(i.test(p)){var y=k.process.pid;n[p]=function(){var b=t.format.apply(t,arguments);console.error("%s %d: %s",p,y,b)}}else n[p]=function(){};return n[p]};function a(p,y){var b={seen:[],stylize:u};return arguments.length>=3&&(b.depth=arguments[2]),arguments.length>=4&&(b.colors=arguments[3]),j(y)?b.showHidden=y:y&&t._extend(b,y),O(b.showHidden)&&(b.showHidden=!1),O(b.depth)&&(b.depth=2),O(b.colors)&&(b.colors=!1),O(b.customInspect)&&(b.customInspect=!0),b.colors&&(b.stylize=s),h(b,p,b.depth)}t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(p,y){var b=a.styles[y];return b?"\x1B["+a.colors[b][0]+"m"+p+"\x1B["+a.colors[b][1]+"m":p}function u(p,y){return p}function c(p){var y={};return p.forEach(function(b,R){y[b]=!0}),y}function h(p,y,b){if(p.customInspect&&y&&ue(y.inspect)&&y.inspect!==t.inspect&&!(y.constructor&&y.constructor.prototype===y)){var R=y.inspect(b,p);return te(R)||(R=h(p,R,b)),R}var $=d(p,y);if($)return $;var L=Object.keys(y),P=c(L);if(p.showHidden&&(L=Object.getOwnPropertyNames(y)),_e(y)&&(L.indexOf("message")>=0||L.indexOf("description")>=0))return v(y);if(L.length===0){if(ue(y)){var C=y.name?": "+y.name:"";return p.stylize("[Function"+C+"]","special")}if(Y(y))return p.stylize(RegExp.prototype.toString.call(y),"regexp");if(Ae(y))return p.stylize(Date.prototype.toString.call(y),"date");if(_e(y))return v(y)}var B="",Z=!1,Oe=["{","}"];if(F(y)&&(Z=!0,Oe=["[","]"]),ue(y)){var at=y.name?": "+y.name:"";B=" [Function"+at+"]"}if(Y(y)&&(B=" "+RegExp.prototype.toString.call(y)),Ae(y)&&(B=" "+Date.prototype.toUTCString.call(y)),_e(y)&&(B=" "+v(y)),L.length===0&&(!Z||y.length==0))return Oe[0]+B+Oe[1];if(b<0)return Y(y)?p.stylize(RegExp.prototype.toString.call(y),"regexp"):p.stylize("[Object]","special");p.seen.push(y);var Re;return Z?Re=S(p,y,b,P,L):Re=L.map(function(ze){return w(p,y,b,P,ze,Z)}),p.seen.pop(),A(Re,B,Oe)}function d(p,y){if(O(y))return p.stylize("undefined","undefined");if(te(y)){var b="'"+JSON.stringify(y).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return p.stylize(b,"string")}if(ne(y))return p.stylize(""+y,"number");if(j(y))return p.stylize(""+y,"boolean");if(U(y))return p.stylize("null","null")}function v(p){return"["+Error.prototype.toString.call(p)+"]"}function S(p,y,b,R,$){for(var L=[],P=0,C=y.length;P<C;++P)Me(y,String(P))?L.push(w(p,y,b,R,String(P),!0)):L.push("");return $.forEach(function(B){B.match(/^\d+$/)||L.push(w(p,y,b,R,B,!0))}),L}function w(p,y,b,R,$,L){var P,C,B;if(B=Object.getOwnPropertyDescriptor(y,$)||{value:y[$]},B.get?B.set?C=p.stylize("[Getter/Setter]","special"):C=p.stylize("[Getter]","special"):B.set&&(C=p.stylize("[Setter]","special")),Me(R,$)||(P="["+$+"]"),C||(p.seen.indexOf(B.value)<0?(U(b)?C=h(p,B.value,null):C=h(p,B.value,b-1),C.indexOf(`
`)>-1&&(L?C=C.split(`
`).map(function(Z){return"  "+Z}).join(`
`).slice(2):C=`
`+C.split(`
`).map(function(Z){return"   "+Z}).join(`
`))):C=p.stylize("[Circular]","special")),O(P)){if(L&&$.match(/^\d+$/))return C;P=JSON.stringify(""+$),P.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(P=P.slice(1,-1),P=p.stylize(P,"name")):(P=P.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),P=p.stylize(P,"string"))}return P+": "+C}function A(p,y,b){var R=p.reduce(function($,L){return L.indexOf(`
`)>=0,$+L.replace(/\u001b\[\d\d?m/g,"").length+1},0);return R>60?b[0]+(y===""?"":y+`
 `)+" "+p.join(`,
  `)+" "+b[1]:b[0]+y+" "+p.join(", ")+" "+b[1]}t.types=ta;function F(p){return Array.isArray(p)}t.isArray=F;function j(p){return typeof p=="boolean"}t.isBoolean=j;function U(p){return p===null}t.isNull=U;function G(p){return p==null}t.isNullOrUndefined=G;function ne(p){return typeof p=="number"}t.isNumber=ne;function te(p){return typeof p=="string"}t.isString=te;function W(p){return typeof p=="symbol"}t.isSymbol=W;function O(p){return p===void 0}t.isUndefined=O;function Y(p){return ie(p)&&ge(p)==="[object RegExp]"}t.isRegExp=Y,t.types.isRegExp=Y;function ie(p){return typeof p=="object"&&p!==null}t.isObject=ie;function Ae(p){return ie(p)&&ge(p)==="[object Date]"}t.isDate=Ae,t.types.isDate=Ae;function _e(p){return ie(p)&&(ge(p)==="[object Error]"||p instanceof Error)}t.isError=_e,t.types.isNativeError=_e;function ue(p){return typeof p=="function"}t.isFunction=ue;function it(p){return p===null||typeof p=="boolean"||typeof p=="number"||typeof p=="string"||typeof p=="symbol"||typeof p=="undefined"}t.isPrimitive=it,t.isBuffer=Yu;function ge(p){return Object.prototype.toString.call(p)}function Ne(p){return p<10?"0"+p.toString(10):p.toString(10)}var Ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Tt(){var p=new Date,y=[Ne(p.getHours()),Ne(p.getMinutes()),Ne(p.getSeconds())].join(":");return[p.getDate(),Ce[p.getMonth()],y].join(" ")}t.log=function(){console.log("%s - %s",Tt(),t.format.apply(t,arguments))},t.inherits=Pe.exports,t._extend=function(p,y){if(!y||!ie(y))return p;for(var b=Object.keys(y),R=b.length;R--;)p[b[R]]=y[b[R]];return p};function Me(p,y){return Object.prototype.hasOwnProperty.call(p,y)}var me=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;t.promisify=function(y){if(typeof y!="function")throw new TypeError('The "original" argument must be of type Function');if(me&&y[me]){var b=y[me];if(typeof b!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(b,me,{value:b,enumerable:!1,writable:!1,configurable:!0}),b}function b(){for(var R,$,L=new Promise(function(B,Z){R=B,$=Z}),P=[],C=0;C<arguments.length;C++)P.push(arguments[C]);P.push(function(B,Z){B?$(B):R(Z)});try{y.apply(this,P)}catch(B){$(B)}return L}return Object.setPrototypeOf(b,Object.getPrototypeOf(y)),me&&Object.defineProperty(b,me,{value:b,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(b,e(y))},t.promisify.custom=me;function M(p,y){if(!p){var b=new Error("Promise was rejected with a falsy value");b.reason=p,p=b}return y(p)}function ot(p){if(typeof p!="function")throw new TypeError('The "original" argument must be of type Function');function y(){for(var b=[],R=0;R<arguments.length;R++)b.push(arguments[R]);var $=b.pop();if(typeof $!="function")throw new TypeError("The last argument must be of type Function");var L=this,P=function(){return $.apply(L,arguments)};p.apply(this,b).then(function(C){k.process.nextTick(P.bind(null,null,C))},function(C){k.process.nextTick(M.bind(null,C,P))})}return Object.setPrototypeOf(y,Object.getPrototypeOf(p)),Object.defineProperties(y,e(p)),y}t.callbackify=ot})(Se);function qe(t){return qe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(t)}function eo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xu(n.key),n)}}function Ju(t,e,r){return e&&eo(t.prototype,e),r&&eo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xu(t){var e=Qu(t,"string");return qe(e)==="symbol"?e:String(e)}function Qu(t,e){if(qe(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(qe(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ec(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vn(t,e)}function Vn(t,e){return Vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Vn(t,e)}function tc(t){var e=ic();return function(){var n=Lr(t),i;if(e){var o=Lr(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return rc(this,i)}}function rc(t,e){if(e&&(qe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nc(t)}function nc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ic(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lr(t){return Lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lr(t)}var pa={},wt,kn;function Qt(t,e,r){r||(r=Error);function n(o,a,s){return typeof e=="string"?e:e(o,a,s)}var i=function(o){ec(s,o);var a=tc(s);function s(u,c,h){var d;return Zu(this,s),d=a.call(this,n(u,c,h)),d.code=t,d}return Ju(s)}(r);pa[t]=i}function to(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function oc(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function ac(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function sc(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Qt("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);Qt("ERR_INVALID_ARG_TYPE",function(t,e,r){wt===void 0&&(wt=Kt.exports),wt(typeof t=="string","'name' must be a string");var n;typeof e=="string"&&oc(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(ac(t," argument"))i="The ".concat(t," ").concat(n," ").concat(to(e,"type"));else{var o=sc(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(to(e,"type"))}return i+=". Received type ".concat(qe(r)),i},TypeError);Qt("ERR_INVALID_ARG_VALUE",function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";kn===void 0&&(kn=Se);var n=kn.inspect(e);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(r,". Received ").concat(n)},TypeError);Qt("ERR_INVALID_RETURN_VALUE",function(t,e,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(qe(r)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(n,".")},TypeError);Qt("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];wt===void 0&&(wt=Kt.exports),wt(e.length>0,"At least one arg needs to be specified");var n="The ",i=e.length;switch(e=e.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(e[0]," argument");break;case 2:n+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:n+=e.slice(0,i-1).join(", "),n+=", and ".concat(e[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError);si.codes=pa;function ro(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function no(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ro(Object(r),!0).forEach(function(n){fc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fc(t,e,r){return e=ha(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function io(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ha(n.key),n)}}function cc(t,e,r){return e&&io(t.prototype,e),r&&io(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ha(t){var e=lc(t,"string");return fe(e)==="symbol"?e:String(e)}function lc(t,e){if(fe(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(fe(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gt(t,e)}function hc(t){var e=ya();return function(){var n=Ht(t),i;if(e){var o=Ht(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return da(this,i)}}function da(t,e){if(e&&(fe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zn(t)}function zn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kn(t){var e=typeof Map=="function"?new Map:void 0;return Kn=function(n){if(n===null||!dc(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return _r(n,arguments,Ht(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Gt(i,n)},Kn(t)}function _r(t,e,r){return ya()?_r=Reflect.construct.bind():_r=function(i,o,a){var s=[null];s.push.apply(s,o);var u=Function.bind.apply(i,s),c=new u;return a&&Gt(c,a.prototype),c},_r.apply(null,arguments)}function ya(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dc(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Gt(t,e){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Gt(t,e)}function Ht(t){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ht(t)}function fe(t){return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(t)}var yc=Se,Yn=yc.inspect,gc=si,mc=gc.codes.ERR_INVALID_ARG_TYPE;function oo(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function vc(t,e){if(e=Math.floor(e),t.length==0||e==0)return"";var r=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,r-t.length),t}var ve="",Bt="",Ft="",ee="",Qe={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},bc=10;function ao(t){var e=Object.keys(t),r=Object.create(Object.getPrototypeOf(t));return e.forEach(function(n){r[n]=t[n]}),Object.defineProperty(r,"message",{value:t.message}),r}function xt(t){return Yn(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function wc(t,e,r){var n="",i="",o=0,a="",s=!1,u=xt(t),c=u.split(`
`),h=xt(e).split(`
`),d=0,v="";if(r==="strictEqual"&&fe(t)==="object"&&fe(e)==="object"&&t!==null&&e!==null&&(r="strictEqualObject"),c.length===1&&h.length===1&&c[0]!==h[0]){var S=c[0].length+h[0].length;if(S<=bc){if((fe(t)!=="object"||t===null)&&(fe(e)!=="object"||e===null)&&(t!==0||e!==0))return"".concat(Qe[r],`

`)+"".concat(c[0]," !== ").concat(h[0],`
`)}else if(r!=="strictEqualObject"){var w=k.process.stderr&&k.process.stderr.isTTY?k.process.stderr.columns:80;if(S<w){for(;c[0][d]===h[0][d];)d++;d>2&&(v=`
  `.concat(vc(" ",d),"^"),d=0)}}}for(var A=c[c.length-1],F=h[h.length-1];A===F&&(d++<2?a=`
  `.concat(A).concat(a):n=A,c.pop(),h.pop(),!(c.length===0||h.length===0));)A=c[c.length-1],F=h[h.length-1];var j=Math.max(c.length,h.length);if(j===0){var U=u.split(`
`);if(U.length>30)for(U[26]="".concat(ve,"...").concat(ee);U.length>27;)U.pop();return"".concat(Qe.notIdentical,`

`).concat(U.join(`
`),`
`)}d>3&&(a=`
`.concat(ve,"...").concat(ee).concat(a),s=!0),n!==""&&(a=`
  `.concat(n).concat(a),n="");var G=0,ne=Qe[r]+`
`.concat(Bt,"+ actual").concat(ee," ").concat(Ft,"- expected").concat(ee),te=" ".concat(ve,"...").concat(ee," Lines skipped");for(d=0;d<j;d++){var W=d-o;if(c.length<d+1)W>1&&d>2&&(W>4?(i+=`
`.concat(ve,"...").concat(ee),s=!0):W>3&&(i+=`
  `.concat(h[d-2]),G++),i+=`
  `.concat(h[d-1]),G++),o=d,n+=`
`.concat(Ft,"-").concat(ee," ").concat(h[d]),G++;else if(h.length<d+1)W>1&&d>2&&(W>4?(i+=`
`.concat(ve,"...").concat(ee),s=!0):W>3&&(i+=`
  `.concat(c[d-2]),G++),i+=`
  `.concat(c[d-1]),G++),o=d,i+=`
`.concat(Bt,"+").concat(ee," ").concat(c[d]),G++;else{var O=h[d],Y=c[d],ie=Y!==O&&(!oo(Y,",")||Y.slice(0,-1)!==O);ie&&oo(O,",")&&O.slice(0,-1)===Y&&(ie=!1,Y+=","),ie?(W>1&&d>2&&(W>4?(i+=`
`.concat(ve,"...").concat(ee),s=!0):W>3&&(i+=`
  `.concat(c[d-2]),G++),i+=`
  `.concat(c[d-1]),G++),o=d,i+=`
`.concat(Bt,"+").concat(ee," ").concat(Y),n+=`
`.concat(Ft,"-").concat(ee," ").concat(O),G+=2):(i+=n,n="",(W===1||d===0)&&(i+=`
  `.concat(Y),G++))}if(G>20&&d<j-2)return"".concat(ne).concat(te,`
`).concat(i,`
`).concat(ve,"...").concat(ee).concat(n,`
`)+"".concat(ve,"...").concat(ee)}return"".concat(ne).concat(s?te:"",`
`).concat(i).concat(n).concat(a).concat(v)}var Sc=function(t,e){pc(n,t);var r=hc(n);function n(i){var o;if(uc(this,n),fe(i)!=="object"||i===null)throw new mc("options","Object",i);var a=i.message,s=i.operator,u=i.stackStartFn,c=i.actual,h=i.expected,d=Error.stackTraceLimit;if(Error.stackTraceLimit=0,a!=null)o=r.call(this,String(a));else if(k.process.stderr&&k.process.stderr.isTTY&&(k.process.stderr&&k.process.stderr.getColorDepth&&k.process.stderr.getColorDepth()!==1?(ve="\x1B[34m",Bt="\x1B[32m",ee="\x1B[39m",Ft="\x1B[31m"):(ve="",Bt="",ee="",Ft="")),fe(c)==="object"&&c!==null&&fe(h)==="object"&&h!==null&&"stack"in c&&c instanceof Error&&"stack"in h&&h instanceof Error&&(c=ao(c),h=ao(h)),s==="deepStrictEqual"||s==="strictEqual")o=r.call(this,wc(c,h,s));else if(s==="notDeepStrictEqual"||s==="notStrictEqual"){var v=Qe[s],S=xt(c).split(`
`);if(s==="notStrictEqual"&&fe(c)==="object"&&c!==null&&(v=Qe.notStrictEqualObject),S.length>30)for(S[26]="".concat(ve,"...").concat(ee);S.length>27;)S.pop();S.length===1?o=r.call(this,"".concat(v," ").concat(S[0])):o=r.call(this,"".concat(v,`

`).concat(S.join(`
`),`
`))}else{var w=xt(c),A="",F=Qe[s];s==="notDeepEqual"||s==="notEqual"?(w="".concat(Qe[s],`

`).concat(w),w.length>1024&&(w="".concat(w.slice(0,1021),"..."))):(A="".concat(xt(h)),w.length>512&&(w="".concat(w.slice(0,509),"...")),A.length>512&&(A="".concat(A.slice(0,509),"...")),s==="deepEqual"||s==="equal"?w="".concat(F,`

`).concat(w,`

should equal

`):A=" ".concat(s," ").concat(A)),o=r.call(this,"".concat(w).concat(A))}return Error.stackTraceLimit=d,o.generatedMessage=!a,Object.defineProperty(zn(o),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),o.code="ERR_ASSERTION",o.actual=c,o.expected=h,o.operator=s,Error.captureStackTrace&&Error.captureStackTrace(zn(o),u),o.stack,o.name="AssertionError",da(o)}return cc(n,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(o,a){return Yn(this,no(no({},a),{},{customInspect:!1,depth:0}))}}]),n}(Kn(Error),Yn.custom),Ec=Sc,so=Object.prototype.toString,ga=function(e){var r=so.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&so.call(e.callee)==="[object Function]"),n},ma;if(!Object.keys){var pr=Object.prototype.hasOwnProperty,fo=Object.prototype.toString,_c=ga,uo=Object.prototype.propertyIsEnumerable,kc=!uo.call({toString:null},"toString"),Ac=uo.call(function(){},"prototype"),hr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],An=function(t){var e=t.constructor;return e&&e.prototype===t},Oc={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Rc=function(){if(typeof window=="undefined")return!1;for(var t in window)try{if(!Oc["$"+t]&&pr.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{An(window[t])}catch{return!0}}catch{return!0}return!1}(),jc=function(t){if(typeof window=="undefined"||!Rc)return An(t);try{return An(t)}catch{return!1}};ma=function(e){var r=e!==null&&typeof e=="object",n=fo.call(e)==="[object Function]",i=_c(e),o=r&&fo.call(e)==="[object String]",a=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var s=Ac&&n;if(o&&e.length>0&&!pr.call(e,0))for(var u=0;u<e.length;++u)a.push(String(u));if(i&&e.length>0)for(var c=0;c<e.length;++c)a.push(String(c));else for(var h in e)!(s&&h==="prototype")&&pr.call(e,h)&&a.push(String(h));if(kc)for(var d=jc(e),v=0;v<hr.length;++v)!(d&&hr[v]==="constructor")&&pr.call(e,hr[v])&&a.push(hr[v]);return a}}var Pc=ma,Tc=Array.prototype.slice,Nc=ga,co=Object.keys,kr=co?function(e){return co(e)}:Pc,lo=Object.keys;kr.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Nc(n)?lo(Tc.call(n)):lo(n)})}else Object.keys=kr;return Object.keys||kr};var va=kr,Cc=va,ba=fi(),wa=Gr,po=Object,Mc=wa("Array.prototype.push"),ho=wa("Object.prototype.propertyIsEnumerable"),$c=ba?Object.getOwnPropertySymbols:null,Ic=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=po(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var o=po(arguments[i]),a=Cc(o),s=ba&&(Object.getOwnPropertySymbols||$c);if(s)for(var u=s(o),c=0;c<u.length;++c){var h=u[c];ho(o,h)&&Mc(a,h)}for(var d=0;d<a.length;++d){var v=a[d];if(ho(o,v)){var S=o[v];n[v]=S}}}return n},On=Ic,Dc=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var a in i)o+=a;return t!==o},Lc=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},Bc=function(){return!Object.assign||Dc()||Lc()?On:Object.assign},yo=function(t){return t!==t},Sa=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||yo(e)&&yo(r))},Fc=Sa,hi=function(){return typeof Object.is=="function"?Object.is:Fc},xc=Jt,Jn=xc("%Object.defineProperty%",!0),Xn=function(){if(Jn)try{return Jn({},"a",{value:1}),!0}catch{return!1}return!1};Xn.hasArrayLengthDefineBug=function(){if(!Xn())return null;try{return Jn([],"length",{value:1}).length!==1}catch{return!0}};var Ea=Xn,Uc=Ea(),di=Jt,go=Uc&&di("%Object.defineProperty%",!0),qc=di("%SyntaxError%"),dt=di("%TypeError%"),mo=ua,Wc=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new dt("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new dt("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new dt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new dt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new dt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new dt("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,u=!!mo&&mo(e,r);if(go)go(e,r,{configurable:a===null&&u?u.configurable:!a,enumerable:i===null&&u?u.enumerable:!i,value:n,writable:o===null&&u?u.writable:!o});else if(s||!i&&!o&&!a)e[r]=n;else throw new qc("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Gc=va,Hc=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Vc=Object.prototype.toString,zc=Array.prototype.concat,vo=Wc,Kc=function(t){return typeof t=="function"&&Vc.call(t)==="[object Function]"},_a=Ea(),Yc=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!Kc(n)||!n())return}_a?vo(t,e,r,!0):vo(t,e,r)},ka=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Gc(e);Hc&&(n=zc.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Yc(t,n[i],e[n[i]],r[n[i]])};ka.supportsDescriptors=!!_a;var Vr=ka,Jc=hi,Xc=Vr,Qc=function(){var e=Jc();return Xc(Object,{is:e},{is:function(){return Object.is!==e}}),e},Zc=Vr,el=Xt.exports,tl=Sa,Aa=hi,rl=Qc,Oa=el(Aa(),Object);Zc(Oa,{getPolyfill:Aa,implementation:tl,shim:rl});var nl=Oa,Ra=function(e){return e!==e},il=Ra,ja=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:il},ol=Vr,al=ja,sl=function(){var e=al();return ol(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e},fl=Xt.exports,ul=Vr,cl=Ra,Pa=ja,ll=sl,Ta=fl(Pa(),Number);ul(Ta,{getPolyfill:Pa,implementation:cl,shim:ll});var pl=Ta;function bo(t,e){return gl(t)||yl(t,e)||dl(t,e)||hl()}function hl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dl(t,e){if(!!t){if(typeof t=="string")return wo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wo(t,e)}}function wo(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yl(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(h){c=!0,i=h}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function gl(t){if(Array.isArray(t))return t}function le(t){return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(t)}var ml=/a/g.flags!==void 0,Br=function(e){var r=[];return e.forEach(function(n){return r.push(n)}),r},So=function(e){var r=[];return e.forEach(function(n,i){return r.push([i,n])}),r},Na=Object.is?Object.is:nl,Ar=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},Qn=Number.isNaN?Number.isNaN:pl;function yi(t){return t.call.bind(t)}var Dt=yi(Object.prototype.hasOwnProperty),Or=yi(Object.prototype.propertyIsEnumerable),Eo=yi(Object.prototype.toString),ae=Se.types,vl=ae.isAnyArrayBuffer,bl=ae.isArrayBufferView,_o=ae.isDate,dr=ae.isMap,ko=ae.isRegExp,yr=ae.isSet,wl=ae.isNativeError,Sl=ae.isBoxedPrimitive,Ao=ae.isNumberObject,Oo=ae.isStringObject,Ro=ae.isBooleanObject,jo=ae.isBigIntObject,El=ae.isSymbolObject,_l=ae.isFloat32Array,kl=ae.isFloat64Array;function Al(t){if(t.length===0||t.length>10)return!0;for(var e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<48||r>57)return!0}return t.length===10&&t>=Math.pow(2,32)}function gr(t){return Object.keys(t).filter(Al).concat(Ar(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function Ca(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}var Ol=!0,Rl=!1,Zn=0,gi=1,Ma=2,$a=3;function jl(t,e){return ml?t.source===e.source&&t.flags===e.flags:RegExp.prototype.toString.call(t)===RegExp.prototype.toString.call(e)}function Pl(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Tl(t,e){return t.byteLength!==e.byteLength?!1:Ca(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))===0}function Nl(t,e){return t.byteLength===e.byteLength&&Ca(new Uint8Array(t),new Uint8Array(e))===0}function Cl(t,e){return Ao(t)?Ao(e)&&Na(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):Oo(t)?Oo(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):Ro(t)?Ro(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):jo(t)?jo(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):El(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}function he(t,e,r,n){if(t===e)return t!==0?!0:r?Na(t,e):!0;if(r){if(le(t)!=="object")return typeof t=="number"&&Qn(t)&&Qn(e);if(le(e)!=="object"||t===null||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(t===null||le(t)!=="object")return e===null||le(e)!=="object"?t==e:!1;if(e===null||le(e)!=="object")return!1}var i=Eo(t),o=Eo(e);if(i!==o)return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var a=gr(t),s=gr(e);return a.length!==s.length?!1:Mt(t,e,r,n,gi,a)}if(i==="[object Object]"&&(!dr(t)&&dr(e)||!yr(t)&&yr(e)))return!1;if(_o(t)){if(!_o(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(ko(t)){if(!ko(e)||!jl(t,e))return!1}else if(wl(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else if(bl(t)){if(!r&&(_l(t)||kl(t))){if(!Pl(t,e))return!1}else if(!Tl(t,e))return!1;var u=gr(t),c=gr(e);return u.length!==c.length?!1:Mt(t,e,r,n,Zn,u)}else{if(yr(t))return!yr(e)||t.size!==e.size?!1:Mt(t,e,r,n,Ma);if(dr(t))return!dr(e)||t.size!==e.size?!1:Mt(t,e,r,n,$a);if(vl(t)){if(!Nl(t,e))return!1}else if(Sl(t)&&!Cl(t,e))return!1}return Mt(t,e,r,n,Zn)}function Po(t,e){return e.filter(function(r){return Or(t,r)})}function Mt(t,e,r,n,i,o){if(arguments.length===5){o=Object.keys(t);var a=Object.keys(e);if(o.length!==a.length)return!1}for(var s=0;s<o.length;s++)if(!Dt(e,o[s]))return!1;if(r&&arguments.length===5){var u=Ar(t);if(u.length!==0){var c=0;for(s=0;s<u.length;s++){var h=u[s];if(Or(t,h)){if(!Or(e,h))return!1;o.push(h),c++}else if(Or(e,h))return!1}var d=Ar(e);if(u.length!==d.length&&Po(e,d).length!==c)return!1}else{var v=Ar(e);if(v.length!==0&&Po(e,v).length!==0)return!1}}if(o.length===0&&(i===Zn||i===gi&&t.length===0||t.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var S=n.val1.get(t);if(S!==void 0){var w=n.val2.get(e);if(w!==void 0)return S===w}n.position++}n.val1.set(t,n.position),n.val2.set(e,n.position);var A=Ll(t,e,r,o,n,i);return n.val1.delete(t),n.val2.delete(e),A}function To(t,e,r,n){for(var i=Br(t),o=0;o<i.length;o++){var a=i[o];if(he(e,a,r,n))return t.delete(a),!0}return!1}function Ia(t){switch(le(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(Qn(t))return!1}return!0}function Ml(t,e,r){var n=Ia(r);return n!=null?n:e.has(n)&&!t.has(n)}function $l(t,e,r,n,i){var o=Ia(r);if(o!=null)return o;var a=e.get(o);return a===void 0&&!e.has(o)||!he(n,a,!1,i)?!1:!t.has(o)&&he(n,a,!1,i)}function Il(t,e,r,n){for(var i=null,o=Br(t),a=0;a<o.length;a++){var s=o[a];if(le(s)==="object"&&s!==null)i===null&&(i=new Set),i.add(s);else if(!e.has(s)){if(r||!Ml(t,e,s))return!1;i===null&&(i=new Set),i.add(s)}}if(i!==null){for(var u=Br(e),c=0;c<u.length;c++){var h=u[c];if(le(h)==="object"&&h!==null){if(!To(i,h,r,n))return!1}else if(!r&&!t.has(h)&&!To(i,h,r,n))return!1}return i.size===0}return!0}function No(t,e,r,n,i,o){for(var a=Br(t),s=0;s<a.length;s++){var u=a[s];if(he(r,u,i,o)&&he(n,e.get(u),i,o))return t.delete(u),!0}return!1}function Dl(t,e,r,n){for(var i=null,o=So(t),a=0;a<o.length;a++){var s=bo(o[a],2),u=s[0],c=s[1];if(le(u)==="object"&&u!==null)i===null&&(i=new Set),i.add(u);else{var h=e.get(u);if(h===void 0&&!e.has(u)||!he(c,h,r,n)){if(r||!$l(t,e,u,c,n))return!1;i===null&&(i=new Set),i.add(u)}}}if(i!==null){for(var d=So(e),v=0;v<d.length;v++){var S=bo(d[v],2),w=S[0],A=S[1];if(le(w)==="object"&&w!==null){if(!No(i,t,w,A,r,n))return!1}else if(!r&&(!t.has(w)||!he(t.get(w),A,!1,n))&&!No(i,t,w,A,!1,n))return!1}return i.size===0}return!0}function Ll(t,e,r,n,i,o){var a=0;if(o===Ma){if(!Il(t,e,r,i))return!1}else if(o===$a){if(!Dl(t,e,r,i))return!1}else if(o===gi)for(;a<t.length;a++)if(Dt(t,a)){if(!Dt(e,a)||!he(t[a],e[a],r,i))return!1}else{if(Dt(e,a))return!1;for(var s=Object.keys(t);a<s.length;a++){var u=s[a];if(!Dt(e,u)||!he(t[u],e[u],r,i))return!1}return s.length===Object.keys(e).length}for(a=0;a<n.length;a++){var c=n[a];if(!he(t[c],e[c],r,i))return!1}return!0}function Bl(t,e){return he(t,e,Rl)}function Fl(t,e){return he(t,e,Ol)}var xl={isDeepEqual:Bl,isDeepStrictEqual:Fl};function be(t){return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(t)}function Co(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ql(n.key),n)}}function Ul(t,e,r){return e&&Co(t.prototype,e),r&&Co(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ql(t){var e=Wl(t,"string");return be(e)==="symbol"?e:String(e)}function Wl(t,e){if(be(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(be(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Hl=si,Zt=Hl.codes,Mo=Zt.ERR_AMBIGUOUS_ARGUMENT,Ot=Zt.ERR_INVALID_ARG_TYPE,Vl=Zt.ERR_INVALID_ARG_VALUE,zl=Zt.ERR_INVALID_RETURN_VALUE,Ge=Zt.ERR_MISSING_ARGS,He=Ec,Kl=Se,Rr=Kl.inspect,Da=Se.types,Yl=Da.isPromise,Fr=Da.isRegExp,Jl=Bc(),La=hi(),xr=Gr("RegExp.prototype.test"),We,zr;function er(){var t=xl;We=t.isDeepEqual,zr=t.isDeepStrictEqual}var $o=!1,q=Kt.exports=mi,Kr={};function Ee(t){throw t.message instanceof Error?t.message:new He(t)}function Ba(t,e,r,n,i){var o=arguments.length,a;if(o===0)a="Failed";else if(o===1)r=t,t=void 0;else{if($o===!1){$o=!0;var s=k.process.emitWarning?k.process.emitWarning:console.warn.bind(console);s("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(n="!=")}if(r instanceof Error)throw r;var u={actual:t,expected:e,operator:n===void 0?"fail":n,stackStartFn:i||Ba};r!==void 0&&(u.message=r);var c=new He(u);throw a&&(c.message=a,c.generatedMessage=!0),c}q.fail=Ba;q.AssertionError=He;function Fa(t,e,r,n){if(!r){var i=!1;if(e===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new He({actual:r,expected:!0,message:n,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function mi(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Fa.apply(void 0,[mi,e.length].concat(e))}q.ok=mi;q.equal=function t(e,r,n){if(arguments.length<2)throw new Ge("actual","expected");e!=r&&Ee({actual:e,expected:r,message:n,operator:"==",stackStartFn:t})};q.notEqual=function t(e,r,n){if(arguments.length<2)throw new Ge("actual","expected");e==r&&Ee({actual:e,expected:r,message:n,operator:"!=",stackStartFn:t})};q.deepEqual=function t(e,r,n){if(arguments.length<2)throw new Ge("actual","expected");We===void 0&&er(),We(e,r)||Ee({actual:e,expected:r,message:n,operator:"deepEqual",stackStartFn:t})};q.notDeepEqual=function t(e,r,n){if(arguments.length<2)throw new Ge("actual","expected");We===void 0&&er(),We(e,r)&&Ee({actual:e,expected:r,message:n,operator:"notDeepEqual",stackStartFn:t})};q.deepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Ge("actual","expected");We===void 0&&er(),zr(e,r)||Ee({actual:e,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:t})};q.notDeepStrictEqual=xa;function xa(t,e,r){if(arguments.length<2)throw new Ge("actual","expected");We===void 0&&er(),zr(t,e)&&Ee({actual:t,expected:e,message:r,operator:"notDeepStrictEqual",stackStartFn:xa})}q.strictEqual=function t(e,r,n){if(arguments.length<2)throw new Ge("actual","expected");La(e,r)||Ee({actual:e,expected:r,message:n,operator:"strictEqual",stackStartFn:t})};q.notStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Ge("actual","expected");La(e,r)&&Ee({actual:e,expected:r,message:n,operator:"notStrictEqual",stackStartFn:t})};var Io=Ul(function t(e,r,n){var i=this;Gl(this,t),r.forEach(function(o){o in e&&(n!==void 0&&typeof n[o]=="string"&&Fr(e[o])&&xr(e[o],n[o])?i[o]=n[o]:i[o]=e[o])})});function Xl(t,e,r,n,i,o){if(!(r in t)||!zr(t[r],e[r])){if(!n){var a=new Io(t,i),s=new Io(e,i,t),u=new He({actual:a,expected:s,operator:"deepStrictEqual",stackStartFn:o});throw u.actual=t,u.expected=e,u.operator=o.name,u}Ee({actual:t,expected:e,message:n,operator:o.name,stackStartFn:o})}}function Ua(t,e,r,n){if(typeof e!="function"){if(Fr(e))return xr(e,t);if(arguments.length===2)throw new Ot("expected",["Function","RegExp"],e);if(be(t)!=="object"||t===null){var i=new He({actual:t,expected:e,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(e);if(e instanceof Error)o.push("name","message");else if(o.length===0)throw new Vl("error",e,"may not be an empty object");return We===void 0&&er(),o.forEach(function(a){typeof t[a]=="string"&&Fr(e[a])&&xr(e[a],t[a])||Xl(t,e,a,r,o,n)}),!0}return e.prototype!==void 0&&t instanceof e?!0:Error.isPrototypeOf(e)?!1:e.call({},t)===!0}function qa(t){if(typeof t!="function")throw new Ot("fn","Function",t);try{t()}catch(e){return e}return Kr}function Do(t){return Yl(t)||t!==null&&be(t)==="object"&&typeof t.then=="function"&&typeof t.catch=="function"}function Wa(t){return Promise.resolve().then(function(){var e;if(typeof t=="function"){if(e=t(),!Do(e))throw new zl("instance of Promise","promiseFn",e)}else if(Do(t))e=t;else throw new Ot("promiseFn",["Function","Promise"],t);return Promise.resolve().then(function(){return e}).then(function(){return Kr}).catch(function(r){return r})})}function Ga(t,e,r,n){if(typeof r=="string"){if(arguments.length===4)throw new Ot("error",["Object","Error","Function","RegExp"],r);if(be(e)==="object"&&e!==null){if(e.message===r)throw new Mo("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===r)throw new Mo("error/message",'The error "'.concat(e,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&be(r)!=="object"&&typeof r!="function")throw new Ot("error",["Object","Error","Function","RegExp"],r);if(e===Kr){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=t.name==="rejects"?"rejection":"exception";Ee({actual:void 0,expected:r,operator:t.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:t})}if(r&&!Ua(e,r,n,t))throw e}function Ha(t,e,r,n){if(e!==Kr){if(typeof r=="string"&&(n=r,r=void 0),!r||Ua(e,r)){var i=n?": ".concat(n):".",o=t.name==="doesNotReject"?"rejection":"exception";Ee({actual:e,expected:r,operator:t.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}q.throws=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Ga.apply(void 0,[t,qa(e)].concat(n))};q.rejects=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Wa(e).then(function(o){return Ga.apply(void 0,[t,o].concat(n))})};q.doesNotThrow=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Ha.apply(void 0,[t,qa(e)].concat(n))};q.doesNotReject=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Wa(e).then(function(o){return Ha.apply(void 0,[t,o].concat(n))})};q.ifError=function t(e){if(e!=null){var r="ifError got unwanted exception: ";be(e)==="object"&&typeof e.message=="string"?e.message.length===0&&e.constructor?r+=e.constructor.name:r+=e.message:r+=Rr(e);var n=new He({actual:e,expected:null,operator:"ifError",message:r,stackStartFn:t}),i=e.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var a=n.stack.split(`
`),s=0;s<o.length;s++){var u=a.indexOf(o[s]);if(u!==-1){a=a.slice(0,u);break}}n.stack="".concat(a.join(`
`),`
`).concat(o.join(`
`))}throw n}};function Va(t,e,r,n,i){if(!Fr(e))throw new Ot("regexp","RegExp",e);var o=i==="match";if(typeof t!="string"||xr(e,t)!==o){if(r instanceof Error)throw r;var a=!r;r=r||(typeof t!="string"?'The "string" argument must be of type string. Received type '+"".concat(be(t)," (").concat(Rr(t),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(Rr(e),`. Input:

`).concat(Rr(t),`
`));var s=new He({actual:t,expected:e,message:r,operator:i,stackStartFn:n});throw s.generatedMessage=a,s}}q.match=function t(e,r,n){Va(e,r,n,t,"match")};q.doesNotMatch=function t(e,r,n){Va(e,r,n,t,"doesNotMatch")};function za(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Fa.apply(void 0,[za,e.length].concat(e))}q.strict=Jl(za,q,{equal:q.strictEqual,deepEqual:q.deepStrictEqual,notEqual:q.notStrictEqual,notDeepEqual:q.notDeepStrictEqual});q.strict.strict=q.strict;var tr={exports:{}},St=typeof Reflect=="object"?Reflect:null,Lo=St&&typeof St.apply=="function"?St.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},jr;St&&typeof St.ownKeys=="function"?jr=St.ownKeys:Object.getOwnPropertySymbols?jr=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:jr=function(e){return Object.getOwnPropertyNames(e)};function Ql(t){console&&console.warn&&console.warn(t)}var Ka=Number.isNaN||function(e){return e!==e};function x(){x.init.call(this)}tr.exports=x;tr.exports.once=rp;x.EventEmitter=x;x.prototype._events=void 0;x.prototype._eventsCount=0;x.prototype._maxListeners=void 0;var Bo=10;function Yr(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return Bo},set:function(t){if(typeof t!="number"||t<0||Ka(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Bo=t}});x.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};x.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Ka(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ya(t){return t._maxListeners===void 0?x.defaultMaxListeners:t._maxListeners}x.prototype.getMaxListeners=function(){return Ya(this)};x.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")Lo(u,this,r);else for(var c=u.length,h=es(u,c),n=0;n<c;++n)Lo(h[n],this,r);return!0};function Ja(t,e,r,n){var i,o,a;if(Yr(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),a===void 0)a=o[e]=r,++t._eventsCount;else if(typeof a=="function"?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=Ya(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,Ql(s)}return t}x.prototype.addListener=function(e,r){return Ja(this,e,r,!1)};x.prototype.on=x.prototype.addListener;x.prototype.prependListener=function(e,r){return Ja(this,e,r,!0)};function Zl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Xa(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Zl.bind(n);return i.listener=r,n.wrapFn=i,i}x.prototype.once=function(e,r){return Yr(r),this.on(e,Xa(this,e,r)),this};x.prototype.prependOnceListener=function(e,r){return Yr(r),this.prependListener(e,Xa(this,e,r)),this};x.prototype.removeListener=function(e,r){var n,i,o,a,s;if(Yr(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){s=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():ep(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};x.prototype.off=x.prototype.removeListener;x.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Qa(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?tp(i):es(i,i.length)}x.prototype.listeners=function(e){return Qa(this,e,!0)};x.prototype.rawListeners=function(e){return Qa(this,e,!1)};x.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Za.call(t,e)};x.prototype.listenerCount=Za;function Za(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}x.prototype.eventNames=function(){return this._eventsCount>0?jr(this._events):[]};function es(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function ep(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function tp(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function rp(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,o),n(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ts(t,e,o,{once:!0}),e!=="error"&&np(t,i,{once:!0})})}function np(t,e,r){typeof t.on=="function"&&ts(t,"error",e,r)}function ts(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var rs=tr.exports.EventEmitter;function Fo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fo(Object(r),!0).forEach(function(n){ip(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fo(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ip(t,e,r){return e=ns(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function op(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ns(n.key),n)}}function ap(t,e,r){return e&&Uo(t.prototype,e),r&&Uo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ns(t){var e=sp(t,"string");return typeof e=="symbol"?e:String(e)}function sp(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fp=Wr,Pr=fp.Buffer,up=Se,ei=up.inspect,cp=ei&&ei.custom||"inspect";function lp(t,e,r){Pr.prototype.copy.call(t,e,r)}var pp=function(){function t(){op(this,t),this.head=null,this.tail=null,this.length=0}return ap(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Pr.alloc(0);for(var n=Pr.allocUnsafe(r>>>0),i=this.head,o=0;i;)lp(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var a=n.data,s=r>a.length?a.length:r;if(s===a.length?o+=a:o+=a.slice(0,r),r-=s,r===0){s===a.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(s));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=Pr.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var a=i.data,s=r>a.length?a.length:r;if(a.copy(n,n.length-r,0,s),r-=s,r===0){s===a.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=a.slice(s));break}++o}return this.length-=o,n}},{key:cp,value:function(r,n){return ei(this,xo(xo({},n),{},{depth:0,customInspect:!1}))}}]),t}();function hp(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,k.process.nextTick(ti,this,t)):k.process.nextTick(ti,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?k.process.nextTick(Tr,r):(r._writableState.errorEmitted=!0,k.process.nextTick(qo,r,o)):k.process.nextTick(qo,r,o):e?(k.process.nextTick(Tr,r),e(o)):k.process.nextTick(Tr,r)}),this)}function qo(t,e){ti(t,e),Tr(t)}function Tr(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function dp(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ti(t,e){t.emit("error",e)}function yp(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var is={destroy:hp,undestroy:dp,errorOrDestroy:yp},nt={};function gp(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var os={};function ye(t,e,r){r||(r=Error);function n(o,a,s){return typeof e=="string"?e:e(o,a,s)}var i=function(o){gp(a,o);function a(s,u,c){return o.call(this,n(s,u,c))||this}return a}(r);i.prototype.name=r.name,i.prototype.code=t,os[t]=i}function Wo(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function mp(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function vp(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function bp(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}ye("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);ye("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&mp(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(vp(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Wo(e,"type"));else{var o=bp(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(Wo(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);ye("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ye("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});ye("ERR_STREAM_PREMATURE_CLOSE","Premature close");ye("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});ye("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ye("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ye("ERR_STREAM_WRITE_AFTER_END","write after end");ye("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ye("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);ye("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");nt.codes=os;var wp=nt.codes.ERR_INVALID_OPT_VALUE;function Sp(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Ep(t,e,r,n){var i=Sp(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new wp(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var as={getHighWaterMark:Ep},_p=kp;function kp(t,e){if(Rn("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Rn("throwDeprecation"))throw new Error(e);Rn("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Rn(t){try{if(!pe.localStorage)return!1}catch{return!1}var e=pe.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var ss=H;function fs(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Xp(e,t)}}var Et;H.WritableState=rr;var Ap={deprecate:_p},us=rs,Jr=Wr.Buffer,Op=(typeof pe!="undefined"?pe:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function Rp(t){return Jr.from(t)}function jp(t){return Jr.isBuffer(t)||t instanceof Op}var vi=is,Pp=as,Tp=Pp.getHighWaterMark,Ve=nt.codes,Np=Ve.ERR_INVALID_ARG_TYPE,Cp=Ve.ERR_METHOD_NOT_IMPLEMENTED,Mp=Ve.ERR_MULTIPLE_CALLBACK,$p=Ve.ERR_STREAM_CANNOT_PIPE,Ip=Ve.ERR_STREAM_DESTROYED,Dp=Ve.ERR_STREAM_NULL_VALUES,Lp=Ve.ERR_STREAM_WRITE_AFTER_END,Bp=Ve.ERR_UNKNOWN_ENCODING,Rt=vi.errorOrDestroy;Pe.exports(H,us);function Fp(){}function rr(t,e,r){Et=Et||jt,t=t||{},typeof r!="boolean"&&(r=e instanceof Et),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Tp(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Vp(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new fs(this)}rr.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(rr.prototype,"buffer",{get:Ap.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Nr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Nr=Function.prototype[Symbol.hasInstance],Object.defineProperty(H,Symbol.hasInstance,{value:function(e){return Nr.call(this,e)?!0:this!==H?!1:e&&e._writableState instanceof rr}})):Nr=function(e){return e instanceof this};function H(t){Et=Et||jt;var e=this instanceof Et;if(!e&&!Nr.call(H,this))return new H(t);this._writableState=new rr(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),us.call(this)}H.prototype.pipe=function(){Rt(this,new $p)};function xp(t,e){var r=new Lp;Rt(t,r),k.process.nextTick(e,r)}function Up(t,e,r,n){var i;return r===null?i=new Dp:typeof r!="string"&&!e.objectMode&&(i=new Np("chunk",["string","Buffer"],r)),i?(Rt(t,i),k.process.nextTick(n,i),!1):!0}H.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&jp(t);return o&&!Jr.isBuffer(t)&&(t=Rp(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Fp),n.ending?xp(this,r):(o||Up(this,n,t,r))&&(n.pendingcb++,i=Wp(this,n,o,t,e,r)),i};H.prototype.cork=function(){this._writableState.corked++};H.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&cs(this,t))};H.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Bp(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(H.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function qp(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Jr.from(e,r)),e}Object.defineProperty(H.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Wp(t,e,r,n,i,o){if(!r){var a=qp(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else ri(t,e,!1,s,n,i,o);return u}function ri(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Ip("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Gp(t,e,r,n,i){--e.pendingcb,r?(k.process.nextTick(i,n),k.process.nextTick(Vt,t,e),t._writableState.errorEmitted=!0,Rt(t,n)):(i(n),t._writableState.errorEmitted=!0,Rt(t,n),Vt(t,e))}function Hp(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Vp(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Mp;if(Hp(r),e)Gp(t,r,n,e,i);else{var o=ls(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&cs(t,r),n?k.process.nextTick(Go,t,r,o,i):Go(t,r,o,i)}}function Go(t,e,r,n){r||zp(t,e),e.pendingcb--,n(),Vt(t,e)}function zp(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function cs(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,s=!0;r;)i[a]=r,r.isBuf||(s=!1),r=r.next,a+=1;i.allBuffers=s,ri(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new fs(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,h=r.callback,d=e.objectMode?1:u.length;if(ri(t,e,!1,d,u,c,h),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}H.prototype._write=function(t,e,r){r(new Cp("_write()"))};H.prototype._writev=null;H.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Jp(this,n,r),this};Object.defineProperty(H.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ls(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Kp(t,e){t._final(function(r){e.pendingcb--,r&&Rt(t,r),e.prefinished=!0,t.emit("prefinish"),Vt(t,e)})}function Yp(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,k.process.nextTick(Kp,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Vt(t,e){var r=ls(e);if(r&&(Yp(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Jp(t,e,r){e.ending=!0,Vt(t,e),r&&(e.finished?k.process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Xp(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});H.prototype.destroy=vi.destroy;H.prototype._undestroy=vi.undestroy;H.prototype._destroy=function(t,e){e(t)};var Qp=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},jt=ke,ps=ds,ni=ss;Pe.exports(ke,ps);for(var Ho=Qp(ni.prototype),jn=0;jn<Ho.length;jn++){var Pn=Ho[jn];ke.prototype[Pn]||(ke.prototype[Pn]=ni.prototype[Pn])}function ke(t){if(!(this instanceof ke))return new ke(t);ps.call(this,t),ni.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Zp)))}Object.defineProperty(ke.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ke.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ke.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Zp(){this._writableState.ended||k.process.nextTick(eh,this)}function eh(t){t.end()}Object.defineProperty(ke.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var bi={},ii={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Wr,n=r.Buffer;function i(a,s){for(var u in a)s[u]=a[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o);function o(a,s,u){return n(a,s,u)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(a,s,u){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,s,u)},o.alloc=function(a,s,u){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=n(a);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(ii,ii.exports);var wi=ii.exports.Buffer,Vo=wi.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function th(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function rh(t){var e=th(t);if(typeof e!="string"&&(wi.isEncoding===Vo||!Vo(t)))throw new Error("Unknown encoding: "+t);return e||t}bi.StringDecoder=nr;function nr(t){this.encoding=rh(t);var e;switch(this.encoding){case"utf16le":this.text=fh,this.end=uh,e=4;break;case"utf8":this.fillLast=oh,e=4;break;case"base64":this.text=ch,this.end=lh,e=3;break;default:this.write=ph,this.end=hh;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=wi.allocUnsafe(e)}nr.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};nr.prototype.end=sh;nr.prototype.text=ah;nr.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Tn(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function nh(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Tn(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Tn(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Tn(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function ih(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function oh(t){var e=this.lastTotal-this.lastNeed,r=ih(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function ah(t,e){var r=nh(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function sh(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function fh(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function uh(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function ch(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function lh(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function ph(t){return t.toString(this.encoding)}function hh(t){return t&&t.length?this.write(t):""}var zo=nt.codes.ERR_STREAM_PREMATURE_CLOSE;function dh(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function yh(){}function gh(t){return t.setHeader&&typeof t.abort=="function"}function hs(t,e,r){if(typeof e=="function")return hs(t,null,e);e||(e={}),r=dh(r||yh);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||s()},a=t._writableState&&t._writableState.finished,s=function(){i=!1,a=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},h=function(w){r.call(t,w)},d=function(){var w;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(w=new zo),r.call(t,w);if(i&&!a)return(!t._writableState||!t._writableState.ended)&&(w=new zo),r.call(t,w)},v=function(){t.req.on("finish",s)};return gh(t)?(t.on("complete",s),t.on("abort",d),t.req?v():t.on("request",v)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",c),t.on("finish",s),e.error!==!1&&t.on("error",h),t.on("close",d),function(){t.removeListener("complete",s),t.removeListener("abort",d),t.removeListener("request",v),t.req&&t.req.removeListener("finish",s),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",s),t.removeListener("end",c),t.removeListener("error",h),t.removeListener("close",d)}}var Si=hs,mr;function Le(t,e,r){return e=mh(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mh(t){var e=vh(t,"string");return typeof e=="symbol"?e:String(e)}function vh(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bh=Si,Be=Symbol("lastResolve"),Xe=Symbol("lastReject"),Ut=Symbol("error"),Ur=Symbol("ended"),Ze=Symbol("lastPromise"),Ei=Symbol("handlePromise"),et=Symbol("stream");function Fe(t,e){return{value:t,done:e}}function wh(t){var e=t[Be];if(e!==null){var r=t[et].read();r!==null&&(t[Ze]=null,t[Be]=null,t[Xe]=null,e(Fe(r,!1)))}}function Sh(t){k.process.nextTick(wh,t)}function Eh(t,e){return function(r,n){t.then(function(){if(e[Ur]){r(Fe(void 0,!0));return}e[Ei](r,n)},n)}}var _h=Object.getPrototypeOf(function(){}),kh=Object.setPrototypeOf((mr={get stream(){return this[et]},next:function(){var e=this,r=this[Ut];if(r!==null)return Promise.reject(r);if(this[Ur])return Promise.resolve(Fe(void 0,!0));if(this[et].destroyed)return new Promise(function(a,s){k.process.nextTick(function(){e[Ut]?s(e[Ut]):a(Fe(void 0,!0))})});var n=this[Ze],i;if(n)i=new Promise(Eh(n,this));else{var o=this[et].read();if(o!==null)return Promise.resolve(Fe(o,!1));i=new Promise(this[Ei])}return this[Ze]=i,i}},Le(mr,Symbol.asyncIterator,function(){return this}),Le(mr,"return",function(){var e=this;return new Promise(function(r,n){e[et].destroy(null,function(i){if(i){n(i);return}r(Fe(void 0,!0))})})}),mr),_h),Ah=function(e){var r,n=Object.create(kh,(r={},Le(r,et,{value:e,writable:!0}),Le(r,Be,{value:null,writable:!0}),Le(r,Xe,{value:null,writable:!0}),Le(r,Ut,{value:null,writable:!0}),Le(r,Ur,{value:e._readableState.endEmitted,writable:!0}),Le(r,Ei,{value:function(o,a){var s=n[et].read();s?(n[Ze]=null,n[Be]=null,n[Xe]=null,o(Fe(s,!1))):(n[Be]=o,n[Xe]=a)},writable:!0}),r));return n[Ze]=null,bh(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[Xe];o!==null&&(n[Ze]=null,n[Be]=null,n[Xe]=null,o(i)),n[Ut]=i;return}var a=n[Be];a!==null&&(n[Ze]=null,n[Be]=null,n[Xe]=null,a(Fe(void 0,!0))),n[Ur]=!0}),e.on("readable",Sh.bind(null,n)),n},Oh=Ah,Rh=function(){throw new Error("Readable.from is not available in the browser")},ds=D,_t;D.ReadableState=gs;tr.exports.EventEmitter;var ys=function(e,r){return e.listeners(r).length},ir=rs,Xr=Wr.Buffer,jh=(typeof pe!="undefined"?pe:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function Ph(t){return Xr.from(t)}function Th(t){return Xr.isBuffer(t)||t instanceof jh}var Nn=Se,T;Nn&&Nn.debuglog?T=Nn.debuglog("stream"):T=function(){};var Nh=pp,_i=is,Ch=as,Mh=Ch.getHighWaterMark,Qr=nt.codes,$h=Qr.ERR_INVALID_ARG_TYPE,Ih=Qr.ERR_STREAM_PUSH_AFTER_EOF,Dh=Qr.ERR_METHOD_NOT_IMPLEMENTED,Lh=Qr.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,kt,Cn,Mn;Pe.exports(D,ir);var qt=_i.errorOrDestroy,$n=["error","close","destroy","pause","resume"];function Bh(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function gs(t,e,r){_t=_t||jt,t=t||{},typeof r!="boolean"&&(r=e instanceof _t),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Mh(this,t,"readableHighWaterMark",r),this.buffer=new Nh,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(kt||(kt=bi.StringDecoder),this.decoder=new kt(t.encoding),this.encoding=t.encoding)}function D(t){if(_t=_t||jt,!(this instanceof D))return new D(t);var e=this instanceof _t;this._readableState=new gs(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),ir.call(this)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});D.prototype.destroy=_i.destroy;D.prototype._undestroy=_i.undestroy;D.prototype._destroy=function(t,e){e(t)};D.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Xr.from(t,e),e=""),n=!0),ms(this,t,e,!1,n)};D.prototype.unshift=function(t){return ms(this,t,null,!0,!1)};function ms(t,e,r,n,i){T("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,Uh(t,o);else{var a;if(i||(a=Fh(o,e)),a)qt(t,a);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Xr.prototype&&(e=Ph(e)),n)o.endEmitted?qt(t,new Lh):In(t,o,e,!0);else if(o.ended)qt(t,new Ih);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?In(t,o,e,!1):oi(t,o)):In(t,o,e,!1)}else n||(o.reading=!1,oi(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function In(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Zr(t)),oi(t,e)}function Fh(t,e){var r;return!Th(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new $h("chunk",["string","Buffer","Uint8Array"],e)),r}D.prototype.isPaused=function(){return this._readableState.flowing===!1};D.prototype.setEncoding=function(t){kt||(kt=bi.StringDecoder);var e=new kt(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Ko=1073741824;function xh(t){return t>=Ko?t=Ko:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Yo(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=xh(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}D.prototype.read=function(t){T("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return T("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Dn(this):Zr(this),null;if(t=Yo(t,e),t===0&&e.ended)return e.length===0&&Dn(this),null;var n=e.needReadable;T("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,T("length less than watermark",n)),e.ended||e.reading?(n=!1,T("reading or ended",n)):n&&(T("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Yo(r,e)));var i;return t>0?i=ws(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Dn(this)),i!==null&&this.emit("data",i),i};function Uh(t,e){if(T("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Zr(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,vs(t)))}}function Zr(t){var e=t._readableState;T("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(T("emitReadable",e.flowing),e.emittedReadable=!0,k.process.nextTick(vs,t))}function vs(t){var e=t._readableState;T("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,ki(t)}function oi(t,e){e.readingMore||(e.readingMore=!0,k.process.nextTick(qh,t,e))}function qh(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(T("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}D.prototype._read=function(t){qt(this,new Dh("_read()"))};D.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,T("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==k.process.stdout&&t!==k.process.stderr,o=i?s:A;n.endEmitted?k.process.nextTick(o):r.once("end",o),t.on("unpipe",a);function a(F,j){T("onunpipe"),F===r&&j&&j.hasUnpiped===!1&&(j.hasUnpiped=!0,h())}function s(){T("onend"),t.end()}var u=Wh(r);t.on("drain",u);var c=!1;function h(){T("cleanup"),t.removeListener("close",S),t.removeListener("finish",w),t.removeListener("drain",u),t.removeListener("error",v),t.removeListener("unpipe",a),r.removeListener("end",s),r.removeListener("end",A),r.removeListener("data",d),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",d);function d(F){T("ondata");var j=t.write(F);T("dest.write",j),j===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&Ss(n.pipes,t)!==-1)&&!c&&(T("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function v(F){T("onerror",F),A(),t.removeListener("error",v),ys(t,"error")===0&&qt(t,F)}Bh(t,"error",v);function S(){t.removeListener("finish",w),A()}t.once("close",S);function w(){T("onfinish"),t.removeListener("close",S),A()}t.once("finish",w);function A(){T("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(T("pipe resume"),r.resume()),t};function Wh(t){return function(){var r=t._readableState;T("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&ys(t,"data")&&(r.flowing=!0,ki(t))}}D.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=Ss(e.pipes,t);return a===-1?this:(e.pipes.splice(a,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};D.prototype.on=function(t,e){var r=ir.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,T("on readable",n.length,n.reading),n.length?Zr(this):n.reading||k.process.nextTick(Gh,this)),r};D.prototype.addListener=D.prototype.on;D.prototype.removeListener=function(t,e){var r=ir.prototype.removeListener.call(this,t,e);return t==="readable"&&k.process.nextTick(bs,this),r};D.prototype.removeAllListeners=function(t){var e=ir.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&k.process.nextTick(bs,this),e};function bs(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Gh(t){T("readable nexttick read 0"),t.read(0)}D.prototype.resume=function(){var t=this._readableState;return t.flowing||(T("resume"),t.flowing=!t.readableListening,Hh(this,t)),t.paused=!1,this};function Hh(t,e){e.resumeScheduled||(e.resumeScheduled=!0,k.process.nextTick(Vh,t,e))}function Vh(t,e){T("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),ki(t),e.flowing&&!e.reading&&t.read(0)}D.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ki(t){var e=t._readableState;for(T("flow",e.flowing);e.flowing&&t.read()!==null;);}D.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(T("wrapped end"),r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&e.push(a)}e.push(null)}),t.on("data",function(a){if(T("wrapped data"),r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var s=e.push(a);s||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(s){return function(){return t[s].apply(t,arguments)}}(i));for(var o=0;o<$n.length;o++)t.on($n[o],this.emit.bind(this,$n[o]));return this._read=function(a){T("wrapped _read",a),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return Cn===void 0&&(Cn=Oh),Cn(this)});Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});D._fromList=ws;Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ws(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Dn(t){var e=t._readableState;T("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,k.process.nextTick(zh,e,t))}function zh(t,e){if(T("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(D.from=function(t,e){return Mn===void 0&&(Mn=Rh),Mn(D,t,e)});function Ss(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var Es=Te,en=nt.codes,Kh=en.ERR_METHOD_NOT_IMPLEMENTED,Yh=en.ERR_MULTIPLE_CALLBACK,Jh=en.ERR_TRANSFORM_ALREADY_TRANSFORMING,Xh=en.ERR_TRANSFORM_WITH_LENGTH_0,tn=jt;Pe.exports(Te,tn);function Qh(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Yh);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Te(t){if(!(this instanceof Te))return new Te(t);tn.call(this,t),this._transformState={afterTransform:Qh.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Zh)}function Zh(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Jo(t,e,r)}):Jo(this,null,null)}Te.prototype.push=function(t,e){return this._transformState.needTransform=!1,tn.prototype.push.call(this,t,e)};Te.prototype._transform=function(t,e,r){r(new Kh("_transform()"))};Te.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Te.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Te.prototype._destroy=function(t,e){tn.prototype._destroy.call(this,t,function(r){e(r)})};function Jo(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Xh;if(t._transformState.transforming)throw new Jh;return t.push(null)}var ed=zt,_s=Es;Pe.exports(zt,_s);function zt(t){if(!(this instanceof zt))return new zt(t);_s.call(this,t)}zt.prototype._transform=function(t,e,r){r(null,t)};var Ln;function td(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var ks=nt.codes,rd=ks.ERR_MISSING_ARGS,nd=ks.ERR_STREAM_DESTROYED;function Xo(t){if(t)throw t}function id(t){return t.setHeader&&typeof t.abort=="function"}function od(t,e,r,n){n=td(n);var i=!1;t.on("close",function(){i=!0}),Ln===void 0&&(Ln=Si),Ln(t,{readable:e,writable:r},function(a){if(a)return n(a);i=!0,n()});var o=!1;return function(a){if(!i&&!o){if(o=!0,id(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(a||new nd("pipe"))}}}function Qo(t){t()}function ad(t,e){return t.pipe(e)}function sd(t){return!t.length||typeof t[t.length-1]!="function"?Xo:t.pop()}function fd(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=sd(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new rd("streams");var i,o=e.map(function(a,s){var u=s<e.length-1,c=s>0;return od(a,u,c,function(h){i||(i=h),h&&o.forEach(Qo),!u&&(o.forEach(Qo),n(i))})});return e.reduce(ad)}var ud=fd,cd=de,Ai=tr.exports.EventEmitter,ld=Pe.exports;ld(de,Ai);de.Readable=ds;de.Writable=ss;de.Duplex=jt;de.Transform=Es;de.PassThrough=ed;de.finished=Si;de.pipeline=ud;de.Stream=de;function de(){Ai.call(this)}de.prototype.pipe=function(t,e){var r=this;function n(h){t.writable&&t.write(h)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",a),r.on("close",s));var o=!1;function a(){o||(o=!0,t.end())}function s(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function u(h){if(c(),Ai.listenerCount(this,"error")===0)throw h}r.on("error",u),t.on("error",u);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",s),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};var Cr=Kt.exports,pd=cd.Stream,hd=Se,dd=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;function Bn(t){return t.charAt(0).toUpperCase()+t.slice(1)}function De(t,e,r,n,i){throw new Cr.AssertionError({message:hd.format("%s (%s) is required",t,e),actual:i===void 0?typeof n:i(n),expected:e,operator:r||"===",stackStartFunction:De.caller})}function Fn(t){return Object.prototype.toString.call(t).slice(8,-1)}function yt(){}var $t={bool:{check:function(t){return typeof t=="boolean"}},func:{check:function(t){return typeof t=="function"}},string:{check:function(t){return typeof t=="string"}},object:{check:function(t){return typeof t=="object"&&t!==null}},number:{check:function(t){return typeof t=="number"&&!isNaN(t)}},finite:{check:function(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}},buffer:{check:function(t){return k.Buffer.isBuffer(t)},operator:"Buffer.isBuffer"},array:{check:function(t){return Array.isArray(t)},operator:"Array.isArray"},stream:{check:function(t){return t instanceof pd},operator:"instanceof",actual:Fn},date:{check:function(t){return t instanceof Date},operator:"instanceof",actual:Fn},regexp:{check:function(t){return t instanceof RegExp},operator:"instanceof",actual:Fn},uuid:{check:function(t){return typeof t=="string"&&dd.test(t)},operator:"isUUID"}};function As(t){var e=Object.keys($t),r;return{}.NODE_NDEBUG?r=yt:r=function(n,i){n||De(i,"true",n)},e.forEach(function(n){if(t){r[n]=yt;return}var i=$t[n];r[n]=function(o,a){i.check(o)||De(a,n,i.operator,o,i.actual)}}),e.forEach(function(n){var i="optional"+Bn(n);if(t){r[i]=yt;return}var o=$t[n];r[i]=function(a,s){a!=null&&(o.check(a)||De(s,n,o.operator,a,o.actual))}}),e.forEach(function(n){var i="arrayOf"+Bn(n);if(t){r[i]=yt;return}var o=$t[n],a="["+n+"]";r[i]=function(s,u){Array.isArray(s)||De(u,a,o.operator,s,o.actual);var c;for(c=0;c<s.length;c++)o.check(s[c])||De(u,a,o.operator,s,o.actual)}}),e.forEach(function(n){var i="optionalArrayOf"+Bn(n);if(t){r[i]=yt;return}var o=$t[n],a="["+n+"]";r[i]=function(s,u){if(s!=null){Array.isArray(s)||De(u,a,o.operator,s,o.actual);var c;for(c=0;c<s.length;c++)o.check(s[c])||De(u,a,o.operator,s,o.actual)}}}),Object.keys(Cr).forEach(function(n){if(n==="AssertionError"){r[n]=Cr[n];return}if(t){r[n]=yt;return}r[n]=Cr[n]}),r._setExports=As,r}var yd=As({}.NODE_NDEBUG),rn={},Lt=Kt.exports,gd=Se;rn.sprintf=Oi;rn.printf=md;rn.fprintf=Os;function Oi(t){var e=["([^%]*)","%","(['\\-+ #0]*?)","([1-9]\\d*)?","(\\.([1-9]\\d*))?","[lhjztL]*?","([diouxXfFeEgGaAcCsSp%jr])"].join(""),r=new RegExp(e),n=Array.prototype.slice.call(arguments,1),i=t,o,a,s,u,c,h,d,v,S,w="",A=1,F=0,j,U;for(Lt.equal("string",typeof i,"first argument must be a format string");(S=r.exec(i))!==null;){if(w+=S[1],i=i.substring(S[0].length),U=S[0].substring(S[1].length),j=F+S[1].length+1,F+=S[0].length,o=S[2]||"",a=S[3]||0,s=S[4]||"",u=S[6],c=!1,d=!1,h=" ",u=="%"){w+="%";continue}if(n.length===0)throw It(t,j,U,"has no matching argument (too few arguments passed)");if(v=n.shift(),A++,o.match(/[\' #]/))throw It(t,j,U,"uses unsupported flags");if(s.length>0)throw It(t,j,U,"uses non-zero precision (not supported)");switch(o.match(/-/)&&(c=!0),o.match(/0/)&&(h="0"),o.match(/\+/)&&(d=!0),u){case"s":if(v==null)throw It(t,j,U,"attempted to print undefined or null as a string (argument "+A+" to sprintf)");w+=xn(h,a,c,v.toString());break;case"d":v=Math.floor(v);case"f":d=d&&v>0?"+":"",w+=d+xn(h,a,c,v.toString());break;case"x":w+=xn(h,a,c,v.toString(16));break;case"j":a===0&&(a=10),w+=gd.inspect(v,!1,a);break;case"r":w+=Rs(v);break;default:throw It(t,j,U,"is not supported")}}return w+=i,w}function It(t,e,r,n){return Lt.equal(typeof t,"string"),Lt.equal(typeof r,"string"),Lt.equal(typeof e,"number"),Lt.equal(typeof n,"string"),new Error('format string "'+t+'": conversion specifier "'+r+'" at character '+e+" "+n)}function md(){var t=Array.prototype.slice.call(arguments);t.unshift(k.process.stdout),Os.apply(null,t)}function Os(t){var e=Array.prototype.slice.call(arguments,1);return t.write(Oi.apply(this,e))}function xn(t,e,r,n){for(var i=n;i.length<e;)r?i+=t:i=t+i;return i}function Rs(t){var e;if(!(t instanceof Error))throw new Error(Oi("invalid type for %%r: %j",t));if(e="EXCEPTION: "+t.constructor.name+": "+t.stack,t.cause&&typeof t.cause=="function"){var r=t.cause();r&&(e+=`
Caused by: `+Rs(r))}return e}var re={};function vd(t){return Array.isArray?Array.isArray(t):nn(t)==="[object Array]"}re.isArray=vd;function bd(t){return typeof t=="boolean"}re.isBoolean=bd;function wd(t){return t===null}re.isNull=wd;function Sd(t){return t==null}re.isNullOrUndefined=Sd;function Ed(t){return typeof t=="number"}re.isNumber=Ed;function _d(t){return typeof t=="string"}re.isString=_d;function kd(t){return typeof t=="symbol"}re.isSymbol=kd;function Ad(t){return t===void 0}re.isUndefined=Ad;function Od(t){return nn(t)==="[object RegExp]"}re.isRegExp=Od;function Rd(t){return typeof t=="object"&&t!==null}re.isObject=Rd;function jd(t){return nn(t)==="[object Date]"}re.isDate=jd;function Pd(t){return nn(t)==="[object Error]"||t instanceof Error}re.isError=Pd;function Td(t){return typeof t=="function"}re.isFunction=Td;function Nd(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t=="undefined"}re.isPrimitive=Nd;re.isBuffer=k.Buffer.isBuffer;function nn(t){return Object.prototype.toString.call(t)}var K=yd,on=Se,Cd=rn,we=re.isError,Md=Cd.sprintf,z=I;I.VError=I;I.SError=Wt;I.WError=Ue;I.MultiError=Pt;function Ri(t){var e,r,n,i,o;if(K.object(t,"args"),K.bool(t.strict,"args.strict"),K.array(t.argv,"args.argv"),e=t.argv,e.length===0)r={},n=[];else if(we(e[0]))r={cause:e[0]},n=e.slice(1);else if(typeof e[0]=="object"){r={};for(o in e[0])r[o]=e[0][o];n=e.slice(1)}else K.string(e[0],"first argument to VError, SError, or WError constructor must be a string, object, or Error"),r={},n=e;return K.object(r),!r.strict&&!t.strict&&(n=n.map(function(a){return a===null?"null":a===void 0?"undefined":a})),n.length===0?i="":i=Md.apply(null,n),{options:r,shortmessage:i}}function I(){var t,e,r,n,i,o,a;if(t=Array.prototype.slice.call(arguments,0),!(this instanceof I))return e=Object.create(I.prototype),I.apply(e,arguments),e;if(r=Ri({argv:t,strict:!1}),r.options.name&&(K.string(r.options.name,`error's "name" must be a string`),this.name=r.options.name),this.jse_shortmsg=r.shortmessage,o=r.shortmessage,n=r.options.cause,n&&(K.ok(we(n),"cause is not an Error"),this.jse_cause=n,r.options.skipCauseMessage||(o+=": "+n.message)),this.jse_info={},r.options.info)for(a in r.options.info)this.jse_info[a]=r.options.info[a];return this.message=o,Error.call(this,o),Error.captureStackTrace&&(i=r.options.constructorOpt||this.constructor,Error.captureStackTrace(this,i)),this}on.inherits(I,Error);I.prototype.name="VError";I.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),e};I.prototype.cause=function(){var e=I.cause(this);return e===null?void 0:e};I.cause=function(t){return K.ok(we(t),"err must be an Error"),we(t.jse_cause)?t.jse_cause:null};I.info=function(t){var e,r,n;if(K.ok(we(t),"err must be an Error"),r=I.cause(t),r!==null?e=I.info(r):e={},typeof t.jse_info=="object"&&t.jse_info!==null)for(n in t.jse_info)e[n]=t.jse_info[n];return e};I.findCauseByName=function(t,e){var r;for(K.ok(we(t),"err must be an Error"),K.string(e,"name"),K.ok(e.length>0,"name cannot be empty"),r=t;r!==null;r=I.cause(r))if(K.ok(we(r)),r.name==e)return r;return null};I.hasCauseWithName=function(t,e){return I.findCauseByName(t,e)!==null};I.fullStack=function(t){K.ok(we(t),"err must be an Error");var e=I.cause(t);return e?t.stack+`
caused by: `+I.fullStack(e):t.stack};I.errorFromList=function(t){return K.arrayOfObject(t,"errors"),t.length===0?null:(t.forEach(function(e){K.ok(we(e))}),t.length==1?t[0]:new Pt(t))};I.errorForEach=function(t,e){K.ok(we(t),"err must be an Error"),K.func(e,"func"),t instanceof Pt?t.errors().forEach(function(n){e(n)}):e(t)};function Wt(){var t,e,r,n;return t=Array.prototype.slice.call(arguments,0),this instanceof Wt?(r=Ri({argv:t,strict:!0}),n=r.options,I.call(this,n,"%s",r.shortmessage),this):(e=Object.create(Wt.prototype),Wt.apply(e,arguments),e)}on.inherits(Wt,I);function Pt(t){K.array(t,"list of errors"),K.ok(t.length>0,"must be at least one error"),this.ase_errors=t,I.call(this,{cause:t[0]},"first of %d error%s",t.length,t.length==1?"":"s")}on.inherits(Pt,I);Pt.prototype.name="MultiError";Pt.prototype.errors=function(){return this.ase_errors.slice(0)};function Ue(){var t,e,r,n;return t=Array.prototype.slice.call(arguments,0),this instanceof Ue?(r=Ri({argv:t,strict:!1}),n=r.options,n.skipCauseMessage=!0,I.call(this,n,"%s",r.shortmessage),this):(e=Object.create(Ue.prototype),Ue.apply(e,t),e)}on.inherits(Ue,I);Ue.prototype.name="WError";Ue.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),this.jse_cause&&this.jse_cause.message&&(e+="; caused by "+this.jse_cause.toString()),e};Ue.prototype.cause=function(e){return we(e)&&(this.jse_cause=e),this.jse_cause};class E{constructor(e,r){this.x=e,this.y=r}clone(){return new E(this.x,this.y)}}const js=t=>{switch(t){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;default:throw new z(`Cannot map file "${t}" to number`)}},qr=t=>{switch(t){case 1:return"a";case 2:return"b";case 3:return"c";case 4:return"d";case 5:return"e";case 6:return"f";case 7:return"g";case 8:return"h";default:throw new z(`Cannot map "${t}" to file`)}},$d=t=>["B","K","N","Q","R"].includes(t),Id=t=>["b","k","n","q","r"].includes(t),Dd=t=>["a","b","c","d","e","f","g","h"].includes(t),Ld=t=>typeof t=="number"&&t>0&&t<=8,X=(t,e)=>t&&e&&t.file===e.file&&t.rank===e.rank,Bd=t=>{let e="";return e+=qr(t.file),e+=t.rank,e},V=t=>t===xe.Black||t==xe.DarkGrey?"black":"white",gt=(t,e)=>t.rank===(e==="white"?8:1),Ie={White:"white",Black:"black",Draw:"draw",Forfeit:"forfeit",ForfeitWhite:"forfeit-white",ForfeitBlack:"forfeit-black"};class Zo{constructor(){this.files=[],this.ranks=[],this.pieces=[],this.tokens=[]}isEmpty(){return!this.moveType&&this.files.length===0&&this.ranks.length===0&&this.pieces.length===0&&!this.castleSide&&typeof this.isDrawOffer=="undefined"&&typeof this.isGameOver=="undefined"}toNode(){if(this.isDrawOffer)return{sources:this.tokens,kind:"draw-offer"};if(this.isGameOver)return{sources:this.tokens,kind:"game-over",outcome:this.outcome};const e={from:{},to:{}};if(this.pieces[0]&&this.moveType!=="promotion"&&(e.piece=this.pieces[0]),e.kind="move",this.files.length===2)e.from.file=this.files[0],e.to.file=this.files[1];else if(this.files.length===1)e.to.file=this.files[0];else if(this.files.length!==0)throw new z(`Parsed ${this.files.length} columns for a single move`);if(this.ranks.length===2)e.from.rank=this.ranks[0],e.to.rank=this.ranks[1];else if(this.ranks.length===1)e.to.rank=this.ranks[0];else if(this.ranks.length!==0)throw new z(`Parsed ${this.ranks.length} ranks for a single move`);return this.moveType==="allegiance"?{...e,type:"allegiance",sources:this.tokens}:this.moveType==="capture"?{...e,type:"capture",sources:this.tokens}:this.moveType==="castle"?{...e,type:"castle",side:this.castleSide,sources:this.tokens}:this.moveType==="en-passant"?{...e,type:"en-passant",sources:this.tokens}:this.moveType==="promotion"?{...e,piece:null,type:"promotion",promotionTo:this.pieces[0],sources:this.tokens}:{...e,sources:this.tokens}}}const Fd=t=>{var h,d,v;let e=0;const r=["castle","draw-offer","piece","step-number","game-over","file","move-separator"],n=["step-number","move-separator"],i=new Set(r),o=(...S)=>{i.clear(),S.forEach(w=>i.add(w))};for(;e<t.length;){const S=t[e];if(!i.has(S.kind))throw new z(`Parse error on line ${(h=S.source)==null?void 0:h.row} column ${(d=S.source)==null?void 0:d.column}: Token kind "${S.kind}" was not expected after "${(v=t[e-1])==null?void 0:v.kind}"`);switch(S.kind){case"move-separator":o(...r,"step-number","capture");break;case"step-number":o(...r,"move-separator");break;case"promotion":o("piece");break;case"allegiance":case"capture":o("file");break;case"castle":case"double-check":case"check":case"en-passant":o(...r);break;case"checkmate":o("game-over","move-separator");break;case"file":o("rank","capture","allegiance","file");break;case"draw-offer":o(...r,"game-over");break;case"game-over":o("move-separator");break;case"rank":o(...r,"allegiance","capture","check","checkmate","double-check","en-passant","promotion");break;case"piece":o("capture","allegiance","check","checkmate","game-over","file","double-check","en-passant","promotion");break}e++}e=0;const a={kind:"root",children:[]};let s=new Zo;const u=()=>{s.isEmpty()||(a.children.push(s.toNode()),s=new Zo)},c=()=>{var S;return(S=t[e+1])==null?void 0:S.kind};for(;e<t.length;){const S=t[e];switch(n.includes(S.kind)||s.tokens.push(S),S.kind){case"move-separator":c()!=="en-passant"&&u();break;case"piece":s.pieces.push(S.value);break;case"allegiance":s.moveType="allegiance";break;case"capture":s.moveType="capture";break;case"castle":s.moveType="castle",s.castleSide=S.side,c()!=="move-separator"&&u();break;case"check":case"double-check":s.causesCheck=!0,s.isMate=!1,c()!=="move-separator"&&u();break;case"checkmate":s.causesCheck=!0,s.isMate=!0,c()!=="move-separator"&&u();break;case"file":s.files.push(S.value);break;case"rank":s.ranks.push(S.value),c()||u();break;case"draw-offer":s.isDrawOffer=!0,c()!=="move-separator"&&u();break;case"en-passant":s.moveType="en-passant",c()!=="move-separator"&&u();break;case"promotion":s.moveType="promotion";break;case"game-over":s.isGameOver=!0,s.outcome=S.outcome,c()!=="move-separator"&&u();break}e++}return a},xd=t=>{const e=t.replace(/[]/gu,"-");let r=1,n=1,i=0;const o=[];for(;i<e.length;){const a=e[i],s=h=>e.substring(i,i+h.length)===h,u=h=>{let d="",v=i;for(;;){const S=e[v];if(v>=e.length||h(S)){v--;break}d+=S,v++}return d},c=(h,d)=>{o.push({...d,source:{column:n,row:r,length:h}}),i+=h,n+=h};if(a===`
`){r++,n=1,c(1,{kind:"move-separator"});continue}if(a==="\r"){n=1,i++;continue}if(s("e.p.")||s(" e.p.")){c(a===" "?5:4,{kind:"en-passant"});continue}if(a===" "||a===";"){c(1,{kind:"move-separator"});continue}if(s("O-O-O")||s("0-0-0")){c(5,{kind:"castle",side:"queen"});continue}if(s("O-O")||s("0-0")){c(3,{kind:"castle",side:"king"});continue}if(a==="+"||a==="\u2020"){c(1,{kind:"check"});continue}if(s("ch")){c(2,{kind:"check"});continue}if(/[#X]/gu.test(a)){c(1,{kind:"checkmate"});continue}if(s("mate")){c(4,{kind:"checkmate"});continue}if(s("dbl ch")){c(6,{kind:"double-check"});continue}if(s("++")){c(2,{kind:"double-check"});continue}if(s("0-1")){c(3,{kind:"game-over",outcome:"black"});continue}if(s("1-0")){c(3,{kind:"game-over",outcome:"white"});continue}if(s("\xBD-\xBD")){c(3,{kind:"game-over",outcome:"draw"});continue}if(s("1/2-1/2")){c(7,{kind:"game-over",outcome:"draw"});continue}if(s("0-0")){c(3,{kind:"game-over",outcome:"forfeit"});continue}if(s("\xBD-0")){c(3,{kind:"game-over",outcome:"forfeit-white"});continue}if(s("1/2-0")){c(5,{kind:"game-over",outcome:"forfeit-white"});continue}if(s("0-\xBD")){c(3,{kind:"game-over",outcome:"forfeit-black"});continue}if(s("0-1/2")){c(5,{kind:"game-over",outcome:"forfeit-black"});continue}if(/[\d]/gu.test(a)){const h=u(v=>!/[\d]/gu.test(v));if(e[i+h.length]==="."){c(h.length+1,{kind:"step-number",value:Number.parseInt(h,10)});continue}}if(/[1-8]/gu.test(a)){c(1,{kind:"rank",value:Number.parseInt(a,10)});continue}if(/[a-h]/gu.test(a)){c(1,{kind:"file",value:js(a)});continue}if(/[KQRBN]/gu.test(a)){c(1,{kind:"piece",value:a});continue}if(/[x:]/gu.test(a)){c(1,{kind:"capture"});continue}if(s("(=)")){c(3,{kind:"draw-offer"});continue}if(a==="="||a==="/"){c(1,{kind:"promotion"});continue}if(a==="("||a===")"){c(1,{kind:"promotion",bracket:a==="("?"open":"close"});continue}if(a===">"){c(1,{kind:"allegiance"});continue}throw new z(`Unsupported character at line ${r} column ${n}: "${a}"`)}return o},Ud=t=>{switch(t.kind){case"draw-offer":return"(=)";case"game-over":{switch(t.outcome){case"black":return"0-1";case"white":return"1-0";case"draw":return"1/2-1/2";case"forfeit":return"0-0";case"forfeit-black":return"0-1/2";case"forfeit-white":return"1/2-0"}break}case"move":{const e=(r,n)=>{let i="";return t.piece&&(i+=t.piece),t.from.file&&(i+=`${qr(t.from.file)}`),t.from.rank&&(i+=`${t.from.rank}`),i+=r,t.type==="promotion"&&t.promotionTo&&(i+=`${t.promotionTo}`),t.to.file&&(i+=`${qr(t.to.file)}`),t.to.rank&&(i+=`${t.to.rank}`),n&&(i+=n),i};switch(t.type){case"allegiance":return e(">");case"capture":return e("x");case"castle":return t.side==="king"?"O-O":"O-O-O";case"en-passant":return e("x"," e.p.");case"promotion":return e("=");default:return e("")}}}},qd=t=>{const e=[];return t.children.forEach((r,n)=>{const i=n%2===0;(a=>{i?e.push(a):e[e.length-1]+=` ${a}`})(Ud(r))}),e.filter(Boolean).map((r,n)=>` ${n+1}. ${r}`).join(`
`).trim()};var Ps=(t=>(t[t.Ranks=0]="Ranks",t[t.ActiveColour=1]="ActiveColour",t[t.CastlingRights=2]="CastlingRights",t[t.EnPassantTargets=3]="EnPassantTargets",t[t.HalfmoveClock=4]="HalfmoveClock",t[t.FullmoveNumber=5]="FullmoveNumber",t))(Ps||{});class ea{constructor(){this.allegianceMark=!1,this.castlingRights=[]}canSetPieceSide(){return!this.pieceSide}setPieceSide(e){if(!this.canSetPieceSide())throw new z("Cannot set piece side on WipNode, because it's already set");this.pieceSide=e}canSetPiece(){return!this.piece&&this.piece!==null}setPiece(e){if(!this.canSetPiece())throw new z("Cannot set piece on WipNode, because there is already one set");this.piece=e}canSetAllegianceMark(){return!this.allegianceMark}addAllegianceMark(){if(!this.canSetAllegianceMark())throw new z("Allegiance mark already set");this.allegianceMark=!0}pieceDataReady(){return!this.canSetPiece()&&!this.canSetPieceSide()}setActiveColour(e){this.activeColour=e}hasCastlingRights(){return this.castlingRights.length!==0}addCastlingRight(e){this.castlingRights.push(e)}canSetEnPassantFile(){return!this.enPassantFile}setEnPassantFile(e){if(!this.canSetEnPassantFile())throw new z("Cannot set en passant file on WipNode, because there is already one set");this.enPassantFile=e}canSetEnPassantRank(){return!this.enPassantRank}setEnPassantRank(e){if(!this.canSetEnPassantRank())throw new z("Cannot set en passant rank on WipNode, because there is already one set");this.enPassantRank=e}canSetHalfmoveClock(){return typeof this.halfmoveClock!="number"}setHalfmoveClock(e){this.halfmoveClock=e}canSetFullmoveNumber(){return typeof this.fullmoveNumber!="number"}setFullmoveNumber(e){this.fullmoveNumber=e}isEnPassantType(){return!!(this.enPassantFile&&this.enPassantRank)}toNode(){if(this.piece||this.piece===null)return this.pieceSide==="white"?{kind:"piece",value:{allegiance:this.allegianceMark?xe.LightGrey:xe.White,piece:this.piece?this.piece.toUpperCase():null}}:{kind:"piece",value:{allegiance:this.allegianceMark?xe.DarkGrey:xe.Black,piece:this.piece?this.piece.toUpperCase():null}};if(this.activeColour)return{kind:"active-colour",value:this.activeColour};if(this.castlingRights.length>0){const e=[],r=[];return this.castlingRights.includes("K")&&r.push("king"),this.castlingRights.includes("Q")&&r.push("queen"),this.castlingRights.includes("k")&&e.push("king"),this.castlingRights.includes("q")&&e.push("queen"),{kind:"castling-rights",value:{black:e,white:r}}}if(this.enPassantFile&&this.enPassantRank)return{kind:"en-passant-targets",value:{file:this.enPassantFile,rank:this.enPassantRank}};if(typeof this.halfmoveClock=="number")return{kind:"halfmove-clock",value:this.halfmoveClock};if(typeof this.fullmoveNumber=="number")return{kind:"fullmove-number",value:this.fullmoveNumber};throw new z(`Cannot create Node from WipNode, ${JSON.stringify({...this},null,2)}`)}}const Wd=t=>{const e={kind:"ast",children:[]};let r=0,n=0,i=new ea;const o=u=>{e.children.push(u),r++},a=()=>{e.children.push(i.toNode()),i=new ea},s=u=>{n=u,r++};for(;r<t.length;){const u=t[r],c=t[r+1];if(n===0){if((u.kind==="char"||u.kind==="number"||u.kind==="separator"||u.kind==="space")&&i.pieceDataReady()&&a(),u.kind==="char"&&Id(u.value)){i.setPieceSide("black"),i.setPiece(u.value),c||a(),r++;continue}if(u.kind==="char"&&$d(u.value)){i.setPieceSide("white"),i.setPiece(u.value),c||a(),r++;continue}if(u.kind==="char"&&u.value==="p"){i.setPieceSide("black"),i.setPiece(null),c||a(),r++;continue}if(u.kind==="char"&&u.value==="P"){i.setPieceSide("white"),i.setPiece(null),c||a(),r++;continue}if(u.kind==="allegiance"){i.addAllegianceMark(),r++,c||a();continue}if(u.kind==="number"&&u.value>0&&u.value<=8){o({kind:"skip",value:u.value});continue}}switch(n){case 0:{if(u.kind==="separator"){r++;continue}if(u.kind==="space"){n=1,r++;continue}break}case 1:{if(u.kind==="char"&&u.value==="w"){i.setActiveColour("white"),r++;continue}if(u.kind==="char"&&u.value==="b"){i.setActiveColour("black"),r++;continue}if(u.kind==="space"){a(),s(2);continue}break}case 2:{if(u.kind==="char"&&(u.value==="q"||u.value==="Q"||u.value==="k"||u.value==="K")){i.addCastlingRight(u.value),r++;continue}if(u.kind==="hyphen"){r++;continue}if(u.kind==="space"){i.hasCastlingRights()&&a(),s(3);continue}break}case 3:{if(u.kind==="hyphen"){r++;continue}if(u.kind==="char"&&Dd(u.value)){i.setEnPassantFile(js(u.value)),r++;continue}if(u.kind==="number"&&Ld(u.value)){i.setEnPassantRank(u.value),r++;continue}if(u.kind==="space"){i.isEnPassantType()&&a(),s(4);continue}break}case 4:{if(u.kind==="number"){i.setHalfmoveClock(u.value),r++;continue}if(u.kind==="space"){a(),s(5);continue}break}case 5:{u.kind==="number"&&(i.setFullmoveNumber(u.value),r++,a());continue}}throw new z(`Unhandled token: ${u.kind}, cursor ${r}, state: ${Ps[n]}`)}return e},Gd=t=>{let e=0;const r=[],n=(o,a)=>{r.push(a),e+=o},i=o=>{let a="",s=e;for(;;){const u=t[s];if(s>=t.length||o(u)){s--;break}a+=u,s++}return a};for(;e<t.length;){const o=t[e];if(o===">"){n(1,{kind:"allegiance"});continue}if(o==="/"){n(1,{kind:"separator"});continue}if(/\d/gu.test(o)){const a=i(s=>!/[\d]/gu.test(s));n(a.length,{kind:"number",value:Number.parseInt(a,10)});continue}if(o===" "){n(1,{kind:"space"});continue}if(o==="-"||o==="\u2013"){n(1,{kind:"hyphen"});continue}n(1,{kind:"char",value:o})}return r},Hd=t=>{let e="",r=0;t.children.forEach(w=>{var A;switch(w.kind){case"piece":{r>=8&&(e+="/",r=0);const F=V(w.value.allegiance),j=(A=w.value.piece)!=null?A:"p";e+=F==="white"?j.toUpperCase():j.toLowerCase(),(w.value.allegiance===xe.DarkGrey||w.value.allegiance===xe.LightGrey)&&(e+=">"),r++;break}case"skip":{r>=8&&(e+="/",r=0),e+=w.value,r+=w.value;break}}});const n=t.children.find(w=>w.kind==="active-colour");let i="";n?i=n.value==="white"?"w":"b":i="w";const o=t.children.find(w=>w.kind==="castling-rights");let a="";o?(o.value.white.includes("king")&&(a+="K"),o.value.white.includes("queen")&&(a+="Q"),o.value.black.includes("king")&&(a+="k"),o.value.black.includes("queen")&&(a+="q")):a="-";const s=t.children.find(w=>w.kind==="en-passant-targets");let u="";s?u=Bd(s.value):u="-";const c=t.children.find(w=>w.kind==="halfmove-clock");let h="0";c&&(h=String(c.value));const d=t.children.find(w=>w.kind==="fullmove-number");let v="0";return d&&(v=String(d.value)),[e,i,a,u,h,v].join(" ")};var ai={exports:{}};(function(t,e){var r=200,n="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",c="[object Error]",h="[object Function]",d="[object GeneratorFunction]",v="[object Map]",S="[object Number]",w="[object Object]",A="[object Promise]",F="[object RegExp]",j="[object Set]",U="[object String]",G="[object Symbol]",ne="[object WeakMap]",te="[object ArrayBuffer]",W="[object DataView]",O="[object Float32Array]",Y="[object Float64Array]",ie="[object Int8Array]",Ae="[object Int16Array]",_e="[object Int32Array]",ue="[object Uint8Array]",it="[object Uint8ClampedArray]",ge="[object Uint16Array]",Ne="[object Uint32Array]",Ce=/[\\^$.*+?()[\]{}|]/g,Tt=/\w*$/,Me=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,M={};M[o]=M[a]=M[te]=M[W]=M[s]=M[u]=M[O]=M[Y]=M[ie]=M[Ae]=M[_e]=M[v]=M[S]=M[w]=M[F]=M[j]=M[U]=M[G]=M[ue]=M[it]=M[ge]=M[Ne]=!0,M[c]=M[h]=M[ne]=!1;var ot=typeof pe=="object"&&pe&&pe.Object===Object&&pe,p=typeof self=="object"&&self&&self.Object===Object&&self,y=ot||p||Function("return this")(),b=e&&!e.nodeType&&e,R=b&&!0&&t&&!t.nodeType&&t,$=R&&R.exports===b;function L(f,l){return f.set(l[0],l[1]),f}function P(f,l){return f.add(l),f}function C(f,l){for(var g=-1,_=f?f.length:0;++g<_&&l(f[g],g,f)!==!1;);return f}function B(f,l){for(var g=-1,_=l.length,J=f.length;++g<_;)f[J+g]=l[g];return f}function Z(f,l,g,_){var J=-1,oe=f?f.length:0;for(_&&oe&&(g=f[++J]);++J<oe;)g=l(g,f[J],J,f);return g}function Oe(f,l){for(var g=-1,_=Array(f);++g<f;)_[g]=l(g);return _}function at(f,l){return f==null?void 0:f[l]}function Re(f){var l=!1;if(f!=null&&typeof f.toString!="function")try{l=!!(f+"")}catch{}return l}function ze(f){var l=-1,g=Array(f.size);return f.forEach(function(_,J){g[++l]=[J,_]}),g}function st(f,l){return function(g){return f(l(g))}}function or(f){var l=-1,g=Array(f.size);return f.forEach(function(_){g[++l]=_}),g}var an=Array.prototype,m=Function.prototype,ft=Object.prototype,ar=y["__core-js_shared__"],Pi=function(){var f=/[^.]+$/.exec(ar&&ar.keys&&ar.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Ti=m.toString,$e=ft.hasOwnProperty,sr=ft.toString,Ns=RegExp("^"+Ti.call($e).replace(Ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ni=$?y.Buffer:void 0,Ci=y.Symbol,Mi=y.Uint8Array,Cs=st(Object.getPrototypeOf,Object),Ms=Object.create,$s=ft.propertyIsEnumerable,Is=an.splice,$i=Object.getOwnPropertySymbols,Ds=Ni?Ni.isBuffer:void 0,Ls=st(Object.keys,Object),sn=lt(y,"DataView"),Nt=lt(y,"Map"),fn=lt(y,"Promise"),un=lt(y,"Set"),cn=lt(y,"WeakMap"),Ct=lt(Object,"create"),Bs=Je(sn),Fs=Je(Nt),xs=Je(fn),Us=Je(un),qs=Je(cn),Ii=Ci?Ci.prototype:void 0,Di=Ii?Ii.valueOf:void 0;function Ke(f){var l=-1,g=f?f.length:0;for(this.clear();++l<g;){var _=f[l];this.set(_[0],_[1])}}function Ws(){this.__data__=Ct?Ct(null):{}}function Gs(f){return this.has(f)&&delete this.__data__[f]}function Hs(f){var l=this.__data__;if(Ct){var g=l[f];return g===n?void 0:g}return $e.call(l,f)?l[f]:void 0}function Vs(f){var l=this.__data__;return Ct?l[f]!==void 0:$e.call(l,f)}function zs(f,l){var g=this.__data__;return g[f]=Ct&&l===void 0?n:l,this}Ke.prototype.clear=Ws,Ke.prototype.delete=Gs,Ke.prototype.get=Hs,Ke.prototype.has=Vs,Ke.prototype.set=zs;function je(f){var l=-1,g=f?f.length:0;for(this.clear();++l<g;){var _=f[l];this.set(_[0],_[1])}}function Ks(){this.__data__=[]}function Ys(f){var l=this.__data__,g=fr(l,f);if(g<0)return!1;var _=l.length-1;return g==_?l.pop():Is.call(l,g,1),!0}function Js(f){var l=this.__data__,g=fr(l,f);return g<0?void 0:l[g][1]}function Xs(f){return fr(this.__data__,f)>-1}function Qs(f,l){var g=this.__data__,_=fr(g,f);return _<0?g.push([f,l]):g[_][1]=l,this}je.prototype.clear=Ks,je.prototype.delete=Ys,je.prototype.get=Js,je.prototype.has=Xs,je.prototype.set=Qs;function ut(f){var l=-1,g=f?f.length:0;for(this.clear();++l<g;){var _=f[l];this.set(_[0],_[1])}}function Zs(){this.__data__={hash:new Ke,map:new(Nt||je),string:new Ke}}function ef(f){return ur(this,f).delete(f)}function tf(f){return ur(this,f).get(f)}function rf(f){return ur(this,f).has(f)}function nf(f,l){return ur(this,f).set(f,l),this}ut.prototype.clear=Zs,ut.prototype.delete=ef,ut.prototype.get=tf,ut.prototype.has=rf,ut.prototype.set=nf;function ct(f){this.__data__=new je(f)}function of(){this.__data__=new je}function af(f){return this.__data__.delete(f)}function sf(f){return this.__data__.get(f)}function ff(f){return this.__data__.has(f)}function uf(f,l){var g=this.__data__;if(g instanceof je){var _=g.__data__;if(!Nt||_.length<r-1)return _.push([f,l]),this;g=this.__data__=new ut(_)}return g.set(f,l),this}ct.prototype.clear=of,ct.prototype.delete=af,ct.prototype.get=sf,ct.prototype.has=ff,ct.prototype.set=uf;function cf(f,l){var g=hn(f)||$f(f)?Oe(f.length,String):[],_=g.length,J=!!_;for(var oe in f)(l||$e.call(f,oe))&&!(J&&(oe=="length"||Tf(oe,_)))&&g.push(oe);return g}function Li(f,l,g){var _=f[l];(!($e.call(f,l)&&Ui(_,g))||g===void 0&&!(l in f))&&(f[l]=g)}function fr(f,l){for(var g=f.length;g--;)if(Ui(f[g][0],l))return g;return-1}function lf(f,l){return f&&Bi(l,dn(l),f)}function ln(f,l,g,_,J,oe,ce){var se;if(_&&(se=oe?_(f,J,oe,ce):_(f)),se!==void 0)return se;if(!cr(f))return f;var Gi=hn(f);if(Gi){if(se=Rf(f),!l)return kf(f,se)}else{var pt=Ye(f),Hi=pt==h||pt==d;if(Df(f))return mf(f,l);if(pt==w||pt==o||Hi&&!oe){if(Re(f))return oe?f:{};if(se=jf(Hi?{}:f),!l)return Af(f,lf(se,f))}else{if(!M[pt])return oe?f:{};se=Pf(f,pt,ln,l)}}ce||(ce=new ct);var Vi=ce.get(f);if(Vi)return Vi;if(ce.set(f,se),!Gi)var zi=g?Of(f):dn(f);return C(zi||f,function(yn,lr){zi&&(lr=yn,yn=f[lr]),Li(se,lr,ln(yn,l,g,_,lr,f,ce))}),se}function pf(f){return cr(f)?Ms(f):{}}function hf(f,l,g){var _=l(f);return hn(f)?_:B(_,g(f))}function df(f){return sr.call(f)}function yf(f){if(!cr(f)||Cf(f))return!1;var l=Wi(f)||Re(f)?Ns:Me;return l.test(Je(f))}function gf(f){if(!xi(f))return Ls(f);var l=[];for(var g in Object(f))$e.call(f,g)&&g!="constructor"&&l.push(g);return l}function mf(f,l){if(l)return f.slice();var g=new f.constructor(f.length);return f.copy(g),g}function pn(f){var l=new f.constructor(f.byteLength);return new Mi(l).set(new Mi(f)),l}function vf(f,l){var g=l?pn(f.buffer):f.buffer;return new f.constructor(g,f.byteOffset,f.byteLength)}function bf(f,l,g){var _=l?g(ze(f),!0):ze(f);return Z(_,L,new f.constructor)}function wf(f){var l=new f.constructor(f.source,Tt.exec(f));return l.lastIndex=f.lastIndex,l}function Sf(f,l,g){var _=l?g(or(f),!0):or(f);return Z(_,P,new f.constructor)}function Ef(f){return Di?Object(Di.call(f)):{}}function _f(f,l){var g=l?pn(f.buffer):f.buffer;return new f.constructor(g,f.byteOffset,f.length)}function kf(f,l){var g=-1,_=f.length;for(l||(l=Array(_));++g<_;)l[g]=f[g];return l}function Bi(f,l,g,_){g||(g={});for(var J=-1,oe=l.length;++J<oe;){var ce=l[J],se=_?_(g[ce],f[ce],ce,g,f):void 0;Li(g,ce,se===void 0?f[ce]:se)}return g}function Af(f,l){return Bi(f,Fi(f),l)}function Of(f){return hf(f,dn,Fi)}function ur(f,l){var g=f.__data__;return Nf(l)?g[typeof l=="string"?"string":"hash"]:g.map}function lt(f,l){var g=at(f,l);return yf(g)?g:void 0}var Fi=$i?st($i,Object):Ff,Ye=df;(sn&&Ye(new sn(new ArrayBuffer(1)))!=W||Nt&&Ye(new Nt)!=v||fn&&Ye(fn.resolve())!=A||un&&Ye(new un)!=j||cn&&Ye(new cn)!=ne)&&(Ye=function(f){var l=sr.call(f),g=l==w?f.constructor:void 0,_=g?Je(g):void 0;if(_)switch(_){case Bs:return W;case Fs:return v;case xs:return A;case Us:return j;case qs:return ne}return l});function Rf(f){var l=f.length,g=f.constructor(l);return l&&typeof f[0]=="string"&&$e.call(f,"index")&&(g.index=f.index,g.input=f.input),g}function jf(f){return typeof f.constructor=="function"&&!xi(f)?pf(Cs(f)):{}}function Pf(f,l,g,_){var J=f.constructor;switch(l){case te:return pn(f);case s:case u:return new J(+f);case W:return vf(f,_);case O:case Y:case ie:case Ae:case _e:case ue:case it:case ge:case Ne:return _f(f,_);case v:return bf(f,_,g);case S:case U:return new J(f);case F:return wf(f);case j:return Sf(f,_,g);case G:return Ef(f)}}function Tf(f,l){return l=l==null?i:l,!!l&&(typeof f=="number"||me.test(f))&&f>-1&&f%1==0&&f<l}function Nf(f){var l=typeof f;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?f!=="__proto__":f===null}function Cf(f){return!!Pi&&Pi in f}function xi(f){var l=f&&f.constructor,g=typeof l=="function"&&l.prototype||ft;return f===g}function Je(f){if(f!=null){try{return Ti.call(f)}catch{}try{return f+""}catch{}}return""}function Mf(f){return ln(f,!0,!0)}function Ui(f,l){return f===l||f!==f&&l!==l}function $f(f){return If(f)&&$e.call(f,"callee")&&(!$s.call(f,"callee")||sr.call(f)==o)}var hn=Array.isArray;function qi(f){return f!=null&&Lf(f.length)&&!Wi(f)}function If(f){return Bf(f)&&qi(f)}var Df=Ds||xf;function Wi(f){var l=cr(f)?sr.call(f):"";return l==h||l==d}function Lf(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=i}function cr(f){var l=typeof f;return!!f&&(l=="object"||l=="function")}function Bf(f){return!!f&&typeof f=="object"}function dn(f){return qi(f)?cf(f):gf(f)}function Ff(){return[]}function xf(){return!1}t.exports=Mf})(ai,ai.exports);var vr=ai.exports;class ji{constructor(){this.memory=[],this.clear()}clone(){const e=new ji;return e.memory=vr(this.memory),e.activeColour=this.activeColour,e.enPassantTarget=vr(this.enPassantTarget),e._castlingRights=vr(this._castlingRights),e.halfmoveClock=this.halfmoveClock,e.fullmoveNumber=this.fullmoveNumber,e.moveHistory=vr(this.moveHistory),e}removeCastlingRights(e,r){const n=this._castlingRights.findIndex(i=>i.colour===e&&i.side===r);n!==-1&&this._castlingRights.splice(n,1)}castlingRights(e){return this._castlingRights.filter(r=>r.colour===e).map(r=>r.side)}clear(){this.memory=[],this.activeColour="white",this.enPassantTarget=null,this._castlingRights=[],this.halfmoveClock=0,this.fullmoveNumber=0,this.moveHistory={kind:"root",children:[]};for(let e=0;e<8;e++){this.memory[e]=[];for(let r=0;r<8;r++)this.memory[e][r]=null}}dump(){const e=this.getSquares(),r=Array.from({length:8}).map(()=>Array.from({length:8}).map(()=>"."));let n="";e.filter(Boolean).forEach(i=>{var o,a,s,u;r[i.rank-1][i.file-1]=V(i.allegiance)==="white"?(a=(o=i.piece)==null?void 0:o.toUpperCase())!=null?a:"P":(u=(s=i.piece)==null?void 0:s.toLowerCase())!=null?u:"p"});for(let i=7;i>=0;i--)n+=`${i+1} `,n+=r[i].map(o=>o).join(" "),n+=`
`;return n+=`  ${r[0].map((i,o)=>qr(o+1)).join(" ")}`,n}getSquares(){const e=[];return this.memory.forEach((r,n)=>{r.forEach((i,o)=>{if(!i){e.push(null);return}e.push({allegiance:i.allegiance,piece:i.piece,file:o+1,rank:n+1})})}),e}getSquare(e){if(!e)throw new z.VError("Attempted to get square with no coordinates");return this.memory[e.rank-1][e.file-1]}setSquare(e,r){this.memory[e.rank-1][e.file-1]=r}toAFEN(){const e={kind:"ast",children:[]};let r=0;for(let a=this.memory.length-1;a>=0;a--){const s=this.memory[a];for(const u of s){if(!u){r++;continue}r&&(e.children.push({kind:"skip",value:r}),r=0),e.children.push({kind:"piece",value:u})}r&&(e.children.push({kind:"skip",value:r}),r=0)}e.children.push({kind:"active-colour",value:this.activeColour});const n={kind:"castling-rights",value:{black:[],white:[]}},i=this.castlingRights("white"),o=this.castlingRights("black");return i.includes("king")&&n.value.white.push("king"),i.includes("queen")&&n.value.white.push("queen"),o.includes("king")&&n.value.black.push("king"),o.includes("queen")&&n.value.black.push("queen"),(n.value.white.length>0||n.value.black.length>0)&&e.children.push(n),this.enPassantTarget&&e.children.push({kind:"en-passant-targets",value:this.enPassantTarget}),e.children.push({kind:"halfmove-clock",value:this.halfmoveClock}),e.children.push({kind:"fullmove-number",value:this.fullmoveNumber}),e}fromAFEN(e){this.clear();let r=8,n=1;e.children.forEach(i=>{var o;if(n>8&&(r--,n=1),i.kind==="piece"){this.setSquare({file:n,rank:r},i.value),n++;return}if(i.kind==="skip"){n+=i.value;return}if(i.kind==="en-passant-targets"){this.enPassantTarget=i.value;return}if(i.kind==="castling-rights"){i.value.black.forEach(a=>{this._castlingRights.push({colour:"black",side:a})}),i.value.white.forEach(a=>{this._castlingRights.push({colour:"white",side:a})});return}if(i.kind==="active-colour"){this.activeColour=i.value;return}if(i.kind==="fullmove-number"){this.fullmoveNumber=i.value;return}if(i.kind==="halfmove-clock"){this.halfmoveClock=i.value;return}throw new z.VError(`Unhandled node while importing AFEN: ${(o=i.kind)!=null?o:JSON.stringify(i,null,2)}`)})}}const xe={Black:0,DarkGrey:1,LightGrey:2,White:3},Vd=["B","N","Q","R"];class Ts{clone(){const e=new Ts;return e.memory=this.memory.clone(),e}dump(){return this.memory.dump()}importAFEN(e){this.memory.fromAFEN(Wd(Gd(e)))}importMoveHistory(e){this.memory.moveHistory=Fd(xd(e))}toAFEN(){return Hd(this.memory.toAFEN())}getSquares(){return this.memory.getSquares()}get enPassantTarget(){return this.memory.enPassantTarget}get activeColour(){return this.memory.activeColour}get halfmoveClock(){return this.memory.halfmoveClock}get fullmoveNumber(){return this.memory.fullmoveNumber}get castlingRights(){return{black:this.memory.castlingRights("black"),white:this.memory.castlingRights("white")}}getMoveHistory(){return qd(this.memory.moveHistory)}getMoveHistoryAst(){return this.memory.moveHistory}constructor(){this.memory=new ji}executeAllegianceMoveNode(e){this.memory.setSquare(e.node.to,{allegiance:e.fromSide==="white"?e.to.allegiance+1:e.to.allegiance-1,piece:e.to.piece})}executeCaptureMoveNode(e){this.memory.setSquare(e.node.to,e.from),this.memory.setSquare(e.node.from,null)}executeCastleMoveNode(e){const r=e.node.from,n=e.node.to,i=e.from;if(e.to)throw new z(`Castling cannot cause a capture on ${JSON.stringify(e.node.to)}`);this.memory.setSquare(n,i),this.memory.setSquare(r,null);const a=e.fromSide==="white"?1:8,s=e.node.side==="king"?{file:8,rank:a}:{file:1,rank:a},u=e.node.side==="king"?{file:6,rank:a}:{file:4,rank:a};this.memory.setSquare(u,this.memory.getSquare(s)),this.memory.setSquare(s,null)}executeEnPassantMoveNode(e){this.memory.setSquare({rank:e.fromSide==="white"?e.node.to.rank-1:e.node.to.rank+1,file:e.node.to.file},null),this.memory.setSquare(e.node.to,e.from),this.memory.setSquare(e.node.from,null)}executePromotionMoveNode(e){this.memory.setSquare(e.node.to,{allegiance:e.from.allegiance,piece:e.node.promotionTo}),this.memory.setSquare(e.node.from,null)}executeDefaultMoveNode(e){this.memory.setSquare(e.node.from,null),this.memory.setSquare(e.node.to,e.from),e.node.piece===null&&Math.abs(e.node.from.rank-e.node.to.rank)===2&&(this.memory.enPassantTarget={file:e.node.from.file,rank:e.fromSide==="white"?e.node.from.rank+1:e.node.from.rank-1})}executeMoveNode(e){if(!e.from.file)throw new z(`Cannot execute node without "from.file": ${JSON.stringify(e,null,2)}`);const r=this.memory.getSquare(e.from),n=this.memory.getSquare(e.to);if(!r)throw new z(`There is no piece on file ${e.from.file} rank ${e.from.rank}`);r.piece==="K"&&(this.memory.removeCastlingRights(this.activeColour,"king"),this.memory.removeCastlingRights(this.activeColour,"queen")),r.piece==="R"&&e.from.file===8&&this.memory.removeCastlingRights(this.activeColour,"king"),r.piece==="R"&&e.from.file===1&&this.memory.removeCastlingRights(this.activeColour,"queen"),this.memory.enPassantTarget=null;const i=V(r.allegiance),o=n?V(n.allegiance):null;switch(e.type){case"allegiance":this.executeAllegianceMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"capture":this.executeCaptureMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"castle":this.executeCastleMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"en-passant":this.executeEnPassantMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"promotion":this.executePromotionMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;default:this.executeDefaultMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break}this.memory.activeColour==="black"&&this.memory.halfmoveClock++,this.memory.fullmoveNumber++,this.memory.activeColour=this.memory.activeColour==="white"?"black":"white"}executeNode(e){switch(e.kind){case"move":{this.executeMoveNode(e);break}}this.memory.moveHistory.children.push(e)}executeMoveIndex(e){if(e<0)throw new z(`Move index must be positive, got ${e}`);const n=this.getValidMoves().at(e);if(!n)throw new z(`Move with index ${e} does not exist`);return this.executeNode(n),n}getSquare(e){return this.memory.getSquare(e)}findMoveIndex(e){const r=this.getValidMoves();let n=r;return e.kind==="draw-offer"&&(n=n.filter(i=>i.kind==="draw-offer")),e.kind==="game-over"&&(n=n.filter(i=>i.kind==="game-over"&&i.outcome===e.outcome)),e.kind==="move"&&(e.to&&Object.keys(e.to).length===2&&(n=n.filter(i=>i.kind==="move"&&X(i.to,e.to))),e.from&&Object.keys(e.from).length===2&&(n=n.filter(i=>i.kind==="move"&&X(i.from,e.from))),e.type&&(n=n.filter(i=>"type"in i&&i.type===e.type)),e.piece||e.piece===null?n=n.filter(i=>i.kind==="move"&&i.piece===e.piece):n.length>1&&!e.piece&&(n=n.filter(i=>i.kind==="move"&&i.piece===null)),e.type==="promotion"&&(n=n.filter(i=>"promotionTo"in i&&i.promotionTo===e.promotionTo&&X(i.to,e.to)&&X(i.from,e.from)))),n.length===1?r.indexOf(n[0]):-1}getCoordsRelative(e,r){const n={file:e.file+r.x,rank:e.rank+r.y};return n.file>8||n.file<=0||n.rank>8||n.rank<=0?null:n}traceCaptureSteps(e,r){if(Math.abs(r.x)!==Math.abs(r.y)&&r.x!==0&&r.y!==0)throw new z("Cannot trace in a non-continuous direction");const n=this.memory.getSquare(e);if(!n)return[];const i=[],o=new E(Math.sign(r.x),Math.sign(r.y));let a=e;for(;a=this.getCoordsRelative(a,o),!!a;){const s=this.memory.getSquare(a);if(!s){i.push({...a});continue}if(V(s.allegiance)===V(n.allegiance))break;if(V(s.allegiance)!==V(n.allegiance)){i.push({...a});break}i.push({...a})}return i}getAttackedCoordsBySide(e){const r=this.memory.getSquares().filter(i=>i&&V(i.allegiance)===e),n=[];return r.forEach(i=>{n.push(...this.getAttackedCoordsByCoords(i))}),n}getAttackedCoordsByCoords(e){const r=[],n=this.memory.getSquare(e);if(!n)return r;const i=V(n.allegiance);if(n.piece===null){const o=this.getCoordsRelative(e,new E(i==="white"?-1:1,i==="white"?1:-1)),a=this.getCoordsRelative(e,new E(i==="white"?1:-1,i==="white"?1:-1));return[o,a]}return n.piece==="R"?[...this.traceCaptureSteps(e,new E(1,0)),...this.traceCaptureSteps(e,new E(-1,0)),...this.traceCaptureSteps(e,new E(0,1)),...this.traceCaptureSteps(e,new E(0,-1))].filter(Boolean):n.piece==="N"?[this.getCoordsRelative(e,new E(1,2)),this.getCoordsRelative(e,new E(2,1)),this.getCoordsRelative(e,new E(2,-1)),this.getCoordsRelative(e,new E(1,-2)),this.getCoordsRelative(e,new E(-1,-2)),this.getCoordsRelative(e,new E(-2,-1)),this.getCoordsRelative(e,new E(-2,1)),this.getCoordsRelative(e,new E(-1,2))].filter(Boolean):n.piece==="B"?[...this.traceCaptureSteps(e,new E(1,1)),...this.traceCaptureSteps(e,new E(1,-1)),...this.traceCaptureSteps(e,new E(-1,-1)),...this.traceCaptureSteps(e,new E(-1,1))].filter(Boolean):n.piece==="Q"?[...this.traceCaptureSteps(e,new E(1,0)),...this.traceCaptureSteps(e,new E(-1,0)),...this.traceCaptureSteps(e,new E(0,1)),...this.traceCaptureSteps(e,new E(0,-1)),...this.traceCaptureSteps(e,new E(1,1)),...this.traceCaptureSteps(e,new E(1,-1)),...this.traceCaptureSteps(e,new E(-1,-1)),...this.traceCaptureSteps(e,new E(-1,1))].filter(Boolean):n.piece==="K"?[this.getCoordsRelative(e,new E(0,1)),this.getCoordsRelative(e,new E(1,1)),this.getCoordsRelative(e,new E(1,0)),this.getCoordsRelative(e,new E(1,-1)),this.getCoordsRelative(e,new E(0,-1)),this.getCoordsRelative(e,new E(-1,-1)),this.getCoordsRelative(e,new E(-1,0)),this.getCoordsRelative(e,new E(-1,1))].filter(Boolean):r}getPossibleMoves(){const e=[],r=this.memory.getSquares(),n=this.getAttackedCoordsBySide(this.activeColour==="white"?"black":"white");return this.memory.moveHistory.children.some(o=>o.kind==="game-over")||(this.memory.activeColour==="black"&&e.push({kind:"game-over",outcome:Ie.White},{kind:"game-over",outcome:Ie.Draw},{kind:"game-over",outcome:Ie.Forfeit},{kind:"game-over",outcome:Ie.ForfeitWhite}),this.memory.activeColour==="white"&&e.push({kind:"game-over",outcome:Ie.Black},{kind:"game-over",outcome:Ie.Draw},{kind:"game-over",outcome:Ie.Forfeit},{kind:"game-over",outcome:Ie.ForfeitBlack}),e.push({kind:"draw-offer"})),r.forEach(o=>{if(!o)return;const a=V(o.allegiance);if(o.piece===null){const s=this.getCoordsRelative(o,new E(0,a==="white"?1:-1)),u=this.getCoordsRelative(o,new E(a==="white"?-1:1,a==="white"?1:-1)),c=this.getCoordsRelative(o,new E(a==="white"?1:-1,a==="white"?1:-1)),h=d=>Vd.map(v=>({kind:"move",type:"promotion",from:o,to:d,piece:this.memory.getSquare(o).piece,promotionTo:v}));if(this.memory.enPassantTarget&&u&&X(this.memory.enPassantTarget,u)&&!gt(u,a)&&e.push({kind:"move",type:"en-passant",from:o,to:this.memory.enPassantTarget,piece:this.memory.getSquare(o).piece}),this.memory.enPassantTarget&&c&&X(this.memory.enPassantTarget,c)&&!gt(c,a)&&e.push({kind:"move",type:"en-passant",from:o,to:this.memory.enPassantTarget,piece:this.memory.getSquare(o).piece}),s&&!this.memory.getSquare(s)&&!gt(s,a)&&e.push({kind:"move",type:null,piece:this.memory.getSquare(o).piece,from:o,to:s}),u){const d=this.memory.getSquare(u);d&&V(d.allegiance)!==a&&(gt(u,a)?e.push(...h(u)):e.push({kind:"move",type:"capture",from:o,to:u,piece:this.memory.getSquare(o).piece},{kind:"move",type:"allegiance",from:o,to:u,piece:this.memory.getSquare(o).piece}))}if(c){const d=this.memory.getSquare(c);d&&V(d.allegiance)!==a&&(gt(c,a)?e.push(...h(c)):e.push({kind:"move",type:"capture",from:o,to:c,piece:this.memory.getSquare(o).piece},{kind:"move",type:"allegiance",from:o,to:c,piece:this.memory.getSquare(o).piece}))}if(o.rank===2&&a==="white"||o.rank===7&&a==="black"){const d=this.getCoordsRelative(o,new E(0,a==="white"?2:-2));!this.memory.getSquare(s)&&!this.memory.getSquare(d)&&e.push({kind:"move",type:null,from:o,to:d,piece:this.memory.getSquare(o).piece})}gt(s,a)&&e.push(...h(s))}if(o.piece==="R"){const s=[...this.traceCaptureSteps(o,new E(1,0)),...this.traceCaptureSteps(o,new E(-1,0)),...this.traceCaptureSteps(o,new E(0,1)),...this.traceCaptureSteps(o,new E(0,-1))];e.push(...s.map(u=>{const c=this.memory.getSquare(u);return{kind:"move",type:c?"capture":null,from:o,to:u,piece:o.piece}}),...s.map(u=>this.memory.getSquare(u)?{kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}:null).filter(Boolean))}if(o.piece==="N"&&[this.getCoordsRelative(o,new E(1,2)),this.getCoordsRelative(o,new E(2,1)),this.getCoordsRelative(o,new E(2,-1)),this.getCoordsRelative(o,new E(1,-2)),this.getCoordsRelative(o,new E(-1,-2)),this.getCoordsRelative(o,new E(-2,-1)),this.getCoordsRelative(o,new E(-2,1)),this.getCoordsRelative(o,new E(-1,2))].filter(Boolean).forEach(u=>{const c=this.memory.getSquare(u);c&&V(c.allegiance)===a||(e.push({kind:"move",type:c?"capture":null,from:o,to:u,piece:o.piece}),c&&e.push({kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}))}),o.piece==="B"){const s=[...this.traceCaptureSteps(o,new E(1,1)),...this.traceCaptureSteps(o,new E(1,-1)),...this.traceCaptureSteps(o,new E(-1,-1)),...this.traceCaptureSteps(o,new E(-1,1))];e.push(...s.map(u=>{const c=this.memory.getSquare(u);return{kind:"move",type:c?"capture":null,from:o,to:u,piece:o.piece}}),...s.map(u=>this.memory.getSquare(u)?{kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}:null).filter(Boolean))}if(o.piece==="Q"){const s=[...this.traceCaptureSteps(o,new E(1,0)),...this.traceCaptureSteps(o,new E(-1,0)),...this.traceCaptureSteps(o,new E(0,1)),...this.traceCaptureSteps(o,new E(0,-1)),...this.traceCaptureSteps(o,new E(1,1)),...this.traceCaptureSteps(o,new E(1,-1)),...this.traceCaptureSteps(o,new E(-1,-1)),...this.traceCaptureSteps(o,new E(-1,1))];e.push(...s.map(u=>{const c=this.memory.getSquare(u);return{kind:"move",type:c?"capture":null,from:o,to:u,piece:o.piece}}),...s.map(u=>this.memory.getSquare(u)?{kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}:null).filter(Boolean))}if(o.piece==="K"){[this.getCoordsRelative(o,new E(0,1)),this.getCoordsRelative(o,new E(1,1)),this.getCoordsRelative(o,new E(1,0)),this.getCoordsRelative(o,new E(1,-1)),this.getCoordsRelative(o,new E(0,-1)),this.getCoordsRelative(o,new E(-1,-1)),this.getCoordsRelative(o,new E(-1,0)),this.getCoordsRelative(o,new E(-1,1))].filter(Boolean).forEach(d=>{const v=this.memory.getSquare(d);v&&V(v.allegiance)===a||(e.push({kind:"move",type:v?"capture":null,from:o,to:d,piece:o.piece}),v&&e.push({kind:"move",type:"allegiance",from:o,to:d,piece:o.piece}))});const u=this.memory.castlingRights("white"),c=n.some(d=>X(o,d));if(this.activeColour==="white"&&u.length>0){const d=this.memory.getSquare({file:1,rank:1}),v=this.memory.getSquare({file:2,rank:1}),S=this.memory.getSquare({file:3,rank:1}),w=this.memory.getSquare({file:4,rank:1}),A=this.memory.getSquare({file:6,rank:1}),F=this.memory.getSquare({file:7,rank:1}),j=this.memory.getSquare({file:8,rank:1}),U=n.some(O=>X(O,{file:2,rank:1})),G=n.some(O=>X(O,{file:3,rank:1})),ne=n.some(O=>X(O,{file:4,rank:1})),te=n.some(O=>X(O,{file:6,rank:1})),W=n.some(O=>X(O,{file:7,rank:1}));u.forEach(O=>{O==="king"&&!c&&!A&&!F&&j&&j.piece==="R"&&V(j.allegiance)==="white"&&!te&&!W&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new E(2,0)),piece:this.memory.getSquare(o).piece,side:"king"}),O==="queen"&&!c&&!v&&!S&&!w&&d&&d.piece==="R"&&V(d.allegiance)==="white"&&!U&&!G&&!ne&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new E(-2,0)),piece:this.memory.getSquare(o).piece,side:"queen"})})}const h=this.memory.castlingRights("black");if(this.activeColour==="black"&&h.length>0){const d=this.memory.getSquare({file:1,rank:8}),v=this.memory.getSquare({file:2,rank:8}),S=this.memory.getSquare({file:3,rank:8}),w=this.memory.getSquare({file:4,rank:8}),A=this.memory.getSquare({file:6,rank:8}),F=this.memory.getSquare({file:7,rank:8}),j=this.memory.getSquare({file:8,rank:8}),U=n.some(O=>X(O,{file:2,rank:8})),G=n.some(O=>X(O,{file:3,rank:8})),ne=n.some(O=>X(O,{file:4,rank:8})),te=n.some(O=>X(O,{file:6,rank:8})),W=n.some(O=>X(O,{file:7,rank:8}));h.forEach(O=>{O==="king"&&!c&&!A&&!F&&j&&j.piece==="R"&&V(j.allegiance)==="black"&&!te&&!W&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new E(2,0)),piece:this.memory.getSquare(o).piece,side:"king"}),O==="queen"&&!c&&!v&&!S&&!w&&d&&d.piece==="R"&&V(d.allegiance)==="black"&&!U&&!G&&!ne&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new E(-2,0)),piece:this.memory.getSquare(o).piece,side:"queen"})})}}}),e}getCheckMoves(){return this.getPossibleMoves().filter(r=>{if(r.kind!=="move"||!r.to)return;const n=this.memory.getSquare(r.to);return n&&n.piece==="K"})}getValidMoves(e){return this.getPossibleMoves().filter(n=>{if(n.kind!=="move")return!0;if(e&&!X(e,n.from))return!1;const i=this.memory.getSquare(n.from);if(V(i.allegiance)!==this.memory.activeColour)return!1;const o=this.clone();return o.executeNode(n),o.getCheckMoves().every(s=>{if(s.kind!=="move")return!1;const u=o.memory.getSquare(s.to);return V(u.allegiance)!==this.memory.activeColour})})}}export{Ts as B,Ie as G,qd as a,V as b,X as c,qr as f,gt as i,Fd as p,xd as t,Ud as w};
//# sourceMappingURL=board.b38e4f14.js.map
