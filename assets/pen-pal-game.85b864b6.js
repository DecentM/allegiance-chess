import{A as p,K as d,ar as f,a as h,k as y,w as g,B as u,C as n,D as s,G as l,M as a,O as x}from"./index.002e3fe2.js";import{u as _}from"./use-quasar.2fa9459c.js";import{u as C,_ as b,C as k,G as H,a as O}from"./board-worker.a8beafab.js";import{H as i}from"./hex.ee8feb5b.js";import"./QCard.e2202615.js";import"./use-dark.074d2bda.js";import"./QList.b7a5073c.js";import"./QScrollObserver.706bd3d0.js";import"./focus-manager.202af5b7.js";import"./chess-piece.b155a9d7.js";import"./QSeparator.2ddac7a8.js";import"./notify.675acca3.js";import"./exports.eefa32a1.js";const $=p({__name:"pen-pal-game",setup(w){const t=d(),v=f(),e=C({autoplayFor:[]}),r=h(()=>{try{const o=Array.isArray(t.params.state)?t.params.state[0]:t.params.state;return JSON.parse(i.hexToUtf8(o))}catch{return{afen:"",history:""}}});y(()=>{e.reset(),r.value.afen&&e.importAfen(r.value.afen),r.value.history&&e.importMoveHistory(r.value.history)});const c=o=>{e.executeMoveIndex(o)};g(e.loading,o=>{o||v.push({path:`/play/pen-pal/${i.utf8ToHex(JSON.stringify({afen:e.afen.value,history:e.moveHistory.value}))}`})});const m=_();return(o,A)=>(u(),n(b,null,{board:s(()=>[l(k,{onExecuteNodeIndex:c,board:a(e),perspective:a(e).activeColour.value,"active-colour":a(e).activeColour.value,"check-moves":a(e).checkMoves.value,"en-passant-target":a(e).enPassantTarget.value,"move-history-ast":a(e).moveHistoryAst.value,squares:a(e).squares.value,"valid-moves":a(e).validMoves.value,"play-as":["white","black"],"rounded-borders":a(m).screen.gt.xs,loading:a(e).loading.value},null,8,["board","perspective","active-colour","check-moves","en-passant-target","move-history-ast","squares","valid-moves","rounded-borders","loading"])]),sidebar:s(()=>[l(H,{"move-history":a(e).moveHistoryAst.value,"active-colour":a(e).activeColour.value,"own-colour":a(e).activeColour.value,afen:a(e).afen.value,"game-over":a(e).gameOver.value},null,8,["move-history","active-colour","own-colour","afen","game-over"])]),default:s(()=>[a(e).gameOver.value?(u(),n(O,{key:0,node:a(e).gameOver.value},null,8,["node"])):x("",!0)]),_:1}))}});export{$ as default};
//# sourceMappingURL=pen-pal-game.85b864b6.js.map
