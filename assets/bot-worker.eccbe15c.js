(function(){"use strict";const la=Object.prototype.toString;function pa(t){switch(la.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Rt(t,Error)}}function Ct(t,e){return la.call(t)===`[object ${e}]`}function gi(t){return Ct(t,"ErrorEvent")}function ha(t){return Ct(t,"DOMError")}function mf(t){return Ct(t,"DOMException")}function St(t){return Ct(t,"String")}function da(t){return t===null||typeof t!="object"&&typeof t!="function"}function Dt(t){return Ct(t,"Object")}function Vr(t){return typeof Event!="undefined"&&Rt(t,Event)}function _f(t){return typeof Element!="undefined"&&Rt(t,Element)}function vf(t){return Ct(t,"RegExp")}function yi(t){return Boolean(t&&t.then&&typeof t.then=="function")}function bf(t){return Dt(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function Ef(t){return typeof t=="number"&&t!==t}function Rt(t,e){try{return t instanceof e}catch{return!1}}function ga(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function Mt(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function ya(t,e){if(!Array.isArray(t))return"";const r=[];for(let n=0;n<t.length;n++){const i=t[n];try{ga(i)?r.push("[VueViewModel]"):r.push(String(i))}catch{r.push("[value cannot be serialized]")}}return r.join(e)}function wf(t,e,r=!1){return St(t)?vf(e)?e.test(t):St(e)?r?t===e:t.includes(e):!1:!1}function zr(t,e=[],r=!1){return e.some(n=>wf(t,n,r))}function Sf(t,e,r=250,n,i,o,a){if(!o.exception||!o.exception.values||!a||!Rt(a.originalException,Error))return;const s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=Rf(mi(t,e,i,a.originalException,n,o.exception.values,s,0),r))}function mi(t,e,r,n,i,o,a,s){if(o.length>=r+1)return o;let u=[...o];if(Rt(n[i],Error)){ma(a,s);const l=t(e,n[i]),d=u.length;_a(l,i,d,s),u=mi(t,e,r,n[i],i,[l,...u],l,d)}return Array.isArray(n.errors)&&n.errors.forEach((l,d)=>{if(Rt(l,Error)){ma(a,s);const h=t(e,l),y=u.length;_a(h,`errors[${d}]`,y,s),u=mi(t,e,r,l,i,[h,...u],h,y)}}),u}function ma(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,is_exception_group:!0,exception_id:e}}function _a(t,e,r,n){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:r,parent_id:n}}function Rf(t,e){return t.map(r=>(r.value&&(r.value=Mt(r.value,e)),r))}var Te=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},N={},Ft={},Kr={};Kr.byteLength=Af,Kr.toByteArray=xf,Kr.fromByteArray=If;for(var Ve=[],Ie=[],kf=typeof Uint8Array!="undefined"?Uint8Array:Array,_i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ut=0,Tf=_i.length;Ut<Tf;++Ut)Ve[Ut]=_i[Ut],Ie[_i.charCodeAt(Ut)]=Ut;Ie["-".charCodeAt(0)]=62,Ie["_".charCodeAt(0)]=63;function va(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Af(t){var e=va(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Of(t,e,r){return(e+r)*3/4-r}function xf(t){var e,r=va(t),n=r[0],i=r[1],o=new kf(Of(t,n,i)),a=0,s=i>0?n-4:n,u;for(u=0;u<s;u+=4)e=Ie[t.charCodeAt(u)]<<18|Ie[t.charCodeAt(u+1)]<<12|Ie[t.charCodeAt(u+2)]<<6|Ie[t.charCodeAt(u+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=Ie[t.charCodeAt(u)]<<2|Ie[t.charCodeAt(u+1)]>>4,o[a++]=e&255),i===1&&(e=Ie[t.charCodeAt(u)]<<10|Ie[t.charCodeAt(u+1)]<<4|Ie[t.charCodeAt(u+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function Nf(t){return Ve[t>>18&63]+Ve[t>>12&63]+Ve[t>>6&63]+Ve[t&63]}function Pf(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(Nf(n));return i.join("")}function If(t){for(var e,r=t.length,n=r%3,i=[],o=16383,a=0,s=r-n;a<s;a+=o)i.push(Pf(t,a,a+o>s?s:a+o));return n===1?(e=t[r-1],i.push(Ve[e>>2]+Ve[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Ve[e>>10]+Ve[e>>4&63]+Ve[e<<2&63]+"=")),i.join("")}var vi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */vi.read=function(t,e,r,n,i){var o,a,s=i*8-n-1,u=(1<<s)-1,l=u>>1,d=-7,h=r?i-1:0,y=r?-1:1,m=t[e+h];for(h+=y,o=m&(1<<-d)-1,m>>=-d,d+=s;d>0;o=o*256+t[e+h],h+=y,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=n;d>0;a=a*256+t[e+h],h+=y,d-=8);if(o===0)o=1-l;else{if(o===u)return a?NaN:(m?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-l}return(m?-1:1)*a*Math.pow(2,o-n)},vi.write=function(t,e,r,n,i,o){var a,s,u,l=o*8-i-1,d=(1<<l)-1,h=d>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,E=n?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+h>=1?e+=y/u:e+=y*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=d?(s=0,a=d):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a=a+h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+m]=s&255,m+=E,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+m]=a&255,m+=E,a/=256,l-=8);t[r+m-E]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Kr,r=vi,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=j,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const p=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(p,c),p.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function a(p){if(p>i)throw new RangeError('The value "'+p+'" is invalid for option "size"');const c=new Uint8Array(p);return Object.setPrototypeOf(c,s.prototype),c}function s(p,c,f){if(typeof p=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(p)}return u(p,c,f)}s.poolSize=8192;function u(p,c,f){if(typeof p=="string")return y(p,c);if(ArrayBuffer.isView(p))return E(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(Ze(p,ArrayBuffer)||p&&Ze(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Ze(p,SharedArrayBuffer)||p&&Ze(p.buffer,SharedArrayBuffer)))return k(p,c,f);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=p.valueOf&&p.valueOf();if(g!=null&&g!==p)return s.from(g,c,f);const _=I(p);if(_)return _;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return s.from(p[Symbol.toPrimitive]("string"),c,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}s.from=function(p,c,f){return u(p,c,f)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function d(p,c,f){return l(p),p<=0?a(p):c!==void 0?typeof f=="string"?a(p).fill(c,f):a(p).fill(c):a(p)}s.alloc=function(p,c,f){return d(p,c,f)};function h(p){return l(p),a(p<0?0:x(p)|0)}s.allocUnsafe=function(p){return h(p)},s.allocUnsafeSlow=function(p){return h(p)};function y(p,c){if((typeof c!="string"||c==="")&&(c="utf8"),!s.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const f=J(p,c)|0;let g=a(f);const _=g.write(p,c);return _!==f&&(g=g.slice(0,_)),g}function m(p){const c=p.length<0?0:x(p.length)|0,f=a(c);for(let g=0;g<c;g+=1)f[g]=p[g]&255;return f}function E(p){if(Ze(p,Uint8Array)){const c=new Uint8Array(p);return k(c.buffer,c.byteOffset,c.byteLength)}return m(p)}function k(p,c,f){if(c<0||p.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<c+(f||0))throw new RangeError('"length" is outside of buffer bounds');let g;return c===void 0&&f===void 0?g=new Uint8Array(p):f===void 0?g=new Uint8Array(p,c):g=new Uint8Array(p,c,f),Object.setPrototypeOf(g,s.prototype),g}function I(p){if(s.isBuffer(p)){const c=x(p.length)|0,f=a(c);return f.length===0||p.copy(f,0,0,c),f}if(p.length!==void 0)return typeof p.length!="number"||fa(p.length)?a(0):m(p);if(p.type==="Buffer"&&Array.isArray(p.data))return m(p.data)}function x(p){if(p>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return p|0}function j(p){return+p!=p&&(p=0),s.alloc(+p)}s.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==s.prototype},s.compare=function(c,f){if(Ze(c,Uint8Array)&&(c=s.from(c,c.offset,c.byteLength)),Ze(f,Uint8Array)&&(f=s.from(f,f.offset,f.byteLength)),!s.isBuffer(c)||!s.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===f)return 0;let g=c.length,_=f.length;for(let b=0,w=Math.min(g,_);b<w;++b)if(c[b]!==f[b]){g=c[b],_=f[b];break}return g<_?-1:_<g?1:0},s.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(c,f){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return s.alloc(0);let g;if(f===void 0)for(f=0,g=0;g<c.length;++g)f+=c[g].length;const _=s.allocUnsafe(f);let b=0;for(g=0;g<c.length;++g){let w=c[g];if(Ze(w,Uint8Array))b+w.length>_.length?(s.isBuffer(w)||(w=s.from(w)),w.copy(_,b)):Uint8Array.prototype.set.call(_,w,b);else if(s.isBuffer(w))w.copy(_,b);else throw new TypeError('"list" argument must be an Array of Buffers');b+=w.length}return _};function J(p,c){if(s.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||Ze(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const f=p.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&f===0)return 0;let _=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return Hr(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return di(p).length;default:if(_)return g?-1:Hr(p).length;c=(""+c).toLowerCase(),_=!0}}s.byteLength=J;function D(p,c,f){let g=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,c>>>=0,f<=c))return"";for(p||(p="utf8");;)switch(p){case"hex":return He(this,c,f);case"utf8":case"utf-8":return ge(this,c,f);case"ascii":return Wr(this,c,f);case"latin1":case"binary":return bt(this,c,f);case"base64":return Re(this,c,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Et(this,c,f);default:if(g)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),g=!0}}s.prototype._isBuffer=!0;function $(p,c,f){const g=p[c];p[c]=p[f],p[f]=g}s.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<c;f+=2)$(this,f,f+1);return this},s.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<c;f+=4)$(this,f,f+3),$(this,f+1,f+2);return this},s.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<c;f+=8)$(this,f,f+7),$(this,f+1,f+6),$(this,f+2,f+5),$(this,f+3,f+4);return this},s.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?ge(this,0,c):D.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(c){if(!s.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:s.compare(this,c)===0},s.prototype.inspect=function(){let c="";const f=t.INSPECT_MAX_BYTES;return c=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(c+=" ... "),"<Buffer "+c+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(c,f,g,_,b){if(Ze(c,Uint8Array)&&(c=s.from(c,c.offset,c.byteLength)),!s.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(f===void 0&&(f=0),g===void 0&&(g=c?c.length:0),_===void 0&&(_=0),b===void 0&&(b=this.length),f<0||g>c.length||_<0||b>this.length)throw new RangeError("out of range index");if(_>=b&&f>=g)return 0;if(_>=b)return-1;if(f>=g)return 1;if(f>>>=0,g>>>=0,_>>>=0,b>>>=0,this===c)return 0;let w=b-_,U=g-f;const se=Math.min(w,U),ne=this.slice(_,b),ce=c.slice(f,g);for(let te=0;te<se;++te)if(ne[te]!==ce[te]){w=ne[te],U=ce[te];break}return w<U?-1:U<w?1:0};function W(p,c,f,g,_){if(p.length===0)return-1;if(typeof f=="string"?(g=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,fa(f)&&(f=_?0:p.length-1),f<0&&(f=p.length+f),f>=p.length){if(_)return-1;f=p.length-1}else if(f<0)if(_)f=0;else return-1;if(typeof c=="string"&&(c=s.from(c,g)),s.isBuffer(c))return c.length===0?-1:O(p,c,f,g,_);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?_?Uint8Array.prototype.indexOf.call(p,c,f):Uint8Array.prototype.lastIndexOf.call(p,c,f):O(p,[c],f,g,_);throw new TypeError("val must be string, number or Buffer")}function O(p,c,f,g,_){let b=1,w=p.length,U=c.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(p.length<2||c.length<2)return-1;b=2,w/=2,U/=2,f/=2}function se(ce,te){return b===1?ce[te]:ce.readUInt16BE(te*b)}let ne;if(_){let ce=-1;for(ne=f;ne<w;ne++)if(se(p,ne)===se(c,ce===-1?0:ne-ce)){if(ce===-1&&(ce=ne),ne-ce+1===U)return ce*b}else ce!==-1&&(ne-=ne-ce),ce=-1}else for(f+U>w&&(f=w-U),ne=f;ne>=0;ne--){let ce=!0;for(let te=0;te<U;te++)if(se(p,ne+te)!==se(c,te)){ce=!1;break}if(ce)return ne}return-1}s.prototype.includes=function(c,f,g){return this.indexOf(c,f,g)!==-1},s.prototype.indexOf=function(c,f,g){return W(this,c,f,g,!0)},s.prototype.lastIndexOf=function(c,f,g){return W(this,c,f,g,!1)};function L(p,c,f,g){f=Number(f)||0;const _=p.length-f;g?(g=Number(g),g>_&&(g=_)):g=_;const b=c.length;g>b/2&&(g=b/2);let w;for(w=0;w<g;++w){const U=parseInt(c.substr(w*2,2),16);if(fa(U))return w;p[f+w]=U}return w}function ee(p,c,f,g){return Yr(Hr(c,p.length-f),p,f,g)}function de(p,c,f,g){return Yr(ua(c),p,f,g)}function ae(p,c,f,g){return Yr(di(c),p,f,g)}function le(p,c,f,g){return Yr(R(c,p.length-f),p,f,g)}s.prototype.write=function(c,f,g,_){if(f===void 0)_="utf8",g=this.length,f=0;else if(g===void 0&&typeof f=="string")_=f,g=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(g)?(g=g>>>0,_===void 0&&(_="utf8")):(_=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const b=this.length-f;if((g===void 0||g>b)&&(g=b),c.length>0&&(g<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");let w=!1;for(;;)switch(_){case"hex":return L(this,c,f,g);case"utf8":case"utf-8":return ee(this,c,f,g);case"ascii":case"latin1":case"binary":return de(this,c,f,g);case"base64":return ae(this,c,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,c,f,g);default:if(w)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),w=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Re(p,c,f){return c===0&&f===p.length?e.fromByteArray(p):e.fromByteArray(p.slice(c,f))}function ge(p,c,f){f=Math.min(p.length,f);const g=[];let _=c;for(;_<f;){const b=p[_];let w=null,U=b>239?4:b>223?3:b>191?2:1;if(_+U<=f){let se,ne,ce,te;switch(U){case 1:b<128&&(w=b);break;case 2:se=p[_+1],(se&192)===128&&(te=(b&31)<<6|se&63,te>127&&(w=te));break;case 3:se=p[_+1],ne=p[_+2],(se&192)===128&&(ne&192)===128&&(te=(b&15)<<12|(se&63)<<6|ne&63,te>2047&&(te<55296||te>57343)&&(w=te));break;case 4:se=p[_+1],ne=p[_+2],ce=p[_+3],(se&192)===128&&(ne&192)===128&&(ce&192)===128&&(te=(b&15)<<18|(se&63)<<12|(ne&63)<<6|ce&63,te>65535&&te<1114112&&(w=te))}}w===null?(w=65533,U=1):w>65535&&(w-=65536,g.push(w>>>10&1023|55296),w=56320|w&1023),g.push(w),_+=U}return xe(g)}const Pe=4096;function xe(p){const c=p.length;if(c<=Pe)return String.fromCharCode.apply(String,p);let f="",g=0;for(;g<c;)f+=String.fromCharCode.apply(String,p.slice(g,g+=Pe));return f}function Wr(p,c,f){let g="";f=Math.min(p.length,f);for(let _=c;_<f;++_)g+=String.fromCharCode(p[_]&127);return g}function bt(p,c,f){let g="";f=Math.min(p.length,f);for(let _=c;_<f;++_)g+=String.fromCharCode(p[_]);return g}function He(p,c,f){const g=p.length;(!c||c<0)&&(c=0),(!f||f<0||f>g)&&(f=g);let _="";for(let b=c;b<f;++b)_+=Qv[p[b]];return _}function Et(p,c,f){const g=p.slice(c,f);let _="";for(let b=0;b<g.length-1;b+=2)_+=String.fromCharCode(g[b]+g[b+1]*256);return _}s.prototype.slice=function(c,f){const g=this.length;c=~~c,f=f===void 0?g:~~f,c<0?(c+=g,c<0&&(c=0)):c>g&&(c=g),f<0?(f+=g,f<0&&(f=0)):f>g&&(f=g),f<c&&(f=c);const _=this.subarray(c,f);return Object.setPrototypeOf(_,s.prototype),_};function ie(p,c,f){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+c>f)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(c,f,g){c=c>>>0,f=f>>>0,g||ie(c,f,this.length);let _=this[c],b=1,w=0;for(;++w<f&&(b*=256);)_+=this[c+w]*b;return _},s.prototype.readUintBE=s.prototype.readUIntBE=function(c,f,g){c=c>>>0,f=f>>>0,g||ie(c,f,this.length);let _=this[c+--f],b=1;for(;f>0&&(b*=256);)_+=this[c+--f]*b;return _},s.prototype.readUint8=s.prototype.readUInt8=function(c,f){return c=c>>>0,f||ie(c,1,this.length),this[c]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(c,f){return c=c>>>0,f||ie(c,2,this.length),this[c]|this[c+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(c,f){return c=c>>>0,f||ie(c,2,this.length),this[c]<<8|this[c+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(c,f){return c=c>>>0,f||ie(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(c,f){return c=c>>>0,f||ie(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},s.prototype.readBigUInt64LE=wt(function(c){c=c>>>0,Ye(c,"offset");const f=this[c],g=this[c+7];(f===void 0||g===void 0)&&De(c,this.length-8);const _=f+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,b=this[++c]+this[++c]*2**8+this[++c]*2**16+g*2**24;return BigInt(_)+(BigInt(b)<<BigInt(32))}),s.prototype.readBigUInt64BE=wt(function(c){c=c>>>0,Ye(c,"offset");const f=this[c],g=this[c+7];(f===void 0||g===void 0)&&De(c,this.length-8);const _=f*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],b=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g;return(BigInt(_)<<BigInt(32))+BigInt(b)}),s.prototype.readIntLE=function(c,f,g){c=c>>>0,f=f>>>0,g||ie(c,f,this.length);let _=this[c],b=1,w=0;for(;++w<f&&(b*=256);)_+=this[c+w]*b;return b*=128,_>=b&&(_-=Math.pow(2,8*f)),_},s.prototype.readIntBE=function(c,f,g){c=c>>>0,f=f>>>0,g||ie(c,f,this.length);let _=f,b=1,w=this[c+--_];for(;_>0&&(b*=256);)w+=this[c+--_]*b;return b*=128,w>=b&&(w-=Math.pow(2,8*f)),w},s.prototype.readInt8=function(c,f){return c=c>>>0,f||ie(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},s.prototype.readInt16LE=function(c,f){c=c>>>0,f||ie(c,2,this.length);const g=this[c]|this[c+1]<<8;return g&32768?g|4294901760:g},s.prototype.readInt16BE=function(c,f){c=c>>>0,f||ie(c,2,this.length);const g=this[c+1]|this[c]<<8;return g&32768?g|4294901760:g},s.prototype.readInt32LE=function(c,f){return c=c>>>0,f||ie(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},s.prototype.readInt32BE=function(c,f){return c=c>>>0,f||ie(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},s.prototype.readBigInt64LE=wt(function(c){c=c>>>0,Ye(c,"offset");const f=this[c],g=this[c+7];(f===void 0||g===void 0)&&De(c,this.length-8);const _=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(g<<24);return(BigInt(_)<<BigInt(32))+BigInt(f+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),s.prototype.readBigInt64BE=wt(function(c){c=c>>>0,Ye(c,"offset");const f=this[c],g=this[c+7];(f===void 0||g===void 0)&&De(c,this.length-8);const _=(f<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(_)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g)}),s.prototype.readFloatLE=function(c,f){return c=c>>>0,f||ie(c,4,this.length),r.read(this,c,!0,23,4)},s.prototype.readFloatBE=function(c,f){return c=c>>>0,f||ie(c,4,this.length),r.read(this,c,!1,23,4)},s.prototype.readDoubleLE=function(c,f){return c=c>>>0,f||ie(c,8,this.length),r.read(this,c,!0,52,8)},s.prototype.readDoubleBE=function(c,f){return c=c>>>0,f||ie(c,8,this.length),r.read(this,c,!1,52,8)};function v(p,c,f,g,_,b){if(!s.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>_||c<b)throw new RangeError('"value" argument is out of bounds');if(f+g>p.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(c,f,g,_){if(c=+c,f=f>>>0,g=g>>>0,!_){const U=Math.pow(2,8*g)-1;v(this,c,f,g,U,0)}let b=1,w=0;for(this[f]=c&255;++w<g&&(b*=256);)this[f+w]=c/b&255;return f+g},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(c,f,g,_){if(c=+c,f=f>>>0,g=g>>>0,!_){const U=Math.pow(2,8*g)-1;v(this,c,f,g,U,0)}let b=g-1,w=1;for(this[f+b]=c&255;--b>=0&&(w*=256);)this[f+b]=c/w&255;return f+g},s.prototype.writeUint8=s.prototype.writeUInt8=function(c,f,g){return c=+c,f=f>>>0,g||v(this,c,f,1,255,0),this[f]=c&255,f+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(c,f,g){return c=+c,f=f>>>0,g||v(this,c,f,2,65535,0),this[f]=c&255,this[f+1]=c>>>8,f+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(c,f,g){return c=+c,f=f>>>0,g||v(this,c,f,2,65535,0),this[f]=c>>>8,this[f+1]=c&255,f+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(c,f,g){return c=+c,f=f>>>0,g||v(this,c,f,4,4294967295,0),this[f+3]=c>>>24,this[f+2]=c>>>16,this[f+1]=c>>>8,this[f]=c&255,f+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(c,f,g){return c=+c,f=f>>>0,g||v(this,c,f,4,4294967295,0),this[f]=c>>>24,this[f+1]=c>>>16,this[f+2]=c>>>8,this[f+3]=c&255,f+4};function S(p,c,f,g,_){Qe(c,g,_,p,f,7);let b=Number(c&BigInt(4294967295));p[f++]=b,b=b>>8,p[f++]=b,b=b>>8,p[f++]=b,b=b>>8,p[f++]=b;let w=Number(c>>BigInt(32)&BigInt(4294967295));return p[f++]=w,w=w>>8,p[f++]=w,w=w>>8,p[f++]=w,w=w>>8,p[f++]=w,f}function T(p,c,f,g,_){Qe(c,g,_,p,f,7);let b=Number(c&BigInt(4294967295));p[f+7]=b,b=b>>8,p[f+6]=b,b=b>>8,p[f+5]=b,b=b>>8,p[f+4]=b;let w=Number(c>>BigInt(32)&BigInt(4294967295));return p[f+3]=w,w=w>>8,p[f+2]=w,w=w>>8,p[f+1]=w,w=w>>8,p[f]=w,f+8}s.prototype.writeBigUInt64LE=wt(function(c,f=0){return S(this,c,f,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=wt(function(c,f=0){return T(this,c,f,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(c,f,g,_){if(c=+c,f=f>>>0,!_){const se=Math.pow(2,8*g-1);v(this,c,f,g,se-1,-se)}let b=0,w=1,U=0;for(this[f]=c&255;++b<g&&(w*=256);)c<0&&U===0&&this[f+b-1]!==0&&(U=1),this[f+b]=(c/w>>0)-U&255;return f+g},s.prototype.writeIntBE=function(c,f,g,_){if(c=+c,f=f>>>0,!_){const se=Math.pow(2,8*g-1);v(this,c,f,g,se-1,-se)}let b=g-1,w=1,U=0;for(this[f+b]=c&255;--b>=0&&(w*=256);)c<0&&U===0&&this[f+b+1]!==0&&(U=1),this[f+b]=(c/w>>0)-U&255;return f+g},s.prototype.writeInt8=function(c,f,g){return c=+c,f=f>>>0,g||v(this,c,f,1,127,-128),c<0&&(c=255+c+1),this[f]=c&255,f+1},s.prototype.writeInt16LE=function(c,f,g){return c=+c,f=f>>>0,g||v(this,c,f,2,32767,-32768),this[f]=c&255,this[f+1]=c>>>8,f+2},s.prototype.writeInt16BE=function(c,f,g){return c=+c,f=f>>>0,g||v(this,c,f,2,32767,-32768),this[f]=c>>>8,this[f+1]=c&255,f+2},s.prototype.writeInt32LE=function(c,f,g){return c=+c,f=f>>>0,g||v(this,c,f,4,2147483647,-2147483648),this[f]=c&255,this[f+1]=c>>>8,this[f+2]=c>>>16,this[f+3]=c>>>24,f+4},s.prototype.writeInt32BE=function(c,f,g){return c=+c,f=f>>>0,g||v(this,c,f,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[f]=c>>>24,this[f+1]=c>>>16,this[f+2]=c>>>8,this[f+3]=c&255,f+4},s.prototype.writeBigInt64LE=wt(function(c,f=0){return S(this,c,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=wt(function(c,f=0){return T(this,c,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function B(p,c,f,g,_,b){if(f+g>p.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function H(p,c,f,g,_){return c=+c,f=f>>>0,_||B(p,c,f,4),r.write(p,c,f,g,23,4),f+4}s.prototype.writeFloatLE=function(c,f,g){return H(this,c,f,!0,g)},s.prototype.writeFloatBE=function(c,f,g){return H(this,c,f,!1,g)};function z(p,c,f,g,_){return c=+c,f=f>>>0,_||B(p,c,f,8),r.write(p,c,f,g,52,8),f+8}s.prototype.writeDoubleLE=function(c,f,g){return z(this,c,f,!0,g)},s.prototype.writeDoubleBE=function(c,f,g){return z(this,c,f,!1,g)},s.prototype.copy=function(c,f,g,_){if(!s.isBuffer(c))throw new TypeError("argument should be a Buffer");if(g||(g=0),!_&&_!==0&&(_=this.length),f>=c.length&&(f=c.length),f||(f=0),_>0&&_<g&&(_=g),_===g||c.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),c.length-f<_-g&&(_=c.length-f+g);const b=_-g;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,g,_):Uint8Array.prototype.set.call(c,this.subarray(g,_),f),b},s.prototype.fill=function(c,f,g,_){if(typeof c=="string"){if(typeof f=="string"?(_=f,f=0,g=this.length):typeof g=="string"&&(_=g,g=this.length),_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!s.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(c.length===1){const w=c.charCodeAt(0);(_==="utf8"&&w<128||_==="latin1")&&(c=w)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(f<0||this.length<f||this.length<g)throw new RangeError("Out of range index");if(g<=f)return this;f=f>>>0,g=g===void 0?this.length:g>>>0,c||(c=0);let b;if(typeof c=="number")for(b=f;b<g;++b)this[b]=c;else{const w=s.isBuffer(c)?c:s.from(c,_),U=w.length;if(U===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(b=0;b<g-f;++b)this[b+f]=w[b%U]}return this};const M={};function G(p,c,f){M[p]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(_){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}G("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),G("ERR_INVALID_ARG_TYPE",function(p,c){return`The "${p}" argument must be of type number. Received type ${typeof c}`},TypeError),G("ERR_OUT_OF_RANGE",function(p,c,f){let g=`The value of "${p}" is out of range.`,_=f;return Number.isInteger(f)&&Math.abs(f)>2**32?_=X(String(f)):typeof f=="bigint"&&(_=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(_=X(_)),_+="n"),g+=` It must be ${c}. Received ${_}`,g},RangeError);function X(p){let c="",f=p.length;const g=p[0]==="-"?1:0;for(;f>=g+4;f-=3)c=`_${p.slice(f-3,f)}${c}`;return`${p.slice(0,f)}${c}`}function ke(p,c,f){Ye(c,"offset"),(p[c]===void 0||p[c+f]===void 0)&&De(c,p.length-(f+1))}function Qe(p,c,f,g,_,b){if(p>f||p<c){const w=typeof c=="bigint"?"n":"";let U;throw b>3?c===0||c===BigInt(0)?U=`>= 0${w} and < 2${w} ** ${(b+1)*8}${w}`:U=`>= -(2${w} ** ${(b+1)*8-1}${w}) and < 2 ** ${(b+1)*8-1}${w}`:U=`>= ${c}${w} and <= ${f}${w}`,new M.ERR_OUT_OF_RANGE("value",U,p)}ke(g,_,b)}function Ye(p,c){if(typeof p!="number")throw new M.ERR_INVALID_ARG_TYPE(c,"number",p)}function De(p,c,f){throw Math.floor(p)!==p?(Ye(p,f),new M.ERR_OUT_OF_RANGE(f||"offset","an integer",p)):c<0?new M.ERR_BUFFER_OUT_OF_BOUNDS:new M.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${c}`,p)}const ur=/[^+/0-9A-Za-z-_]/g;function hi(p){if(p=p.split("=")[0],p=p.trim().replace(ur,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function Hr(p,c){c=c||1/0;let f;const g=p.length;let _=null;const b=[];for(let w=0;w<g;++w){if(f=p.charCodeAt(w),f>55295&&f<57344){if(!_){if(f>56319){(c-=3)>-1&&b.push(239,191,189);continue}else if(w+1===g){(c-=3)>-1&&b.push(239,191,189);continue}_=f;continue}if(f<56320){(c-=3)>-1&&b.push(239,191,189),_=f;continue}f=(_-55296<<10|f-56320)+65536}else _&&(c-=3)>-1&&b.push(239,191,189);if(_=null,f<128){if((c-=1)<0)break;b.push(f)}else if(f<2048){if((c-=2)<0)break;b.push(f>>6|192,f&63|128)}else if(f<65536){if((c-=3)<0)break;b.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((c-=4)<0)break;b.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return b}function ua(p){const c=[];for(let f=0;f<p.length;++f)c.push(p.charCodeAt(f)&255);return c}function R(p,c){let f,g,_;const b=[];for(let w=0;w<p.length&&!((c-=2)<0);++w)f=p.charCodeAt(w),g=f>>8,_=f%256,b.push(_),b.push(g);return b}function di(p){return e.toByteArray(hi(p))}function Yr(p,c,f,g){let _;for(_=0;_<g&&!(_+f>=c.length||_>=p.length);++_)c[_+f]=p[_];return _}function Ze(p,c){return p instanceof c||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===c.name}function fa(p){return p!==p}const Qv=function(){const p="0123456789abcdef",c=new Array(256);for(let f=0;f<16;++f){const g=f*16;for(let _=0;_<16;++_)c[g+_]=p[f]+p[_]}return c}();function wt(p){return typeof BigInt=="undefined"?Zv:p}function Zv(){throw new Error("BigInt not supported")}})(Ft);var ba={exports:{}},ue=ba.exports={},ze,Ke;function bi(){throw new Error("setTimeout has not been defined")}function Ei(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ze=setTimeout:ze=bi}catch{ze=bi}try{typeof clearTimeout=="function"?Ke=clearTimeout:Ke=Ei}catch{Ke=Ei}})();function Ea(t){if(ze===setTimeout)return setTimeout(t,0);if((ze===bi||!ze)&&setTimeout)return ze=setTimeout,setTimeout(t,0);try{return ze(t,0)}catch{try{return ze.call(null,t,0)}catch{return ze.call(this,t,0)}}}function jf(t){if(Ke===clearTimeout)return clearTimeout(t);if((Ke===Ei||!Ke)&&clearTimeout)return Ke=clearTimeout,clearTimeout(t);try{return Ke(t)}catch{try{return Ke.call(null,t)}catch{return Ke.call(this,t)}}}var et=[],Lt=!1,kt,Xr=-1;function $f(){!Lt||!kt||(Lt=!1,kt.length?et=kt.concat(et):Xr=-1,et.length&&wa())}function wa(){if(!Lt){var t=Ea($f);Lt=!0;for(var e=et.length;e;){for(kt=et,et=[];++Xr<e;)kt&&kt[Xr].run();Xr=-1,e=et.length}kt=null,Lt=!1,jf(t)}}ue.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];et.push(new Sa(t,e)),et.length===1&&!Lt&&Ea(wa)};function Sa(t,e){this.fun=t,this.array=e}Sa.prototype.run=function(){this.fun.apply(null,this.array)},ue.title="browser",ue.browser=!0,ue.env={},ue.argv=[],ue.version="",ue.versions={};function tt(){}ue.on=tt,ue.addListener=tt,ue.once=tt,ue.off=tt,ue.removeListener=tt,ue.removeAllListeners=tt,ue.emit=tt,ue.prependListener=tt,ue.prependOnceListener=tt,ue.listeners=function(t){return[]},ue.binding=function(t){throw new Error("process.binding is not supported")},ue.cwd=function(){return"/"},ue.chdir=function(t){throw new Error("process.chdir is not supported")},ue.umask=function(){return 0},function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ft,r=ba.exports,n=a=>a&&a.__esModule?a:{default:a},i=n(r),o=globalThis||void 0||self;Object.defineProperty(t,"Buffer",{enumerable:!0,get:()=>e.Buffer}),Object.defineProperty(t,"process",{enumerable:!0,get:()=>i.default}),t.global=o}(N);function Jr(t){return t&&t.Math==Math?t:void 0}const ye=typeof globalThis=="object"&&Jr(globalThis)||typeof window=="object"&&Jr(window)||typeof self=="object"&&Jr(self)||typeof N.global=="object"&&Jr(N.global)||function(){return this}()||{};function fr(){return ye}function Ra(t,e,r){const n=r||ye,i=n.__SENTRY__=n.__SENTRY__||{};return i[t]||(i[t]=e())}const Bf=fr(),Cf=80;function wi(t,e={}){try{let r=t;const n=5,i=[];let o=0,a=0;const s=" > ",u=s.length;let l;const d=Array.isArray(e)?e:e.keyAttrs,h=!Array.isArray(e)&&e.maxStringLength||Cf;for(;r&&o++<n&&(l=Df(r,d),!(l==="html"||o>1&&a+i.length*u+l.length>=h));)i.push(l),a+=l.length,r=r.parentNode;return i.reverse().join(s)}catch{return"<unknown>"}}function Df(t,e){const r=t,n=[];let i,o,a,s,u;if(!r||!r.tagName)return"";n.push(r.tagName.toLowerCase());const l=e&&e.length?e.filter(h=>r.getAttribute(h)).map(h=>[h,r.getAttribute(h)]):null;if(l&&l.length)l.forEach(h=>{n.push(`[${h[0]}="${h[1]}"]`)});else if(r.id&&n.push(`#${r.id}`),i=r.className,i&&St(i))for(o=i.split(/\s+/),u=0;u<o.length;u++)n.push(`.${o[u]}`);const d=["aria-label","type","name","title","alt"];for(u=0;u<d.length;u++)a=d[u],s=r.getAttribute(a),s&&n.push(`[${a}="${s}"]`);return n.join("")}function Mf(){try{return Bf.document.location.href}catch{return""}}const Ff="Sentry Logger ",Si=["debug","info","warn","error","log","assert","trace"],Qr={};function ka(t){if(!("console"in ye))return t();const e=ye.console,r={},n=Object.keys(Qr);n.forEach(i=>{const o=Qr[i];r[i]=e[i],e[i]=o});try{return t()}finally{n.forEach(i=>{e[i]=r[i]})}}function Uf(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__?Si.forEach(r=>{e[r]=(...n)=>{t&&ka(()=>{ye.console[r](`${Ff}[${r}]:`,...n)})}}):Si.forEach(r=>{e[r]=()=>{}}),e}const C=Uf(),Lf=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Gf(t){return t==="http"||t==="https"}function Zr(t,e=!1){const{host:r,path:n,pass:i,port:o,projectId:a,protocol:s,publicKey:u}=t;return`${s}://${u}${e&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n&&`${n}/`}${a}`}function qf(t){const e=Lf.exec(t);if(!e){console.error(`Invalid Sentry Dsn: ${t}`);return}const[r,n,i="",o,a="",s]=e.slice(1);let u="",l=s;const d=l.split("/");if(d.length>1&&(u=d.slice(0,-1).join("/"),l=d.pop()),l){const h=l.match(/^\d+/);h&&(l=h[0])}return Ta({host:o,pass:i,path:u,projectId:l,port:a,protocol:r,publicKey:n})}function Ta(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Wf(t){if(!(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__))return!0;const{port:e,projectId:r,protocol:n}=t;return["protocol","publicKey","host","projectId"].find(a=>t[a]?!1:(C.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:r.match(/^\d+$/)?Gf(n)?e&&isNaN(parseInt(e,10))?(C.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(C.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),!1):(C.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),!1)}function Hf(t){const e=typeof t=="string"?qf(t):Ta(t);if(!(!e||!Wf(e)))return e}class Me extends Error{constructor(e,r="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=r}}function be(t,e,r){if(!(e in t))return;const n=t[e],i=r(n);typeof i=="function"&&Aa(i,n),t[e]=i}function Ri(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Aa(t,e){try{const r=e.prototype||{};t.prototype=e.prototype=r,Ri(t,"__sentry_original__",e)}catch{}}function ki(t){return t.__sentry_original__}function Yf(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}function Oa(t){if(pa(t))return{message:t.message,name:t.name,stack:t.stack,...Na(t)};if(Vr(t)){const e={type:t.type,target:xa(t.target),currentTarget:xa(t.currentTarget),...Na(t)};return typeof CustomEvent!="undefined"&&Rt(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function xa(t){try{return _f(t)?wi(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Na(t){if(typeof t=="object"&&t!==null){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}else return{}}function Vf(t,e=40){const r=Object.keys(Oa(t));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=e)return Mt(r[0],e);for(let n=r.length;n>0;n--){const i=r.slice(0,n).join(", ");if(!(i.length>e))return n===r.length?i:Mt(i,e)}return""}function en(t){return Ti(t,new Map)}function Ti(t,e){if(Dt(t)){const r=e.get(t);if(r!==void 0)return r;const n={};e.set(t,n);for(const i of Object.keys(t))typeof t[i]!="undefined"&&(n[i]=Ti(t[i],e));return n}if(Array.isArray(t)){const r=e.get(t);if(r!==void 0)return r;const n=[];return e.set(t,n),t.forEach(i=>{n.push(Ti(i,e))}),n}return t}const Pa=50,Ia=/\(error: (.*)\)/,ja=/captureMessage|captureException/;function $a(...t){const e=t.sort((r,n)=>r[0]-n[0]).map(r=>r[1]);return(r,n=0)=>{const i=[],o=r.split(`
`);for(let a=n;a<o.length;a++){const s=o[a];if(s.length>1024)continue;const u=Ia.test(s)?s.replace(Ia,"$1"):s;if(!u.match(/\S*Error: /)){for(const l of e){const d=l(u);if(d){i.push(d);break}}if(i.length>=Pa)break}}return Kf(i)}}function zf(t){return Array.isArray(t)?$a(...t):t}function Kf(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(e[e.length-1].function||"")&&e.pop(),e.reverse(),ja.test(e[e.length-1].function||"")&&(e.pop(),ja.test(e[e.length-1].function||"")&&e.pop()),e.slice(0,Pa).map(r=>({...r,filename:r.filename||e[e.length-1].filename,function:r.function||"?"}))}const Ai="<anonymous>";function ot(t){try{return!t||typeof t!="function"?Ai:t.name||Ai}catch{return Ai}}const Oi=fr();function Ba(){if(!("fetch"in Oi))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function xi(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Xf(){if(!Ba())return!1;if(xi(Oi.fetch))return!0;let t=!1;const e=Oi.document;if(e&&typeof e.createElement=="function")try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=xi(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}const tn=fr();function Jf(){const t=tn.chrome,e=t&&t.app&&t.app.runtime,r="history"in tn&&!!tn.history.pushState&&!!tn.history.replaceState;return!e&&r}const me=fr(),lr="__sentry_xhr_v2__",pr={},Ca={};function Qf(t){if(!Ca[t])switch(Ca[t]=!0,t){case"console":Zf();break;case"dom":sl();break;case"xhr":rl();break;case"fetch":el();break;case"history":nl();break;case"error":cl();break;case"unhandledrejection":ul();break;default:(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn("unknown instrumentation type:",t);return}}function at(t,e){pr[t]=pr[t]||[],pr[t].push(e),Qf(t)}function Fe(t,e){if(!(!t||!pr[t]))for(const r of pr[t]||[])try{r(e)}catch(n){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${ot(r)}
Error:`,n)}}function Zf(){"console"in ye&&Si.forEach(function(t){t in ye.console&&be(ye.console,t,function(e){return Qr[t]=e,function(...r){Fe("console",{args:r,level:t});const n=Qr[t];n&&n.apply(ye.console,r)}})})}function el(){!Xf()||be(ye,"fetch",function(t){return function(...e){const{method:r,url:n}=tl(e),i={args:e,fetchData:{method:r,url:n},startTimestamp:Date.now()};return Fe("fetch",{...i}),t.apply(ye,e).then(o=>(Fe("fetch",{...i,endTimestamp:Date.now(),response:o}),o),o=>{throw Fe("fetch",{...i,endTimestamp:Date.now(),error:o}),o})}})}function Ni(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Da(t){return typeof t=="string"?t:t?Ni(t,"url")?t.url:t.toString?t.toString():"":""}function tl(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[r,n]=t;return{url:Da(r),method:Ni(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:Da(e),method:Ni(e,"method")?String(e.method).toUpperCase():"GET"}}function rl(){if(!me.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;be(t,"open",function(e){return function(...r){const n=r[1],i=this[lr]={method:St(r[0])?r[0].toUpperCase():r[0],url:r[1],request_headers:{}};St(n)&&i.method==="POST"&&n.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[lr];if(!!a&&this.readyState===4){try{a.status_code=this.status}catch{}Fe("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?be(this,"onreadystatechange",function(a){return function(...s){return o(),a.apply(this,s)}}):this.addEventListener("readystatechange",o),be(this,"setRequestHeader",function(a){return function(...s){const[u,l]=s,d=this[lr];return d&&(d.request_headers[u.toLowerCase()]=l),a.apply(this,s)}}),e.apply(this,r)}}),be(t,"send",function(e){return function(...r){const n=this[lr];return n&&r[0]!==void 0&&(n.body=r[0]),Fe("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),e.apply(this,r)}})}let rn;function nl(){if(!Jf())return;const t=me.onpopstate;me.onpopstate=function(...r){const n=me.location.href,i=rn;if(rn=n,Fe("history",{from:i,to:n}),t)try{return t.apply(this,r)}catch{}};function e(r){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const o=rn,a=String(i);rn=a,Fe("history",{from:o,to:a})}return r.apply(this,n)}}be(me.history,"pushState",e),be(me.history,"replaceState",e)}const il=1e3;let nn,on;function ol(t,e){if(!t||t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch{}return!1}function al(t){if(t.type!=="keypress")return!1;try{const e=t.target;if(!e||!e.tagName)return!0;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)return!1}catch{}return!0}function Ma(t,e=!1){return r=>{if(!r||on===r||al(r))return;const n=r.type==="keypress"?"input":r.type;nn===void 0?(t({event:r,name:n,global:e}),on=r):ol(on,r)&&(t({event:r,name:n,global:e}),on=r),clearTimeout(nn),nn=me.setTimeout(()=>{nn=void 0},il)}}function sl(){if(!me.document)return;const t=Fe.bind(null,"dom"),e=Ma(t,!0);me.document.addEventListener("click",e,!1),me.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(r=>{const n=me[r]&&me[r].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(be(n,"addEventListener",function(i){return function(o,a,s){if(o==="click"||o=="keypress")try{const u=this,l=u.__sentry_instrumentation_handlers__=u.__sentry_instrumentation_handlers__||{},d=l[o]=l[o]||{refCount:0};if(!d.handler){const h=Ma(t);d.handler=h,i.call(this,o,h,s)}d.refCount++}catch{}return i.call(this,o,a,s)}}),be(n,"removeEventListener",function(i){return function(o,a,s){if(o==="click"||o=="keypress")try{const u=this,l=u.__sentry_instrumentation_handlers__||{},d=l[o];d&&(d.refCount--,d.refCount<=0&&(i.call(this,o,d.handler,s),d.handler=void 0,delete l[o]),Object.keys(l).length===0&&delete u.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,a,s)}}))})}let an=null;function cl(){an=me.onerror,me.onerror=function(t,e,r,n,i){return Fe("error",{column:n,error:i,line:r,msg:t,url:e}),an&&!an.__SENTRY_LOADER__?an.apply(this,arguments):!1},me.onerror.__SENTRY_INSTRUMENTED__=!0}let sn=null;function ul(){sn=me.onunhandledrejection,me.onunhandledrejection=function(t){return Fe("unhandledrejection",t),sn&&!sn.__SENTRY_LOADER__?sn.apply(this,arguments):!0},me.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function fl(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function r(i){if(t)return e.has(i)?!0:(e.add(i),!1);for(let o=0;o<e.length;o++)if(e[o]===i)return!0;return e.push(i),!1}function n(i){if(t)e.delete(i);else for(let o=0;o<e.length;o++)if(e[o]===i){e.splice(o,1);break}}return[r,n]}function st(){const t=ye,e=t.crypto||t.msCrypto;let r=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(r=()=>e.getRandomValues(new Uint8Array(1))[0])}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,n=>(n^(r()&15)>>n/4).toString(16))}function Fa(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function ct(t){const{message:e,event_id:r}=t;if(e)return e;const n=Fa(t);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function Pi(t,e,r){const n=t.exception=t.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=e||""),o.type||(o.type=r||"Error")}function Gt(t,e){const r=Fa(t);if(!r)return;const n={type:"generic",handled:!0},i=r.mechanism;if(r.mechanism={...n,...i,...e},e&&"data"in e){const o={...i&&i.data,...e.data};r.mechanism.data=o}}function Ua(t){if(t&&t.__sentry_captured__)return!0;try{Ri(t,"__sentry_captured__",!0)}catch{}return!1}function Ii(t){return Array.isArray(t)?t:[t]}function ll(){return typeof __SENTRY_BROWSER_BUNDLE__!="undefined"&&!!__SENTRY_BROWSER_BUNDLE__}function pl(){return"npm"}function hl(){return!ll()&&Object.prototype.toString.call(typeof N.process!="undefined"?N.process:0)==="[object process]"}function dl(t,e){return t.require(e)}function ut(t,e=100,r=1/0){try{return ji("",t,e,r)}catch(n){return{ERROR:`**non-serializable** (${n})`}}}function La(t,e=3,r=100*1024){const n=ut(t,e);return _l(n)>r?La(t,e-1,r):n}function ji(t,e,r=1/0,n=1/0,i=fl()){const[o,a]=i;if(e==null||["number","boolean","string"].includes(typeof e)&&!Ef(e))return e;const s=gl(t,e);if(!s.startsWith("[object "))return s;if(e.__sentry_skip_normalization__)return e;const u=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:r;if(u===0)return s.replace("object ","");if(o(e))return"[Circular ~]";const l=e;if(l&&typeof l.toJSON=="function")try{const m=l.toJSON();return ji("",m,u-1,n,i)}catch{}const d=Array.isArray(e)?[]:{};let h=0;const y=Oa(e);for(const m in y){if(!Object.prototype.hasOwnProperty.call(y,m))continue;if(h>=n){d[m]="[MaxProperties ~]";break}const E=y[m];d[m]=ji(m,E,u-1,n,i),h++}return a(e),d}function gl(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof N.global!="undefined"&&e===N.global)return"[Global]";if(typeof window!="undefined"&&e===window)return"[Window]";if(typeof document!="undefined"&&e===document)return"[Document]";if(ga(e))return"[VueViewModel]";if(bf(e))return"[SyntheticEvent]";if(typeof e=="number"&&e!==e)return"[NaN]";if(typeof e=="function")return`[Function: ${ot(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const r=yl(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}function yl(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function ml(t){return~-encodeURI(t).split(/%..|./).length}function _l(t){return ml(JSON.stringify(t))}var rt;(function(t){t[t.PENDING=0]="PENDING";const r=1;t[t.RESOLVED=r]="RESOLVED";const n=2;t[t.REJECTED=n]="REJECTED"})(rt||(rt={}));function Tt(t){return new Ne(e=>{e(t)})}function cn(t){return new Ne((e,r)=>{r(t)})}class Ne{constructor(e){Ne.prototype.__init.call(this),Ne.prototype.__init2.call(this),Ne.prototype.__init3.call(this),Ne.prototype.__init4.call(this),this._state=rt.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(r){this._reject(r)}}then(e,r){return new Ne((n,i)=>{this._handlers.push([!1,o=>{if(!e)n(o);else try{n(e(o))}catch(a){i(a)}},o=>{if(!r)i(o);else try{n(r(o))}catch(a){i(a)}}]),this._executeHandlers()})}catch(e){return this.then(r=>r,e)}finally(e){return new Ne((r,n)=>{let i,o;return this.then(a=>{o=!1,i=a,e&&e()},a=>{o=!0,i=a,e&&e()}).then(()=>{if(o){n(i);return}r(i)})})}__init(){this._resolve=e=>{this._setResult(rt.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(rt.REJECTED,e)}}__init3(){this._setResult=(e,r)=>{if(this._state===rt.PENDING){if(yi(r)){r.then(this._resolve,this._reject);return}this._state=e,this._value=r,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===rt.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(r=>{r[0]||(this._state===rt.RESOLVED&&r[1](this._value),this._state===rt.REJECTED&&r[2](this._value),r[0]=!0)})}}}function vl(t){const e=[];function r(){return t===void 0||e.length<t}function n(a){return e.splice(e.indexOf(a),1)[0]}function i(a){if(!r())return cn(new Me("Not adding Promise because buffer limit was reached."));const s=a();return e.indexOf(s)===-1&&e.push(s),s.then(()=>n(s)).then(null,()=>n(s).then(null,()=>{})),s}function o(a){return new Ne((s,u)=>{let l=e.length;if(!l)return s(!0);const d=setTimeout(()=>{a&&a>0&&s(!1)},a);e.forEach(h=>{Tt(h).then(()=>{--l||(clearTimeout(d),s(!0))},u)})})}return{$:e,add:i,drain:o}}function $i(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const r=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:r,hash:n,relative:e[5]+r+n}}const bl=["fatal","error","warning","log","info","debug"];function El(t){return t==="warn"?"warning":bl.includes(t)?t:"log"}const Ga=fr(),Bi={nowSeconds:()=>Date.now()/1e3};function wl(){const{performance:t}=Ga;if(!t||!t.now)return;const e=Date.now()-t.now();return{now:()=>t.now(),timeOrigin:e}}function Sl(){try{return dl(module,"perf_hooks").performance}catch{return}}const Ci=hl()?Sl():wl(),qa=Ci===void 0?Bi:{nowSeconds:()=>(Ci.timeOrigin+Ci.now())/1e3},un=Bi.nowSeconds.bind(Bi),Di=qa.nowSeconds.bind(qa);(()=>{const{performance:t}=Ga;if(!t||!t.now)return;const e=3600*1e3,r=t.now(),n=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+r-n):e,o=i<e,a=t.timing&&t.timing.navigationStart,u=typeof a=="number"?Math.abs(a+r-n):e,l=u<e;return o||l?i<=u?t.timeOrigin:a:n})();function hr(t,e=[]){return[t,e]}function Rl(t,e){const[r,n]=t;return[r,[...n,e]]}function Wa(t,e){const r=t[1];for(const n of r){const i=n[0].type;if(e(n,i))return!0}return!1}function Mi(t,e){return(e||new TextEncoder).encode(t)}function kl(t,e){const[r,n]=t;let i=JSON.stringify(r);function o(a){typeof i=="string"?i=typeof a=="string"?i+a:[Mi(i,e),a]:i.push(typeof a=="string"?Mi(a,e):a)}for(const a of n){const[s,u]=a;if(o(`
${JSON.stringify(s)}
`),typeof u=="string"||u instanceof Uint8Array)o(u);else{let l;try{l=JSON.stringify(u)}catch{l=JSON.stringify(ut(u))}o(l)}}return typeof i=="string"?i:Tl(i)}function Tl(t){const e=t.reduce((i,o)=>i+o.length,0),r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function Al(t,e){const r=typeof t.data=="string"?Mi(t.data,e):t.data;return[en({type:"attachment",length:r.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),r]}const Ol={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function Ha(t){return Ol[t]}function Ya(t){if(!t||!t.sdk)return;const{name:e,version:r}=t.sdk;return{name:e,version:r}}function xl(t,e,r,n){const i=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!r&&{dsn:Zr(n)},...i&&{trace:en({...i})}}}function Nl(t,e,r){const n=[{type:"client_report"},{timestamp:r||un(),discarded_events:t}];return hr(e?{dsn:e}:{},[n])}const Pl=60*1e3;function Il(t,e=Date.now()){const r=parseInt(`${t}`,10);if(!isNaN(r))return r*1e3;const n=Date.parse(`${t}`);return isNaN(n)?Pl:n-e}function jl(t,e){return t[e]||t.all||0}function $l(t,e,r=Date.now()){return jl(t,e)>r}function Bl(t,{statusCode:e,headers:r},n=Date.now()){const i={...t},o=r&&r["x-sentry-rate-limits"],a=r&&r["retry-after"];if(o)for(const s of o.trim().split(",")){const[u,l]=s.split(":",2),d=parseInt(u,10),h=(isNaN(d)?60:d)*1e3;if(!l)i.all=n+h;else for(const y of l.split(";"))i[y]=n+h}else a?i.all=n+Il(a,n):e===429&&(i.all=n+60*1e3);return i}const Fi="production";function Ui(){return Ra("globalEventProcessors",()=>[])}function Cl(t){Ui().push(t)}function fn(t,e,r,n=0){return new Ne((i,o)=>{const a=t[n];if(e===null||typeof a!="function")i(e);else{const s=a({...e},r);(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&a.id&&s===null&&C.log(`Event processor "${a.id}" dropped event`),yi(s)?s.then(u=>fn(t,u,r,n+1).then(i)).then(null,o):fn(t,s,r,n+1).then(i).then(null,o)}})}function Dl(t){const e=Di(),r={sid:st(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Fl(r)};return t&&qt(r,t),r}function qt(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Di(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:st()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Ml(t,e){let r={};e?r={status:e}:t.status==="ok"&&(r={status:"exited"}),qt(t,r)}function Fl(t){return en({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const Ul=100;class At{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Va()}static clone(e){const r=new At;return e&&(r._breadcrumbs=[...e._breadcrumbs],r._tags={...e._tags},r._extra={...e._extra},r._contexts={...e._contexts},r._user=e._user,r._level=e._level,r._span=e._span,r._session=e._session,r._transactionName=e._transactionName,r._fingerprint=e._fingerprint,r._eventProcessors=[...e._eventProcessors],r._requestSession=e._requestSession,r._attachments=[...e._attachments],r._sdkProcessingMetadata={...e._sdkProcessingMetadata},r._propagationContext={...e._propagationContext}),r}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&qt(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const r=e(this);return r instanceof At?r:this}return e instanceof At?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):Dt(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Va(),this}addBreadcrumb(e,r){const n=typeof r=="number"?r:Ul;if(n<=0)return this;const i={timestamp:un(),...e},o=this._breadcrumbs;return o.push(i),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,r={},n){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const a=this._span.transaction;if(a){e.sdkProcessingMetadata={dynamicSamplingContext:a.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const s=a.name;s&&(e.tags={transaction:s,...e.tags})}}this._applyFingerprint(e);const i=this._getBreadcrumbs(),o=[...e.breadcrumbs||[],...i];return e.breadcrumbs=o.length>0?o:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},fn([...n||[],...Ui(),...this._eventProcessors],e,r)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?Ii(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function Va(){return{traceId:st(),spanId:st().substring(16)}}const za=4,Ll=100;class Ka{constructor(e,r=new At,n=za){this._version=n,this._stack=[{scope:r}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){const r=this.getStackTop();r.client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=At.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const r=this.pushScope();try{e(r)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,r){const n=this._lastEventId=r&&r.event_id?r.event_id:st(),i=new Error("Sentry syntheticException");return this._withClient((o,a)=>{o.captureException(e,{originalException:e,syntheticException:i,...r,event_id:n},a)}),n}captureMessage(e,r,n){const i=this._lastEventId=n&&n.event_id?n.event_id:st(),o=new Error(e);return this._withClient((a,s)=>{a.captureMessage(e,r,{originalException:e,syntheticException:o,...n,event_id:i},s)}),i}captureEvent(e,r){const n=r&&r.event_id?r.event_id:st();return e.type||(this._lastEventId=n),this._withClient((i,o)=>{i.captureEvent(e,{...r,event_id:n},o)}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,r){const{scope:n,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:a=Ll}=i.getOptions&&i.getOptions()||{};if(a<=0)return;const u={timestamp:un(),...e},l=o?ka(()=>o(u,r)):u;l!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",l,r),n.addBreadcrumb(l,a))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,r){this.getScope().setTag(e,r)}setExtra(e,r){this.getScope().setExtra(e,r)}setContext(e,r){this.getScope().setContext(e,r)}configureScope(e){const{scope:r,client:n}=this.getStackTop();n&&e(r)}run(e){const r=Xa(this);try{e(this)}finally{Xa(r)}}getIntegration(e){const r=this.getClient();if(!r)return null;try{return r.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,r){const n=this._callExtensionMethod("startTransaction",e,r);if((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&!n){const i=this.getClient();console.warn(i?`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`:"Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const r=this.getStackTop().scope,n=r.getSession();n&&Ml(n),this._sendSessionUpdate(),r.setSession()}startSession(e){const{scope:r,client:n}=this.getStackTop(),{release:i,environment:o=Fi}=n&&n.getOptions()||{},{userAgent:a}=ye.navigator||{},s=Dl({release:i,environment:o,user:r.getUser(),...a&&{userAgent:a},...e}),u=r.getSession&&r.getSession();return u&&u.status==="ok"&&qt(u,{status:"exited"}),this.endSession(),r.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),r=e&&e.getOptions();return Boolean(r&&r.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:r}=this.getStackTop(),n=e.getSession();n&&r&&r.captureSession&&r.captureSession(n)}_withClient(e){const{scope:r,client:n}=this.getStackTop();n&&e(n,r)}_callExtensionMethod(e,...r){const i=ln().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,r);(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function ln(){return ye.__SENTRY__=ye.__SENTRY__||{extensions:{},hub:void 0},ye}function Xa(t){const e=ln(),r=Li(e);return Ja(e,t),r}function pe(){const t=ln();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return Gl(t)}function Gl(t=ln()){return(!ql(t)||Li(t).isOlderThan(za))&&Ja(t,new Ka),Li(t)}function ql(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function Li(t){return Ra("hub",()=>new Ka,t)}function Ja(t,e){if(!t)return!1;const r=t.__SENTRY__=t.__SENTRY__||{};return r.hub=e,!0}function Wl(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=pe().getClient(),r=t||e&&e.getOptions();return!!r&&(r.enableTracing||"tracesSampleRate"in r||"tracesSampler"in r)}function Hl(t,e,r){const n=e.getOptions(),{publicKey:i}=e.getDsn()||{},{segment:o}=r&&r.getUser()||{},a=en({environment:n.environment||Fi,release:n.release,user_segment:o,public_key:i,trace_id:t});return e.emit&&e.emit("createDsc",a),a}function Qa(t,e){return pe().captureException(t,{captureContext:e})}function Yl(t){pe().withScope(t)}const Vl="7";function zl(t){const e=t.protocol?`${t.protocol}:`:"",r=t.port?`:${t.port}`:"";return`${e}//${t.host}${r}${t.path?`/${t.path}`:""}/api/`}function Kl(t){return`${zl(t)}${t.projectId}/envelope/`}function Xl(t,e){return Yf({sentry_key:t.publicKey,sentry_version:Vl,...e&&{sentry_client:`${e.name}/${e.version}`}})}function Jl(t,e={}){const r=typeof e=="string"?e:e.tunnel,n=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return r||`${Kl(t)}?${Xl(t,n)}`}function Ql(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function Zl(t,e,r,n){const i=Ya(r),o={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!n&&{dsn:Zr(e)}},a="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return hr(o,[a])}function ep(t,e,r,n){const i=Ya(r),o=t.type&&t.type!=="replay_event"?t.type:"event";Ql(t,r&&r.sdk);const a=xl(t,i,n,e);return delete t.sdkProcessingMetadata,hr(a,[[{type:o},t]])}const Za=[];function tp(t){const e={};return t.forEach(r=>{const{name:n}=r,i=e[n];i&&!i.isDefaultInstance&&r.isDefaultInstance||(e[n]=r)}),Object.keys(e).map(r=>e[r])}function rp(t){const e=t.defaultIntegrations||[],r=t.integrations;e.forEach(a=>{a.isDefaultInstance=!0});let n;Array.isArray(r)?n=[...e,...r]:typeof r=="function"?n=Ii(r(e)):n=e;const i=tp(n),o=ip(i,a=>a.name==="Debug");if(o!==-1){const[a]=i.splice(o,1);i.push(a)}return i}function np(t,e){const r={};return e.forEach(n=>{n&&es(t,n,r)}),r}function es(t,e,r){if(r[e.name]=e,Za.indexOf(e.name)===-1&&(e.setupOnce(Cl,pe),Za.push(e.name)),t.on&&typeof e.preprocessEvent=="function"){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,o)=>n(i,o,t))}if(t.addEventProcessor&&typeof e.processEvent=="function"){const n=e.processEvent.bind(e),i=Object.assign((o,a)=>n(o,a,t),{id:e.name});t.addEventProcessor(i)}(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.log(`Integration installed: ${e.name}`)}function ip(t,e){for(let r=0;r<t.length;r++)if(e(t[r])===!0)return r;return-1}function op(t,e,r,n,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,s={...e,event_id:e.event_id||r.event_id||st(),timestamp:e.timestamp||un()},u=r.integrations||t.integrations.map(y=>y.name);ap(s,t),up(s,u),e.type===void 0&&sp(s,t.stackParser);let l=n;r.captureContext&&(l=At.clone(l).update(r.captureContext));let d=Tt(s);const h=i&&i.getEventProcessors?i.getEventProcessors():[];if(l){if(l.getAttachments){const y=[...r.attachments||[],...l.getAttachments()];y.length&&(r.attachments=y)}d=l.applyToEvent(s,r,h)}else d=fn([...h,...Ui()],s,r);return d.then(y=>(y&&cp(y),typeof o=="number"&&o>0?fp(y,o,a):y))}function ap(t,e){const{environment:r,release:n,dist:i,maxValueLength:o=250}=e;"environment"in t||(t.environment="environment"in e?r:Fi),t.release===void 0&&n!==void 0&&(t.release=n),t.dist===void 0&&i!==void 0&&(t.dist=i),t.message&&(t.message=Mt(t.message,o));const a=t.exception&&t.exception.values&&t.exception.values[0];a&&a.value&&(a.value=Mt(a.value,o));const s=t.request;s&&s.url&&(s.url=Mt(s.url,o))}const ts=new WeakMap;function sp(t,e){const r=ye._sentryDebugIds;if(!r)return;let n;const i=ts.get(e);i?n=i:(n=new Map,ts.set(e,n));const o=Object.keys(r).reduce((a,s)=>{let u;const l=n.get(s);l?u=l:(u=e(s),n.set(s,u));for(let d=u.length-1;d>=0;d--){const h=u[d];if(h.filename){a[h.filename]=r[s];break}}return a},{});try{t.exception.values.forEach(a=>{a.stacktrace.frames.forEach(s=>{s.filename&&(s.debug_id=o[s.filename])})})}catch{}}function cp(t){const e={};try{t.exception.values.forEach(n=>{n.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?e[i.abs_path]=i.debug_id:i.filename&&(e[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const r=t.debug_meta.images;Object.keys(e).forEach(n=>{r.push({type:"sourcemap",code_file:n,debug_id:e[n]})})}function up(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function fp(t,e,r){if(!t)return null;const n={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(i=>({...i,...i.data&&{data:ut(i.data,e,r)}}))},...t.user&&{user:ut(t.user,e,r)},...t.contexts&&{contexts:ut(t.contexts,e,r)},...t.extra&&{extra:ut(t.extra,e,r)}};return t.contexts&&t.contexts.trace&&n.contexts&&(n.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(n.contexts.trace.data=ut(t.contexts.trace.data,e,r))),t.spans&&(n.spans=t.spans.map(i=>(i.data&&(i.data=ut(i.data,e,r)),i))),n}const rs="Not capturing exception because it's already been captured.";class lp{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Hf(e.dsn):(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn("No DSN provided, client will not do anything."),this._dsn){const r=Jl(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}}captureException(e,r,n){if(Ua(e)){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.log(rs);return}let i=r&&r.event_id;return this._process(this.eventFromException(e,r).then(o=>this._captureEvent(o,r,n)).then(o=>{i=o})),i}captureMessage(e,r,n,i){let o=n&&n.event_id;const a=da(e)?this.eventFromMessage(String(e),r,n):this.eventFromException(e,n);return this._process(a.then(s=>this._captureEvent(s,n,i)).then(s=>{o=s})),o}captureEvent(e,r,n){if(r&&r.originalException&&Ua(r.originalException)){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.log(rs);return}let i=r&&r.event_id;return this._process(this._captureEvent(e,r,n).then(o=>{i=o})),i}captureSession(e){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn("SDK not enabled, will not capture session.");return}typeof e.release!="string"?(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),qt(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const r=this._transport;return r?this._isClientDoneProcessing(e).then(n=>r.flush(e).then(i=>n&&i)):Tt(!0)}close(e){return this.flush(e).then(r=>(this.getOptions().enabled=!1,r))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=np(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){es(this,e,this._integrations)}sendEvent(e,r={}){if(this.emit("beforeSendEvent",e,r),this._dsn){let n=ep(e,this._dsn,this._options._metadata,this._options.tunnel);for(const o of r.attachments||[])n=Rl(n,Al(o,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(n);i&&i.then(o=>this.emit("afterSendEvent",e,o),null)}}sendSession(e){if(this._dsn){const r=Zl(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(r)}}recordDroppedEvent(e,r,n){if(this._options.sendClientReports){const i=`${e}:${r}`;(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}on(e,r){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(r)}emit(e,...r){this._hooks[e]&&this._hooks[e].forEach(n=>n(...r))}_updateSessionFromEvent(e,r){let n=!1,i=!1;const o=r.exception&&r.exception.values;if(o){i=!0;for(const u of o){const l=u.mechanism;if(l&&l.handled===!1){n=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&n)&&(qt(e,{...n&&{status:"crashed"},errors:e.errors||Number(i||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Ne(r=>{let n=0;const i=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),r(!0)):(n+=i,e&&n>=e&&(clearInterval(o),r(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,r,n){const i=this.getOptions(),o=Object.keys(this._integrations);return!r.integrations&&o.length>0&&(r.integrations=o),this.emit("preprocessEvent",e,r),op(i,e,r,n,this).then(a=>{if(a===null)return a;const{propagationContext:s}=a.sdkProcessingMetadata||{};if(!(a.contexts&&a.contexts.trace)&&s){const{traceId:l,spanId:d,parentSpanId:h,dsc:y}=s;a.contexts={trace:{trace_id:l,span_id:d,parent_span_id:h},...a.contexts};const m=y||Hl(l,this,n);a.sdkProcessingMetadata={dynamicSamplingContext:m,...a.sdkProcessingMetadata}}return a})}_captureEvent(e,r={},n){return this._processEvent(e,r,n).then(i=>i.event_id,i=>{if(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__){const o=i;o.logLevel==="log"?C.log(o.message):C.warn(o)}})}_processEvent(e,r,n){const i=this.getOptions(),{sampleRate:o}=i;if(!this._isEnabled())return cn(new Me("SDK not enabled, will not capture event.","log"));const a=is(e),s=ns(e),u=e.type||"error",l=`before send for type \`${u}\``;if(s&&typeof o=="number"&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),cn(new Me(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const d=u==="replay_event"?"replay":u;return this._prepareEvent(e,r,n).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",d,e),new Me("An event processor returned `null`, will not send event.","log");if(r.data&&r.data.__sentry__===!0)return h;const m=hp(i,h,r);return pp(m,l)}).then(h=>{if(h===null)throw this.recordDroppedEvent("before_send",d,e),new Me(`${l} returned \`null\`, will not send event.`,"log");const y=n&&n.getSession();!a&&y&&this._updateSessionFromEvent(y,h);const m=h.transaction_info;if(a&&m&&h.transaction!==e.transaction){const E="custom";h.transaction_info={...m,source:E}}return this.sendEvent(h,r),h}).then(null,h=>{throw h instanceof Me?h:(this.captureException(h,{data:{__sentry__:!0},originalException:h}),new Me(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(e){this._numProcessing++,e.then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,r=>{(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.error("Error while sending event:",r)});(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(r=>{const[n,i]=r.split(":");return{reason:n,category:i,quantity:e[r]}})}}function pp(t,e){const r=`${e} must return \`null\` or a valid event.`;if(yi(t))return t.then(n=>{if(!Dt(n)&&n!==null)throw new Me(r);return n},n=>{throw new Me(`${e} rejected with ${n}`)});if(!Dt(t)&&t!==null)throw new Me(r);return t}function hp(t,e,r){const{beforeSend:n,beforeSendTransaction:i}=t;return ns(e)&&n?n(e,r):is(e)&&i?i(e,r):e}function ns(t){return t.type===void 0}function is(t){return t.type==="transaction"}function dp(t,e){e.debug===!0&&(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__?C.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const r=pe();r.getScope().update(e.initialScope);const i=new t(e);r.bindClient(i)}const gp=30;function os(t,e,r=vl(t.bufferSize||gp)){let n={};const i=a=>r.drain(a);function o(a){const s=[];if(Wa(a,(h,y)=>{const m=Ha(y);if($l(n,m)){const E=as(h,y);t.recordDroppedEvent("ratelimit_backoff",m,E)}else s.push(h)}),s.length===0)return Tt();const u=hr(a[0],s),l=h=>{Wa(u,(y,m)=>{const E=as(y,m);t.recordDroppedEvent(h,Ha(m),E)})},d=()=>e({body:kl(u,t.textEncoder)}).then(h=>(h.statusCode!==void 0&&(h.statusCode<200||h.statusCode>=300)&&(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`Sentry responded with status code ${h.statusCode} to sent event.`),n=Bl(n,h),h),h=>{throw l("network_error"),h});return r.add(d).then(h=>h,h=>{if(h instanceof Me)return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.error("Skipped sending event because buffer is full."),l("queue_overflow"),Tt();throw h})}return o.__sentry__baseTransport__=!0,{send:o,flush:i}}function as(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}const pn="7.71.0";let ss;class hn{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=hn.id}setupOnce(){ss=Function.prototype.toString;try{Function.prototype.toString=function(...e){const r=ki(this)||this;return ss.apply(r,e)}}catch{}}}hn.__initStatic();const yp=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],mp=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class dr{static __initStatic(){this.id="InboundFilters"}constructor(e={}){this.name=dr.id,this._options=e}setupOnce(e,r){const n=i=>{const o=r();if(o){const a=o.getIntegration(dr);if(a){const s=o.getClient(),u=s?s.getOptions():{},l=_p(a._options,u);return vp(i,l)?null:i}}return i};n.id=this.name,e(n)}}dr.__initStatic();function _p(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:yp],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[],...t.disableTransactionDefaults?[]:mp],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function vp(t,e){return e.ignoreInternal&&kp(t)?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`Event dropped due to being internal Sentry Error.
Event: ${ct(t)}`),!0):bp(t,e.ignoreErrors)?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${ct(t)}`),!0):Ep(t,e.ignoreTransactions)?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${ct(t)}`),!0):wp(t,e.denyUrls)?((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${ct(t)}.
Url: ${dn(t)}`),!0):Sp(t,e.allowUrls)?!1:((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${ct(t)}.
Url: ${dn(t)}`),!0)}function bp(t,e){return t.type||!e||!e.length?!1:Rp(t).some(r=>zr(r,e))}function Ep(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const r=t.transaction;return r?zr(r,e):!1}function wp(t,e){if(!e||!e.length)return!1;const r=dn(t);return r?zr(r,e):!1}function Sp(t,e){if(!e||!e.length)return!0;const r=dn(t);return r?zr(r,e):!0}function Rp(t){const e=[];t.message&&e.push(t.message);let r;try{r=t.exception.values[t.exception.values.length-1]}catch{}return r&&r.value&&(e.push(r.value),r.type&&e.push(`${r.type}: ${r.value}`)),(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&e.length===0&&C.error(`Could not extract message for event ${ct(t)}`),e}function kp(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function Tp(t=[]){for(let e=t.length-1;e>=0;e--){const r=t[e];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null}function dn(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?Tp(e):null}catch{return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.error(`Cannot extract url for event ${ct(t)}`),null}}const Z=ye;let Gi=0;function cs(){return Gi>0}function Ap(){Gi++,setTimeout(()=>{Gi--})}function Wt(t,e={},r){if(typeof t!="function")return t;try{const i=t.__sentry_wrapped__;if(i)return i;if(ki(t))return t}catch{return t}const n=function(){const i=Array.prototype.slice.call(arguments);try{r&&typeof r=="function"&&r.apply(this,arguments);const o=i.map(a=>Wt(a,e));return t.apply(this,o)}catch(o){throw Ap(),Yl(a=>{a.addEventProcessor(s=>(e.mechanism&&(Pi(s,void 0,void 0),Gt(s,e.mechanism)),s.extra={...s.extra,arguments:i},s)),Qa(o)}),o}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}catch{}Aa(n,t),Ri(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get(){return t.name}})}catch{}return n}function us(t,e){const r=Wi(t,e),n={type:e&&e.name,value:Pp(e)};return r.length&&(n.stacktrace={frames:r}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function Op(t,e,r,n){const o=pe().getClient(),a=o&&o.getOptions().normalizeDepth,s={exception:{values:[{type:Vr(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:$p(e,{isUnhandledRejection:n})}]},extra:{__serialized__:La(e,a)}};if(r){const u=Wi(t,r);u.length&&(s.exception.values[0].stacktrace={frames:u})}return s}function qi(t,e){return{exception:{values:[us(t,e)]}}}function Wi(t,e){const r=e.stacktrace||e.stack||"",n=Np(e);try{return t(r,n)}catch{}return[]}const xp=/Minified React error #\d+;/i;function Np(t){if(t){if(typeof t.framesToPop=="number")return t.framesToPop;if(xp.test(t.message))return 1}return 0}function Pp(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Ip(t,e,r,n){const i=r&&r.syntheticException||void 0,o=Hi(t,e,i,n);return Gt(o),o.level="error",r&&r.event_id&&(o.event_id=r.event_id),Tt(o)}function jp(t,e,r="info",n,i){const o=n&&n.syntheticException||void 0,a=Yi(t,e,o,i);return a.level=r,n&&n.event_id&&(a.event_id=n.event_id),Tt(a)}function Hi(t,e,r,n,i){let o;if(gi(e)&&e.error)return qi(t,e.error);if(ha(e)||mf(e)){const a=e;if("stack"in e)o=qi(t,e);else{const s=a.name||(ha(a)?"DOMError":"DOMException"),u=a.message?`${s}: ${a.message}`:s;o=Yi(t,u,r,n),Pi(o,u)}return"code"in a&&(o.tags={...o.tags,"DOMException.code":`${a.code}`}),o}return pa(e)?qi(t,e):Dt(e)||Vr(e)?(o=Op(t,e,r,i),Gt(o,{synthetic:!0}),o):(o=Yi(t,e,r,n),Pi(o,`${e}`,void 0),Gt(o,{synthetic:!0}),o)}function Yi(t,e,r,n){const i={message:e};if(n&&r){const o=Wi(t,r);o.length&&(i.exception={values:[{value:e,stacktrace:{frames:o}}]})}return i}function $p(t,{isUnhandledRejection:e}){const r=Vf(t),n=e?"promise rejection":"exception";return gi(t)?`Event \`ErrorEvent\` captured as ${n} with message \`${t.message}\``:Vr(t)?`Event \`${Bp(t)}\` (type=${t.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}function Bp(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function Cp(t,{metadata:e,tunnel:r,dsn:n}){const i={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!r&&!!n&&{dsn:Zr(n)}},o=Dp(t);return hr(i,[o])}function Dp(t){return[{type:"user_report"},t]}class Mp extends lp{constructor(e){const r=Z.SENTRY_SDK_SOURCE||pl();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${r}:@sentry/browser`,version:pn}],version:pn},super(e),e.sendClientReports&&Z.document&&Z.document.addEventListener("visibilitychange",()=>{Z.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,r){return Ip(this._options.stackParser,e,r,this._options.attachStacktrace)}eventFromMessage(e,r="info",n){return jp(this._options.stackParser,e,r,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn("SDK not enabled, will not capture user feedback.");return}const r=Cp(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(r)}_prepareEvent(e,r,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,r,n)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.log("Sending outcomes:",e);const r=Nl(e,this._options.tunnel&&Zr(this._dsn));this._sendEnvelope(r)}}let gr;function Fp(){if(gr)return gr;if(xi(Z.fetch))return gr=Z.fetch.bind(Z);const t=Z.document;let e=Z.fetch;if(t&&typeof t.createElement=="function")try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r);const n=r.contentWindow;n&&n.fetch&&(e=n.fetch),t.head.removeChild(r)}catch(r){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return gr=e.bind(Z)}function Up(){gr=void 0}function Lp(t,e=Fp()){let r=0,n=0;function i(o){const a=o.body.length;r+=a,n++;const s={body:o.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:r<=6e4&&n<15,...t.fetchOptions};try{return e(t.url,s).then(u=>(r-=a,n--,{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}))}catch(u){return Up(),r-=a,n--,cn(u)}}return os(t,i)}const Gp=4;function qp(t){function e(r){return new Ne((n,i)=>{const o=new XMLHttpRequest;o.onerror=i,o.onreadystatechange=()=>{o.readyState===Gp&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",t.url);for(const a in t.headers)Object.prototype.hasOwnProperty.call(t.headers,a)&&o.setRequestHeader(a,t.headers[a]);o.send(r.body)})}return os(t,e)}const gn="?",Wp=30,Hp=40,Yp=50;function Vi(t,e,r,n){const i={filename:t,function:e,in_app:!0};return r!==void 0&&(i.lineno=r),n!==void 0&&(i.colno=n),i}const Vp=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,zp=/\((\S*)(?::(\d+))(?::(\d+))\)/,Kp=[Wp,t=>{const e=Vp.exec(t);if(e){if(e[2]&&e[2].indexOf("eval")===0){const o=zp.exec(e[2]);o&&(e[2]=o[1],e[3]=o[2],e[4]=o[3])}const[n,i]=fs(e[1]||gn,e[2]);return Vi(i,n,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],Xp=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Jp=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Qp=[Yp,t=>{const e=Xp.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const o=Jp.exec(e[3]);o&&(e[1]=e[1]||"eval",e[3]=o[1],e[4]=o[2],e[5]="")}let n=e[3],i=e[1]||gn;return[i,n]=fs(i,n),Vi(n,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}],Zp=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,eh=$a(...[Kp,Qp,[Hp,t=>{const e=Zp.exec(t);return e?Vi(e[2],e[1]||gn,+e[3],e[4]?+e[4]:void 0):void 0}]]),fs=(t,e)=>{const r=t.indexOf("safari-extension")!==-1,n=t.indexOf("safari-web-extension")!==-1;return r||n?[t.indexOf("@")!==-1?t.split("@")[0]:gn,r?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};class Ht{static __initStatic(){this.id="GlobalHandlers"}constructor(e){this.name=Ht.id,this._options={onerror:!0,onunhandledrejection:!0,...e},this._installFunc={onerror:th,onunhandledrejection:rh}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const r in e){const n=this._installFunc[r];n&&e[r]&&(oh(r),n(),this._installFunc[r]=void 0)}}}Ht.__initStatic();function th(){at("error",t=>{const[e,r,n]=hs();if(!e.getIntegration(Ht))return;const{msg:i,url:o,line:a,column:s,error:u}=t;if(cs()||u&&u.__sentry_own_request__)return;const l=u===void 0&&St(i)?ih(i,o,a,s):ls(Hi(r,u||i,void 0,n,!1),o,a,s);l.level="error",ps(e,u,l,"onerror")})}function rh(){at("unhandledrejection",t=>{const[e,r,n]=hs();if(!e.getIntegration(Ht))return;let i=t;try{"reason"in t?i=t.reason:"detail"in t&&"reason"in t.detail&&(i=t.detail.reason)}catch{}if(cs()||i&&i.__sentry_own_request__)return!0;const o=da(i)?nh(i):Hi(r,i,void 0,n,!0);o.level="error",ps(e,i,o,"onunhandledrejection")})}function nh(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function ih(t,e,r,n){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=gi(t)?t.message:t,a="Error";const s=o.match(i);return s&&(a=s[1],o=s[2]),ls({exception:{values:[{type:a,value:o}]}},e,r,n)}function ls(t,e,r,n){const i=t.exception=t.exception||{},o=i.values=i.values||[],a=o[0]=o[0]||{},s=a.stacktrace=a.stacktrace||{},u=s.frames=s.frames||[],l=isNaN(parseInt(n,10))?void 0:n,d=isNaN(parseInt(r,10))?void 0:r,h=St(e)&&e.length>0?e:Mf();return u.length===0&&u.push({colno:l,filename:h,function:"?",in_app:!0,lineno:d}),t}function oh(t){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.log(`Global Handler attached: ${t}`)}function ps(t,e,r,n){Gt(r,{handled:!1,type:n}),t.captureEvent(r,{originalException:e})}function hs(){const t=pe(),e=t.getClient(),r=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,r.stackParser,r.attachStacktrace]}const ah=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class yn{static __initStatic(){this.id="TryCatch"}constructor(e){this.name=yn.id,this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&be(Z,"setTimeout",ds),this._options.setInterval&&be(Z,"setInterval",ds),this._options.requestAnimationFrame&&be(Z,"requestAnimationFrame",sh),this._options.XMLHttpRequest&&"XMLHttpRequest"in Z&&be(XMLHttpRequest.prototype,"send",ch);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:ah).forEach(uh)}}yn.__initStatic();function ds(t){return function(...e){const r=e[0];return e[0]=Wt(r,{mechanism:{data:{function:ot(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function sh(t){return function(e){return t.apply(this,[Wt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:ot(t)},handled:!1,type:"instrument"}})])}}function ch(t){return function(...e){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in r&&typeof r[i]=="function"&&be(r,i,function(o){const a={mechanism:{data:{function:i,handler:ot(o)},handled:!1,type:"instrument"}},s=ki(o);return s&&(a.mechanism.data.handler=ot(s)),Wt(o,a)})}),t.apply(this,e)}}function uh(t){const e=Z,r=e[t]&&e[t].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(be(r,"addEventListener",function(n){return function(i,o,a){try{typeof o.handleEvent=="function"&&(o.handleEvent=Wt(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ot(o),target:t},handled:!1,type:"instrument"}}))}catch{}return n.apply(this,[i,Wt(o,{mechanism:{data:{function:"addEventListener",handler:ot(o),target:t},handled:!1,type:"instrument"}}),a])}}),be(r,"removeEventListener",function(n){return function(i,o,a){const s=o;try{const u=s&&s.__sentry_wrapped__;u&&n.call(this,i,u,a)}catch{}return n.call(this,i,s,a)}}))}const mn=1024;class _n{static __initStatic(){this.id="Breadcrumbs"}constructor(e){this.name=_n.id,this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){if(this.options.console&&at("console",ph),this.options.dom&&at("dom",lh(this.options.dom)),this.options.xhr&&at("xhr",hh),this.options.fetch&&at("fetch",dh),this.options.history&&at("history",gh),this.options.sentry){const e=pe().getClient();e&&e.on&&e.on("beforeSendEvent",fh)}}}_n.__initStatic();function fh(t){pe().addBreadcrumb({category:`sentry.${t.type==="transaction"?"transaction":"event"}`,event_id:t.event_id,level:t.level,message:ct(t)},{event:t})}function lh(t){function e(r){let n,i=typeof t=="object"?t.serializeAttribute:void 0,o=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;o&&o>mn&&((typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`\`dom.maxStringLength\` cannot exceed ${mn}, but a value of ${o} was configured. Sentry will use ${mn} instead.`),o=mn),typeof i=="string"&&(i=[i]);try{const a=r.event;n=yh(a)?wi(a.target,{keyAttrs:i,maxStringLength:o}):wi(a,{keyAttrs:i,maxStringLength:o})}catch{n="<unknown>"}n.length!==0&&pe().addBreadcrumb({category:`ui.${r.name}`,message:n},{event:r.event,name:r.name,global:r.global})}return e}function ph(t){const e={category:"console",data:{arguments:t.args,logger:"console"},level:El(t.level),message:ya(t.args," ")};if(t.level==="assert")if(t.args[0]===!1)e.message=`Assertion failed: ${ya(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1);else return;pe().addBreadcrumb(e,{input:t.args,level:t.level})}function hh(t){const{startTimestamp:e,endTimestamp:r}=t,n=t.xhr[lr];if(!e||!r||!n)return;const{method:i,url:o,status_code:a,body:s}=n,u={method:i,url:o,status_code:a},l={xhr:t.xhr,input:s,startTimestamp:e,endTimestamp:r};pe().addBreadcrumb({category:"xhr",data:u,type:"http"},l)}function dh(t){const{startTimestamp:e,endTimestamp:r}=t;if(!!r&&!(t.fetchData.url.match(/sentry_key/)&&t.fetchData.method==="POST"))if(t.error){const n=t.fetchData,i={data:t.error,input:t.args,startTimestamp:e,endTimestamp:r};pe().addBreadcrumb({category:"fetch",data:n,level:"error",type:"http"},i)}else{const n={...t.fetchData,status_code:t.response&&t.response.status},i={input:t.args,response:t.response,startTimestamp:e,endTimestamp:r};pe().addBreadcrumb({category:"fetch",data:n,type:"http"},i)}}function gh(t){let e=t.from,r=t.to;const n=$i(Z.location.href);let i=$i(e);const o=$i(r);i.path||(i=n),n.protocol===o.protocol&&n.host===o.host&&(r=o.relative),n.protocol===i.protocol&&n.host===i.host&&(e=i.relative),pe().addBreadcrumb({category:"navigation",data:{from:e,to:r}})}function yh(t){return!!t&&!!t.target}const mh="cause",_h=5;class vn{static __initStatic(){this.id="LinkedErrors"}constructor(e={}){this.name=vn.id,this._key=e.key||mh,this._limit=e.limit||_h}setupOnce(){}preprocessEvent(e,r,n){const i=n.getOptions();Sf(us,i.stackParser,i.maxValueLength,this._key,this._limit,e,r)}}vn.__initStatic();class bn{static __initStatic(){this.id="HttpContext"}constructor(){this.name=bn.id}setupOnce(){}preprocessEvent(e){if(!Z.navigator&&!Z.location&&!Z.document)return;const r=e.request&&e.request.url||Z.location&&Z.location.href,{referrer:n}=Z.document||{},{userAgent:i}=Z.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...i&&{"User-Agent":i}},a={...e.request,...r&&{url:r},headers:o};e.request=a}}bn.__initStatic();class En{static __initStatic(){this.id="Dedupe"}constructor(){this.name=En.id}setupOnce(e,r){}processEvent(e){if(e.type)return e;try{if(vh(e,this._previousEvent))return(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return this._previousEvent=e}}En.__initStatic();function vh(t,e){return e?!!(bh(t,e)||Eh(t,e)):!1}function bh(t,e){const r=t.message,n=e.message;return!(!r&&!n||r&&!n||!r&&n||r!==n||!ys(t,e)||!gs(t,e))}function Eh(t,e){const r=ms(e),n=ms(t);return!(!r||!n||r.type!==n.type||r.value!==n.value||!ys(t,e)||!gs(t,e))}function gs(t,e){let r=_s(t),n=_s(e);if(!r&&!n)return!0;if(r&&!n||!r&&n||(r=r,n=n,n.length!==r.length))return!1;for(let i=0;i<n.length;i++){const o=n[i],a=r[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0}function ys(t,e){let r=t.fingerprint,n=e.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;r=r,n=n;try{return r.join("")===n.join("")}catch{return!1}}function ms(t){return t.exception&&t.exception.values&&t.exception.values[0]}function _s(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}const wh=[new dr,new hn,new yn,new _n,new Ht,new vn,new En,new bn];function Sh(t={}){t.defaultIntegrations===void 0&&(t.defaultIntegrations=wh),t.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(t.release=__SENTRY_RELEASE__),Z.SENTRY_RELEASE&&Z.SENTRY_RELEASE.id&&(t.release=Z.SENTRY_RELEASE.id)),t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0);const e={...t,stackParser:zf(t.stackParser||eh),integrations:rp(t),transport:t.transport||(Ba()?Lp:qp)};dp(Mp,e),t.autoSessionTracking&&Rh()}function vs(t){t.startSession({ignoreDuration:!0}),t.captureSession()}function Rh(){if(typeof Z.document=="undefined"){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}const t=pe();!t.captureSession||(vs(t),at("history",({from:e,to:r})=>{e===void 0||e===r||vs(pe())}))}const bs=["activate","mount","update"],kh=/(?:^|[-_])(\w)/g,Th=t=>t.replace(kh,e=>e.toUpperCase()).replace(/[-_]/g,""),Ah="<Root>",zi="<Anonymous>",Oh=(t,e)=>t.repeat?t.repeat(e):t,yr=(t,e)=>{if(!t)return zi;if(t.$root===t)return Ah;if(!t.$options)return zi;const r=t.$options;let n=r.name||r._componentTag;const i=r.__file;if(!n&&i){const o=i.match(/([^/\\]+)\.vue$/);o&&(n=o[1])}return(n?`<${Th(n)}>`:zi)+(i&&e!==!1?` at ${i}`:"")},xh=t=>{if(t&&(t._isVue||t.__isVue)&&t.$parent){const e=[];let r=0;for(;t;){if(e.length>0){const i=e[e.length-1];if(i.constructor===t.constructor){r++,t=t.$parent;continue}else r>0&&(e[e.length-1]=[i,r],r=0)}e.push(t),t=t.$parent}return`

found in

${e.map((i,o)=>`${(o===0?"---> ":Oh(" ",5+o*2))+(Array.isArray(i)?`${yr(i[0])}... (${i[1]} recursive calls)`:yr(i))}`).join(`
`)}`}return`

(found in ${yr(t)})`},Nh=(t,e)=>{const{errorHandler:r,warnHandler:n,silent:i}=t.config;t.config.errorHandler=(o,a,s)=>{const u=yr(a,!1),l=a?xh(a):"",d={componentName:u,lifecycleHook:s,trace:l};if(e.attachProps&&a&&(a.$options&&a.$options.propsData?d.propsData=a.$options.propsData:a.$props&&(d.propsData=a.$props)),setTimeout(()=>{pe().withScope(h=>{h.setContext("vue",d),h.addEventProcessor(y=>(Gt(y,{handled:!1}),y)),pe().captureException(o)})}),typeof r=="function"&&r.call(t,o,a,s),e.logErrors){const h=typeof console!="undefined",y=`Error in ${s}: "${o&&o.toString()}"`;n?n.call(null,y,a,l):h&&!i&&console.error(`[Vue warn]: ${y}${l}`)}}},Es="ui.vue",Ph={activate:["activated","deactivated"],create:["beforeCreate","created"],destroy:["beforeDestroy","destroyed"],mount:["beforeMount","mounted"],update:["beforeUpdate","updated"]};function ws(){return pe().getScope().getTransaction()}function Ih(t,e,r){t.$_sentryRootSpanTimer&&clearTimeout(t.$_sentryRootSpanTimer),t.$_sentryRootSpanTimer=setTimeout(()=>{t.$root&&t.$root.$_sentryRootSpan&&(t.$root.$_sentryRootSpan.finish(e),t.$root.$_sentryRootSpan=void 0)},r)}const jh=t=>{const e=(t.hooks||[]).concat(bs).filter((n,i,o)=>o.indexOf(n)===i),r={};for(const n of e){const i=Ph[n];if(!i){(typeof __SENTRY_DEBUG__=="undefined"||__SENTRY_DEBUG__)&&C.warn(`Unknown hook: ${n}`);continue}for(const o of i)r[o]=function(){const a=this.$root===this;if(a){const l=ws();l&&(this.$_sentryRootSpan=this.$_sentryRootSpan||l.startChild({description:"Application Render",op:`${Es}.render`,origin:"auto.ui.vue"}))}const s=yr(this,!1),u=Array.isArray(t.trackComponents)?t.trackComponents.indexOf(s)>-1:t.trackComponents;if(!(!a&&!u))if(this.$_sentrySpans=this.$_sentrySpans||{},o==i[0]){const l=this.$root&&this.$root.$_sentryRootSpan||ws();if(l){const d=this.$_sentrySpans[n];d&&!d.endTimestamp&&d.finish(),this.$_sentrySpans[n]=l.startChild({description:`Vue <${s}>`,op:`${Es}.${n}`,origin:"auto.ui.vue"})}}else{const l=this.$_sentrySpans[n];if(!l)return;l.finish(),Ih(this,Di(),t.timeout)}}}return r},$h={Vue:ye.Vue,attachProps:!0,logErrors:!0,hooks:bs,timeout:2e3,trackComponents:!1,_metadata:{sdk:{name:"sentry.javascript.vue",packages:[{name:"npm:@sentry/vue",version:pn}],version:pn}}};function Bh(t={}){const e={...$h,...t};if(Sh(e),!e.Vue&&!e.app){console.warn("[@sentry/vue]: Misconfigured SDK. Vue specific errors will not be captured.\nUpdate your `Sentry.init` call with an appropriate config option:\n`app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).");return}e.app?Ii(e.app).forEach(n=>Ss(n,e)):e.Vue&&Ss(e.Vue,e)}const Ss=(t,e)=>{const r=t;(r._instance&&r._instance.isMounted)===!0&&console.warn("[@sentry/vue]: Misconfigured SDK. Vue app is already mounted. Make sure to call `app.mount()` after `Sentry.init()`."),Nh(t,e),Wl(e)&&t.mixin(jh({...e,...e.tracingOptions}))};var mr={exports:{}},Ki={},Ue={},Rs={},Xi=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},Ch=Xi,Ji=function(){return Ch()&&!!Symbol.toStringTag},ks=typeof Symbol!="undefined"&&Symbol,Dh=Xi,Mh=function(){return typeof ks!="function"||typeof Symbol!="function"||typeof ks("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Dh()},Ts={foo:{}},Fh=Object,Uh=function(){return{__proto__:Ts}.foo===Ts.foo&&!({__proto__:null}instanceof Fh)},Lh="Function.prototype.bind called on incompatible ",Qi=Array.prototype.slice,Gh=Object.prototype.toString,qh="[object Function]",Wh=function(e){var r=this;if(typeof r!="function"||Gh.call(r)!==qh)throw new TypeError(Lh+r);for(var n=Qi.call(arguments,1),i,o=function(){if(this instanceof i){var d=r.apply(this,n.concat(Qi.call(arguments)));return Object(d)===d?d:this}else return r.apply(e,n.concat(Qi.call(arguments)))},a=Math.max(0,r.length-n.length),s=[],u=0;u<a;u++)s.push("$"+u);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i},Hh=Wh,Zi=Function.prototype.bind||Hh,Yh=Zi,Vh=Yh.call(Function.call,Object.prototype.hasOwnProperty),q,Yt=SyntaxError,As=Function,Vt=TypeError,eo=function(t){try{return As('"use strict"; return ('+t+").constructor;")()}catch{}},Ot=Object.getOwnPropertyDescriptor;if(Ot)try{Ot({},"")}catch{Ot=null}var to=function(){throw new Vt},zh=Ot?function(){try{return arguments.callee,to}catch{try{return Ot(arguments,"callee").get}catch{return to}}}():to,zt=Mh(),Kh=Uh(),_e=Object.getPrototypeOf||(Kh?function(t){return t.__proto__}:null),Kt={},Xh=typeof Uint8Array=="undefined"||!_e?q:_e(Uint8Array),xt={"%AggregateError%":typeof AggregateError=="undefined"?q:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?q:ArrayBuffer,"%ArrayIteratorPrototype%":zt&&_e?_e([][Symbol.iterator]()):q,"%AsyncFromSyncIteratorPrototype%":q,"%AsyncFunction%":Kt,"%AsyncGenerator%":Kt,"%AsyncGeneratorFunction%":Kt,"%AsyncIteratorPrototype%":Kt,"%Atomics%":typeof Atomics=="undefined"?q:Atomics,"%BigInt%":typeof BigInt=="undefined"?q:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?q:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?q:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?q:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?q:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?q:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?q:FinalizationRegistry,"%Function%":As,"%GeneratorFunction%":Kt,"%Int8Array%":typeof Int8Array=="undefined"?q:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?q:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?q:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":zt&&_e?_e(_e([][Symbol.iterator]())):q,"%JSON%":typeof JSON=="object"?JSON:q,"%Map%":typeof Map=="undefined"?q:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!zt||!_e?q:_e(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?q:Promise,"%Proxy%":typeof Proxy=="undefined"?q:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?q:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?q:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!zt||!_e?q:_e(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?q:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":zt&&_e?_e(""[Symbol.iterator]()):q,"%Symbol%":zt?Symbol:q,"%SyntaxError%":Yt,"%ThrowTypeError%":zh,"%TypedArray%":Xh,"%TypeError%":Vt,"%Uint8Array%":typeof Uint8Array=="undefined"?q:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?q:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?q:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?q:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?q:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?q:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?q:WeakSet};if(_e)try{null.error}catch(t){var Jh=_e(_e(t));xt["%Error.prototype%"]=Jh}var Qh=function t(e){var r;if(e==="%AsyncFunction%")r=eo("async function () {}");else if(e==="%GeneratorFunction%")r=eo("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=eo("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&_e&&(r=_e(i.prototype))}return xt[e]=r,r},Os={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_r=Zi,wn=Vh,Zh=_r.call(Function.call,Array.prototype.concat),ed=_r.call(Function.apply,Array.prototype.splice),xs=_r.call(Function.call,String.prototype.replace),Sn=_r.call(Function.call,String.prototype.slice),td=_r.call(Function.call,RegExp.prototype.exec),rd=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,nd=/\\(\\)?/g,id=function(e){var r=Sn(e,0,1),n=Sn(e,-1);if(r==="%"&&n!=="%")throw new Yt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Yt("invalid intrinsic syntax, expected opening `%`");var i=[];return xs(e,rd,function(o,a,s,u){i[i.length]=s?xs(u,nd,"$1"):a||o}),i},od=function(e,r){var n=e,i;if(wn(Os,n)&&(i=Os[n],n="%"+i[0]+"%"),wn(xt,n)){var o=xt[n];if(o===Kt&&(o=Qh(n)),typeof o=="undefined"&&!r)throw new Vt("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Yt("intrinsic "+e+" does not exist!")},vr=function(e,r){if(typeof e!="string"||e.length===0)throw new Vt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Vt('"allowMissing" argument must be a boolean');if(td(/^%?[^%]*%?$/,e)===null)throw new Yt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=id(e),i=n.length>0?n[0]:"",o=od("%"+i+"%",r),a=o.name,s=o.value,u=!1,l=o.alias;l&&(i=l[0],ed(n,Zh([0,1],l)));for(var d=1,h=!0;d<n.length;d+=1){var y=n[d],m=Sn(y,0,1),E=Sn(y,-1);if((m==='"'||m==="'"||m==="`"||E==='"'||E==="'"||E==="`")&&m!==E)throw new Yt("property names with quotes must have matching quotes");if((y==="constructor"||!h)&&(u=!0),i+="."+y,a="%"+i+"%",wn(xt,a))s=xt[a];else if(s!=null){if(!(y in s)){if(!r)throw new Vt("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ot&&d+1>=n.length){var k=Ot(s,y);h=!!k,h&&"get"in k&&!("originalValue"in k.get)?s=k.get:s=s[y]}else h=wn(s,y),s=s[y];h&&!u&&(xt[a]=s)}}return s},br={exports:{}};(function(t){var e=Zi,r=vr,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),a=r("%Object.getOwnPropertyDescriptor%",!0),s=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}t.exports=function(h){var y=o(e,i,arguments);if(a&&s){var m=a(y,"length");m.configurable&&s(y,"length",{value:1+u(0,h.length-(arguments.length-1))})}return y};var l=function(){return o(e,n,arguments)};s?s(t.exports,"apply",{value:l}):t.exports.apply=l})(br);var Ns=vr,Ps=br.exports,ad=Ps(Ns("String.prototype.indexOf")),Rn=function(e,r){var n=Ns(e,!!r);return typeof n=="function"&&ad(e,".prototype.")>-1?Ps(n):n},sd=Ji(),cd=Rn,ro=cd("Object.prototype.toString"),kn=function(e){return sd&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:ro(e)==="[object Arguments]"},Is=function(e){return kn(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&ro(e)!=="[object Array]"&&ro(e.callee)==="[object Function]"},ud=function(){return kn(arguments)}();kn.isLegacyArguments=Is;var fd=ud?kn:Is,ld=Object.prototype.toString,pd=Function.prototype.toString,hd=/^\s*(?:function)?\*/,js=Ji(),no=Object.getPrototypeOf,dd=function(){if(!js)return!1;try{return Function("return function*() {}")()}catch{}},io,gd=function(e){if(typeof e!="function")return!1;if(hd.test(pd.call(e)))return!0;if(!js){var r=ld.call(e);return r==="[object GeneratorFunction]"}if(!no)return!1;if(typeof io=="undefined"){var n=dd();io=n?no(n):!1}return no(e)===io},$s=Function.prototype.toString,Xt=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,oo,Tn;if(typeof Xt=="function"&&typeof Object.defineProperty=="function")try{oo=Object.defineProperty({},"length",{get:function(){throw Tn}}),Tn={},Xt(function(){throw 42},null,oo)}catch(t){t!==Tn&&(Xt=null)}else Xt=null;var yd=/^\s*class\b/,ao=function(e){try{var r=$s.call(e);return yd.test(r)}catch{return!1}},so=function(e){try{return ao(e)?!1:($s.call(e),!0)}catch{return!1}},An=Object.prototype.toString,md="[object Object]",_d="[object Function]",vd="[object GeneratorFunction]",bd="[object HTMLAllCollection]",Ed="[object HTML document.all class]",wd="[object HTMLCollection]",Sd=typeof Symbol=="function"&&!!Symbol.toStringTag,Rd=!(0 in[,]),co=function(){return!1};if(typeof document=="object"){var kd=document.all;An.call(kd)===An.call(document.all)&&(co=function(e){if((Rd||!e)&&(typeof e=="undefined"||typeof e=="object"))try{var r=An.call(e);return(r===bd||r===Ed||r===wd||r===md)&&e("")==null}catch{}return!1})}var Td=Xt?function(e){if(co(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Xt(e,null,oo)}catch(r){if(r!==Tn)return!1}return!ao(e)&&so(e)}:function(e){if(co(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Sd)return so(e);if(ao(e))return!1;var r=An.call(e);return r!==_d&&r!==vd&&!/^\[object HTML/.test(r)?!1:so(e)},Ad=Td,Od=Object.prototype.toString,Bs=Object.prototype.hasOwnProperty,xd=function(e,r,n){for(var i=0,o=e.length;i<o;i++)Bs.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Nd=function(e,r,n){for(var i=0,o=e.length;i<o;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},Pd=function(e,r,n){for(var i in e)Bs.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Id=function(e,r,n){if(!Ad(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Od.call(e)==="[object Array]"?xd(e,r,i):typeof e=="string"?Nd(e,r,i):Pd(e,r,i)},jd=Id,uo=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],$d=typeof globalThis=="undefined"?Te:globalThis,Bd=function(){for(var e=[],r=0;r<uo.length;r++)typeof $d[uo[r]]=="function"&&(e[e.length]=uo[r]);return e},Cd=vr,On=Cd("%Object.getOwnPropertyDescriptor%",!0);if(On)try{On([],"length")}catch{On=null}var Cs=On,xn=jd,Dd=Bd,Ds=br.exports,fo=Rn,Nn=Cs,Md=fo("Object.prototype.toString"),Ms=Ji(),Fs=typeof globalThis=="undefined"?Te:globalThis,lo=Dd(),po=fo("String.prototype.slice"),ho=Object.getPrototypeOf,Fd=fo("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},Pn={__proto__:null};Ms&&Nn&&ho?xn(lo,function(t){var e=new Fs[t];if(Symbol.toStringTag in e){var r=ho(e),n=Nn(r,Symbol.toStringTag);if(!n){var i=ho(r);n=Nn(i,Symbol.toStringTag)}Pn["$"+t]=Ds(n.get)}}):xn(lo,function(t){var e=new Fs[t];Pn["$"+t]=Ds(e.slice)});var Ud=function(e){var r=!1;return xn(Pn,function(n,i){if(!r)try{"$"+n(e)===i&&(r=po(i,1))}catch{}}),r},Ld=function(e){var r=!1;return xn(Pn,function(n,i){if(!r)try{n(e),r=po(i,1)}catch{}}),r},Us=function(e){if(!e||typeof e!="object")return!1;if(!Ms){var r=po(Md(e),8,-1);return Fd(lo,r)>-1?r:r!=="Object"?!1:Ld(e)}return Nn?Ud(e):null},Gd=Us,qd=function(e){return!!Gd(e)};(function(t){var e=fd,r=gd,n=Us,i=qd;function o(R){return R.call.bind(R)}var a=typeof BigInt!="undefined",s=typeof Symbol!="undefined",u=o(Object.prototype.toString),l=o(Number.prototype.valueOf),d=o(String.prototype.valueOf),h=o(Boolean.prototype.valueOf);if(a)var y=o(BigInt.prototype.valueOf);if(s)var m=o(Symbol.prototype.valueOf);function E(R,di){if(typeof R!="object")return!1;try{return di(R),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function k(R){return typeof Promise!="undefined"&&R instanceof Promise||R!==null&&typeof R=="object"&&typeof R.then=="function"&&typeof R.catch=="function"}t.isPromise=k;function I(R){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(R):i(R)||S(R)}t.isArrayBufferView=I;function x(R){return n(R)==="Uint8Array"}t.isUint8Array=x;function j(R){return n(R)==="Uint8ClampedArray"}t.isUint8ClampedArray=j;function J(R){return n(R)==="Uint16Array"}t.isUint16Array=J;function D(R){return n(R)==="Uint32Array"}t.isUint32Array=D;function $(R){return n(R)==="Int8Array"}t.isInt8Array=$;function W(R){return n(R)==="Int16Array"}t.isInt16Array=W;function O(R){return n(R)==="Int32Array"}t.isInt32Array=O;function L(R){return n(R)==="Float32Array"}t.isFloat32Array=L;function ee(R){return n(R)==="Float64Array"}t.isFloat64Array=ee;function de(R){return n(R)==="BigInt64Array"}t.isBigInt64Array=de;function ae(R){return n(R)==="BigUint64Array"}t.isBigUint64Array=ae;function le(R){return u(R)==="[object Map]"}le.working=typeof Map!="undefined"&&le(new Map);function Re(R){return typeof Map=="undefined"?!1:le.working?le(R):R instanceof Map}t.isMap=Re;function ge(R){return u(R)==="[object Set]"}ge.working=typeof Set!="undefined"&&ge(new Set);function Pe(R){return typeof Set=="undefined"?!1:ge.working?ge(R):R instanceof Set}t.isSet=Pe;function xe(R){return u(R)==="[object WeakMap]"}xe.working=typeof WeakMap!="undefined"&&xe(new WeakMap);function Wr(R){return typeof WeakMap=="undefined"?!1:xe.working?xe(R):R instanceof WeakMap}t.isWeakMap=Wr;function bt(R){return u(R)==="[object WeakSet]"}bt.working=typeof WeakSet!="undefined"&&bt(new WeakSet);function He(R){return bt(R)}t.isWeakSet=He;function Et(R){return u(R)==="[object ArrayBuffer]"}Et.working=typeof ArrayBuffer!="undefined"&&Et(new ArrayBuffer);function ie(R){return typeof ArrayBuffer=="undefined"?!1:Et.working?Et(R):R instanceof ArrayBuffer}t.isArrayBuffer=ie;function v(R){return u(R)==="[object DataView]"}v.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&v(new DataView(new ArrayBuffer(1),0,1));function S(R){return typeof DataView=="undefined"?!1:v.working?v(R):R instanceof DataView}t.isDataView=S;var T=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function B(R){return u(R)==="[object SharedArrayBuffer]"}function H(R){return typeof T=="undefined"?!1:(typeof B.working=="undefined"&&(B.working=B(new T)),B.working?B(R):R instanceof T)}t.isSharedArrayBuffer=H;function z(R){return u(R)==="[object AsyncFunction]"}t.isAsyncFunction=z;function M(R){return u(R)==="[object Map Iterator]"}t.isMapIterator=M;function G(R){return u(R)==="[object Set Iterator]"}t.isSetIterator=G;function X(R){return u(R)==="[object Generator]"}t.isGeneratorObject=X;function ke(R){return u(R)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=ke;function Qe(R){return E(R,l)}t.isNumberObject=Qe;function Ye(R){return E(R,d)}t.isStringObject=Ye;function De(R){return E(R,h)}t.isBooleanObject=De;function ur(R){return a&&E(R,y)}t.isBigIntObject=ur;function hi(R){return s&&E(R,m)}t.isSymbolObject=hi;function Hr(R){return Qe(R)||Ye(R)||De(R)||ur(R)||hi(R)}t.isBoxedPrimitive=Hr;function ua(R){return typeof Uint8Array!="undefined"&&(ie(R)||H(R))}t.isAnyArrayBuffer=ua,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(R){Object.defineProperty(t,R,{enumerable:!1,value:function(){throw new Error(R+" is not supported in userland")}})})})(Rs);var Wd=function(e){return e instanceof N.Buffer},nt={exports:{}};typeof Object.create=="function"?nt.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:nt.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}},function(t){var e=Object.getOwnPropertyDescriptors||function(S){for(var T=Object.keys(S),B={},H=0;H<T.length;H++)B[T[H]]=Object.getOwnPropertyDescriptor(S,T[H]);return B},r=/%[sdj%]/g;t.format=function(v){if(!$(v)){for(var S=[],T=0;T<arguments.length;T++)S.push(a(arguments[T]));return S.join(" ")}for(var T=1,B=arguments,H=B.length,z=String(v).replace(r,function(G){if(G==="%%")return"%";if(T>=H)return G;switch(G){case"%s":return String(B[T++]);case"%d":return Number(B[T++]);case"%j":try{return JSON.stringify(B[T++])}catch{return"[Circular]"}default:return G}}),M=B[T];T<H;M=B[++T])j(M)||!ee(M)?z+=" "+M:z+=" "+a(M);return z},t.deprecate=function(v,S){if(typeof N.process!="undefined"&&N.process.noDeprecation===!0)return v;if(typeof N.process=="undefined")return function(){return t.deprecate(v,S).apply(this,arguments)};var T=!1;function B(){if(!T){if(N.process.throwDeprecation)throw new Error(S);N.process.traceDeprecation?console.trace(S):console.error(S),T=!0}return v.apply(this,arguments)}return B};var n={},i=/^$/;if({}.NODE_DEBUG){var o={}.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}t.debuglog=function(v){if(v=v.toUpperCase(),!n[v])if(i.test(v)){var S=N.process.pid;n[v]=function(){var T=t.format.apply(t,arguments);console.error("%s %d: %s",v,S,T)}}else n[v]=function(){};return n[v]};function a(v,S){var T={seen:[],stylize:u};return arguments.length>=3&&(T.depth=arguments[2]),arguments.length>=4&&(T.colors=arguments[3]),x(S)?T.showHidden=S:S&&t._extend(T,S),O(T.showHidden)&&(T.showHidden=!1),O(T.depth)&&(T.depth=2),O(T.colors)&&(T.colors=!1),O(T.customInspect)&&(T.customInspect=!0),T.colors&&(T.stylize=s),d(T,v,T.depth)}t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(v,S){var T=a.styles[S];return T?"\x1B["+a.colors[T][0]+"m"+v+"\x1B["+a.colors[T][1]+"m":v}function u(v,S){return v}function l(v){var S={};return v.forEach(function(T,B){S[T]=!0}),S}function d(v,S,T){if(v.customInspect&&S&&le(S.inspect)&&S.inspect!==t.inspect&&!(S.constructor&&S.constructor.prototype===S)){var B=S.inspect(T,v);return $(B)||(B=d(v,B,T)),B}var H=h(v,S);if(H)return H;var z=Object.keys(S),M=l(z);if(v.showHidden&&(z=Object.getOwnPropertyNames(S)),ae(S)&&(z.indexOf("message")>=0||z.indexOf("description")>=0))return y(S);if(z.length===0){if(le(S)){var G=S.name?": "+S.name:"";return v.stylize("[Function"+G+"]","special")}if(L(S))return v.stylize(RegExp.prototype.toString.call(S),"regexp");if(de(S))return v.stylize(Date.prototype.toString.call(S),"date");if(ae(S))return y(S)}var X="",ke=!1,Qe=["{","}"];if(I(S)&&(ke=!0,Qe=["[","]"]),le(S)){var Ye=S.name?": "+S.name:"";X=" [Function"+Ye+"]"}if(L(S)&&(X=" "+RegExp.prototype.toString.call(S)),de(S)&&(X=" "+Date.prototype.toUTCString.call(S)),ae(S)&&(X=" "+y(S)),z.length===0&&(!ke||S.length==0))return Qe[0]+X+Qe[1];if(T<0)return L(S)?v.stylize(RegExp.prototype.toString.call(S),"regexp"):v.stylize("[Object]","special");v.seen.push(S);var De;return ke?De=m(v,S,T,M,z):De=z.map(function(ur){return E(v,S,T,M,ur,ke)}),v.seen.pop(),k(De,X,Qe)}function h(v,S){if(O(S))return v.stylize("undefined","undefined");if($(S)){var T="'"+JSON.stringify(S).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return v.stylize(T,"string")}if(D(S))return v.stylize(""+S,"number");if(x(S))return v.stylize(""+S,"boolean");if(j(S))return v.stylize("null","null")}function y(v){return"["+Error.prototype.toString.call(v)+"]"}function m(v,S,T,B,H){for(var z=[],M=0,G=S.length;M<G;++M)bt(S,String(M))?z.push(E(v,S,T,B,String(M),!0)):z.push("");return H.forEach(function(X){X.match(/^\d+$/)||z.push(E(v,S,T,B,X,!0))}),z}function E(v,S,T,B,H,z){var M,G,X;if(X=Object.getOwnPropertyDescriptor(S,H)||{value:S[H]},X.get?X.set?G=v.stylize("[Getter/Setter]","special"):G=v.stylize("[Getter]","special"):X.set&&(G=v.stylize("[Setter]","special")),bt(B,H)||(M="["+H+"]"),G||(v.seen.indexOf(X.value)<0?(j(T)?G=d(v,X.value,null):G=d(v,X.value,T-1),G.indexOf(`
`)>-1&&(z?G=G.split(`
`).map(function(ke){return"  "+ke}).join(`
`).slice(2):G=`
`+G.split(`
`).map(function(ke){return"   "+ke}).join(`
`))):G=v.stylize("[Circular]","special")),O(M)){if(z&&H.match(/^\d+$/))return G;M=JSON.stringify(""+H),M.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(M=M.slice(1,-1),M=v.stylize(M,"name")):(M=M.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),M=v.stylize(M,"string"))}return M+": "+G}function k(v,S,T){var B=v.reduce(function(H,z){return z.indexOf(`
`)>=0,H+z.replace(/\u001b\[\d\d?m/g,"").length+1},0);return B>60?T[0]+(S===""?"":S+`
 `)+" "+v.join(`,
  `)+" "+T[1]:T[0]+S+" "+v.join(", ")+" "+T[1]}t.types=Rs;function I(v){return Array.isArray(v)}t.isArray=I;function x(v){return typeof v=="boolean"}t.isBoolean=x;function j(v){return v===null}t.isNull=j;function J(v){return v==null}t.isNullOrUndefined=J;function D(v){return typeof v=="number"}t.isNumber=D;function $(v){return typeof v=="string"}t.isString=$;function W(v){return typeof v=="symbol"}t.isSymbol=W;function O(v){return v===void 0}t.isUndefined=O;function L(v){return ee(v)&&ge(v)==="[object RegExp]"}t.isRegExp=L,t.types.isRegExp=L;function ee(v){return typeof v=="object"&&v!==null}t.isObject=ee;function de(v){return ee(v)&&ge(v)==="[object Date]"}t.isDate=de,t.types.isDate=de;function ae(v){return ee(v)&&(ge(v)==="[object Error]"||v instanceof Error)}t.isError=ae,t.types.isNativeError=ae;function le(v){return typeof v=="function"}t.isFunction=le;function Re(v){return v===null||typeof v=="boolean"||typeof v=="number"||typeof v=="string"||typeof v=="symbol"||typeof v=="undefined"}t.isPrimitive=Re,t.isBuffer=Wd;function ge(v){return Object.prototype.toString.call(v)}function Pe(v){return v<10?"0"+v.toString(10):v.toString(10)}var xe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Wr(){var v=new Date,S=[Pe(v.getHours()),Pe(v.getMinutes()),Pe(v.getSeconds())].join(":");return[v.getDate(),xe[v.getMonth()],S].join(" ")}t.log=function(){console.log("%s - %s",Wr(),t.format.apply(t,arguments))},t.inherits=nt.exports,t._extend=function(v,S){if(!S||!ee(S))return v;for(var T=Object.keys(S),B=T.length;B--;)v[T[B]]=S[T[B]];return v};function bt(v,S){return Object.prototype.hasOwnProperty.call(v,S)}var He=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;t.promisify=function(S){if(typeof S!="function")throw new TypeError('The "original" argument must be of type Function');if(He&&S[He]){var T=S[He];if(typeof T!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(T,He,{value:T,enumerable:!1,writable:!1,configurable:!0}),T}function T(){for(var B,H,z=new Promise(function(X,ke){B=X,H=ke}),M=[],G=0;G<arguments.length;G++)M.push(arguments[G]);M.push(function(X,ke){X?H(X):B(ke)});try{S.apply(this,M)}catch(X){H(X)}return z}return Object.setPrototypeOf(T,Object.getPrototypeOf(S)),He&&Object.defineProperty(T,He,{value:T,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(T,e(S))},t.promisify.custom=He;function Et(v,S){if(!v){var T=new Error("Promise was rejected with a falsy value");T.reason=v,v=T}return S(v)}function ie(v){if(typeof v!="function")throw new TypeError('The "original" argument must be of type Function');function S(){for(var T=[],B=0;B<arguments.length;B++)T.push(arguments[B]);var H=T.pop();if(typeof H!="function")throw new TypeError("The last argument must be of type Function");var z=this,M=function(){return H.apply(z,arguments)};v.apply(this,T).then(function(G){N.process.nextTick(M.bind(null,null,G))},function(G){N.process.nextTick(Et.bind(null,G,M))})}return Object.setPrototypeOf(S,Object.getPrototypeOf(v)),Object.defineProperties(S,e(v)),S}t.callbackify=ie}(Ue);function ft(t){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(t)}function Ls(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yd(n.key),n)}}function Hd(t,e,r){return e&&Ls(t.prototype,e),r&&Ls(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yd(t){var e=Vd(t,"string");return ft(e)==="symbol"?e:String(e)}function Vd(t,e){if(ft(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ft(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&go(t,e)}function go(t,e){return go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},go(t,e)}function Xd(t){var e=Zd();return function(){var n=In(t),i;if(e){var o=In(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Jd(this,i)}}function Jd(t,e){if(e&&(ft(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qd(t)}function Qd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function In(t){return In=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},In(t)}var Gs={},Jt,yo;function Er(t,e,r){r||(r=Error);function n(o,a,s){return typeof e=="string"?e:e(o,a,s)}var i=function(o){Kd(s,o);var a=Xd(s);function s(u,l,d){var h;return zd(this,s),h=a.call(this,n(u,l,d)),h.code=t,h}return Hd(s)}(r);Gs[t]=i}function qs(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function eg(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function tg(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function rg(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Er("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),Er("ERR_INVALID_ARG_TYPE",function(t,e,r){Jt===void 0&&(Jt=mr.exports),Jt(typeof t=="string","'name' must be a string");var n;typeof e=="string"&&eg(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(tg(t," argument"))i="The ".concat(t," ").concat(n," ").concat(qs(e,"type"));else{var o=rg(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(qs(e,"type"))}return i+=". Received type ".concat(ft(r)),i},TypeError),Er("ERR_INVALID_ARG_VALUE",function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";yo===void 0&&(yo=Ue);var n=yo.inspect(e);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(r,". Received ").concat(n)},TypeError),Er("ERR_INVALID_RETURN_VALUE",function(t,e,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(ft(r)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(n,".")},TypeError),Er("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Jt===void 0&&(Jt=mr.exports),Jt(e.length>0,"At least one arg needs to be specified");var n="The ",i=e.length;switch(e=e.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(e[0]," argument");break;case 2:n+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:n+=e.slice(0,i-1).join(", "),n+=", and ".concat(e[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError),Ki.codes=Gs;function Ws(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ws(Object(r),!0).forEach(function(n){ng(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ws(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ng(t,e,r){return e=Vs(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ig(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ys(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vs(n.key),n)}}function og(t,e,r){return e&&Ys(t.prototype,e),r&&Ys(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vs(t){var e=ag(t,"string");return Oe(e)==="symbol"?e:String(e)}function ag(t,e){if(Oe(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Oe(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sg(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wr(t,e)}function cg(t){var e=Ks();return function(){var n=Sr(t),i;if(e){var o=Sr(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return zs(this,i)}}function zs(t,e){if(e&&(Oe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mo(t)}function mo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _o(t){var e=typeof Map=="function"?new Map:void 0;return _o=function(n){if(n===null||!ug(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return jn(n,arguments,Sr(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),wr(i,n)},_o(t)}function jn(t,e,r){return Ks()?jn=Reflect.construct.bind():jn=function(i,o,a){var s=[null];s.push.apply(s,o);var u=Function.bind.apply(i,s),l=new u;return a&&wr(l,a.prototype),l},jn.apply(null,arguments)}function Ks(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ug(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function wr(t,e){return wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},wr(t,e)}function Sr(t){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sr(t)}function Oe(t){return Oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(t)}var fg=Ue,vo=fg.inspect,lg=Ki,pg=lg.codes.ERR_INVALID_ARG_TYPE;function Xs(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function hg(t,e){if(e=Math.floor(e),t.length==0||e==0)return"";var r=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,r-t.length),t}var Le="",Rr="",kr="",Ee="",Nt={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},dg=10;function Js(t){var e=Object.keys(t),r=Object.create(Object.getPrototypeOf(t));return e.forEach(function(n){r[n]=t[n]}),Object.defineProperty(r,"message",{value:t.message}),r}function Tr(t){return vo(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function gg(t,e,r){var n="",i="",o=0,a="",s=!1,u=Tr(t),l=u.split(`
`),d=Tr(e).split(`
`),h=0,y="";if(r==="strictEqual"&&Oe(t)==="object"&&Oe(e)==="object"&&t!==null&&e!==null&&(r="strictEqualObject"),l.length===1&&d.length===1&&l[0]!==d[0]){var m=l[0].length+d[0].length;if(m<=dg){if((Oe(t)!=="object"||t===null)&&(Oe(e)!=="object"||e===null)&&(t!==0||e!==0))return"".concat(Nt[r],`

`)+"".concat(l[0]," !== ").concat(d[0],`
`)}else if(r!=="strictEqualObject"){var E=N.process.stderr&&N.process.stderr.isTTY?N.process.stderr.columns:80;if(m<E){for(;l[0][h]===d[0][h];)h++;h>2&&(y=`
  `.concat(hg(" ",h),"^"),h=0)}}}for(var k=l[l.length-1],I=d[d.length-1];k===I&&(h++<2?a=`
  `.concat(k).concat(a):n=k,l.pop(),d.pop(),!(l.length===0||d.length===0));)k=l[l.length-1],I=d[d.length-1];var x=Math.max(l.length,d.length);if(x===0){var j=u.split(`
`);if(j.length>30)for(j[26]="".concat(Le,"...").concat(Ee);j.length>27;)j.pop();return"".concat(Nt.notIdentical,`

`).concat(j.join(`
`),`
`)}h>3&&(a=`
`.concat(Le,"...").concat(Ee).concat(a),s=!0),n!==""&&(a=`
  `.concat(n).concat(a),n="");var J=0,D=Nt[r]+`
`.concat(Rr,"+ actual").concat(Ee," ").concat(kr,"- expected").concat(Ee),$=" ".concat(Le,"...").concat(Ee," Lines skipped");for(h=0;h<x;h++){var W=h-o;if(l.length<h+1)W>1&&h>2&&(W>4?(i+=`
`.concat(Le,"...").concat(Ee),s=!0):W>3&&(i+=`
  `.concat(d[h-2]),J++),i+=`
  `.concat(d[h-1]),J++),o=h,n+=`
`.concat(kr,"-").concat(Ee," ").concat(d[h]),J++;else if(d.length<h+1)W>1&&h>2&&(W>4?(i+=`
`.concat(Le,"...").concat(Ee),s=!0):W>3&&(i+=`
  `.concat(l[h-2]),J++),i+=`
  `.concat(l[h-1]),J++),o=h,i+=`
`.concat(Rr,"+").concat(Ee," ").concat(l[h]),J++;else{var O=d[h],L=l[h],ee=L!==O&&(!Xs(L,",")||L.slice(0,-1)!==O);ee&&Xs(O,",")&&O.slice(0,-1)===L&&(ee=!1,L+=","),ee?(W>1&&h>2&&(W>4?(i+=`
`.concat(Le,"...").concat(Ee),s=!0):W>3&&(i+=`
  `.concat(l[h-2]),J++),i+=`
  `.concat(l[h-1]),J++),o=h,i+=`
`.concat(Rr,"+").concat(Ee," ").concat(L),n+=`
`.concat(kr,"-").concat(Ee," ").concat(O),J+=2):(i+=n,n="",(W===1||h===0)&&(i+=`
  `.concat(L),J++))}if(J>20&&h<x-2)return"".concat(D).concat($,`
`).concat(i,`
`).concat(Le,"...").concat(Ee).concat(n,`
`)+"".concat(Le,"...").concat(Ee)}return"".concat(D).concat(s?$:"",`
`).concat(i).concat(n).concat(a).concat(y)}var yg=function(t,e){sg(n,t);var r=cg(n);function n(i){var o;if(ig(this,n),Oe(i)!=="object"||i===null)throw new pg("options","Object",i);var a=i.message,s=i.operator,u=i.stackStartFn,l=i.actual,d=i.expected,h=Error.stackTraceLimit;if(Error.stackTraceLimit=0,a!=null)o=r.call(this,String(a));else if(N.process.stderr&&N.process.stderr.isTTY&&(N.process.stderr&&N.process.stderr.getColorDepth&&N.process.stderr.getColorDepth()!==1?(Le="\x1B[34m",Rr="\x1B[32m",Ee="\x1B[39m",kr="\x1B[31m"):(Le="",Rr="",Ee="",kr="")),Oe(l)==="object"&&l!==null&&Oe(d)==="object"&&d!==null&&"stack"in l&&l instanceof Error&&"stack"in d&&d instanceof Error&&(l=Js(l),d=Js(d)),s==="deepStrictEqual"||s==="strictEqual")o=r.call(this,gg(l,d,s));else if(s==="notDeepStrictEqual"||s==="notStrictEqual"){var y=Nt[s],m=Tr(l).split(`
`);if(s==="notStrictEqual"&&Oe(l)==="object"&&l!==null&&(y=Nt.notStrictEqualObject),m.length>30)for(m[26]="".concat(Le,"...").concat(Ee);m.length>27;)m.pop();m.length===1?o=r.call(this,"".concat(y," ").concat(m[0])):o=r.call(this,"".concat(y,`

`).concat(m.join(`
`),`
`))}else{var E=Tr(l),k="",I=Nt[s];s==="notDeepEqual"||s==="notEqual"?(E="".concat(Nt[s],`

`).concat(E),E.length>1024&&(E="".concat(E.slice(0,1021),"..."))):(k="".concat(Tr(d)),E.length>512&&(E="".concat(E.slice(0,509),"...")),k.length>512&&(k="".concat(k.slice(0,509),"...")),s==="deepEqual"||s==="equal"?E="".concat(I,`

`).concat(E,`

should equal

`):k=" ".concat(s," ").concat(k)),o=r.call(this,"".concat(E).concat(k))}return Error.stackTraceLimit=h,o.generatedMessage=!a,Object.defineProperty(mo(o),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),o.code="ERR_ASSERTION",o.actual=l,o.expected=d,o.operator=s,Error.captureStackTrace&&Error.captureStackTrace(mo(o),u),o.stack,o.name="AssertionError",zs(o)}return og(n,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(o,a){return vo(this,Hs(Hs({},a),{},{customInspect:!1,depth:0}))}}]),n}(_o(Error),vo.custom),mg=yg,Qs=Object.prototype.toString,Zs=function(e){var r=Qs.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Qs.call(e.callee)==="[object Function]"),n},ec;if(!Object.keys){var $n=Object.prototype.hasOwnProperty,tc=Object.prototype.toString,_g=Zs,rc=Object.prototype.propertyIsEnumerable,vg=!rc.call({toString:null},"toString"),bg=rc.call(function(){},"prototype"),Bn=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],bo=function(t){var e=t.constructor;return e&&e.prototype===t},Eg={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},wg=function(){if(typeof window=="undefined")return!1;for(var t in window)try{if(!Eg["$"+t]&&$n.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{bo(window[t])}catch{return!0}}catch{return!0}return!1}(),Sg=function(t){if(typeof window=="undefined"||!wg)return bo(t);try{return bo(t)}catch{return!1}};ec=function(e){var r=e!==null&&typeof e=="object",n=tc.call(e)==="[object Function]",i=_g(e),o=r&&tc.call(e)==="[object String]",a=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var s=bg&&n;if(o&&e.length>0&&!$n.call(e,0))for(var u=0;u<e.length;++u)a.push(String(u));if(i&&e.length>0)for(var l=0;l<e.length;++l)a.push(String(l));else for(var d in e)!(s&&d==="prototype")&&$n.call(e,d)&&a.push(String(d));if(vg)for(var h=Sg(e),y=0;y<Bn.length;++y)!(h&&Bn[y]==="constructor")&&$n.call(e,Bn[y])&&a.push(Bn[y]);return a}}var Rg=ec,kg=Array.prototype.slice,Tg=Zs,nc=Object.keys,Cn=nc?function(e){return nc(e)}:Rg,ic=Object.keys;Cn.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Tg(n)?ic(kg.call(n)):ic(n)})}else Object.keys=Cn;return Object.keys||Cn};var oc=Cn,Ag=oc,ac=Xi(),sc=Rn,cc=Object,Og=sc("Array.prototype.push"),uc=sc("Object.prototype.propertyIsEnumerable"),xg=ac?Object.getOwnPropertySymbols:null,Ng=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=cc(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var o=cc(arguments[i]),a=Ag(o),s=ac&&(Object.getOwnPropertySymbols||xg);if(s)for(var u=s(o),l=0;l<u.length;++l){var d=u[l];uc(o,d)&&Og(a,d)}for(var h=0;h<a.length;++h){var y=a[h];if(uc(o,y)){var m=o[y];n[y]=m}}}return n},Eo=Ng,Pg=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var a in i)o+=a;return t!==o},Ig=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},jg=function(){return!Object.assign||Pg()||Ig()?Eo:Object.assign},fc=function(t){return t!==t},lc=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||fc(e)&&fc(r))},$g=lc,wo=function(){return typeof Object.is=="function"?Object.is:$g},Bg=vr,So=Bg("%Object.defineProperty%",!0),Ro=function(){if(So)try{return So({},"a",{value:1}),!0}catch{return!1}return!1};Ro.hasArrayLengthDefineBug=function(){if(!Ro())return null;try{return So([],"length",{value:1}).length!==1}catch{return!0}};var pc=Ro,Cg=pc(),ko=vr,hc=Cg&&ko("%Object.defineProperty%",!0),Dg=ko("%SyntaxError%"),Qt=ko("%TypeError%"),dc=Cs,Mg=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Qt("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Qt("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Qt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Qt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Qt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Qt("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,u=!!dc&&dc(e,r);if(hc)hc(e,r,{configurable:a===null&&u?u.configurable:!a,enumerable:i===null&&u?u.enumerable:!i,value:n,writable:o===null&&u?u.writable:!o});else if(s||!i&&!o&&!a)e[r]=n;else throw new Dg("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Fg=oc,Ug=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Lg=Object.prototype.toString,Gg=Array.prototype.concat,gc=Mg,qg=function(t){return typeof t=="function"&&Lg.call(t)==="[object Function]"},yc=pc(),Wg=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!qg(n)||!n())return}yc?gc(t,e,r,!0):gc(t,e,r)},mc=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Fg(e);Ug&&(n=Gg.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Wg(t,n[i],e[n[i]],r[n[i]])};mc.supportsDescriptors=!!yc;var Dn=mc,Hg=wo,Yg=Dn,Vg=function(){var e=Hg();return Yg(Object,{is:e},{is:function(){return Object.is!==e}}),e},zg=Dn,Kg=br.exports,Xg=lc,_c=wo,Jg=Vg,vc=Kg(_c(),Object);zg(vc,{getPolyfill:_c,implementation:Xg,shim:Jg});var Qg=vc,bc=function(e){return e!==e},Zg=bc,Ec=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:Zg},ey=Dn,ty=Ec,ry=function(){var e=ty();return ey(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e},ny=br.exports,iy=Dn,oy=bc,wc=Ec,ay=ry,Sc=ny(wc(),Number);iy(Sc,{getPolyfill:wc,implementation:oy,shim:ay});var sy=Sc;function Rc(t,e){return ly(t)||fy(t,e)||uy(t,e)||cy()}function cy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uy(t,e){if(!!t){if(typeof t=="string")return kc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kc(t,e)}}function kc(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fy(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){l=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function ly(t){if(Array.isArray(t))return t}function je(t){return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(t)}var py=/a/g.flags!==void 0,Mn=function(e){var r=[];return e.forEach(function(n){return r.push(n)}),r},Tc=function(e){var r=[];return e.forEach(function(n,i){return r.push([i,n])}),r},Ac=Object.is?Object.is:Qg,Fn=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},To=Number.isNaN?Number.isNaN:sy;function Ao(t){return t.call.bind(t)}var Ar=Ao(Object.prototype.hasOwnProperty),Un=Ao(Object.prototype.propertyIsEnumerable),Oc=Ao(Object.prototype.toString),Ae=Ue.types,hy=Ae.isAnyArrayBuffer,dy=Ae.isArrayBufferView,xc=Ae.isDate,Ln=Ae.isMap,Nc=Ae.isRegExp,Gn=Ae.isSet,gy=Ae.isNativeError,yy=Ae.isBoxedPrimitive,Pc=Ae.isNumberObject,Ic=Ae.isStringObject,jc=Ae.isBooleanObject,$c=Ae.isBigIntObject,my=Ae.isSymbolObject,_y=Ae.isFloat32Array,vy=Ae.isFloat64Array;function by(t){if(t.length===0||t.length>10)return!0;for(var e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<48||r>57)return!0}return t.length===10&&t>=Math.pow(2,32)}function qn(t){return Object.keys(t).filter(by).concat(Fn(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function Bc(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}var Ey=!0,wy=!1,Oo=0,xo=1,Cc=2,Dc=3;function Sy(t,e){return py?t.source===e.source&&t.flags===e.flags:RegExp.prototype.toString.call(t)===RegExp.prototype.toString.call(e)}function Ry(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function ky(t,e){return t.byteLength!==e.byteLength?!1:Bc(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))===0}function Ty(t,e){return t.byteLength===e.byteLength&&Bc(new Uint8Array(t),new Uint8Array(e))===0}function Ay(t,e){return Pc(t)?Pc(e)&&Ac(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):Ic(t)?Ic(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):jc(t)?jc(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):$c(t)?$c(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):my(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}function $e(t,e,r,n){if(t===e)return t!==0?!0:r?Ac(t,e):!0;if(r){if(je(t)!=="object")return typeof t=="number"&&To(t)&&To(e);if(je(e)!=="object"||t===null||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(t===null||je(t)!=="object")return e===null||je(e)!=="object"?t==e:!1;if(e===null||je(e)!=="object")return!1}var i=Oc(t),o=Oc(e);if(i!==o)return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var a=qn(t),s=qn(e);return a.length!==s.length?!1:Or(t,e,r,n,xo,a)}if(i==="[object Object]"&&(!Ln(t)&&Ln(e)||!Gn(t)&&Gn(e)))return!1;if(xc(t)){if(!xc(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(Nc(t)){if(!Nc(e)||!Sy(t,e))return!1}else if(gy(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else if(dy(t)){if(!r&&(_y(t)||vy(t))){if(!Ry(t,e))return!1}else if(!ky(t,e))return!1;var u=qn(t),l=qn(e);return u.length!==l.length?!1:Or(t,e,r,n,Oo,u)}else{if(Gn(t))return!Gn(e)||t.size!==e.size?!1:Or(t,e,r,n,Cc);if(Ln(t))return!Ln(e)||t.size!==e.size?!1:Or(t,e,r,n,Dc);if(hy(t)){if(!Ty(t,e))return!1}else if(yy(t)&&!Ay(t,e))return!1}return Or(t,e,r,n,Oo)}function Mc(t,e){return e.filter(function(r){return Un(t,r)})}function Or(t,e,r,n,i,o){if(arguments.length===5){o=Object.keys(t);var a=Object.keys(e);if(o.length!==a.length)return!1}for(var s=0;s<o.length;s++)if(!Ar(e,o[s]))return!1;if(r&&arguments.length===5){var u=Fn(t);if(u.length!==0){var l=0;for(s=0;s<u.length;s++){var d=u[s];if(Un(t,d)){if(!Un(e,d))return!1;o.push(d),l++}else if(Un(e,d))return!1}var h=Fn(e);if(u.length!==h.length&&Mc(e,h).length!==l)return!1}else{var y=Fn(e);if(y.length!==0&&Mc(e,y).length!==0)return!1}}if(o.length===0&&(i===Oo||i===xo&&t.length===0||t.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var m=n.val1.get(t);if(m!==void 0){var E=n.val2.get(e);if(E!==void 0)return m===E}n.position++}n.val1.set(t,n.position),n.val2.set(e,n.position);var k=Iy(t,e,r,o,n,i);return n.val1.delete(t),n.val2.delete(e),k}function Fc(t,e,r,n){for(var i=Mn(t),o=0;o<i.length;o++){var a=i[o];if($e(e,a,r,n))return t.delete(a),!0}return!1}function Uc(t){switch(je(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(To(t))return!1}return!0}function Oy(t,e,r){var n=Uc(r);return n!=null?n:e.has(n)&&!t.has(n)}function xy(t,e,r,n,i){var o=Uc(r);if(o!=null)return o;var a=e.get(o);return a===void 0&&!e.has(o)||!$e(n,a,!1,i)?!1:!t.has(o)&&$e(n,a,!1,i)}function Ny(t,e,r,n){for(var i=null,o=Mn(t),a=0;a<o.length;a++){var s=o[a];if(je(s)==="object"&&s!==null)i===null&&(i=new Set),i.add(s);else if(!e.has(s)){if(r||!Oy(t,e,s))return!1;i===null&&(i=new Set),i.add(s)}}if(i!==null){for(var u=Mn(e),l=0;l<u.length;l++){var d=u[l];if(je(d)==="object"&&d!==null){if(!Fc(i,d,r,n))return!1}else if(!r&&!t.has(d)&&!Fc(i,d,r,n))return!1}return i.size===0}return!0}function Lc(t,e,r,n,i,o){for(var a=Mn(t),s=0;s<a.length;s++){var u=a[s];if($e(r,u,i,o)&&$e(n,e.get(u),i,o))return t.delete(u),!0}return!1}function Py(t,e,r,n){for(var i=null,o=Tc(t),a=0;a<o.length;a++){var s=Rc(o[a],2),u=s[0],l=s[1];if(je(u)==="object"&&u!==null)i===null&&(i=new Set),i.add(u);else{var d=e.get(u);if(d===void 0&&!e.has(u)||!$e(l,d,r,n)){if(r||!xy(t,e,u,l,n))return!1;i===null&&(i=new Set),i.add(u)}}}if(i!==null){for(var h=Tc(e),y=0;y<h.length;y++){var m=Rc(h[y],2),E=m[0],k=m[1];if(je(E)==="object"&&E!==null){if(!Lc(i,t,E,k,r,n))return!1}else if(!r&&(!t.has(E)||!$e(t.get(E),k,!1,n))&&!Lc(i,t,E,k,!1,n))return!1}return i.size===0}return!0}function Iy(t,e,r,n,i,o){var a=0;if(o===Cc){if(!Ny(t,e,r,i))return!1}else if(o===Dc){if(!Py(t,e,r,i))return!1}else if(o===xo)for(;a<t.length;a++)if(Ar(t,a)){if(!Ar(e,a)||!$e(t[a],e[a],r,i))return!1}else{if(Ar(e,a))return!1;for(var s=Object.keys(t);a<s.length;a++){var u=s[a];if(!Ar(e,u)||!$e(t[u],e[u],r,i))return!1}return s.length===Object.keys(e).length}for(a=0;a<n.length;a++){var l=n[a];if(!$e(t[l],e[l],r,i))return!1}return!0}function jy(t,e){return $e(t,e,wy)}function $y(t,e){return $e(t,e,Ey)}var By={isDeepEqual:jy,isDeepStrictEqual:$y};function Ge(t){return Ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(t)}function Gc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dy(n.key),n)}}function Cy(t,e,r){return e&&Gc(t.prototype,e),r&&Gc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dy(t){var e=My(t,"string");return Ge(e)==="symbol"?e:String(e)}function My(t,e){if(Ge(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ge(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Uy=Ki,xr=Uy.codes,qc=xr.ERR_AMBIGUOUS_ARGUMENT,Zt=xr.ERR_INVALID_ARG_TYPE,Ly=xr.ERR_INVALID_ARG_VALUE,Gy=xr.ERR_INVALID_RETURN_VALUE,lt=xr.ERR_MISSING_ARGS,pt=mg,qy=Ue,Wn=qy.inspect,Wc=Ue.types,Wy=Wc.isPromise,Hn=Wc.isRegExp,Hy=jg(),Hc=wo(),Yn=Rn("RegExp.prototype.test"),ht,Vn;function Nr(){var t=By;ht=t.isDeepEqual,Vn=t.isDeepStrictEqual}var Yc=!1,re=mr.exports=No,zn={};function qe(t){throw t.message instanceof Error?t.message:new pt(t)}function Vc(t,e,r,n,i){var o=arguments.length,a;if(o===0)a="Failed";else if(o===1)r=t,t=void 0;else{if(Yc===!1){Yc=!0;var s=N.process.emitWarning?N.process.emitWarning:console.warn.bind(console);s("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(n="!=")}if(r instanceof Error)throw r;var u={actual:t,expected:e,operator:n===void 0?"fail":n,stackStartFn:i||Vc};r!==void 0&&(u.message=r);var l=new pt(u);throw a&&(l.message=a,l.generatedMessage=!0),l}re.fail=Vc,re.AssertionError=pt;function zc(t,e,r,n){if(!r){var i=!1;if(e===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new pt({actual:r,expected:!0,message:n,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function No(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];zc.apply(void 0,[No,e.length].concat(e))}re.ok=No,re.equal=function t(e,r,n){if(arguments.length<2)throw new lt("actual","expected");e!=r&&qe({actual:e,expected:r,message:n,operator:"==",stackStartFn:t})},re.notEqual=function t(e,r,n){if(arguments.length<2)throw new lt("actual","expected");e==r&&qe({actual:e,expected:r,message:n,operator:"!=",stackStartFn:t})},re.deepEqual=function t(e,r,n){if(arguments.length<2)throw new lt("actual","expected");ht===void 0&&Nr(),ht(e,r)||qe({actual:e,expected:r,message:n,operator:"deepEqual",stackStartFn:t})},re.notDeepEqual=function t(e,r,n){if(arguments.length<2)throw new lt("actual","expected");ht===void 0&&Nr(),ht(e,r)&&qe({actual:e,expected:r,message:n,operator:"notDeepEqual",stackStartFn:t})},re.deepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new lt("actual","expected");ht===void 0&&Nr(),Vn(e,r)||qe({actual:e,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:t})},re.notDeepStrictEqual=Kc;function Kc(t,e,r){if(arguments.length<2)throw new lt("actual","expected");ht===void 0&&Nr(),Vn(t,e)&&qe({actual:t,expected:e,message:r,operator:"notDeepStrictEqual",stackStartFn:Kc})}re.strictEqual=function t(e,r,n){if(arguments.length<2)throw new lt("actual","expected");Hc(e,r)||qe({actual:e,expected:r,message:n,operator:"strictEqual",stackStartFn:t})},re.notStrictEqual=function t(e,r,n){if(arguments.length<2)throw new lt("actual","expected");Hc(e,r)&&qe({actual:e,expected:r,message:n,operator:"notStrictEqual",stackStartFn:t})};var Xc=Cy(function t(e,r,n){var i=this;Fy(this,t),r.forEach(function(o){o in e&&(n!==void 0&&typeof n[o]=="string"&&Hn(e[o])&&Yn(e[o],n[o])?i[o]=n[o]:i[o]=e[o])})});function Yy(t,e,r,n,i,o){if(!(r in t)||!Vn(t[r],e[r])){if(!n){var a=new Xc(t,i),s=new Xc(e,i,t),u=new pt({actual:a,expected:s,operator:"deepStrictEqual",stackStartFn:o});throw u.actual=t,u.expected=e,u.operator=o.name,u}qe({actual:t,expected:e,message:n,operator:o.name,stackStartFn:o})}}function Jc(t,e,r,n){if(typeof e!="function"){if(Hn(e))return Yn(e,t);if(arguments.length===2)throw new Zt("expected",["Function","RegExp"],e);if(Ge(t)!=="object"||t===null){var i=new pt({actual:t,expected:e,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(e);if(e instanceof Error)o.push("name","message");else if(o.length===0)throw new Ly("error",e,"may not be an empty object");return ht===void 0&&Nr(),o.forEach(function(a){typeof t[a]=="string"&&Hn(e[a])&&Yn(e[a],t[a])||Yy(t,e,a,r,o,n)}),!0}return e.prototype!==void 0&&t instanceof e?!0:Error.isPrototypeOf(e)?!1:e.call({},t)===!0}function Qc(t){if(typeof t!="function")throw new Zt("fn","Function",t);try{t()}catch(e){return e}return zn}function Zc(t){return Wy(t)||t!==null&&Ge(t)==="object"&&typeof t.then=="function"&&typeof t.catch=="function"}function eu(t){return Promise.resolve().then(function(){var e;if(typeof t=="function"){if(e=t(),!Zc(e))throw new Gy("instance of Promise","promiseFn",e)}else if(Zc(t))e=t;else throw new Zt("promiseFn",["Function","Promise"],t);return Promise.resolve().then(function(){return e}).then(function(){return zn}).catch(function(r){return r})})}function tu(t,e,r,n){if(typeof r=="string"){if(arguments.length===4)throw new Zt("error",["Object","Error","Function","RegExp"],r);if(Ge(e)==="object"&&e!==null){if(e.message===r)throw new qc("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===r)throw new qc("error/message",'The error "'.concat(e,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&Ge(r)!=="object"&&typeof r!="function")throw new Zt("error",["Object","Error","Function","RegExp"],r);if(e===zn){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=t.name==="rejects"?"rejection":"exception";qe({actual:void 0,expected:r,operator:t.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:t})}if(r&&!Jc(e,r,n,t))throw e}function ru(t,e,r,n){if(e!==zn){if(typeof r=="string"&&(n=r,r=void 0),!r||Jc(e,r)){var i=n?": ".concat(n):".",o=t.name==="doesNotReject"?"rejection":"exception";qe({actual:e,expected:r,operator:t.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}re.throws=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];tu.apply(void 0,[t,Qc(e)].concat(n))},re.rejects=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return eu(e).then(function(o){return tu.apply(void 0,[t,o].concat(n))})},re.doesNotThrow=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];ru.apply(void 0,[t,Qc(e)].concat(n))},re.doesNotReject=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return eu(e).then(function(o){return ru.apply(void 0,[t,o].concat(n))})},re.ifError=function t(e){if(e!=null){var r="ifError got unwanted exception: ";Ge(e)==="object"&&typeof e.message=="string"?e.message.length===0&&e.constructor?r+=e.constructor.name:r+=e.message:r+=Wn(e);var n=new pt({actual:e,expected:null,operator:"ifError",message:r,stackStartFn:t}),i=e.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var a=n.stack.split(`
`),s=0;s<o.length;s++){var u=a.indexOf(o[s]);if(u!==-1){a=a.slice(0,u);break}}n.stack="".concat(a.join(`
`),`
`).concat(o.join(`
`))}throw n}};function nu(t,e,r,n,i){if(!Hn(e))throw new Zt("regexp","RegExp",e);var o=i==="match";if(typeof t!="string"||Yn(e,t)!==o){if(r instanceof Error)throw r;var a=!r;r=r||(typeof t!="string"?'The "string" argument must be of type string. Received type '+"".concat(Ge(t)," (").concat(Wn(t),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(Wn(e),`. Input:

`).concat(Wn(t),`
`));var s=new pt({actual:t,expected:e,message:r,operator:i,stackStartFn:n});throw s.generatedMessage=a,s}}re.match=function t(e,r,n){nu(e,r,n,t,"match")},re.doesNotMatch=function t(e,r,n){nu(e,r,n,t,"doesNotMatch")};function iu(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];zc.apply(void 0,[iu,e.length].concat(e))}re.strict=Hy(iu,re,{equal:re.strictEqual,deepEqual:re.deepStrictEqual,notEqual:re.notStrictEqual,notDeepEqual:re.notDeepStrictEqual}),re.strict.strict=re.strict;var Pr={exports:{}},er=typeof Reflect=="object"?Reflect:null,ou=er&&typeof er.apply=="function"?er.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Kn;er&&typeof er.ownKeys=="function"?Kn=er.ownKeys:Object.getOwnPropertySymbols?Kn=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Kn=function(e){return Object.getOwnPropertyNames(e)};function Vy(t){console&&console.warn&&console.warn(t)}var au=Number.isNaN||function(e){return e!==e};function Q(){Q.init.call(this)}Pr.exports=Q,Pr.exports.once=Jy,Q.EventEmitter=Q,Q.prototype._events=void 0,Q.prototype._eventsCount=0,Q.prototype._maxListeners=void 0;var su=10;function Xn(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Q,"defaultMaxListeners",{enumerable:!0,get:function(){return su},set:function(t){if(typeof t!="number"||t<0||au(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");su=t}}),Q.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Q.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||au(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function cu(t){return t._maxListeners===void 0?Q.defaultMaxListeners:t._maxListeners}Q.prototype.getMaxListeners=function(){return cu(this)},Q.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")ou(u,this,r);else for(var l=u.length,d=hu(u,l),n=0;n<l;++n)ou(d[n],this,r);return!0};function uu(t,e,r,n){var i,o,a;if(Xn(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),a===void 0)a=o[e]=r,++t._eventsCount;else if(typeof a=="function"?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=cu(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,Vy(s)}return t}Q.prototype.addListener=function(e,r){return uu(this,e,r,!1)},Q.prototype.on=Q.prototype.addListener,Q.prototype.prependListener=function(e,r){return uu(this,e,r,!0)};function zy(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function fu(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=zy.bind(n);return i.listener=r,n.wrapFn=i,i}Q.prototype.once=function(e,r){return Xn(r),this.on(e,fu(this,e,r)),this},Q.prototype.prependOnceListener=function(e,r){return Xn(r),this.prependListener(e,fu(this,e,r)),this},Q.prototype.removeListener=function(e,r){var n,i,o,a,s;if(Xn(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){s=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():Ky(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this},Q.prototype.off=Q.prototype.removeListener,Q.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function lu(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Xy(i):hu(i,i.length)}Q.prototype.listeners=function(e){return lu(this,e,!0)},Q.prototype.rawListeners=function(e){return lu(this,e,!1)},Q.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):pu.call(t,e)},Q.prototype.listenerCount=pu;function pu(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Q.prototype.eventNames=function(){return this._eventsCount>0?Kn(this._events):[]};function hu(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Ky(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Xy(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Jy(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,o),n(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}du(t,e,o,{once:!0}),e!=="error"&&Qy(t,i,{once:!0})})}function Qy(t,e,r){typeof t.on=="function"&&du(t,"error",e,r)}function du(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var gu=Pr.exports.EventEmitter;function yu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yu(Object(r),!0).forEach(function(n){Zy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yu(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zy(t,e,r){return e=vu(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function em(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vu(n.key),n)}}function tm(t,e,r){return e&&_u(t.prototype,e),r&&_u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function vu(t){var e=rm(t,"string");return typeof e=="symbol"?e:String(e)}function rm(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nm=Ft,Jn=nm.Buffer,im=Ue,Po=im.inspect,om=Po&&Po.custom||"inspect";function am(t,e,r){Jn.prototype.copy.call(t,e,r)}var sm=function(){function t(){em(this,t),this.head=null,this.tail=null,this.length=0}return tm(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Jn.alloc(0);for(var n=Jn.allocUnsafe(r>>>0),i=this.head,o=0;i;)am(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var a=n.data,s=r>a.length?a.length:r;if(s===a.length?o+=a:o+=a.slice(0,r),r-=s,r===0){s===a.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(s));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=Jn.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var a=i.data,s=r>a.length?a.length:r;if(a.copy(n,n.length-r,0,s),r-=s,r===0){s===a.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=a.slice(s));break}++o}return this.length-=o,n}},{key:om,value:function(r,n){return Po(this,mu(mu({},n),{},{depth:0,customInspect:!1}))}}]),t}();function cm(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,N.process.nextTick(Io,this,t)):N.process.nextTick(Io,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?N.process.nextTick(Qn,r):(r._writableState.errorEmitted=!0,N.process.nextTick(bu,r,o)):N.process.nextTick(bu,r,o):e?(N.process.nextTick(Qn,r),e(o)):N.process.nextTick(Qn,r)}),this)}function bu(t,e){Io(t,e),Qn(t)}function Qn(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function um(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Io(t,e){t.emit("error",e)}function fm(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var Eu={destroy:cm,undestroy:um,errorOrDestroy:fm},Pt={};function lm(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var wu={};function Be(t,e,r){r||(r=Error);function n(o,a,s){return typeof e=="string"?e:e(o,a,s)}var i=function(o){lm(a,o);function a(s,u,l){return o.call(this,n(s,u,l))||this}return a}(r);i.prototype.name=r.name,i.prototype.code=t,wu[t]=i}function Su(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function pm(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function hm(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function dm(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Be("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),Be("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&pm(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(hm(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Su(e,"type"));else{var o=dm(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(Su(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError),Be("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Be("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),Be("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Be("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),Be("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Be("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Be("ERR_STREAM_WRITE_AFTER_END","write after end"),Be("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Be("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),Be("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Pt.codes=wu;var gm=Pt.codes.ERR_INVALID_OPT_VALUE;function ym(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function mm(t,e,r,n){var i=ym(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new gm(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var Ru={getHighWaterMark:mm},_m=vm;function vm(t,e){if(jo("noDeprecation"))return t;var r=!1;function n(){if(!r){if(jo("throwDeprecation"))throw new Error(e);jo("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function jo(t){try{if(!Te.localStorage)return!1}catch{return!1}var e=Te.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var ku=oe;function Tu(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Ym(e,t)}}var tr;oe.WritableState=Ir;var bm={deprecate:_m},Au=gu,Zn=Ft.Buffer,Em=(typeof Te!="undefined"?Te:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function wm(t){return Zn.from(t)}function Sm(t){return Zn.isBuffer(t)||t instanceof Em}var $o=Eu,Rm=Ru,km=Rm.getHighWaterMark,dt=Pt.codes,Tm=dt.ERR_INVALID_ARG_TYPE,Am=dt.ERR_METHOD_NOT_IMPLEMENTED,Om=dt.ERR_MULTIPLE_CALLBACK,xm=dt.ERR_STREAM_CANNOT_PIPE,Nm=dt.ERR_STREAM_DESTROYED,Pm=dt.ERR_STREAM_NULL_VALUES,Im=dt.ERR_STREAM_WRITE_AFTER_END,jm=dt.ERR_UNKNOWN_ENCODING,rr=$o.errorOrDestroy;nt.exports(oe,Au);function $m(){}function Ir(t,e,r){tr=tr||nr,t=t||{},typeof r!="boolean"&&(r=e instanceof tr),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=km(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Lm(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Tu(this)}Ir.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r},function(){try{Object.defineProperty(Ir.prototype,"buffer",{get:bm.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var ei;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ei=Function.prototype[Symbol.hasInstance],Object.defineProperty(oe,Symbol.hasInstance,{value:function(e){return ei.call(this,e)?!0:this!==oe?!1:e&&e._writableState instanceof Ir}})):ei=function(e){return e instanceof this};function oe(t){tr=tr||nr;var e=this instanceof tr;if(!e&&!ei.call(oe,this))return new oe(t);this._writableState=new Ir(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Au.call(this)}oe.prototype.pipe=function(){rr(this,new xm)};function Bm(t,e){var r=new Im;rr(t,r),N.process.nextTick(e,r)}function Cm(t,e,r,n){var i;return r===null?i=new Pm:typeof r!="string"&&!e.objectMode&&(i=new Tm("chunk",["string","Buffer"],r)),i?(rr(t,i),N.process.nextTick(n,i),!1):!0}oe.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&Sm(t);return o&&!Zn.isBuffer(t)&&(t=wm(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=$m),n.ending?Bm(this,r):(o||Cm(this,n,t,r))&&(n.pendingcb++,i=Mm(this,n,o,t,e,r)),i},oe.prototype.cork=function(){this._writableState.corked++},oe.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&xu(this,t))},oe.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new jm(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(oe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Dm(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Zn.from(e,r)),e}Object.defineProperty(oe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Mm(t,e,r,n,i,o){if(!r){var a=Dm(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Bo(t,e,!1,s,n,i,o);return u}function Bo(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Nm("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Fm(t,e,r,n,i){--e.pendingcb,r?(N.process.nextTick(i,n),N.process.nextTick(jr,t,e),t._writableState.errorEmitted=!0,rr(t,n)):(i(n),t._writableState.errorEmitted=!0,rr(t,n),jr(t,e))}function Um(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Lm(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Om;if(Um(r),e)Fm(t,r,n,e,i);else{var o=Nu(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&xu(t,r),n?N.process.nextTick(Ou,t,r,o,i):Ou(t,r,o,i)}}function Ou(t,e,r,n){r||Gm(t,e),e.pendingcb--,n(),jr(t,e)}function Gm(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function xu(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,s=!0;r;)i[a]=r,r.isBuf||(s=!1),r=r.next,a+=1;i.allBuffers=s,Bo(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Tu(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,d=r.callback,h=e.objectMode?1:u.length;if(Bo(t,e,!1,h,u,l,d),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}oe.prototype._write=function(t,e,r){r(new Am("_write()"))},oe.prototype._writev=null,oe.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Hm(this,n,r),this},Object.defineProperty(oe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Nu(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function qm(t,e){t._final(function(r){e.pendingcb--,r&&rr(t,r),e.prefinished=!0,t.emit("prefinish"),jr(t,e)})}function Wm(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,N.process.nextTick(qm,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function jr(t,e){var r=Nu(e);if(r&&(Wm(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Hm(t,e,r){e.ending=!0,jr(t,e),r&&(e.finished?N.process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Ym(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(oe.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}}),oe.prototype.destroy=$o.destroy,oe.prototype._undestroy=$o.undestroy,oe.prototype._destroy=function(t,e){e(t)};var Vm=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},nr=Xe,Pu=Cu,Co=ku;nt.exports(Xe,Pu);for(var Iu=Vm(Co.prototype),Do=0;Do<Iu.length;Do++){var Mo=Iu[Do];Xe.prototype[Mo]||(Xe.prototype[Mo]=Co.prototype[Mo])}function Xe(t){if(!(this instanceof Xe))return new Xe(t);Pu.call(this,t),Co.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",zm)))}Object.defineProperty(Xe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Xe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Xe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function zm(){this._writableState.ended||N.process.nextTick(Km,this)}function Km(t){t.end()}Object.defineProperty(Xe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var Fo={},Uo={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Ft,n=r.Buffer;function i(a,s){for(var u in a)s[u]=a[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o);function o(a,s,u){return n(a,s,u)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(a,s,u){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,s,u)},o.alloc=function(a,s,u){if(typeof a!="number")throw new TypeError("Argument must be a number");var l=n(a);return s!==void 0?typeof u=="string"?l.fill(s,u):l.fill(s):l.fill(0),l},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(Uo,Uo.exports);var Lo=Uo.exports.Buffer,ju=Lo.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Xm(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Jm(t){var e=Xm(t);if(typeof e!="string"&&(Lo.isEncoding===ju||!ju(t)))throw new Error("Unknown encoding: "+t);return e||t}Fo.StringDecoder=$r;function $r(t){this.encoding=Jm(t);var e;switch(this.encoding){case"utf16le":this.text=n_,this.end=i_,e=4;break;case"utf8":this.fillLast=e_,e=4;break;case"base64":this.text=o_,this.end=a_,e=3;break;default:this.write=s_,this.end=c_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Lo.allocUnsafe(e)}$r.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},$r.prototype.end=r_,$r.prototype.text=t_,$r.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Go(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Qm(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Go(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Go(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Go(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Zm(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function e_(t){var e=this.lastTotal-this.lastNeed,r=Zm(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function t_(t,e){var r=Qm(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function r_(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function n_(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function i_(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function o_(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function a_(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function s_(t){return t.toString(this.encoding)}function c_(t){return t&&t.length?this.write(t):""}var $u=Pt.codes.ERR_STREAM_PREMATURE_CLOSE;function u_(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function f_(){}function l_(t){return t.setHeader&&typeof t.abort=="function"}function Bu(t,e,r){if(typeof e=="function")return Bu(t,null,e);e||(e={}),r=u_(r||f_);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||s()},a=t._writableState&&t._writableState.finished,s=function(){i=!1,a=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,u=!0,i||r.call(t)},d=function(E){r.call(t,E)},h=function(){var E;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(E=new $u),r.call(t,E);if(i&&!a)return(!t._writableState||!t._writableState.ended)&&(E=new $u),r.call(t,E)},y=function(){t.req.on("finish",s)};return l_(t)?(t.on("complete",s),t.on("abort",h),t.req?y():t.on("request",y)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",l),t.on("finish",s),e.error!==!1&&t.on("error",d),t.on("close",h),function(){t.removeListener("complete",s),t.removeListener("abort",h),t.removeListener("request",y),t.req&&t.req.removeListener("finish",s),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",s),t.removeListener("end",l),t.removeListener("error",d),t.removeListener("close",h)}}var qo=Bu,ti;function gt(t,e,r){return e=p_(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p_(t){var e=h_(t,"string");return typeof e=="symbol"?e:String(e)}function h_(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d_=qo,yt=Symbol("lastResolve"),It=Symbol("lastReject"),Br=Symbol("error"),ri=Symbol("ended"),jt=Symbol("lastPromise"),Wo=Symbol("handlePromise"),$t=Symbol("stream");function mt(t,e){return{value:t,done:e}}function g_(t){var e=t[yt];if(e!==null){var r=t[$t].read();r!==null&&(t[jt]=null,t[yt]=null,t[It]=null,e(mt(r,!1)))}}function y_(t){N.process.nextTick(g_,t)}function m_(t,e){return function(r,n){t.then(function(){if(e[ri]){r(mt(void 0,!0));return}e[Wo](r,n)},n)}}var __=Object.getPrototypeOf(function(){}),v_=Object.setPrototypeOf((ti={get stream(){return this[$t]},next:function(){var e=this,r=this[Br];if(r!==null)return Promise.reject(r);if(this[ri])return Promise.resolve(mt(void 0,!0));if(this[$t].destroyed)return new Promise(function(a,s){N.process.nextTick(function(){e[Br]?s(e[Br]):a(mt(void 0,!0))})});var n=this[jt],i;if(n)i=new Promise(m_(n,this));else{var o=this[$t].read();if(o!==null)return Promise.resolve(mt(o,!1));i=new Promise(this[Wo])}return this[jt]=i,i}},gt(ti,Symbol.asyncIterator,function(){return this}),gt(ti,"return",function(){var e=this;return new Promise(function(r,n){e[$t].destroy(null,function(i){if(i){n(i);return}r(mt(void 0,!0))})})}),ti),__),b_=function(e){var r,n=Object.create(v_,(r={},gt(r,$t,{value:e,writable:!0}),gt(r,yt,{value:null,writable:!0}),gt(r,It,{value:null,writable:!0}),gt(r,Br,{value:null,writable:!0}),gt(r,ri,{value:e._readableState.endEmitted,writable:!0}),gt(r,Wo,{value:function(o,a){var s=n[$t].read();s?(n[jt]=null,n[yt]=null,n[It]=null,o(mt(s,!1))):(n[yt]=o,n[It]=a)},writable:!0}),r));return n[jt]=null,d_(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[It];o!==null&&(n[jt]=null,n[yt]=null,n[It]=null,o(i)),n[Br]=i;return}var a=n[yt];a!==null&&(n[jt]=null,n[yt]=null,n[It]=null,a(mt(void 0,!0))),n[ri]=!0}),e.on("readable",y_.bind(null,n)),n},E_=b_,w_=function(){throw new Error("Readable.from is not available in the browser")},Cu=Y,ir;Y.ReadableState=Mu,Pr.exports.EventEmitter;var Du=function(e,r){return e.listeners(r).length},Cr=gu,ni=Ft.Buffer,S_=(typeof Te!="undefined"?Te:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function R_(t){return ni.from(t)}function k_(t){return ni.isBuffer(t)||t instanceof S_}var Ho=Ue,F;Ho&&Ho.debuglog?F=Ho.debuglog("stream"):F=function(){};var T_=sm,Yo=Eu,A_=Ru,O_=A_.getHighWaterMark,ii=Pt.codes,x_=ii.ERR_INVALID_ARG_TYPE,N_=ii.ERR_STREAM_PUSH_AFTER_EOF,P_=ii.ERR_METHOD_NOT_IMPLEMENTED,I_=ii.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,or,Vo,zo;nt.exports(Y,Cr);var Dr=Yo.errorOrDestroy,Ko=["error","close","destroy","pause","resume"];function j_(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Mu(t,e,r){ir=ir||nr,t=t||{},typeof r!="boolean"&&(r=e instanceof ir),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=O_(this,t,"readableHighWaterMark",r),this.buffer=new T_,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(or||(or=Fo.StringDecoder),this.decoder=new or(t.encoding),this.encoding=t.encoding)}function Y(t){if(ir=ir||nr,!(this instanceof Y))return new Y(t);var e=this instanceof ir;this._readableState=new Mu(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Cr.call(this)}Object.defineProperty(Y.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}}),Y.prototype.destroy=Yo.destroy,Y.prototype._undestroy=Yo.undestroy,Y.prototype._destroy=function(t,e){e(t)},Y.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=ni.from(t,e),e=""),n=!0),Fu(this,t,e,!1,n)},Y.prototype.unshift=function(t){return Fu(this,t,null,!0,!1)};function Fu(t,e,r,n,i){F("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,C_(t,o);else{var a;if(i||(a=$_(o,e)),a)Dr(t,a);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==ni.prototype&&(e=R_(e)),n)o.endEmitted?Dr(t,new I_):Xo(t,o,e,!0);else if(o.ended)Dr(t,new N_);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?Xo(t,o,e,!1):Jo(t,o)):Xo(t,o,e,!1)}else n||(o.reading=!1,Jo(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function Xo(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&oi(t)),Jo(t,e)}function $_(t,e){var r;return!k_(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new x_("chunk",["string","Buffer","Uint8Array"],e)),r}Y.prototype.isPaused=function(){return this._readableState.flowing===!1},Y.prototype.setEncoding=function(t){or||(or=Fo.StringDecoder);var e=new or(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Uu=1073741824;function B_(t){return t>=Uu?t=Uu:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Lu(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=B_(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Y.prototype.read=function(t){F("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return F("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Zo(this):oi(this),null;if(t=Lu(t,e),t===0&&e.ended)return e.length===0&&Zo(this),null;var n=e.needReadable;F("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,F("length less than watermark",n)),e.ended||e.reading?(n=!1,F("reading or ended",n)):n&&(F("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Lu(r,e)));var i;return t>0?i=Wu(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Zo(this)),i!==null&&this.emit("data",i),i};function C_(t,e){if(F("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?oi(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Gu(t)))}}function oi(t){var e=t._readableState;F("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(F("emitReadable",e.flowing),e.emittedReadable=!0,N.process.nextTick(Gu,t))}function Gu(t){var e=t._readableState;F("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Qo(t)}function Jo(t,e){e.readingMore||(e.readingMore=!0,N.process.nextTick(D_,t,e))}function D_(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(F("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Y.prototype._read=function(t){Dr(this,new P_("_read()"))},Y.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,F("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==N.process.stdout&&t!==N.process.stderr,o=i?s:k;n.endEmitted?N.process.nextTick(o):r.once("end",o),t.on("unpipe",a);function a(I,x){F("onunpipe"),I===r&&x&&x.hasUnpiped===!1&&(x.hasUnpiped=!0,d())}function s(){F("onend"),t.end()}var u=M_(r);t.on("drain",u);var l=!1;function d(){F("cleanup"),t.removeListener("close",m),t.removeListener("finish",E),t.removeListener("drain",u),t.removeListener("error",y),t.removeListener("unpipe",a),r.removeListener("end",s),r.removeListener("end",k),r.removeListener("data",h),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",h);function h(I){F("ondata");var x=t.write(I);F("dest.write",x),x===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&Hu(n.pipes,t)!==-1)&&!l&&(F("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function y(I){F("onerror",I),k(),t.removeListener("error",y),Du(t,"error")===0&&Dr(t,I)}j_(t,"error",y);function m(){t.removeListener("finish",E),k()}t.once("close",m);function E(){F("onfinish"),t.removeListener("close",m),k()}t.once("finish",E);function k(){F("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(F("pipe resume"),r.resume()),t};function M_(t){return function(){var r=t._readableState;F("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Du(t,"data")&&(r.flowing=!0,Qo(t))}}Y.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=Hu(e.pipes,t);return a===-1?this:(e.pipes.splice(a,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},Y.prototype.on=function(t,e){var r=Cr.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,F("on readable",n.length,n.reading),n.length?oi(this):n.reading||N.process.nextTick(F_,this)),r},Y.prototype.addListener=Y.prototype.on,Y.prototype.removeListener=function(t,e){var r=Cr.prototype.removeListener.call(this,t,e);return t==="readable"&&N.process.nextTick(qu,this),r},Y.prototype.removeAllListeners=function(t){var e=Cr.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&N.process.nextTick(qu,this),e};function qu(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function F_(t){F("readable nexttick read 0"),t.read(0)}Y.prototype.resume=function(){var t=this._readableState;return t.flowing||(F("resume"),t.flowing=!t.readableListening,U_(this,t)),t.paused=!1,this};function U_(t,e){e.resumeScheduled||(e.resumeScheduled=!0,N.process.nextTick(L_,t,e))}function L_(t,e){F("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Qo(t),e.flowing&&!e.reading&&t.read(0)}Y.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Qo(t){var e=t._readableState;for(F("flow",e.flowing);e.flowing&&t.read()!==null;);}Y.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(F("wrapped end"),r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&e.push(a)}e.push(null)}),t.on("data",function(a){if(F("wrapped data"),r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var s=e.push(a);s||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(s){return function(){return t[s].apply(t,arguments)}}(i));for(var o=0;o<Ko.length;o++)t.on(Ko[o],this.emit.bind(this,Ko[o]));return this._read=function(a){F("wrapped _read",a),n&&(n=!1,t.resume())},this},typeof Symbol=="function"&&(Y.prototype[Symbol.asyncIterator]=function(){return Vo===void 0&&(Vo=E_),Vo(this)}),Object.defineProperty(Y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Y.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Y.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),Y._fromList=Wu,Object.defineProperty(Y.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Wu(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Zo(t){var e=t._readableState;F("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,N.process.nextTick(G_,e,t))}function G_(t,e){if(F("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Y.from=function(t,e){return zo===void 0&&(zo=w_),zo(Y,t,e)});function Hu(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var Yu=it,ai=Pt.codes,q_=ai.ERR_METHOD_NOT_IMPLEMENTED,W_=ai.ERR_MULTIPLE_CALLBACK,H_=ai.ERR_TRANSFORM_ALREADY_TRANSFORMING,Y_=ai.ERR_TRANSFORM_WITH_LENGTH_0,si=nr;nt.exports(it,si);function V_(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new W_);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function it(t){if(!(this instanceof it))return new it(t);si.call(this,t),this._transformState={afterTransform:V_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",z_)}function z_(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Vu(t,e,r)}):Vu(this,null,null)}it.prototype.push=function(t,e){return this._transformState.needTransform=!1,si.prototype.push.call(this,t,e)},it.prototype._transform=function(t,e,r){r(new q_("_transform()"))},it.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},it.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},it.prototype._destroy=function(t,e){si.prototype._destroy.call(this,t,function(r){e(r)})};function Vu(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Y_;if(t._transformState.transforming)throw new H_;return t.push(null)}var K_=Mr,zu=Yu;nt.exports(Mr,zu);function Mr(t){if(!(this instanceof Mr))return new Mr(t);zu.call(this,t)}Mr.prototype._transform=function(t,e,r){r(null,t)};var ea;function X_(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Ku=Pt.codes,J_=Ku.ERR_MISSING_ARGS,Q_=Ku.ERR_STREAM_DESTROYED;function Xu(t){if(t)throw t}function Z_(t){return t.setHeader&&typeof t.abort=="function"}function ev(t,e,r,n){n=X_(n);var i=!1;t.on("close",function(){i=!0}),ea===void 0&&(ea=qo),ea(t,{readable:e,writable:r},function(a){if(a)return n(a);i=!0,n()});var o=!1;return function(a){if(!i&&!o){if(o=!0,Z_(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(a||new Q_("pipe"))}}}function Ju(t){t()}function tv(t,e){return t.pipe(e)}function rv(t){return!t.length||typeof t[t.length-1]!="function"?Xu:t.pop()}function nv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=rv(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new J_("streams");var i,o=e.map(function(a,s){var u=s<e.length-1,l=s>0;return ev(a,u,l,function(d){i||(i=d),d&&o.forEach(Ju),!u&&(o.forEach(Ju),n(i))})});return e.reduce(tv)}var iv=nv,ov=Ce,ta=Pr.exports.EventEmitter,av=nt.exports;av(Ce,ta),Ce.Readable=Cu,Ce.Writable=ku,Ce.Duplex=nr,Ce.Transform=Yu,Ce.PassThrough=K_,Ce.finished=qo,Ce.pipeline=iv,Ce.Stream=Ce;function Ce(){ta.call(this)}Ce.prototype.pipe=function(t,e){var r=this;function n(d){t.writable&&t.write(d)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",a),r.on("close",s));var o=!1;function a(){o||(o=!0,t.end())}function s(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function u(d){if(l(),ta.listenerCount(this,"error")===0)throw d}r.on("error",u),t.on("error",u);function l(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",s),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};var ci=mr.exports,sv=ov.Stream,cv=Ue,uv=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;function ra(t){return t.charAt(0).toUpperCase()+t.slice(1)}function _t(t,e,r,n,i){throw new ci.AssertionError({message:cv.format("%s (%s) is required",t,e),actual:i===void 0?typeof n:i(n),expected:e,operator:r||"===",stackStartFunction:_t.caller})}function na(t){return Object.prototype.toString.call(t).slice(8,-1)}function ar(){}var Fr={bool:{check:function(t){return typeof t=="boolean"}},func:{check:function(t){return typeof t=="function"}},string:{check:function(t){return typeof t=="string"}},object:{check:function(t){return typeof t=="object"&&t!==null}},number:{check:function(t){return typeof t=="number"&&!isNaN(t)}},finite:{check:function(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}},buffer:{check:function(t){return N.Buffer.isBuffer(t)},operator:"Buffer.isBuffer"},array:{check:function(t){return Array.isArray(t)},operator:"Array.isArray"},stream:{check:function(t){return t instanceof sv},operator:"instanceof",actual:na},date:{check:function(t){return t instanceof Date},operator:"instanceof",actual:na},regexp:{check:function(t){return t instanceof RegExp},operator:"instanceof",actual:na},uuid:{check:function(t){return typeof t=="string"&&uv.test(t)},operator:"isUUID"}};function Qu(t){var e=Object.keys(Fr),r;return{}.NODE_NDEBUG?r=ar:r=function(n,i){n||_t(i,"true",n)},e.forEach(function(n){if(t){r[n]=ar;return}var i=Fr[n];r[n]=function(o,a){i.check(o)||_t(a,n,i.operator,o,i.actual)}}),e.forEach(function(n){var i="optional"+ra(n);if(t){r[i]=ar;return}var o=Fr[n];r[i]=function(a,s){a!=null&&(o.check(a)||_t(s,n,o.operator,a,o.actual))}}),e.forEach(function(n){var i="arrayOf"+ra(n);if(t){r[i]=ar;return}var o=Fr[n],a="["+n+"]";r[i]=function(s,u){Array.isArray(s)||_t(u,a,o.operator,s,o.actual);var l;for(l=0;l<s.length;l++)o.check(s[l])||_t(u,a,o.operator,s,o.actual)}}),e.forEach(function(n){var i="optionalArrayOf"+ra(n);if(t){r[i]=ar;return}var o=Fr[n],a="["+n+"]";r[i]=function(s,u){if(s!=null){Array.isArray(s)||_t(u,a,o.operator,s,o.actual);var l;for(l=0;l<s.length;l++)o.check(s[l])||_t(u,a,o.operator,s,o.actual)}}}),Object.keys(ci).forEach(function(n){if(n==="AssertionError"){r[n]=ci[n];return}if(t){r[n]=ar;return}r[n]=ci[n]}),r._setExports=Qu,r}var fv=Qu({}.NODE_NDEBUG),ui={},Ur=mr.exports,lv=Ue;ui.sprintf=ia,ui.printf=pv,ui.fprintf=Zu;function ia(t){var e=["([^%]*)","%","(['\\-+ #0]*?)","([1-9]\\d*)?","(\\.([1-9]\\d*))?","[lhjztL]*?","([diouxXfFeEgGaAcCsSp%jr])"].join(""),r=new RegExp(e),n=Array.prototype.slice.call(arguments,1),i=t,o,a,s,u,l,d,h,y,m,E="",k=1,I=0,x,j;for(Ur.equal("string",typeof i,"first argument must be a format string");(m=r.exec(i))!==null;){if(E+=m[1],i=i.substring(m[0].length),j=m[0].substring(m[1].length),x=I+m[1].length+1,I+=m[0].length,o=m[2]||"",a=m[3]||0,s=m[4]||"",u=m[6],l=!1,h=!1,d=" ",u=="%"){E+="%";continue}if(n.length===0)throw Lr(t,x,j,"has no matching argument (too few arguments passed)");if(y=n.shift(),k++,o.match(/[\' #]/))throw Lr(t,x,j,"uses unsupported flags");if(s.length>0)throw Lr(t,x,j,"uses non-zero precision (not supported)");switch(o.match(/-/)&&(l=!0),o.match(/0/)&&(d="0"),o.match(/\+/)&&(h=!0),u){case"s":if(y==null)throw Lr(t,x,j,"attempted to print undefined or null as a string (argument "+k+" to sprintf)");E+=oa(d,a,l,y.toString());break;case"d":y=Math.floor(y);case"f":h=h&&y>0?"+":"",E+=h+oa(d,a,l,y.toString());break;case"x":E+=oa(d,a,l,y.toString(16));break;case"j":a===0&&(a=10),E+=lv.inspect(y,!1,a);break;case"r":E+=ef(y);break;default:throw Lr(t,x,j,"is not supported")}}return E+=i,E}function Lr(t,e,r,n){return Ur.equal(typeof t,"string"),Ur.equal(typeof r,"string"),Ur.equal(typeof e,"number"),Ur.equal(typeof n,"string"),new Error('format string "'+t+'": conversion specifier "'+r+'" at character '+e+" "+n)}function pv(){var t=Array.prototype.slice.call(arguments);t.unshift(N.process.stdout),Zu.apply(null,t)}function Zu(t){var e=Array.prototype.slice.call(arguments,1);return t.write(ia.apply(this,e))}function oa(t,e,r,n){for(var i=n;i.length<e;)r?i+=t:i=t+i;return i}function ef(t){var e;if(!(t instanceof Error))throw new Error(ia("invalid type for %%r: %j",t));if(e="EXCEPTION: "+t.constructor.name+": "+t.stack,t.cause&&typeof t.cause=="function"){var r=t.cause();r&&(e+=`
Caused by: `+ef(r))}return e}var Se={};function hv(t){return Array.isArray?Array.isArray(t):fi(t)==="[object Array]"}Se.isArray=hv;function dv(t){return typeof t=="boolean"}Se.isBoolean=dv;function gv(t){return t===null}Se.isNull=gv;function yv(t){return t==null}Se.isNullOrUndefined=yv;function mv(t){return typeof t=="number"}Se.isNumber=mv;function _v(t){return typeof t=="string"}Se.isString=_v;function vv(t){return typeof t=="symbol"}Se.isSymbol=vv;function bv(t){return t===void 0}Se.isUndefined=bv;function Ev(t){return fi(t)==="[object RegExp]"}Se.isRegExp=Ev;function wv(t){return typeof t=="object"&&t!==null}Se.isObject=wv;function Sv(t){return fi(t)==="[object Date]"}Se.isDate=Sv;function Rv(t){return fi(t)==="[object Error]"||t instanceof Error}Se.isError=Rv;function kv(t){return typeof t=="function"}Se.isFunction=kv;function Tv(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t=="undefined"}Se.isPrimitive=Tv,Se.isBuffer=N.Buffer.isBuffer;function fi(t){return Object.prototype.toString.call(t)}var he=fv,li=Ue,Av=ui,We=Se.isError,Ov=Av.sprintf,fe=V;V.VError=V,V.SError=Gr,V.WError=vt,V.MultiError=sr;function aa(t){var e,r,n,i,o;if(he.object(t,"args"),he.bool(t.strict,"args.strict"),he.array(t.argv,"args.argv"),e=t.argv,e.length===0)r={},n=[];else if(We(e[0]))r={cause:e[0]},n=e.slice(1);else if(typeof e[0]=="object"){r={};for(o in e[0])r[o]=e[0][o];n=e.slice(1)}else he.string(e[0],"first argument to VError, SError, or WError constructor must be a string, object, or Error"),r={},n=e;return he.object(r),!r.strict&&!t.strict&&(n=n.map(function(a){return a===null?"null":a===void 0?"undefined":a})),n.length===0?i="":i=Ov.apply(null,n),{options:r,shortmessage:i}}function V(){var t,e,r,n,i,o,a;if(t=Array.prototype.slice.call(arguments,0),!(this instanceof V))return e=Object.create(V.prototype),V.apply(e,arguments),e;if(r=aa({argv:t,strict:!1}),r.options.name&&(he.string(r.options.name,`error's "name" must be a string`),this.name=r.options.name),this.jse_shortmsg=r.shortmessage,o=r.shortmessage,n=r.options.cause,n&&(he.ok(We(n),"cause is not an Error"),this.jse_cause=n,r.options.skipCauseMessage||(o+=": "+n.message)),this.jse_info={},r.options.info)for(a in r.options.info)this.jse_info[a]=r.options.info[a];return this.message=o,Error.call(this,o),Error.captureStackTrace&&(i=r.options.constructorOpt||this.constructor,Error.captureStackTrace(this,i)),this}li.inherits(V,Error),V.prototype.name="VError",V.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),e},V.prototype.cause=function(){var e=V.cause(this);return e===null?void 0:e},V.cause=function(t){return he.ok(We(t),"err must be an Error"),We(t.jse_cause)?t.jse_cause:null},V.info=function(t){var e,r,n;if(he.ok(We(t),"err must be an Error"),r=V.cause(t),r!==null?e=V.info(r):e={},typeof t.jse_info=="object"&&t.jse_info!==null)for(n in t.jse_info)e[n]=t.jse_info[n];return e},V.findCauseByName=function(t,e){var r;for(he.ok(We(t),"err must be an Error"),he.string(e,"name"),he.ok(e.length>0,"name cannot be empty"),r=t;r!==null;r=V.cause(r))if(he.ok(We(r)),r.name==e)return r;return null},V.hasCauseWithName=function(t,e){return V.findCauseByName(t,e)!==null},V.fullStack=function(t){he.ok(We(t),"err must be an Error");var e=V.cause(t);return e?t.stack+`
caused by: `+V.fullStack(e):t.stack},V.errorFromList=function(t){return he.arrayOfObject(t,"errors"),t.length===0?null:(t.forEach(function(e){he.ok(We(e))}),t.length==1?t[0]:new sr(t))},V.errorForEach=function(t,e){he.ok(We(t),"err must be an Error"),he.func(e,"func"),t instanceof sr?t.errors().forEach(function(n){e(n)}):e(t)};function Gr(){var t,e,r,n;return t=Array.prototype.slice.call(arguments,0),this instanceof Gr?(r=aa({argv:t,strict:!0}),n=r.options,V.call(this,n,"%s",r.shortmessage),this):(e=Object.create(Gr.prototype),Gr.apply(e,arguments),e)}li.inherits(Gr,V);function sr(t){he.array(t,"list of errors"),he.ok(t.length>0,"must be at least one error"),this.ase_errors=t,V.call(this,{cause:t[0]},"first of %d error%s",t.length,t.length==1?"":"s")}li.inherits(sr,V),sr.prototype.name="MultiError",sr.prototype.errors=function(){return this.ase_errors.slice(0)};function vt(){var t,e,r,n;return t=Array.prototype.slice.call(arguments,0),this instanceof vt?(r=aa({argv:t,strict:!1}),n=r.options,n.skipCauseMessage=!0,V.call(this,n,"%s",r.shortmessage),this):(e=Object.create(vt.prototype),vt.apply(e,t),e)}li.inherits(vt,V),vt.prototype.name="WError",vt.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),this.jse_cause&&this.jse_cause.message&&(e+="; caused by "+this.jse_cause.toString()),e},vt.prototype.cause=function(e){return We(e)&&(this.jse_cause=e),this.jse_cause};class A{constructor(e,r){this.x=e,this.y=r}clone(){return new A(this.x,this.y)}}const tf=t=>{switch(t){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;default:throw new fe(`Cannot map file "${t}" to number`)}},qr=t=>{switch(t){case 1:return"a";case 2:return"b";case 3:return"c";case 4:return"d";case 5:return"e";case 6:return"f";case 7:return"g";case 8:return"h";default:throw new fe(`Cannot map "${t}" to file`)}},xv=t=>["B","K","N","Q","R"].includes(t),Nv=t=>["b","k","n","q","r"].includes(t),Pv=t=>["a","b","c","d","e","f","g","h"].includes(t),Iv=t=>typeof t=="number"&&t>0&&t<=8,ve=(t,e)=>t&&e&&t.file===e.file&&t.rank===e.rank,jv=t=>{let e="";return e+=qr(t.file),e+=t.rank,e},K=t=>t===Je.Black||t==Je.DarkGrey?"black":"white",$v=t=>({file:t%8+1,rank:8-Math.floor(t/8)}),rf=t=>(9-t.rank-1)*8+(t.file-1),cr=(t,e)=>t.rank===(e==="white"?8:1);class nf{constructor(){this.files=[],this.ranks=[],this.pieces=[],this.tokens=[]}isEmpty(){return!this.moveType&&this.files.length===0&&this.ranks.length===0&&this.pieces.length===0&&!this.castleSide&&typeof this.isDrawOffer=="undefined"&&typeof this.isGameOver=="undefined"}toNode(){if(this.isDrawOffer)return{sources:this.tokens,kind:"draw-offer"};if(this.isGameOver)return{sources:this.tokens,kind:"game-over",outcome:this.outcome};const e={from:{},to:{}};if(this.pieces[0]&&this.moveType!=="promotion"&&(e.piece=this.pieces[0]),e.kind="move",this.files.length===2)e.from.file=this.files[0],e.to.file=this.files[1];else if(this.files.length===1)e.to.file=this.files[0];else if(this.files.length!==0)throw new fe(`Parsed ${this.files.length} columns for a single move`);if(this.ranks.length===2)e.from.rank=this.ranks[0],e.to.rank=this.ranks[1];else if(this.ranks.length===1)e.to.rank=this.ranks[0];else if(this.ranks.length!==0)throw new fe(`Parsed ${this.ranks.length} ranks for a single move`);return this.moveType==="allegiance"?{...e,type:"allegiance",sources:this.tokens}:this.moveType==="capture"?{...e,type:"capture",sources:this.tokens}:this.moveType==="castle"?{...e,type:"castle",side:this.castleSide,sources:this.tokens}:this.moveType==="en-passant"?{...e,type:"en-passant",sources:this.tokens}:this.moveType==="promotion"?{...e,piece:null,type:"promotion",promotionTo:this.pieces[0],sources:this.tokens}:{...e,sources:this.tokens}}}const Bv=t=>{var d,h,y;let e=0;const r=["castle","draw-offer","piece","step-number","game-over","file","move-separator"],n=["step-number","move-separator"],i=new Set(r),o=(...m)=>{i.clear(),m.forEach(E=>i.add(E))};for(;e<t.length;){const m=t[e];if(!i.has(m.kind))throw new fe(`Parse error on line ${(d=m.source)==null?void 0:d.row} column ${(h=m.source)==null?void 0:h.column}: Token kind "${m.kind}" was not expected after "${(y=t[e-1])==null?void 0:y.kind}"`);switch(m.kind){case"move-separator":o(...r,"step-number","capture");break;case"step-number":o(...r,"move-separator");break;case"promotion":o("piece");break;case"allegiance":case"capture":o("file");break;case"castle":case"double-check":case"check":case"en-passant":o(...r);break;case"checkmate":o("game-over","move-separator");break;case"file":o("rank","capture","allegiance","file");break;case"draw-offer":o(...r,"game-over");break;case"game-over":o("move-separator");break;case"rank":o(...r,"allegiance","capture","check","checkmate","double-check","en-passant","promotion");break;case"piece":o("capture","allegiance","check","checkmate","game-over","file","double-check","en-passant","promotion");break}e++}e=0;const a={kind:"root",children:[]};let s=new nf;const u=()=>{s.isEmpty()||(a.children.push(s.toNode()),s=new nf)},l=()=>{var m;return(m=t[e+1])==null?void 0:m.kind};for(;e<t.length;){const m=t[e];switch(n.includes(m.kind)||s.tokens.push(m),m.kind){case"move-separator":l()!=="en-passant"&&u();break;case"piece":s.pieces.push(m.value);break;case"allegiance":s.moveType="allegiance";break;case"capture":s.moveType="capture";break;case"castle":s.moveType="castle",s.castleSide=m.side,l()!=="move-separator"&&u();break;case"check":case"double-check":s.causesCheck=!0,s.isMate=!1,l()!=="move-separator"&&u();break;case"checkmate":s.causesCheck=!0,s.isMate=!0,l()!=="move-separator"&&u();break;case"file":s.files.push(m.value);break;case"rank":s.ranks.push(m.value),l()||u();break;case"draw-offer":s.isDrawOffer=!0,l()!=="move-separator"&&u();break;case"en-passant":s.moveType="en-passant",l()!=="move-separator"&&u();break;case"promotion":s.moveType="promotion";break;case"game-over":s.isGameOver=!0,s.outcome=m.outcome,l()!=="move-separator"&&u();break}e++}return a},Cv=t=>{const e=t.replace(/[]/gu,"-");let r=1,n=1,i=0;const o=[];for(;i<e.length;){const a=e[i],s=d=>e.substring(i,i+d.length)===d,u=d=>{let h="",y=i;for(;;){const m=e[y];if(y>=e.length||d(m)){y--;break}h+=m,y++}return h},l=(d,h)=>{o.push({...h,source:{column:n,row:r,length:d}}),i+=d,n+=d};if(a===`
`){r++,n=1,l(1,{kind:"move-separator"});continue}if(a==="\r"){n=1,i++;continue}if(s("e.p.")||s(" e.p.")){l(a===" "?5:4,{kind:"en-passant"});continue}if(a===" "||a===";"){l(1,{kind:"move-separator"});continue}if(s("O-O-O")||s("0-0-0")){l(5,{kind:"castle",side:"queen"});continue}if(s("O-O")||s("0-0")){l(3,{kind:"castle",side:"king"});continue}if(a==="+"||a==="\u2020"){l(1,{kind:"check"});continue}if(s("ch")){l(2,{kind:"check"});continue}if(/[#X]/gu.test(a)){l(1,{kind:"checkmate"});continue}if(s("mate")){l(4,{kind:"checkmate"});continue}if(s("dbl ch")){l(6,{kind:"double-check"});continue}if(s("++")){l(2,{kind:"double-check"});continue}if(s("0-1")){l(3,{kind:"game-over",outcome:"black"});continue}if(s("1-0")){l(3,{kind:"game-over",outcome:"white"});continue}if(s("\xBD-\xBD")){l(3,{kind:"game-over",outcome:"draw"});continue}if(s("1/2-1/2")){l(7,{kind:"game-over",outcome:"draw"});continue}if(s("0-0")){l(3,{kind:"game-over",outcome:"forfeit"});continue}if(s("\xBD-0")){l(3,{kind:"game-over",outcome:"forfeit-white"});continue}if(s("1/2-0")){l(5,{kind:"game-over",outcome:"forfeit-white"});continue}if(s("0-\xBD")){l(3,{kind:"game-over",outcome:"forfeit-black"});continue}if(s("0-1/2")){l(5,{kind:"game-over",outcome:"forfeit-black"});continue}if(/[\d]/gu.test(a)){const d=u(y=>!/[\d]/gu.test(y));if(e[i+d.length]==="."){l(d.length+1,{kind:"step-number",value:Number.parseInt(d,10)});continue}}if(/[1-8]/gu.test(a)){l(1,{kind:"rank",value:Number.parseInt(a,10)});continue}if(/[a-h]/gu.test(a)){l(1,{kind:"file",value:tf(a)});continue}if(/[KQRBN]/gu.test(a)){l(1,{kind:"piece",value:a});continue}if(/[x:]/gu.test(a)){l(1,{kind:"capture"});continue}if(s("(=)")){l(3,{kind:"draw-offer"});continue}if(a==="="||a==="/"){l(1,{kind:"promotion"});continue}if(a==="("||a===")"){l(1,{kind:"promotion",bracket:a==="("?"open":"close"});continue}if(a===">"){l(1,{kind:"allegiance"});continue}throw new fe(`Unsupported character at line ${r} column ${n}: "${a}"`)}return o},of=t=>{switch(t.kind){case"draw-offer":return"(=)";case"game-over":{switch(t.outcome){case"black":return"0-1";case"white":return"1-0";case"draw":return"1/2-1/2";case"forfeit":return"0-0";case"forfeit-black":return"0-1/2";case"forfeit-white":return"1/2-0"}break}case"move":{const e=(r,n)=>{let i="";return t.piece&&(i+=t.piece),t.from.file&&(i+=`${qr(t.from.file)}`),t.from.rank&&(i+=`${t.from.rank}`),i+=r,t.type==="promotion"&&t.promotionTo&&(i+=`${t.promotionTo}`),t.to.file&&(i+=`${qr(t.to.file)}`),t.to.rank&&(i+=`${t.to.rank}`),n&&(i+=n),i};switch(t.type){case"allegiance":return e(">");case"capture":return e("x");case"castle":return t.side==="king"?"O-O":"O-O-O";case"en-passant":return e("x"," e.p.");case"promotion":return e("=");default:return e("")}}}},Dv=t=>{const e=[];return t.children.forEach((r,n)=>{const i=n%2===0;(a=>{i?e.push(a):e[e.length-1]+=` ${a}`})(of(r))}),e.filter(Boolean).map((r,n)=>`${n+1}. ${r}`).join(`
`).trim()};var af=(t=>(t[t.Ranks=0]="Ranks",t[t.ActiveColour=1]="ActiveColour",t[t.CastlingRights=2]="CastlingRights",t[t.EnPassantTargets=3]="EnPassantTargets",t[t.HalfmoveClock=4]="HalfmoveClock",t[t.FullmoveNumber=5]="FullmoveNumber",t))(af||{});class sf{constructor(){this.allegianceMark=!1,this.castlingRights=[]}canSetPieceSide(){return!this.pieceSide}setPieceSide(e){if(!this.canSetPieceSide())throw new fe("Cannot set piece side on WipNode, because it's already set");this.pieceSide=e}canSetPiece(){return!this.piece&&this.piece!==null}setPiece(e){if(!this.canSetPiece())throw new fe("Cannot set piece on WipNode, because there is already one set");this.piece=e}canSetAllegianceMark(){return!this.allegianceMark}addAllegianceMark(){if(!this.canSetAllegianceMark())throw new fe("Allegiance mark already set");this.allegianceMark=!0}pieceDataReady(){return!this.canSetPiece()&&!this.canSetPieceSide()}setActiveColour(e){this.activeColour=e}hasCastlingRights(){return this.castlingRights.length!==0}addCastlingRight(e){this.castlingRights.push(e)}canSetEnPassantFile(){return!this.enPassantFile}setEnPassantFile(e){if(!this.canSetEnPassantFile())throw new fe("Cannot set en passant file on WipNode, because there is already one set");this.enPassantFile=e}canSetEnPassantRank(){return!this.enPassantRank}setEnPassantRank(e){if(!this.canSetEnPassantRank())throw new fe("Cannot set en passant rank on WipNode, because there is already one set");this.enPassantRank=e}canSetHalfmoveClock(){return typeof this.halfmoveClock!="number"}setHalfmoveClock(e){this.halfmoveClock=e}canSetFullmoveNumber(){return typeof this.fullmoveNumber!="number"}setFullmoveNumber(e){this.fullmoveNumber=e}isEnPassantType(){return!!(this.enPassantFile&&this.enPassantRank)}toNode(){if(this.piece||this.piece===null)return this.pieceSide==="white"?{kind:"piece",value:{allegiance:this.allegianceMark?Je.LightGrey:Je.White,piece:this.piece?this.piece.toUpperCase():null}}:{kind:"piece",value:{allegiance:this.allegianceMark?Je.DarkGrey:Je.Black,piece:this.piece?this.piece.toUpperCase():null}};if(this.activeColour)return{kind:"active-colour",value:this.activeColour};if(this.castlingRights.length>0){const e=[],r=[];return this.castlingRights.includes("K")&&r.push("king"),this.castlingRights.includes("Q")&&r.push("queen"),this.castlingRights.includes("k")&&e.push("king"),this.castlingRights.includes("q")&&e.push("queen"),{kind:"castling-rights",value:{black:e,white:r}}}if(this.enPassantFile&&this.enPassantRank)return{kind:"en-passant-targets",value:{file:this.enPassantFile,rank:this.enPassantRank}};if(typeof this.halfmoveClock=="number")return{kind:"halfmove-clock",value:this.halfmoveClock};if(typeof this.fullmoveNumber=="number")return{kind:"fullmove-number",value:this.fullmoveNumber};throw new fe(`Cannot create Node from WipNode, ${JSON.stringify({...this},null,2)}`)}}const Mv=t=>{const e={kind:"ast",children:[]};let r=0,n=0,i=new sf;const o=u=>{e.children.push(u),r++},a=()=>{e.children.push(i.toNode()),i=new sf},s=u=>{n=u,r++};for(;r<t.length;){const u=t[r],l=t[r+1];if(n===0){if((u.kind==="char"||u.kind==="number"||u.kind==="separator"||u.kind==="space")&&i.pieceDataReady()&&a(),u.kind==="char"&&Nv(u.value)){i.setPieceSide("black"),i.setPiece(u.value),l||a(),r++;continue}if(u.kind==="char"&&xv(u.value)){i.setPieceSide("white"),i.setPiece(u.value),l||a(),r++;continue}if(u.kind==="char"&&u.value==="p"){i.setPieceSide("black"),i.setPiece(null),l||a(),r++;continue}if(u.kind==="char"&&u.value==="P"){i.setPieceSide("white"),i.setPiece(null),l||a(),r++;continue}if(u.kind==="allegiance"){i.addAllegianceMark(),r++,l||a();continue}if(u.kind==="number"&&u.value>0&&u.value<=8){o({kind:"skip",value:u.value});continue}}switch(n){case 0:{if(u.kind==="separator"){r++;continue}if(u.kind==="space"){n=1,r++;continue}break}case 1:{if(u.kind==="char"&&u.value==="w"){i.setActiveColour("white"),r++;continue}if(u.kind==="char"&&u.value==="b"){i.setActiveColour("black"),r++;continue}if(u.kind==="space"){a(),s(2);continue}break}case 2:{if(u.kind==="char"&&(u.value==="q"||u.value==="Q"||u.value==="k"||u.value==="K")){i.addCastlingRight(u.value),r++;continue}if(u.kind==="hyphen"){r++;continue}if(u.kind==="space"){i.hasCastlingRights()&&a(),s(3);continue}break}case 3:{if(u.kind==="hyphen"){r++;continue}if(u.kind==="char"&&Pv(u.value)){i.setEnPassantFile(tf(u.value)),r++;continue}if(u.kind==="number"&&Iv(u.value)){i.setEnPassantRank(u.value),r++;continue}if(u.kind==="space"){i.isEnPassantType()&&a(),s(4);continue}break}case 4:{if(u.kind==="number"){i.setHalfmoveClock(u.value),r++;continue}if(u.kind==="space"){a(),s(5);continue}break}case 5:{u.kind==="number"&&(i.setFullmoveNumber(u.value),r++,a());continue}}throw new fe(`Unhandled token: ${u.kind}, cursor ${r}, state: ${af[n]}`)}return e},Fv=t=>{let e=0;const r=[],n=(o,a)=>{r.push(a),e+=o},i=o=>{let a="",s=e;for(;;){const u=t[s];if(s>=t.length||o(u)){s--;break}a+=u,s++}return a};for(;e<t.length;){const o=t[e];if(o===">"){n(1,{kind:"allegiance"});continue}if(o==="/"){n(1,{kind:"separator"});continue}if(/\d/gu.test(o)){const a=i(s=>!/[\d]/gu.test(s));n(a.length,{kind:"number",value:Number.parseInt(a,10)});continue}if(o===" "){n(1,{kind:"space"});continue}if(o==="-"||o==="\u2013"){n(1,{kind:"hyphen"});continue}n(1,{kind:"char",value:o})}return r},sa={sections:["positions","active-colour","castlig-rights","en-passant-targets","halfmove-clock","fullmove-number"]},Uv=(t,e=sa)=>{let r="",n=0;t.children.forEach(k=>{var I;switch(k.kind){case"piece":{n>=8&&(r+="/",n=0);const x=K(k.value.allegiance),j=(I=k.value.piece)!=null?I:"p";r+=x==="white"?j.toUpperCase():j.toLowerCase(),(k.value.allegiance===Je.DarkGrey||k.value.allegiance===Je.LightGrey)&&(r+=">"),n++;break}case"skip":{n>=8&&(r+="/",n=0),r+=k.value,n+=k.value;break}}});const i=t.children.find(k=>k.kind==="active-colour");let o="";i?o=i.value==="white"?"w":"b":o="w";const a=t.children.find(k=>k.kind==="castling-rights");let s="";a?(a.value.white.includes("king")&&(s+="K"),a.value.white.includes("queen")&&(s+="Q"),a.value.black.includes("king")&&(s+="k"),a.value.black.includes("queen")&&(s+="q")):s="-";const u=t.children.find(k=>k.kind==="en-passant-targets");let l="";u?l=jv(u.value):l="-";const d=t.children.find(k=>k.kind==="halfmove-clock");let h="0";d&&(h=String(d.value));const y=t.children.find(k=>k.kind==="fullmove-number");let m="0";return y&&(m=String(y.value)),[e.sections.includes("positions")&&r,e.sections.includes("active-colour")&&o,e.sections.includes("castlig-rights")&&s,e.sections.includes("en-passant-targets")&&l,e.sections.includes("halfmove-clock")&&h,e.sections.includes("fullmove-number")&&m].filter(Boolean).join(" ")};class ca{clone(){const e=new ca;return e.memory=[...this.memory],e.activeColour=this.activeColour,e.enPassantTarget=this.enPassantTarget?{...this.enPassantTarget}:null,e._castlingRights=[...this._castlingRights],e.halfmoveClock=this.halfmoveClock,e.fullmoveNumber=this.fullmoveNumber,e.moveHistory={kind:"root",children:[...this.moveHistory.children]},e}removeCastlingRights(e,r){const n=this._castlingRights.findIndex(i=>i.colour===e&&i.side===r);n!==-1&&this._castlingRights.splice(n,1)}castlingRights(e){return this._castlingRights.filter(r=>r.colour===e).map(r=>r.side)}clear(){this.activeColour="white",this.enPassantTarget=null,this._castlingRights=[],this.halfmoveClock=0,this.fullmoveNumber=0,this.moveHistory={kind:"root",children:[]},this.memory=Array.from({length:64}).fill(null)}constructor(){this.clear()}dump(){const e=this.getSquares(),r=Array.from({length:8}).map(()=>Array.from({length:8}).map(()=>"."));let n="";e.filter(Boolean).forEach(i=>{var o,a,s,u;r[i.rank-1][i.file-1]=K(i.allegiance)==="white"?(a=(o=i.piece)==null?void 0:o.toUpperCase())!=null?a:"P":(u=(s=i.piece)==null?void 0:s.toLowerCase())!=null?u:"p"});for(let i=7;i>=0;i--)n+=`${i+1} `,n+=r[i].map(o=>o).join(" "),n+=`
`;return n+=`  ${r[0].map((i,o)=>qr(o+1)).join(" ")}`,n+=`
${this.activeColour} ${this.enPassantTarget&&`${qr(this.enPassantTarget.file)}${this.enPassantTarget.rank}`} ${this.halfmoveClock} ${this.fullmoveNumber}`,n}getSquares(){return this.memory.map((e,r)=>e?{...e,...$v(r)}:null)}getSquare(e){if(!e)throw new fe.VError("Attempted to get square with no coordinates");return this.memory[rf(e)]}setSquare(e,r){this.memory[rf(e)]=r}toAFEN(e=sa){const r={kind:"ast",children:[]};let n=0;if(e.sections.includes("positions")){for(let i=0;i<this.memory.length;i++)this.memory[i]?(n&&(r.children.push({kind:"skip",value:n}),n=0),r.children.push({kind:"piece",value:this.memory[i]})):n++,(i+1)%8===0&&n&&(r.children.push({kind:"skip",value:n}),n=0);n&&r.children.push({kind:"skip",value:n})}if(e.sections.includes("active-colour")&&r.children.push({kind:"active-colour",value:this.activeColour}),e.sections.includes("castlig-rights")){const i={kind:"castling-rights",value:{black:[],white:[]}},o=this.castlingRights("white"),a=this.castlingRights("black");o.includes("king")&&i.value.white.push("king"),o.includes("queen")&&i.value.white.push("queen"),a.includes("king")&&i.value.black.push("king"),a.includes("queen")&&i.value.black.push("queen"),(i.value.white.length>0||i.value.black.length>0)&&r.children.push(i)}return e.sections.includes("en-passant-targets")&&this.enPassantTarget&&r.children.push({kind:"en-passant-targets",value:this.enPassantTarget}),e.sections.includes("halfmove-clock")&&r.children.push({kind:"halfmove-clock",value:this.halfmoveClock}),e.sections.includes("fullmove-number")&&r.children.push({kind:"fullmove-number",value:this.fullmoveNumber}),r}fromAFEN(e){var n;this.clear();let r=0;for(const i of e.children){if(i.kind==="skip"){r+=i.value;continue}if(i.kind==="piece"){this.memory[r]=i.value,r++;continue}if(i.kind==="en-passant-targets"){this.enPassantTarget=i.value;continue}if(i.kind==="castling-rights"){i.value.black.forEach(o=>{this._castlingRights.push({colour:"black",side:o})}),i.value.white.forEach(o=>{this._castlingRights.push({colour:"white",side:o})});continue}if(i.kind==="active-colour"){this.activeColour=i.value;continue}if(i.kind==="fullmove-number"){this.fullmoveNumber=i.value;continue}if(i.kind==="halfmove-clock"){this.halfmoveClock=i.value;continue}throw new fe.VError(`Unhandled node while importing AFEN: ${(n=i.kind)!=null?n:JSON.stringify(i,null,2)}`)}}}const pi={VanillaDefault:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 0",GreyDefault:"r>n>b>q>kb>n>r>/p>p>p>p>p>p>p>p>/8/8/8/8/P>P>P>P>P>P>P>P>/R>N>B>Q>KB>N>R> w KQkq - 0 0"},Je={Black:0,DarkGrey:1,LightGrey:2,White:3},Lv=["B","N","Q","R"];class P{clear(){this.memory.clear()}clone(){const e=new P;return e.memory=this.memory.clone(),e}dump(){return this.memory.dump()}importAFEN(e){this.memory.fromAFEN(Mv(Fv(e)))}importMoveHistory(e){const r=Bv(Cv(e)),n=new P;n.importAFEN(pi.VanillaDefault),r.children.forEach(i=>{const o=n.getValidMoves(),a=P.findMoveIndex(o,i);if(a===-1)throw new fe(`Move ${of(i)} is not valid on this board`);const s=n.executeMoveIndex(a);this.memory.moveHistory.children.push(s)})}toAFEN(e=sa){return Uv(this.memory.toAFEN(e))}getSquares(){return this.memory.getSquares()}get enPassantTarget(){return this.memory.enPassantTarget}get activeColour(){return this.memory.activeColour}get halfmoveClock(){return this.memory.halfmoveClock}get fullmoveNumber(){return this.memory.fullmoveNumber}get castlingRights(){return{black:this.memory.castlingRights("black"),white:this.memory.castlingRights("white")}}getMoveHistory(){return Dv(this.memory.moveHistory)}getMoveHistoryAst(){return this.memory.moveHistory}constructor(){this.memory=new ca}getPositionCount(){const e=this.memory.moveHistory.children,r=new Map,n=new P;n.importAFEN(pi.VanillaDefault);for(const i of e){n.executeNode(i);const o=n.toAFEN({sections:["positions"]}),a=r.get(o);a?r.set(o,a+1):r.set(o,1)}return r}executeAllegianceMoveNode(e){this.memory.setSquare(e.node.to,{allegiance:e.fromSide==="white"?e.to.allegiance+1:e.to.allegiance-1,piece:e.to.piece})}executeCaptureMoveNode(e){this.memory.setSquare(e.node.to,e.from),this.memory.setSquare(e.node.from,null)}executeCastleMoveNode(e){const r=e.node.from,n=e.node.to,i=e.from;if(e.to)throw new fe(`Castling cannot cause a capture on ${JSON.stringify(e.node.to)}`);this.memory.setSquare(n,i),this.memory.setSquare(r,null);const a=e.fromSide==="white"?1:8,s=e.node.side==="king"?{file:8,rank:a}:{file:1,rank:a},u=e.node.side==="king"?{file:6,rank:a}:{file:4,rank:a};this.memory.setSquare(u,this.memory.getSquare(s)),this.memory.setSquare(s,null)}executeEnPassantMoveNode(e){this.memory.setSquare({rank:e.fromSide==="white"?e.node.to.rank-1:e.node.to.rank+1,file:e.node.to.file},null),this.memory.setSquare(e.node.to,e.from),this.memory.setSquare(e.node.from,null)}executePromotionMoveNode(e){this.memory.setSquare(e.node.to,{allegiance:e.from.allegiance,piece:e.node.promotionTo}),this.memory.setSquare(e.node.from,null)}executeDefaultMoveNode(e){this.memory.setSquare(e.node.from,null),this.memory.setSquare(e.node.to,e.from),e.node.piece===null&&Math.abs(e.node.from.rank-e.node.to.rank)===2&&(this.memory.enPassantTarget={file:e.node.from.file,rank:e.fromSide==="white"?e.node.from.rank+1:e.node.from.rank-1})}executeMoveNode(e){if(!e.from.file)throw new fe(`Cannot execute node without "from.file": ${JSON.stringify(e,null,2)}`);const r=this.memory.getSquare(e.from),n=this.memory.getSquare(e.to);if(!r)throw new fe(`There is no piece on file ${e.from.file} rank ${e.from.rank}`);r.piece==="K"&&(this.memory.removeCastlingRights(this.activeColour,"king"),this.memory.removeCastlingRights(this.activeColour,"queen")),r.piece==="R"&&e.from.file===8&&this.memory.removeCastlingRights(this.activeColour,"king"),r.piece==="R"&&e.from.file===1&&this.memory.removeCastlingRights(this.activeColour,"queen"),this.memory.enPassantTarget=null;const i=K(r.allegiance),o=n?K(n.allegiance):null;switch(e.type){case"allegiance":this.executeAllegianceMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"capture":this.executeCaptureMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"castle":this.executeCastleMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"en-passant":this.executeEnPassantMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"promotion":this.executePromotionMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;default:this.executeDefaultMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break}switch(e.type){case"capture":case"en-passant":{this.memory.halfmoveClock=0;break}case null:case void 0:{e.piece?this.memory.halfmoveClock++:this.memory.halfmoveClock=0;break}default:{this.memory.halfmoveClock++;break}}this.memory.activeColour==="black"&&this.memory.fullmoveNumber++,this.memory.activeColour=this.memory.activeColour==="white"?"black":"white"}executeNode(e){switch(e.kind){case"move":{this.executeMoveNode(e);break}default:return}this.memory.moveHistory.children.push(e)}executeMoveIndex(e){if(e<0)throw new fe(`Move index must be positive, got ${e}`);const n=this.getValidMoves().at(e);if(!n)throw new fe(`Move with index ${e} does not exist`);return this.executeNode(n),n}getSquare(e){return this.memory.getSquare(e)}static findMoveIndex(e,r){let n=e;return r.kind==="draw-offer"&&(n=n.filter(i=>i.kind==="draw-offer")),r.kind==="game-over"&&(n=n.filter(i=>i.kind==="game-over"&&i.outcome===r.outcome)),r.kind==="move"&&(r.to&&Object.keys(r.to).length===2&&(n=n.filter(i=>i.kind==="move"&&ve(i.to,r.to))),r.from&&Object.keys(r.from).length===2&&(n=n.filter(i=>i.kind==="move"&&ve(i.from,r.from))),r.type&&(n=n.filter(i=>"type"in i&&i.type===r.type)),r.piece||r.piece===null?n=n.filter(i=>i.kind==="move"&&i.piece===r.piece):n.length>1&&!r.piece&&(n=n.filter(i=>i.kind==="move"&&i.piece===null)),r.type==="promotion"&&(n=n.filter(i=>"promotionTo"in i&&i.promotionTo===r.promotionTo&&ve(i.to,r.to)&&ve(i.from,r.from)))),n.length===1?e.indexOf(n[0]):-1}static getCoordsRelative(e,r){const n={file:e.file+r.x,rank:e.rank+r.y};return n.file>8||n.file<=0||n.rank>8||n.rank<=0?null:n}traceCaptureSteps(e,r){const n=this.memory.getSquare(e);if(!n)return[];const i=[],o=new A(Math.sign(r.x),Math.sign(r.y));let a=e;for(;a=P.getCoordsRelative(a,o),!!a;){const s=this.memory.getSquare(a);if(!s){i.push({...a});continue}if(K(s.allegiance)===K(n.allegiance))break;if(K(s.allegiance)!==K(n.allegiance)){i.push({...a});break}i.push({...a})}return i}getAttackedCoordsBySide(e){const r=this.memory.getSquares().filter(i=>i&&K(i.allegiance)===e),n=[];return r.forEach(i=>{n.push(...this.getAttackedCoordsByCoords(i))}),n}getAttackedCoordsByCoords(e){const r=[],n=this.memory.getSquare(e);if(!n)return r;const i=K(n.allegiance);if(n.piece===null){const o=P.getCoordsRelative(e,new A(i==="white"?-1:1,i==="white"?1:-1)),a=P.getCoordsRelative(e,new A(i==="white"?1:-1,i==="white"?1:-1));return[o,a]}return n.piece==="R"?[...this.traceCaptureSteps(e,new A(1,0)),...this.traceCaptureSteps(e,new A(-1,0)),...this.traceCaptureSteps(e,new A(0,1)),...this.traceCaptureSteps(e,new A(0,-1))].filter(Boolean):n.piece==="N"?[P.getCoordsRelative(e,new A(1,2)),P.getCoordsRelative(e,new A(2,1)),P.getCoordsRelative(e,new A(2,-1)),P.getCoordsRelative(e,new A(1,-2)),P.getCoordsRelative(e,new A(-1,-2)),P.getCoordsRelative(e,new A(-2,-1)),P.getCoordsRelative(e,new A(-2,1)),P.getCoordsRelative(e,new A(-1,2))].filter(Boolean):n.piece==="B"?[...this.traceCaptureSteps(e,new A(1,1)),...this.traceCaptureSteps(e,new A(1,-1)),...this.traceCaptureSteps(e,new A(-1,-1)),...this.traceCaptureSteps(e,new A(-1,1))].filter(Boolean):n.piece==="Q"?[...this.traceCaptureSteps(e,new A(1,0)),...this.traceCaptureSteps(e,new A(-1,0)),...this.traceCaptureSteps(e,new A(0,1)),...this.traceCaptureSteps(e,new A(0,-1)),...this.traceCaptureSteps(e,new A(1,1)),...this.traceCaptureSteps(e,new A(1,-1)),...this.traceCaptureSteps(e,new A(-1,-1)),...this.traceCaptureSteps(e,new A(-1,1))].filter(Boolean):n.piece==="K"?[P.getCoordsRelative(e,new A(0,1)),P.getCoordsRelative(e,new A(1,1)),P.getCoordsRelative(e,new A(1,0)),P.getCoordsRelative(e,new A(1,-1)),P.getCoordsRelative(e,new A(0,-1)),P.getCoordsRelative(e,new A(-1,-1)),P.getCoordsRelative(e,new A(-1,0)),P.getCoordsRelative(e,new A(-1,1))].filter(Boolean):r}getPossibleMoves(){const e=[],r=this.memory.getSquares(),n=this.getAttackedCoordsBySide(this.activeColour==="white"?"black":"white");return this.memory.moveHistory.children.some(o=>o.kind==="game-over")?[]:(r.forEach(o=>{if(!o)return;const a=K(o.allegiance);if(o.piece===null){const s=P.getCoordsRelative(o,new A(0,a==="white"?1:-1)),u=P.getCoordsRelative(o,new A(a==="white"?-1:1,a==="white"?1:-1)),l=P.getCoordsRelative(o,new A(a==="white"?1:-1,a==="white"?1:-1)),d=h=>Lv.map(y=>({kind:"move",type:"promotion",from:o,to:h,piece:this.memory.getSquare(o).piece,promotionTo:y}));if(this.memory.enPassantTarget&&u&&ve(this.memory.enPassantTarget,u)&&!cr(u,a)&&e.push({kind:"move",type:"en-passant",from:o,to:this.memory.enPassantTarget,piece:this.memory.getSquare(o).piece}),this.memory.enPassantTarget&&l&&ve(this.memory.enPassantTarget,l)&&!cr(l,a)&&e.push({kind:"move",type:"en-passant",from:o,to:this.memory.enPassantTarget,piece:this.memory.getSquare(o).piece}),s&&!this.memory.getSquare(s)&&!cr(s,a)&&e.push({kind:"move",type:null,piece:this.memory.getSquare(o).piece,from:o,to:s}),u){const h=this.memory.getSquare(u);h&&K(h.allegiance)!==a&&(cr(u,a)?e.push(...d(u)):e.push({kind:"move",type:"capture",from:o,to:u,piece:this.memory.getSquare(o).piece},{kind:"move",type:"allegiance",from:o,to:u,piece:this.memory.getSquare(o).piece}))}if(l){const h=this.memory.getSquare(l);h&&K(h.allegiance)!==a&&(cr(l,a)?e.push(...d(l)):e.push({kind:"move",type:"capture",from:o,to:l,piece:this.memory.getSquare(o).piece},{kind:"move",type:"allegiance",from:o,to:l,piece:this.memory.getSquare(o).piece}))}if(o.rank===2&&a==="white"||o.rank===7&&a==="black"){const h=P.getCoordsRelative(o,new A(0,a==="white"?2:-2));!this.memory.getSquare(s)&&!this.memory.getSquare(h)&&e.push({kind:"move",type:null,from:o,to:h,piece:this.memory.getSquare(o).piece})}!this.getSquare(s)&&cr(s,a)&&e.push(...d(s))}if(o.piece==="R"){const s=[...this.traceCaptureSteps(o,new A(1,0)),...this.traceCaptureSteps(o,new A(-1,0)),...this.traceCaptureSteps(o,new A(0,1)),...this.traceCaptureSteps(o,new A(0,-1))];e.push(...s.map(u=>{const l=this.memory.getSquare(u);return{kind:"move",type:l?"capture":null,from:o,to:u,piece:o.piece}}),...s.map(u=>this.memory.getSquare(u)?{kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}:null).filter(Boolean))}if(o.piece==="N"&&[P.getCoordsRelative(o,new A(1,2)),P.getCoordsRelative(o,new A(2,1)),P.getCoordsRelative(o,new A(2,-1)),P.getCoordsRelative(o,new A(1,-2)),P.getCoordsRelative(o,new A(-1,-2)),P.getCoordsRelative(o,new A(-2,-1)),P.getCoordsRelative(o,new A(-2,1)),P.getCoordsRelative(o,new A(-1,2))].filter(Boolean).forEach(u=>{const l=this.memory.getSquare(u);l&&K(l.allegiance)===a||(e.push({kind:"move",type:l?"capture":null,from:o,to:u,piece:o.piece}),l&&e.push({kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}))}),o.piece==="B"){const s=[...this.traceCaptureSteps(o,new A(1,1)),...this.traceCaptureSteps(o,new A(1,-1)),...this.traceCaptureSteps(o,new A(-1,-1)),...this.traceCaptureSteps(o,new A(-1,1))];e.push(...s.map(u=>{const l=this.memory.getSquare(u);return{kind:"move",type:l?"capture":null,from:o,to:u,piece:o.piece}}),...s.map(u=>this.memory.getSquare(u)?{kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}:null).filter(Boolean))}if(o.piece==="Q"){const s=[...this.traceCaptureSteps(o,new A(1,0)),...this.traceCaptureSteps(o,new A(-1,0)),...this.traceCaptureSteps(o,new A(0,1)),...this.traceCaptureSteps(o,new A(0,-1)),...this.traceCaptureSteps(o,new A(1,1)),...this.traceCaptureSteps(o,new A(1,-1)),...this.traceCaptureSteps(o,new A(-1,-1)),...this.traceCaptureSteps(o,new A(-1,1))];e.push(...s.map(u=>{const l=this.memory.getSquare(u);return{kind:"move",type:l?"capture":null,from:o,to:u,piece:o.piece}}),...s.map(u=>this.memory.getSquare(u)?{kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}:null).filter(Boolean))}if(o.piece==="K"){[P.getCoordsRelative(o,new A(0,1)),P.getCoordsRelative(o,new A(1,1)),P.getCoordsRelative(o,new A(1,0)),P.getCoordsRelative(o,new A(1,-1)),P.getCoordsRelative(o,new A(0,-1)),P.getCoordsRelative(o,new A(-1,-1)),P.getCoordsRelative(o,new A(-1,0)),P.getCoordsRelative(o,new A(-1,1))].filter(Boolean).forEach(h=>{const y=this.memory.getSquare(h);y&&K(y.allegiance)===a||(e.push({kind:"move",type:y?"capture":null,from:o,to:h,piece:o.piece}),y&&e.push({kind:"move",type:"allegiance",from:o,to:h,piece:o.piece}))});const u=this.memory.castlingRights("white"),l=n.some(h=>ve(o,h));if(this.activeColour==="white"&&u.length>0){const h=this.memory.getSquare({file:1,rank:1}),y=this.memory.getSquare({file:2,rank:1}),m=this.memory.getSquare({file:3,rank:1}),E=this.memory.getSquare({file:4,rank:1}),k=this.memory.getSquare({file:6,rank:1}),I=this.memory.getSquare({file:7,rank:1}),x=this.memory.getSquare({file:8,rank:1}),j=n.some(O=>ve(O,{file:2,rank:1})),J=n.some(O=>ve(O,{file:3,rank:1})),D=n.some(O=>ve(O,{file:4,rank:1})),$=n.some(O=>ve(O,{file:6,rank:1})),W=n.some(O=>ve(O,{file:7,rank:1}));u.forEach(O=>{O==="king"&&!l&&!k&&!I&&x&&x.piece==="R"&&K(x.allegiance)==="white"&&!$&&!W&&e.push({kind:"move",type:"castle",from:o,to:P.getCoordsRelative(o,new A(2,0)),piece:this.memory.getSquare(o).piece,side:"king"}),O==="queen"&&!l&&!y&&!m&&!E&&h&&h.piece==="R"&&K(h.allegiance)==="white"&&!j&&!J&&!D&&e.push({kind:"move",type:"castle",from:o,to:P.getCoordsRelative(o,new A(-2,0)),piece:this.memory.getSquare(o).piece,side:"queen"})})}const d=this.memory.castlingRights("black");if(this.activeColour==="black"&&d.length>0){const h=this.memory.getSquare({file:1,rank:8}),y=this.memory.getSquare({file:2,rank:8}),m=this.memory.getSquare({file:3,rank:8}),E=this.memory.getSquare({file:4,rank:8}),k=this.memory.getSquare({file:6,rank:8}),I=this.memory.getSquare({file:7,rank:8}),x=this.memory.getSquare({file:8,rank:8}),j=n.some(O=>ve(O,{file:2,rank:8})),J=n.some(O=>ve(O,{file:3,rank:8})),D=n.some(O=>ve(O,{file:4,rank:8})),$=n.some(O=>ve(O,{file:6,rank:8})),W=n.some(O=>ve(O,{file:7,rank:8}));d.forEach(O=>{O==="king"&&!l&&!k&&!I&&x&&x.piece==="R"&&K(x.allegiance)==="black"&&!$&&!W&&e.push({kind:"move",type:"castle",from:o,to:P.getCoordsRelative(o,new A(2,0)),piece:this.memory.getSquare(o).piece,side:"king"}),O==="queen"&&!l&&!y&&!m&&!E&&h&&h.piece==="R"&&K(h.allegiance)==="black"&&!j&&!J&&!D&&e.push({kind:"move",type:"castle",from:o,to:P.getCoordsRelative(o,new A(-2,0)),piece:this.memory.getSquare(o).piece,side:"queen"})})}}}),e)}getGameOverNode(e,r){const n=this.getCheckMovesFromList(e),i=this.getSquares().filter(Boolean),o=this.activeColour,a=this.activeColour==="white"?"black":"white",s=(E,k)=>i.reduce((I,x)=>!k&&k!==null&&K(x.allegiance)===E||x.piece===k&&K(x.allegiance)===E?I+1:I,0),u=n.some(E=>{const k=this.memory.getSquare(E.to);return K(k.allegiance)===o});if(u&&r.length===0)return{kind:"game-over",outcome:a,reason:"Checkmate"};if(!u&&r.length===0)return{kind:"game-over",outcome:"draw",reason:"Stalemate"};const l=s(o),d=s(a);if(l===1&&d===1){const E=i.find(I=>K(I.allegiance)===a);if(i.find(I=>K(I.allegiance)===o).piece==="K"&&E.piece==="K")return{kind:"game-over",outcome:"draw",reason:"Insufficient material (king vs king)"}}if(l<=2&&d<=2){const E=i.find(j=>K(j.allegiance)===a&&j.piece==="K"),k=i.find(j=>K(j.allegiance)===a&&j.piece!=="K"),I=i.find(j=>K(j.allegiance)===o&&j.piece==="K"),x=i.find(j=>K(j.allegiance)===o&&j.piece!=="K");if(I&&E&&(!x||x.piece==="N"||x.piece==="B")&&(!k||k.piece==="N"||k.piece==="B"))return{kind:"game-over",outcome:"draw",reason:"Insufficient material (king + minor vs king + minor)"}}if(this.halfmoveClock>=100)return{kind:"game-over",outcome:"draw",reason:"50 move-rule"};const h=this.getPositionCount(),y=this.toAFEN({sections:["positions"]});if((h.get(y)||0)>=3)return{kind:"game-over",outcome:"draw",reason:"Repetition"}}getCheckMoves(){const e=this.getPossibleMoves();return this.getCheckMovesFromList(e)}getCheckMovesFromList(e){return e.filter(r=>{if(r.kind!=="move"||!r.to)return;const n=this.memory.getSquare(r.to);return n&&n.piece==="K"})}getValidMovesFromList(e,r){const n=e.filter(o=>{if(o.kind!=="move")return!0;if(r.from&&!ve(r.from,o.from))return!1;const a=this.memory.getSquare(o.from);if(K(a.allegiance)!==this.activeColour)return!1;const s=this.clone();s.executeNode(o);const u=s.getPossibleMoves();return s.getCheckMovesFromList(u).every(d=>{const h=s.getSquare(d.to);return K(h.allegiance)!==this.activeColour})}),i=this.getGameOverNode(e,n);return i?[i]:n}getValidMoves(e){const r=this.getPossibleMoves();return this.getValidMovesFromList(r,{from:e,side:this.activeColour})}}var cf={exports:{}};(function(t){(function(e,r,n){function i(u){var l=this,d=s();l.next=function(){var h=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=h-(l.c=h|0)},l.c=1,l.s0=d(" "),l.s1=d(" "),l.s2=d(" "),l.s0-=d(u),l.s0<0&&(l.s0+=1),l.s1-=d(u),l.s1<0&&(l.s1+=1),l.s2-=d(u),l.s2<0&&(l.s2+=1),d=null}function o(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function a(u,l){var d=new i(u),h=l&&l.state,y=d.next;return y.int32=function(){return d.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,h&&(typeof h=="object"&&o(h,d),y.state=function(){return o(d,{})}),y}function s(){var u=4022871197,l=function(d){d=String(d);for(var h=0;h<d.length;h++){u+=d.charCodeAt(h);var y=.02519603282416938*u;u=y>>>0,y-=u,y*=u,u=y>>>0,y-=u,u+=y*4294967296}return(u>>>0)*23283064365386963e-26};return l}r&&r.exports?r.exports=a:n&&n.amd?n(function(){return a}):this.alea=a})(Te,t,!1)})(cf);var uf={exports:{}};(function(t){(function(e,r,n){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var h=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^h^h>>>8},s===(s|0)?u.x=s:l+=s;for(var d=0;d<l.length+64;d++)u.x^=l.charCodeAt(d)|0,u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var l=new i(s),d=u&&u.state,h=function(){return(l.next()>>>0)/4294967296};return h.double=function(){do var y=l.next()>>>11,m=(l.next()>>>0)/4294967296,E=(y+m)/(1<<21);while(E===0);return E},h.int32=l.next,h.quick=h,d&&(typeof d=="object"&&o(d,l),h.state=function(){return o(l,{})}),h}r&&r.exports?r.exports=a:n&&n.amd?n(function(){return a}):this.xor128=a})(Te,t,!1)})(uf);var ff={exports:{}};(function(t){(function(e,r,n){function i(s){var u=this,l="";u.next=function(){var h=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(h^h<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var d=0;d<l.length+64;d++)u.x^=l.charCodeAt(d)|0,d==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var l=new i(s),d=u&&u.state,h=function(){return(l.next()>>>0)/4294967296};return h.double=function(){do var y=l.next()>>>11,m=(l.next()>>>0)/4294967296,E=(y+m)/(1<<21);while(E===0);return E},h.int32=l.next,h.quick=h,d&&(typeof d=="object"&&o(d,l),h.state=function(){return o(l,{})}),h}r&&r.exports?r.exports=a:n&&n.amd?n(function(){return a}):this.xorwow=a})(Te,t,!1)})(ff);var lf={exports:{}};(function(t){(function(e,r,n){function i(s){var u=this;u.next=function(){var d=u.x,h=u.i,y,m;return y=d[h],y^=y>>>7,m=y^y<<24,y=d[h+1&7],m^=y^y>>>10,y=d[h+3&7],m^=y^y>>>3,y=d[h+4&7],m^=y^y<<7,y=d[h+7&7],y=y^y<<13,m^=y^y<<9,d[h]=m,u.i=h+1&7,m};function l(d,h){var y,m=[];if(h===(h|0))m[0]=h;else for(h=""+h,y=0;y<h.length;++y)m[y&7]=m[y&7]<<15^h.charCodeAt(y)+m[y+1&7]<<13;for(;m.length<8;)m.push(0);for(y=0;y<8&&m[y]===0;++y);for(y==8?m[7]=-1:m[y],d.x=m,d.i=0,y=256;y>0;--y)d.next()}l(u,s)}function o(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),d=u&&u.state,h=function(){return(l.next()>>>0)/4294967296};return h.double=function(){do var y=l.next()>>>11,m=(l.next()>>>0)/4294967296,E=(y+m)/(1<<21);while(E===0);return E},h.int32=l.next,h.quick=h,d&&(d.x&&o(d,l),h.state=function(){return o(l,{})}),h}r&&r.exports?r.exports=a:n&&n.amd?n(function(){return a}):this.xorshift7=a})(Te,t,!1)})(lf);var pf={exports:{}};(function(t){(function(e,r,n){function i(s){var u=this;u.next=function(){var d=u.w,h=u.X,y=u.i,m,E;return u.w=d=d+1640531527|0,E=h[y+34&127],m=h[y=y+1&127],E^=E<<13,m^=m<<17,E^=E>>>15,m^=m>>>12,E=h[y]=E^m,u.i=y,E+(d^d>>>16)|0};function l(d,h){var y,m,E,k,I,x=[],j=128;for(h===(h|0)?(m=h,h=null):(h=h+"\0",m=0,j=Math.max(j,h.length)),E=0,k=-32;k<j;++k)h&&(m^=h.charCodeAt((k+32)%h.length)),k===0&&(I=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,k>=0&&(I=I+1640531527|0,y=x[k&127]^=m+I,E=y==0?E+1:0);for(E>=128&&(x[(h&&h.length||0)&127]=-1),E=127,k=4*128;k>0;--k)m=x[E+34&127],y=x[E=E+1&127],m^=m<<13,y^=y<<17,m^=m>>>15,y^=y>>>12,x[E]=m^y;d.w=I,d.X=x,d.i=E}l(u,s)}function o(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),d=u&&u.state,h=function(){return(l.next()>>>0)/4294967296};return h.double=function(){do var y=l.next()>>>11,m=(l.next()>>>0)/4294967296,E=(y+m)/(1<<21);while(E===0);return E},h.int32=l.next,h.quick=h,d&&(d.X&&o(d,l),h.state=function(){return o(l,{})}),h}r&&r.exports?r.exports=a:n&&n.amd?n(function(){return a}):this.xor4096=a})(Te,t,!1)})(pf);var hf={exports:{}};(function(t){(function(e,r,n){function i(s){var u=this,l="";u.next=function(){var h=u.b,y=u.c,m=u.d,E=u.a;return h=h<<25^h>>>7^y,y=y-m|0,m=m<<24^m>>>8^E,E=E-h|0,u.b=h=h<<20^h>>>12^y,u.c=y=y-m|0,u.d=m<<16^y>>>16^E,u.a=E-h|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var d=0;d<l.length+20;d++)u.b^=l.charCodeAt(d)|0,u.next()}function o(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var l=new i(s),d=u&&u.state,h=function(){return(l.next()>>>0)/4294967296};return h.double=function(){do var y=l.next()>>>11,m=(l.next()>>>0)/4294967296,E=(y+m)/(1<<21);while(E===0);return E},h.int32=l.next,h.quick=h,d&&(typeof d=="object"&&o(d,l),h.state=function(){return o(l,{})}),h}r&&r.exports?r.exports=a:n&&n.amd?n(function(){return a}):this.tychei=a})(Te,t,!1)})(hf);var df={exports:{}};(function(t){(function(e,r,n){var i=256,o=6,a=52,s="random",u=n.pow(i,o),l=n.pow(2,a),d=l*2,h=i-1,y;function m(D,$,W){var O=[];$=$==!0?{entropy:!0}:$||{};var L=x(I($.entropy?[D,J(r)]:D==null?j():D,3),O),ee=new E(O),de=function(){for(var ae=ee.g(o),le=u,Re=0;ae<l;)ae=(ae+Re)*i,le*=i,Re=ee.g(1);for(;ae>=d;)ae/=2,le/=2,Re>>>=1;return(ae+Re)/le};return de.int32=function(){return ee.g(4)|0},de.quick=function(){return ee.g(4)/4294967296},de.double=de,x(J(ee.S),r),($.pass||W||function(ae,le,Re,ge){return ge&&(ge.S&&k(ge,ee),ae.state=function(){return k(ee,{})}),Re?(n[s]=ae,le):ae})(de,L,"global"in $?$.global:this==n,$.state)}function E(D){var $,W=D.length,O=this,L=0,ee=O.i=O.j=0,de=O.S=[];for(W||(D=[W++]);L<i;)de[L]=L++;for(L=0;L<i;L++)de[L]=de[ee=h&ee+D[L%W]+($=de[L])],de[ee]=$;(O.g=function(ae){for(var le,Re=0,ge=O.i,Pe=O.j,xe=O.S;ae--;)le=xe[ge=h&ge+1],Re=Re*i+xe[h&(xe[ge]=xe[Pe=h&Pe+le])+(xe[Pe]=le)];return O.i=ge,O.j=Pe,Re})(i)}function k(D,$){return $.i=D.i,$.j=D.j,$.S=D.S.slice(),$}function I(D,$){var W=[],O=typeof D,L;if($&&O=="object")for(L in D)try{W.push(I(D[L],$-1))}catch{}return W.length?W:O=="string"?D:D+"\0"}function x(D,$){for(var W=D+"",O,L=0;L<W.length;)$[h&L]=h&(O^=$[h&L]*19)+W.charCodeAt(L++);return J($)}function j(){try{var D;return y&&(D=y.randomBytes)?D=D(i):(D=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(D)),J(D)}catch{var $=e.navigator,W=$&&$.plugins;return[+new Date,e,W,e.screen,J(r)]}}function J(D){return String.fromCharCode.apply(0,D)}if(x(n.random(),r),t.exports){t.exports=m;try{y=require("crypto")}catch{}}else n["seed"+s]=m})(typeof self!="undefined"?self:Te,[],Math)})(df);var Gv=cf.exports,qv=uf.exports,Wv=ff.exports,Hv=lf.exports,Yv=pf.exports,Vv=hf.exports,Bt=df.exports;Bt.alea=Gv,Bt.xor128=qv,Bt.xorwow=Wv,Bt.xorshift7=Hv,Bt.xor4096=Yv,Bt.tychei=Vv;var zv=Bt;const Kv=t=>{const e=t.allegiance===Je.Black||t.allegiance===Je.White;let r=0;switch(t.piece){case null:r=1;break;case"N":case"B":r=3;break;case"R":r=5;break;case"Q":r=9;break}return e?r:r/2},gf=t=>{let n=t.getSquares().filter(Boolean).reduce((i,o)=>{const a=Kv(o);return K(o.allegiance)==="white"?i+a:i-a},0);return t.castlingRights.white.includes("king")&&(n+=4),t.castlingRights.white.includes("queen")&&(n+=5),t.castlingRights.black.includes("king")&&(n-=4),t.castlingRights.black.includes("queen")&&(n-=5),t.activeColour==="white"?n-=t.halfmoveClock/10:n+=t.halfmoveClock/10,n},yf=(t,e,r,n=String(Math.random()),i=performance.now(),o=zv(n))=>{const a=t.getValidMoves(),s=new Map;for(let y=0;y<a.length;y++){const m=a[y],E=t.clone();E.executeNode(m);let k=0;const I=performance.now()-i>e,x=r<=0;I?k=-gf(E):x||(k=yf(E,e,r-1,n,i,o).score);const j=s.get(k);s.set(k,j?[...j,y]:[y])}const u=[...s.entries()].sort(),[l,d]=t.activeColour==="white"?u.at(-1):u.at(0),h=d.at(Math.floor(o()*d.length));return{score:l,index:h,seed:n}},Xv=()=>({dsn:"https://6ec3d5f725e0ebbda854aefb1948d0aa@o4505943541678080.ingest.sentry.io/4505943543447552",release:"e53405e88fa08ad29b688c54f8f280caae1f8c06",environment:"production",tracesSampleRate:0,replaysSessionSampleRate:0,replaysOnErrorSampleRate:1}),we=new P;we.importAFEN(pi.VanillaDefault);const Jv=t=>{if(t.length!==1)return null;const e=t.at(0);return!e||e.kind!=="game-over"?null:e};Bh({...Xv()}),onmessage=t=>{try{const e=t.data;switch(e.type){case"import-afen":{we.importAFEN(e.afen);break}case"import-move-history":{we.importMoveHistory(e.history);break}case"reset":{we.clear(),we.importAFEN(pi.VanillaDefault),postMessage({type:"ready"});break}case"execute-move-index":{const o=we.executeMoveIndex(e.index);postMessage({type:"node-execution",node:o});break}case"bot-move":{const o=yf(we,15e3,3),a=we.executeMoveIndex(o.index);postMessage({type:"node-execution",node:a});break}}const r=we.getValidMoves(),n=Jv(r),i={type:"board-update",afen:we.toAFEN(),moveHistory:we.getMoveHistory(),activeColour:we.activeColour,boardScore:gf(we),validMoves:r,checkMoves:we.getCheckMoves(),enPassantTarget:we.enPassantTarget,moveHistoryAst:we.getMoveHistoryAst(),squares:we.getSquares(),gameOver:n};postMessage(i)}catch(e){e instanceof Error&&Qa(e)}}})();
