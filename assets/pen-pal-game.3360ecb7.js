import{Q as y,a as i}from"./QCard.78fa8550.js";import{A as x,K as _,as as g,a as w,k as C,w as b,B as v,C as p,D as u,G as r,aj as k,M as e,P as d,O as A}from"./index.90ee8eaf.js";import{u as q}from"./use-quasar.3e6ad70c.js";import{a as H,u as z,_ as M,G as B,b as O}from"./board-worker.b8c1d317.js";import{H as n}from"./hex.dd120459.js";import"./use-dark.665573af.js";import"./QList.f8fe278d.js";import"./QScrollObserver.43ca2596.js";import"./focus-manager.202af5b7.js";import"./chess-piece.2d3aa9e8.js";import"./QSeparator.e2862eb2.js";const V=x({__name:"pen-pal-game",setup(T){const o=_(),f=g(),a=H({autoplayFor:[]}),t=w(()=>{const s=Array.isArray(o.params.state)?o.params.state[0]:o.params.state,m=Array.isArray(o.params.history)?o.params.history[0]:o.params.history;return{afen:n.hexToUtf8(s),history:n.hexToUtf8(m)}});C(()=>{a.reset(),t.value.afen&&a.importAfen(t.value.afen),t.value.history&&a.importMoveHistory(t.value.history)});const h=s=>{a.executeMoveIndex(s)};b(a.afen,s=>{f.replace({path:`/play/pen-pal/${n.utf8ToHex(s)}/${n.utf8ToHex(t.value.history)}`})});const l=q(),c=z();return(s,m)=>(v(),p(y,{flat:"",class:"full-width"},{default:u(()=>[r(i,{horizontal:e(l).screen.gt.sm,class:d({"q-px-none":e(l).screen.lt.sm})},{default:u(()=>[r(i,{style:k({width:`${e(c)}px`}),class:d({"q-px-none":e(l).screen.lt.sm})},{default:u(()=>[r(M,{onExecuteNodeIndex:h,board:e(a),perspective:e(a).activeColour.value,"active-colour":e(a).activeColour.value,"check-moves":e(a).checkMoves.value,"en-passant-target":e(a).enPassantTarget.value,"move-history-ast":e(a).moveHistoryAst.value,squares:e(a).squares.value,"valid-moves":e(a).validMoves.value,"play-as":["white","black"],width:e(c),"rounded-borders":e(l).screen.gt.xs},null,8,["board","perspective","active-colour","check-moves","en-passant-target","move-history-ast","squares","valid-moves","width","rounded-borders"])]),_:1},8,["style","class"]),r(i,{class:"q-mb-md full-width"},{default:u(()=>[r(B,{"move-history":e(a).moveHistoryAst.value,"active-colour":e(a).activeColour.value,"own-colour":e(a).activeColour.value,afen:e(a).afen.value,"game-over":e(a).gameOver.value},null,8,["move-history","active-colour","own-colour","afen","game-over"])]),_:1})]),_:1},8,["horizontal","class"]),e(a).gameOver.value?(v(),p(O,{key:0,node:e(a).gameOver.value},null,8,["node"])):A("",!0)]),_:1}))}});export{V as default};
//# sourceMappingURL=pen-pal-game.3360ecb7.js.map
