import{Q as h}from"./selection.d9482f88.js";import{B as _,Q as b}from"./chess-piece.3f4de6d6.js";import{Q as l,a as i}from"./QCard.18a41439.js";import{_ as w,a as N}from"./afen-info.a407b273.js";import{u as x}from"./use-quasar.ab1c7df1.js";import{M as Q,o as B,a as d,r as E,N as g,O as A,P as t,S as a,ac as F,U as k}from"./index.24610c7a.js";import"./use-dark.8f2925c9.js";import"./QList.acc13465.js";import"./focus-manager.202af5b7.js";const C={class:"col-lg col-md-12 full-width"},$=Q({__name:"online-game",props:{connection:{}},setup(u){const o=u;B(()=>{o.connection.disconnect()});const n=d(()=>{const e=new _;return e.importAFEN(o.connection.boardAFEN.value),e}),m=e=>{const s=n.value.findMoveIndex(e);s!==-1&&(n.value.executeMoveIndex(s),o.connection.sendMessage({type:"afen-update",value:n.value.toAFEN()}))},r=E(800),v=x(),f=e=>{if(v.screen.gt.md){r.value=e.width-e.width/8-200;return}r.value=e.width-e.width/8},p=d(()=>o.connection.serverSide.value?o.connection.mode.value==="server"?o.connection.serverSide.value:o.connection.serverSide.value==="white"?"black":"white":null);return(e,s)=>(g(),A(l,{flat:""},{default:t(()=>[a(i,{class:"row"},{default:t(()=>{var c;return[a(h,{onResize:f}),a(w,{"model-value":e.connection.boardAFEN.value,width:r.value,onExecuteNode:m,board:n.value,perspective:(c=p.value)!=null?c:"white","play-as":["white","black"]},null,8,["model-value","width","board","perspective"]),F("div",C,[a(l,{flat:"",bordered:"",class:"full-height"},{default:t(()=>[a(i,{class:"bg-primary q-mb-md"},{default:t(()=>[a(b,null,{default:t(()=>[k("Board information")]),_:1})]),_:1}),a(N,{"model-value":e.connection.boardAFEN.value},null,8,["model-value"])]),_:1})])]}),_:1})]),_:1}))}});export{$ as default};
