import{u as p}from"./use-quasar.bbe1ecbb.js";import{u as f,_ as h,C as x,G as g,a as y}from"./board-worker.02b5481b.js";import{A as b,o as k,a as w,k as _,w as C,B as u,C as i,D as s,G as v,M as o,O as M}from"./index.108c2b55.js";import"./QCard.a4dfffda.js";import"./use-dark.cd657ce4.js";import"./QList.08d35e83.js";import"./QScrollObserver.182eb192.js";import"./focus-manager.202af5b7.js";import"./chess-piece.fbc0836d.js";import"./QSeparator.4f3e3a35.js";import"./notify.e8adb21e.js";import"./exports.9d6348df.js";const F=b({__name:"online-game",props:{connection:{}},setup(l){const a=l;k(()=>{a.connection.disconnect()});const m=p(),c=w(()=>a.connection.serverSide.value?a.connection.mode.value==="server"?a.connection.serverSide.value:a.connection.serverSide.value==="white"?"black":"white":null),e=f({autoplayFor:[]});_(()=>e.reset());const d=t=>{a.connection.sendMessage({type:"execute-node-index",value:t})};return C(a.connection.moveHistory,t=>{const n=t.at(-1);typeof n=="number"&&e.executeMoveIndex(n)}),(t,n)=>(u(),i(h,null,{board:s(()=>{var r;return[v(x,{onExecuteNodeIndex:d,"model-value":o(e).afen.value,"valid-moves":o(e).validMoves.value,board:o(e),perspective:(r=c.value)!=null?r:"white","play-as":["white","black"],"rounded-borders":o(m).screen.gt.xs,"active-colour":o(e).activeColour.value,"check-moves":o(e).checkMoves.value,"en-passant-target":o(e).enPassantTarget.value,"move-history-ast":o(e).moveHistoryAst.value,squares:o(e).squares.value},null,8,["model-value","valid-moves","board","perspective","rounded-borders","active-colour","check-moves","en-passant-target","move-history-ast","squares"])]}),sidebar:s(()=>{var r;return[v(g,{"move-history":o(e).moveHistoryAst.value,"active-colour":o(e).activeColour.value,"own-colour":(r=c.value)!=null?r:"white",afen:o(e).afen.value,"game-over":o(e).gameOver.value},null,8,["move-history","active-colour","own-colour","afen","game-over"])]}),default:s(()=>[o(e).gameOver.value?(u(),i(y,{key:0,node:o(e).gameOver.value},null,8,["node"])):M("",!0)]),_:1}))}});export{F as default};
//# sourceMappingURL=online-game.eb0abd74.js.map
