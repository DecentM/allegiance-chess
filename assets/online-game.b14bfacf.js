import{Q as f,a as l}from"./QCard.331ac5d6.js";import{B as h}from"./board.6b3cc517.js";import{u as w}from"./use-quasar.54e9826a.js";import{_ as g,G as _}from"./game-sidebar.65b086ac.js";import{C as b,o as y,a as u,D as x,E as z,F as s,J as r,ag as E,R as N}from"./index.c429e148.js";import"./use-dark.8f380d37.js";import"./QList.aad54f97.js";import"./QScrollObserver.80f0d1c3.js";import"./focus-manager.202af5b7.js";import"./chess-piece.f8963bca.js";const i=200,G=b({__name:"online-game",props:{connection:{}},setup(v){const e=v;y(()=>{e.connection.disconnect()});const a=u(()=>{const n=new h;return n.importAFEN(e.connection.boardAFEN.value),n.importMoveHistory(e.connection.moveHistory.value),n}),p=n=>{const c=a.value.findMoveIndex(n);c!==-1&&e.connection.sendMessage({type:"execute-node-index",value:c})},o=w(),d=u(()=>o.screen.gt.lg?o.screen.sizes.lg-i:o.screen.gt.md?o.screen.sizes.md-i:o.screen.gt.sm?o.screen.sizes.sm-i:o.screen.width-i-150),m=u(()=>e.connection.serverSide.value?e.connection.mode.value==="server"?e.connection.serverSide.value:e.connection.serverSide.value==="white"?"black":"white":null);return(n,c)=>(x(),z(f,{flat:"",class:"full-width"},{default:s(()=>[r(l,{horizontal:N(o).screen.gt.sm},{default:s(()=>[r(l,{style:E({width:`${d.value}px`})},{default:s(()=>{var t;return[r(g,{"model-value":n.connection.boardAFEN.value,width:d.value,onExecuteNode:p,board:a.value,perspective:(t=m.value)!=null?t:"white","play-as":["white","black"]},null,8,["model-value","width","board","perspective"])]}),_:1},8,["style"]),r(l,{class:"q-mb-md full-width"},{default:s(()=>{var t;return[r(_,{"move-history":a.value.getMoveHistoryAst(),"active-colour":a.value.activeColour,"own-colour":(t=m.value)!=null?t:"white",afen:n.connection.boardAFEN.value},null,8,["move-history","active-colour","own-colour","afen"])]}),_:1})]),_:1},8,["horizontal"])]),_:1}))}});export{G as default};
//# sourceMappingURL=online-game.b14bfacf.js.map
