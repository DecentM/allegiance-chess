import{d as S,at as pr}from"./index.602bb614.js";var Ee=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},St={exports:{}},Sn={},fe={},Zi={},En=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},Ca=En,kn=function(){return Ca()&&!!Symbol.toStringTag},Hn=typeof Symbol!="undefined"&&Symbol,Ma=En,$a=function(){return typeof Hn!="function"||typeof Symbol!="function"||typeof Hn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ma()},Vn={foo:{}},Ia=Object,Da=function(){return{__proto__:Vn}.foo===Vn.foo&&!({__proto__:null}instanceof Ia)},La="Function.prototype.bind called on incompatible ",Tr=Array.prototype.slice,Ba=Object.prototype.toString,Fa="[object Function]",xa=function(e){var r=this;if(typeof r!="function"||Ba.call(r)!==Fa)throw new TypeError(La+r);for(var n=Tr.call(arguments,1),i,o=function(){if(this instanceof i){var c=r.apply(this,n.concat(Tr.call(arguments)));return Object(c)===c?c:this}else return r.apply(e,n.concat(Tr.call(arguments)))},a=Math.max(0,r.length-n.length),s=[],f=0;f<a;f++)s.push("$"+f);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i},Ua=xa,_n=Function.prototype.bind||Ua,qa=_n,Wa=qa.call(Function.call,Object.prototype.hasOwnProperty),j,et=SyntaxError,eo=Function,Ke=TypeError,Nr=function(t){try{return eo('"use strict"; return ('+t+").constructor;")()}catch{}},$e=Object.getOwnPropertyDescriptor;if($e)try{$e({},"")}catch{$e=null}var Cr=function(){throw new Ke},Ga=$e?function(){try{return arguments.callee,Cr}catch{try{return $e(arguments,"callee").get}catch{return Cr}}}():Cr,qe=$a(),Ha=Da(),H=Object.getPrototypeOf||(Ha?function(t){return t.__proto__}:null),Ve={},Va=typeof Uint8Array=="undefined"||!H?j:H(Uint8Array),Ie={"%AggregateError%":typeof AggregateError=="undefined"?j:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?j:ArrayBuffer,"%ArrayIteratorPrototype%":qe&&H?H([][Symbol.iterator]()):j,"%AsyncFromSyncIteratorPrototype%":j,"%AsyncFunction%":Ve,"%AsyncGenerator%":Ve,"%AsyncGeneratorFunction%":Ve,"%AsyncIteratorPrototype%":Ve,"%Atomics%":typeof Atomics=="undefined"?j:Atomics,"%BigInt%":typeof BigInt=="undefined"?j:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?j:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?j:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?j:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?j:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?j:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?j:FinalizationRegistry,"%Function%":eo,"%GeneratorFunction%":Ve,"%Int8Array%":typeof Int8Array=="undefined"?j:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?j:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?j:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":qe&&H?H(H([][Symbol.iterator]())):j,"%JSON%":typeof JSON=="object"?JSON:j,"%Map%":typeof Map=="undefined"?j:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!qe||!H?j:H(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?j:Promise,"%Proxy%":typeof Proxy=="undefined"?j:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?j:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?j:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!qe||!H?j:H(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?j:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":qe&&H?H(""[Symbol.iterator]()):j,"%Symbol%":qe?Symbol:j,"%SyntaxError%":et,"%ThrowTypeError%":Ga,"%TypedArray%":Va,"%TypeError%":Ke,"%Uint8Array%":typeof Uint8Array=="undefined"?j:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?j:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?j:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?j:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?j:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?j:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?j:WeakSet};if(H)try{null.error}catch(t){var za=H(H(t));Ie["%Error.prototype%"]=za}var Ka=function t(e){var r;if(e==="%AsyncFunction%")r=Nr("async function () {}");else if(e==="%GeneratorFunction%")r=Nr("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Nr("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&H&&(r=H(i.prototype))}return Ie[e]=r,r},zn={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Et=_n,rr=Wa,Ya=Et.call(Function.call,Array.prototype.concat),Ja=Et.call(Function.apply,Array.prototype.splice),Kn=Et.call(Function.call,String.prototype.replace),nr=Et.call(Function.call,String.prototype.slice),Qa=Et.call(Function.call,RegExp.prototype.exec),Xa=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Za=/\\(\\)?/g,es=function(e){var r=nr(e,0,1),n=nr(e,-1);if(r==="%"&&n!=="%")throw new et("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new et("invalid intrinsic syntax, expected opening `%`");var i=[];return Kn(e,Xa,function(o,a,s,f){i[i.length]=s?Kn(f,Za,"$1"):a||o}),i},ts=function(e,r){var n=e,i;if(rr(zn,n)&&(i=zn[n],n="%"+i[0]+"%"),rr(Ie,n)){var o=Ie[n];if(o===Ve&&(o=Ka(n)),typeof o=="undefined"&&!r)throw new Ke("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new et("intrinsic "+e+" does not exist!")},kt=function(e,r){if(typeof e!="string"||e.length===0)throw new Ke("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ke('"allowMissing" argument must be a boolean');if(Qa(/^%?[^%]*%?$/,e)===null)throw new et("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=es(e),i=n.length>0?n[0]:"",o=ts("%"+i+"%",r),a=o.name,s=o.value,f=!1,u=o.alias;u&&(i=u[0],Ja(n,Ya([0,1],u)));for(var c=1,p=!0;c<n.length;c+=1){var y=n[c],m=nr(y,0,1),b=nr(y,-1);if((m==='"'||m==="'"||m==="`"||b==='"'||b==="'"||b==="`")&&m!==b)throw new et("property names with quotes must have matching quotes");if((y==="constructor"||!p)&&(f=!0),i+="."+y,a="%"+i+"%",rr(Ie,a))s=Ie[a];else if(s!=null){if(!(y in s)){if(!r)throw new Ke("base intrinsic for "+e+" exists, but the property is not available.");return}if($e&&c+1>=n.length){var w=$e(s,y);p=!!w,p&&"get"in w&&!("originalValue"in w.get)?s=w.get:s=s[y]}else p=rr(s,y),s=s[y];p&&!f&&(Ie[a]=s)}}return s},_t={exports:{}};(function(t){var e=_n,r=kt,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),a=r("%Object.getOwnPropertyDescriptor%",!0),s=r("%Object.defineProperty%",!0),f=r("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}t.exports=function(p){var y=o(e,i,arguments);if(a&&s){var m=a(y,"length");m.configurable&&s(y,"length",{value:1+f(0,p.length-(arguments.length-1))})}return y};var u=function(){return o(e,n,arguments)};s?s(t.exports,"apply",{value:u}):t.exports.apply=u})(_t);var to=kt,ro=_t.exports,rs=ro(to("String.prototype.indexOf")),hr=function(e,r){var n=to(e,!!r);return typeof n=="function"&&rs(e,".prototype.")>-1?ro(n):n},ns=kn(),is=hr,tn=is("Object.prototype.toString"),dr=function(e){return ns&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:tn(e)==="[object Arguments]"},no=function(e){return dr(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&tn(e)!=="[object Array]"&&tn(e.callee)==="[object Function]"},os=function(){return dr(arguments)}();dr.isLegacyArguments=no;var as=os?dr:no,ss=Object.prototype.toString,fs=Function.prototype.toString,us=/^\s*(?:function)?\*/,io=kn(),Mr=Object.getPrototypeOf,ls=function(){if(!io)return!1;try{return Function("return function*() {}")()}catch{}},$r,cs=function(e){if(typeof e!="function")return!1;if(us.test(fs.call(e)))return!0;if(!io){var r=ss.call(e);return r==="[object GeneratorFunction]"}if(!Mr)return!1;if(typeof $r=="undefined"){var n=ls();$r=n?Mr(n):!1}return Mr(e)===$r},oo=Function.prototype.toString,ze=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,rn,Ut;if(typeof ze=="function"&&typeof Object.defineProperty=="function")try{rn=Object.defineProperty({},"length",{get:function(){throw Ut}}),Ut={},ze(function(){throw 42},null,rn)}catch(t){t!==Ut&&(ze=null)}else ze=null;var ps=/^\s*class\b/,nn=function(e){try{var r=oo.call(e);return ps.test(r)}catch{return!1}},Ir=function(e){try{return nn(e)?!1:(oo.call(e),!0)}catch{return!1}},qt=Object.prototype.toString,hs="[object Object]",ds="[object Function]",ys="[object GeneratorFunction]",gs="[object HTMLAllCollection]",ms="[object HTML document.all class]",vs="[object HTMLCollection]",bs=typeof Symbol=="function"&&!!Symbol.toStringTag,ws=!(0 in[,]),on=function(){return!1};if(typeof document=="object"){var Ss=document.all;qt.call(Ss)===qt.call(document.all)&&(on=function(e){if((ws||!e)&&(typeof e=="undefined"||typeof e=="object"))try{var r=qt.call(e);return(r===gs||r===ms||r===vs||r===hs)&&e("")==null}catch{}return!1})}var Es=ze?function(e){if(on(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{ze(e,null,rn)}catch(r){if(r!==Ut)return!1}return!nn(e)&&Ir(e)}:function(e){if(on(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(bs)return Ir(e);if(nn(e))return!1;var r=qt.call(e);return r!==ds&&r!==ys&&!/^\[object HTML/.test(r)?!1:Ir(e)},ks=Es,_s=Object.prototype.toString,ao=Object.prototype.hasOwnProperty,Rs=function(e,r,n){for(var i=0,o=e.length;i<o;i++)ao.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},As=function(e,r,n){for(var i=0,o=e.length;i<o;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},Os=function(e,r,n){for(var i in e)ao.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Ps=function(e,r,n){if(!ks(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),_s.call(e)==="[object Array]"?Rs(e,r,i):typeof e=="string"?As(e,r,i):Os(e,r,i)},js=Ps,Dr=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Ts=typeof globalThis=="undefined"?Ee:globalThis,Ns=function(){for(var e=[],r=0;r<Dr.length;r++)typeof Ts[Dr[r]]=="function"&&(e[e.length]=Dr[r]);return e},Cs=kt,Wt=Cs("%Object.getOwnPropertyDescriptor%",!0);if(Wt)try{Wt([],"length")}catch{Wt=null}var so=Wt,ir=js,Ms=Ns,Yn=_t.exports,Rn=hr,Gt=so,$s=Rn("Object.prototype.toString"),fo=kn(),Jn=typeof globalThis=="undefined"?Ee:globalThis,an=Ms(),An=Rn("String.prototype.slice"),Lr=Object.getPrototypeOf,Is=Rn("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},or={__proto__:null};fo&&Gt&&Lr?ir(an,function(t){var e=new Jn[t];if(Symbol.toStringTag in e){var r=Lr(e),n=Gt(r,Symbol.toStringTag);if(!n){var i=Lr(r);n=Gt(i,Symbol.toStringTag)}or["$"+t]=Yn(n.get)}}):ir(an,function(t){var e=new Jn[t];or["$"+t]=Yn(e.slice)});var Ds=function(e){var r=!1;return ir(or,function(n,i){if(!r)try{"$"+n(e)===i&&(r=An(i,1))}catch{}}),r},Ls=function(e){var r=!1;return ir(or,function(n,i){if(!r)try{n(e),r=An(i,1)}catch{}}),r},uo=function(e){if(!e||typeof e!="object")return!1;if(!fo){var r=An($s(e),8,-1);return Is(an,r)>-1?r:r!=="Object"?!1:Ls(e)}return Gt?Ds(e):null},Bs=uo,Fs=function(e){return!!Bs(e)};(function(t){var e=as,r=cs,n=uo,i=Fs;function o(d){return d.call.bind(d)}var a=typeof BigInt!="undefined",s=typeof Symbol!="undefined",f=o(Object.prototype.toString),u=o(Number.prototype.valueOf),c=o(String.prototype.valueOf),p=o(Boolean.prototype.valueOf);if(a)var y=o(BigInt.prototype.valueOf);if(s)var m=o(Symbol.prototype.valueOf);function b(d,Na){if(typeof d!="object")return!1;try{return Na(d),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function w(d){return typeof Promise!="undefined"&&d instanceof Promise||d!==null&&typeof d=="object"&&typeof d.then=="function"&&typeof d.catch=="function"}t.isPromise=w;function O(d){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(d):i(d)||h(d)}t.isArrayBufferView=O;function E(d){return n(d)==="Uint8Array"}t.isUint8Array=E;function R(d){return n(d)==="Uint8ClampedArray"}t.isUint8ClampedArray=R;function q(d){return n(d)==="Uint16Array"}t.isUint16Array=q;function ie(d){return n(d)==="Uint32Array"}t.isUint32Array=ie;function X(d){return n(d)==="Int8Array"}t.isInt8Array=X;function W(d){return n(d)==="Int16Array"}t.isInt16Array=W;function k(d){return n(d)==="Int32Array"}t.isInt32Array=k;function K(d){return n(d)==="Float32Array"}t.isFloat32Array=K;function Z(d){return n(d)==="Float64Array"}t.isFloat64Array=Z;function Le(d){return n(d)==="BigInt64Array"}t.isBigInt64Array=Le;function Pe(d){return n(d)==="BigUint64Array"}t.isBigUint64Array=Pe;function ce(d){return f(d)==="[object Map]"}ce.working=typeof Map!="undefined"&&ce(new Map);function Pr(d){return typeof Map=="undefined"?!1:ce.working?ce(d):d instanceof Map}t.isMap=Pr;function ye(d){return f(d)==="[object Set]"}ye.working=typeof Set!="undefined"&&ye(new Set);function ot(d){return typeof Set=="undefined"?!1:ye.working?ye(d):d instanceof Set}t.isSet=ot;function Be(d){return f(d)==="[object WeakMap]"}Be.working=typeof WeakMap!="undefined"&&Be(new WeakMap);function jr(d){return typeof WeakMap=="undefined"?!1:Be.working?Be(d):d instanceof WeakMap}t.isWeakMap=jr;function Fe(d){return f(d)==="[object WeakSet]"}Fe.working=typeof WeakSet!="undefined"&&Fe(new WeakSet);function pe(d){return Fe(d)}t.isWeakSet=pe;function xe(d){return f(d)==="[object ArrayBuffer]"}xe.working=typeof ArrayBuffer!="undefined"&&xe(new ArrayBuffer);function Ct(d){return typeof ArrayBuffer=="undefined"?!1:xe.working?xe(d):d instanceof ArrayBuffer}t.isArrayBuffer=Ct;function l(d){return f(d)==="[object DataView]"}l.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&l(new DataView(new ArrayBuffer(1),0,1));function h(d){return typeof DataView=="undefined"?!1:l.working?l(d):d instanceof DataView}t.isDataView=h;var g=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function _(d){return f(d)==="[object SharedArrayBuffer]"}function M(d){return typeof g=="undefined"?!1:(typeof _.working=="undefined"&&(_.working=_(new g)),_.working?_(d):d instanceof g)}t.isSharedArrayBuffer=M;function I(d){return f(d)==="[object AsyncFunction]"}t.isAsyncFunction=I;function P(d){return f(d)==="[object Map Iterator]"}t.isMapIterator=P;function T(d){return f(d)==="[object Set Iterator]"}t.isSetIterator=T;function L(d){return f(d)==="[object Generator]"}t.isGeneratorObject=L;function J(d){return f(d)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=J;function je(d){return b(d,u)}t.isNumberObject=je;function Mt(d){return b(d,c)}t.isStringObject=Mt;function Ue(d){return b(d,p)}t.isBooleanObject=Ue;function $t(d){return a&&b(d,y)}t.isBigIntObject=$t;function Gn(d){return s&&b(d,m)}t.isSymbolObject=Gn;function ja(d){return je(d)||Mt(d)||Ue(d)||$t(d)||Gn(d)}t.isBoxedPrimitive=ja;function Ta(d){return typeof Uint8Array!="undefined"&&(Ct(d)||M(d))}t.isAnyArrayBuffer=Ta,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(d){Object.defineProperty(t,d,{enumerable:!1,value:function(){throw new Error(d+" is not supported in userland")}})})})(Zi);var xs=function(e){return e instanceof S.Buffer},he={exports:{}};typeof Object.create=="function"?he.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:he.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};(function(t){var e=Object.getOwnPropertyDescriptors||function(h){for(var g=Object.keys(h),_={},M=0;M<g.length;M++)_[g[M]]=Object.getOwnPropertyDescriptor(h,g[M]);return _},r=/%[sdj%]/g;t.format=function(l){if(!X(l)){for(var h=[],g=0;g<arguments.length;g++)h.push(a(arguments[g]));return h.join(" ")}for(var g=1,_=arguments,M=_.length,I=String(l).replace(r,function(T){if(T==="%%")return"%";if(g>=M)return T;switch(T){case"%s":return String(_[g++]);case"%d":return Number(_[g++]);case"%j":try{return JSON.stringify(_[g++])}catch{return"[Circular]"}default:return T}}),P=_[g];g<M;P=_[++g])R(P)||!Z(P)?I+=" "+P:I+=" "+a(P);return I},t.deprecate=function(l,h){if(typeof S.process!="undefined"&&S.process.noDeprecation===!0)return l;if(typeof S.process=="undefined")return function(){return t.deprecate(l,h).apply(this,arguments)};var g=!1;function _(){if(!g){if(S.process.throwDeprecation)throw new Error(h);S.process.traceDeprecation?console.trace(h):console.error(h),g=!0}return l.apply(this,arguments)}return _};var n={},i=/^$/;if({}.NODE_DEBUG){var o={}.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}t.debuglog=function(l){if(l=l.toUpperCase(),!n[l])if(i.test(l)){var h=S.process.pid;n[l]=function(){var g=t.format.apply(t,arguments);console.error("%s %d: %s",l,h,g)}}else n[l]=function(){};return n[l]};function a(l,h){var g={seen:[],stylize:f};return arguments.length>=3&&(g.depth=arguments[2]),arguments.length>=4&&(g.colors=arguments[3]),E(h)?g.showHidden=h:h&&t._extend(g,h),k(g.showHidden)&&(g.showHidden=!1),k(g.depth)&&(g.depth=2),k(g.colors)&&(g.colors=!1),k(g.customInspect)&&(g.customInspect=!0),g.colors&&(g.stylize=s),c(g,l,g.depth)}t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(l,h){var g=a.styles[h];return g?"\x1B["+a.colors[g][0]+"m"+l+"\x1B["+a.colors[g][1]+"m":l}function f(l,h){return l}function u(l){var h={};return l.forEach(function(g,_){h[g]=!0}),h}function c(l,h,g){if(l.customInspect&&h&&ce(h.inspect)&&h.inspect!==t.inspect&&!(h.constructor&&h.constructor.prototype===h)){var _=h.inspect(g,l);return X(_)||(_=c(l,_,g)),_}var M=p(l,h);if(M)return M;var I=Object.keys(h),P=u(I);if(l.showHidden&&(I=Object.getOwnPropertyNames(h)),Pe(h)&&(I.indexOf("message")>=0||I.indexOf("description")>=0))return y(h);if(I.length===0){if(ce(h)){var T=h.name?": "+h.name:"";return l.stylize("[Function"+T+"]","special")}if(K(h))return l.stylize(RegExp.prototype.toString.call(h),"regexp");if(Le(h))return l.stylize(Date.prototype.toString.call(h),"date");if(Pe(h))return y(h)}var L="",J=!1,je=["{","}"];if(O(h)&&(J=!0,je=["[","]"]),ce(h)){var Mt=h.name?": "+h.name:"";L=" [Function"+Mt+"]"}if(K(h)&&(L=" "+RegExp.prototype.toString.call(h)),Le(h)&&(L=" "+Date.prototype.toUTCString.call(h)),Pe(h)&&(L=" "+y(h)),I.length===0&&(!J||h.length==0))return je[0]+L+je[1];if(g<0)return K(h)?l.stylize(RegExp.prototype.toString.call(h),"regexp"):l.stylize("[Object]","special");l.seen.push(h);var Ue;return J?Ue=m(l,h,g,P,I):Ue=I.map(function($t){return b(l,h,g,P,$t,J)}),l.seen.pop(),w(Ue,L,je)}function p(l,h){if(k(h))return l.stylize("undefined","undefined");if(X(h)){var g="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return l.stylize(g,"string")}if(ie(h))return l.stylize(""+h,"number");if(E(h))return l.stylize(""+h,"boolean");if(R(h))return l.stylize("null","null")}function y(l){return"["+Error.prototype.toString.call(l)+"]"}function m(l,h,g,_,M){for(var I=[],P=0,T=h.length;P<T;++P)Fe(h,String(P))?I.push(b(l,h,g,_,String(P),!0)):I.push("");return M.forEach(function(L){L.match(/^\d+$/)||I.push(b(l,h,g,_,L,!0))}),I}function b(l,h,g,_,M,I){var P,T,L;if(L=Object.getOwnPropertyDescriptor(h,M)||{value:h[M]},L.get?L.set?T=l.stylize("[Getter/Setter]","special"):T=l.stylize("[Getter]","special"):L.set&&(T=l.stylize("[Setter]","special")),Fe(_,M)||(P="["+M+"]"),T||(l.seen.indexOf(L.value)<0?(R(g)?T=c(l,L.value,null):T=c(l,L.value,g-1),T.indexOf(`
`)>-1&&(I?T=T.split(`
`).map(function(J){return"  "+J}).join(`
`).slice(2):T=`
`+T.split(`
`).map(function(J){return"   "+J}).join(`
`))):T=l.stylize("[Circular]","special")),k(P)){if(I&&M.match(/^\d+$/))return T;P=JSON.stringify(""+M),P.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(P=P.slice(1,-1),P=l.stylize(P,"name")):(P=P.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),P=l.stylize(P,"string"))}return P+": "+T}function w(l,h,g){var _=l.reduce(function(M,I){return I.indexOf(`
`)>=0,M+I.replace(/\u001b\[\d\d?m/g,"").length+1},0);return _>60?g[0]+(h===""?"":h+`
 `)+" "+l.join(`,
  `)+" "+g[1]:g[0]+h+" "+l.join(", ")+" "+g[1]}t.types=Zi;function O(l){return Array.isArray(l)}t.isArray=O;function E(l){return typeof l=="boolean"}t.isBoolean=E;function R(l){return l===null}t.isNull=R;function q(l){return l==null}t.isNullOrUndefined=q;function ie(l){return typeof l=="number"}t.isNumber=ie;function X(l){return typeof l=="string"}t.isString=X;function W(l){return typeof l=="symbol"}t.isSymbol=W;function k(l){return l===void 0}t.isUndefined=k;function K(l){return Z(l)&&ye(l)==="[object RegExp]"}t.isRegExp=K,t.types.isRegExp=K;function Z(l){return typeof l=="object"&&l!==null}t.isObject=Z;function Le(l){return Z(l)&&ye(l)==="[object Date]"}t.isDate=Le,t.types.isDate=Le;function Pe(l){return Z(l)&&(ye(l)==="[object Error]"||l instanceof Error)}t.isError=Pe,t.types.isNativeError=Pe;function ce(l){return typeof l=="function"}t.isFunction=ce;function Pr(l){return l===null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||typeof l=="symbol"||typeof l=="undefined"}t.isPrimitive=Pr,t.isBuffer=xs;function ye(l){return Object.prototype.toString.call(l)}function ot(l){return l<10?"0"+l.toString(10):l.toString(10)}var Be=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function jr(){var l=new Date,h=[ot(l.getHours()),ot(l.getMinutes()),ot(l.getSeconds())].join(":");return[l.getDate(),Be[l.getMonth()],h].join(" ")}t.log=function(){console.log("%s - %s",jr(),t.format.apply(t,arguments))},t.inherits=he.exports,t._extend=function(l,h){if(!h||!Z(h))return l;for(var g=Object.keys(h),_=g.length;_--;)l[g[_]]=h[g[_]];return l};function Fe(l,h){return Object.prototype.hasOwnProperty.call(l,h)}var pe=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;t.promisify=function(h){if(typeof h!="function")throw new TypeError('The "original" argument must be of type Function');if(pe&&h[pe]){var g=h[pe];if(typeof g!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(g,pe,{value:g,enumerable:!1,writable:!1,configurable:!0}),g}function g(){for(var _,M,I=new Promise(function(L,J){_=L,M=J}),P=[],T=0;T<arguments.length;T++)P.push(arguments[T]);P.push(function(L,J){L?M(L):_(J)});try{h.apply(this,P)}catch(L){M(L)}return I}return Object.setPrototypeOf(g,Object.getPrototypeOf(h)),pe&&Object.defineProperty(g,pe,{value:g,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(g,e(h))},t.promisify.custom=pe;function xe(l,h){if(!l){var g=new Error("Promise was rejected with a falsy value");g.reason=l,l=g}return h(l)}function Ct(l){if(typeof l!="function")throw new TypeError('The "original" argument must be of type Function');function h(){for(var g=[],_=0;_<arguments.length;_++)g.push(arguments[_]);var M=g.pop();if(typeof M!="function")throw new TypeError("The last argument must be of type Function");var I=this,P=function(){return M.apply(I,arguments)};l.apply(this,g).then(function(T){S.process.nextTick(P.bind(null,null,T))},function(T){S.process.nextTick(xe.bind(null,T,P))})}return Object.setPrototypeOf(h,Object.getPrototypeOf(l)),Object.defineProperties(h,e(l)),h}t.callbackify=Ct})(fe);function ke(t){return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(t)}function Qn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qs(n.key),n)}}function Us(t,e,r){return e&&Qn(t.prototype,e),r&&Qn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qs(t){var e=Ws(t,"string");return ke(e)==="symbol"?e:String(e)}function Ws(t,e){if(ke(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ke(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sn(t,e)}function sn(t,e){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},sn(t,e)}function Vs(t){var e=Ys();return function(){var n=ar(t),i;if(e){var o=ar(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return zs(this,i)}}function zs(t,e){if(e&&(ke(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ks(t)}function Ks(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ys(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ar(t){return ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ar(t)}var lo={},Ye,Br;function Rt(t,e,r){r||(r=Error);function n(o,a,s){return typeof e=="string"?e:e(o,a,s)}var i=function(o){Hs(s,o);var a=Vs(s);function s(f,u,c){var p;return Gs(this,s),p=a.call(this,n(f,u,c)),p.code=t,p}return Us(s)}(r);lo[t]=i}function Xn(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Js(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Qs(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Xs(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Rt("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);Rt("ERR_INVALID_ARG_TYPE",function(t,e,r){Ye===void 0&&(Ye=St.exports),Ye(typeof t=="string","'name' must be a string");var n;typeof e=="string"&&Js(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Qs(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Xn(e,"type"));else{var o=Xs(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(Xn(e,"type"))}return i+=". Received type ".concat(ke(r)),i},TypeError);Rt("ERR_INVALID_ARG_VALUE",function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";Br===void 0&&(Br=fe);var n=Br.inspect(e);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(r,". Received ").concat(n)},TypeError);Rt("ERR_INVALID_RETURN_VALUE",function(t,e,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(ke(r)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(n,".")},TypeError);Rt("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Ye===void 0&&(Ye=St.exports),Ye(e.length>0,"At least one arg needs to be specified");var n="The ",i=e.length;switch(e=e.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(e[0]," argument");break;case 2:n+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:n+=e.slice(0,i-1).join(", "),n+=", and ".concat(e[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError);Sn.codes=lo;function Zn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ei(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(r),!0).forEach(function(n){Zs(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zs(t,e,r){return e=co(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ef(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ti(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,co(n.key),n)}}function tf(t,e,r){return e&&ti(t.prototype,e),r&&ti(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function co(t){var e=rf(t,"string");return Q(e)==="symbol"?e:String(e)}function rf(t,e){if(Q(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Q(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mt(t,e)}function of(t){var e=ho();return function(){var n=vt(t),i;if(e){var o=vt(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return po(this,i)}}function po(t,e){if(e&&(Q(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fn(t)}function fn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function un(t){var e=typeof Map=="function"?new Map:void 0;return un=function(n){if(n===null||!af(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Ht(n,arguments,vt(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),mt(i,n)},un(t)}function Ht(t,e,r){return ho()?Ht=Reflect.construct.bind():Ht=function(i,o,a){var s=[null];s.push.apply(s,o);var f=Function.bind.apply(i,s),u=new f;return a&&mt(u,a.prototype),u},Ht.apply(null,arguments)}function ho(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function af(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function mt(t,e){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},mt(t,e)}function vt(t){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vt(t)}function Q(t){return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(t)}var sf=fe,ln=sf.inspect,ff=Sn,uf=ff.codes.ERR_INVALID_ARG_TYPE;function ri(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function lf(t,e){if(e=Math.floor(e),t.length==0||e==0)return"";var r=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,r-t.length),t}var oe="",ct="",pt="",V="",Ne={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},cf=10;function ni(t){var e=Object.keys(t),r=Object.create(Object.getPrototypeOf(t));return e.forEach(function(n){r[n]=t[n]}),Object.defineProperty(r,"message",{value:t.message}),r}function ht(t){return ln(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function pf(t,e,r){var n="",i="",o=0,a="",s=!1,f=ht(t),u=f.split(`
`),c=ht(e).split(`
`),p=0,y="";if(r==="strictEqual"&&Q(t)==="object"&&Q(e)==="object"&&t!==null&&e!==null&&(r="strictEqualObject"),u.length===1&&c.length===1&&u[0]!==c[0]){var m=u[0].length+c[0].length;if(m<=cf){if((Q(t)!=="object"||t===null)&&(Q(e)!=="object"||e===null)&&(t!==0||e!==0))return"".concat(Ne[r],`

`)+"".concat(u[0]," !== ").concat(c[0],`
`)}else if(r!=="strictEqualObject"){var b=S.process.stderr&&S.process.stderr.isTTY?S.process.stderr.columns:80;if(m<b){for(;u[0][p]===c[0][p];)p++;p>2&&(y=`
  `.concat(lf(" ",p),"^"),p=0)}}}for(var w=u[u.length-1],O=c[c.length-1];w===O&&(p++<2?a=`
  `.concat(w).concat(a):n=w,u.pop(),c.pop(),!(u.length===0||c.length===0));)w=u[u.length-1],O=c[c.length-1];var E=Math.max(u.length,c.length);if(E===0){var R=f.split(`
`);if(R.length>30)for(R[26]="".concat(oe,"...").concat(V);R.length>27;)R.pop();return"".concat(Ne.notIdentical,`

`).concat(R.join(`
`),`
`)}p>3&&(a=`
`.concat(oe,"...").concat(V).concat(a),s=!0),n!==""&&(a=`
  `.concat(n).concat(a),n="");var q=0,ie=Ne[r]+`
`.concat(ct,"+ actual").concat(V," ").concat(pt,"- expected").concat(V),X=" ".concat(oe,"...").concat(V," Lines skipped");for(p=0;p<E;p++){var W=p-o;if(u.length<p+1)W>1&&p>2&&(W>4?(i+=`
`.concat(oe,"...").concat(V),s=!0):W>3&&(i+=`
  `.concat(c[p-2]),q++),i+=`
  `.concat(c[p-1]),q++),o=p,n+=`
`.concat(pt,"-").concat(V," ").concat(c[p]),q++;else if(c.length<p+1)W>1&&p>2&&(W>4?(i+=`
`.concat(oe,"...").concat(V),s=!0):W>3&&(i+=`
  `.concat(u[p-2]),q++),i+=`
  `.concat(u[p-1]),q++),o=p,i+=`
`.concat(ct,"+").concat(V," ").concat(u[p]),q++;else{var k=c[p],K=u[p],Z=K!==k&&(!ri(K,",")||K.slice(0,-1)!==k);Z&&ri(k,",")&&k.slice(0,-1)===K&&(Z=!1,K+=","),Z?(W>1&&p>2&&(W>4?(i+=`
`.concat(oe,"...").concat(V),s=!0):W>3&&(i+=`
  `.concat(u[p-2]),q++),i+=`
  `.concat(u[p-1]),q++),o=p,i+=`
`.concat(ct,"+").concat(V," ").concat(K),n+=`
`.concat(pt,"-").concat(V," ").concat(k),q+=2):(i+=n,n="",(W===1||p===0)&&(i+=`
  `.concat(K),q++))}if(q>20&&p<E-2)return"".concat(ie).concat(X,`
`).concat(i,`
`).concat(oe,"...").concat(V).concat(n,`
`)+"".concat(oe,"...").concat(V)}return"".concat(ie).concat(s?X:"",`
`).concat(i).concat(n).concat(a).concat(y)}var hf=function(t,e){nf(n,t);var r=of(n);function n(i){var o;if(ef(this,n),Q(i)!=="object"||i===null)throw new uf("options","Object",i);var a=i.message,s=i.operator,f=i.stackStartFn,u=i.actual,c=i.expected,p=Error.stackTraceLimit;if(Error.stackTraceLimit=0,a!=null)o=r.call(this,String(a));else if(S.process.stderr&&S.process.stderr.isTTY&&(S.process.stderr&&S.process.stderr.getColorDepth&&S.process.stderr.getColorDepth()!==1?(oe="\x1B[34m",ct="\x1B[32m",V="\x1B[39m",pt="\x1B[31m"):(oe="",ct="",V="",pt="")),Q(u)==="object"&&u!==null&&Q(c)==="object"&&c!==null&&"stack"in u&&u instanceof Error&&"stack"in c&&c instanceof Error&&(u=ni(u),c=ni(c)),s==="deepStrictEqual"||s==="strictEqual")o=r.call(this,pf(u,c,s));else if(s==="notDeepStrictEqual"||s==="notStrictEqual"){var y=Ne[s],m=ht(u).split(`
`);if(s==="notStrictEqual"&&Q(u)==="object"&&u!==null&&(y=Ne.notStrictEqualObject),m.length>30)for(m[26]="".concat(oe,"...").concat(V);m.length>27;)m.pop();m.length===1?o=r.call(this,"".concat(y," ").concat(m[0])):o=r.call(this,"".concat(y,`

`).concat(m.join(`
`),`
`))}else{var b=ht(u),w="",O=Ne[s];s==="notDeepEqual"||s==="notEqual"?(b="".concat(Ne[s],`

`).concat(b),b.length>1024&&(b="".concat(b.slice(0,1021),"..."))):(w="".concat(ht(c)),b.length>512&&(b="".concat(b.slice(0,509),"...")),w.length>512&&(w="".concat(w.slice(0,509),"...")),s==="deepEqual"||s==="equal"?b="".concat(O,`

`).concat(b,`

should equal

`):w=" ".concat(s," ").concat(w)),o=r.call(this,"".concat(b).concat(w))}return Error.stackTraceLimit=p,o.generatedMessage=!a,Object.defineProperty(fn(o),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),o.code="ERR_ASSERTION",o.actual=u,o.expected=c,o.operator=s,Error.captureStackTrace&&Error.captureStackTrace(fn(o),f),o.stack,o.name="AssertionError",po(o)}return tf(n,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(o,a){return ln(this,ei(ei({},a),{},{customInspect:!1,depth:0}))}}]),n}(un(Error),ln.custom),df=hf,ii=Object.prototype.toString,yo=function(e){var r=ii.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&ii.call(e.callee)==="[object Function]"),n},go;if(!Object.keys){var It=Object.prototype.hasOwnProperty,oi=Object.prototype.toString,yf=yo,ai=Object.prototype.propertyIsEnumerable,gf=!ai.call({toString:null},"toString"),mf=ai.call(function(){},"prototype"),Dt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Fr=function(t){var e=t.constructor;return e&&e.prototype===t},vf={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},bf=function(){if(typeof window=="undefined")return!1;for(var t in window)try{if(!vf["$"+t]&&It.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{Fr(window[t])}catch{return!0}}catch{return!0}return!1}(),wf=function(t){if(typeof window=="undefined"||!bf)return Fr(t);try{return Fr(t)}catch{return!1}};go=function(e){var r=e!==null&&typeof e=="object",n=oi.call(e)==="[object Function]",i=yf(e),o=r&&oi.call(e)==="[object String]",a=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var s=mf&&n;if(o&&e.length>0&&!It.call(e,0))for(var f=0;f<e.length;++f)a.push(String(f));if(i&&e.length>0)for(var u=0;u<e.length;++u)a.push(String(u));else for(var c in e)!(s&&c==="prototype")&&It.call(e,c)&&a.push(String(c));if(gf)for(var p=wf(e),y=0;y<Dt.length;++y)!(p&&Dt[y]==="constructor")&&It.call(e,Dt[y])&&a.push(Dt[y]);return a}}var Sf=go,Ef=Array.prototype.slice,kf=yo,si=Object.keys,Vt=si?function(e){return si(e)}:Sf,fi=Object.keys;Vt.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return kf(n)?fi(Ef.call(n)):fi(n)})}else Object.keys=Vt;return Object.keys||Vt};var mo=Vt,_f=mo,vo=En(),bo=hr,ui=Object,Rf=bo("Array.prototype.push"),li=bo("Object.prototype.propertyIsEnumerable"),Af=vo?Object.getOwnPropertySymbols:null,Of=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=ui(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var o=ui(arguments[i]),a=_f(o),s=vo&&(Object.getOwnPropertySymbols||Af);if(s)for(var f=s(o),u=0;u<f.length;++u){var c=f[u];li(o,c)&&Rf(a,c)}for(var p=0;p<a.length;++p){var y=a[p];if(li(o,y)){var m=o[y];n[y]=m}}}return n},xr=Of,Pf=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var a in i)o+=a;return t!==o},jf=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},Tf=function(){return!Object.assign||Pf()||jf()?xr:Object.assign},ci=function(t){return t!==t},wo=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||ci(e)&&ci(r))},Nf=wo,On=function(){return typeof Object.is=="function"?Object.is:Nf},Cf=kt,cn=Cf("%Object.defineProperty%",!0),pn=function(){if(cn)try{return cn({},"a",{value:1}),!0}catch{return!1}return!1};pn.hasArrayLengthDefineBug=function(){if(!pn())return null;try{return cn([],"length",{value:1}).length!==1}catch{return!0}};var So=pn,Mf=So(),Pn=kt,pi=Mf&&Pn("%Object.defineProperty%",!0),$f=Pn("%SyntaxError%"),We=Pn("%TypeError%"),hi=so,If=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new We("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new We("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new We("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new We("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new We("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new We("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,f=!!hi&&hi(e,r);if(pi)pi(e,r,{configurable:a===null&&f?f.configurable:!a,enumerable:i===null&&f?f.enumerable:!i,value:n,writable:o===null&&f?f.writable:!o});else if(s||!i&&!o&&!a)e[r]=n;else throw new $f("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Df=mo,Lf=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Bf=Object.prototype.toString,Ff=Array.prototype.concat,di=If,xf=function(t){return typeof t=="function"&&Bf.call(t)==="[object Function]"},Eo=So(),Uf=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!xf(n)||!n())return}Eo?di(t,e,r,!0):di(t,e,r)},ko=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Df(e);Lf&&(n=Ff.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Uf(t,n[i],e[n[i]],r[n[i]])};ko.supportsDescriptors=!!Eo;var yr=ko,qf=On,Wf=yr,Gf=function(){var e=qf();return Wf(Object,{is:e},{is:function(){return Object.is!==e}}),e},Hf=yr,Vf=_t.exports,zf=wo,_o=On,Kf=Gf,Ro=Vf(_o(),Object);Hf(Ro,{getPolyfill:_o,implementation:zf,shim:Kf});var Yf=Ro,Ao=function(e){return e!==e},Jf=Ao,Oo=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:Jf},Qf=yr,Xf=Oo,Zf=function(){var e=Xf();return Qf(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e},eu=_t.exports,tu=yr,ru=Ao,Po=Oo,nu=Zf,jo=eu(Po(),Number);tu(jo,{getPolyfill:Po,implementation:ru,shim:nu});var iu=jo;function yi(t,e){return fu(t)||su(t,e)||au(t,e)||ou()}function ou(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function au(t,e){if(!!t){if(typeof t=="string")return gi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gi(t,e)}}function gi(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function su(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],f=!0,u=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;f=!1}else for(;!(f=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);f=!0);}catch(c){u=!0,i=c}finally{try{if(!f&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function fu(t){if(Array.isArray(t))return t}function ee(t){return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(t)}var uu=/a/g.flags!==void 0,sr=function(e){var r=[];return e.forEach(function(n){return r.push(n)}),r},mi=function(e){var r=[];return e.forEach(function(n,i){return r.push([i,n])}),r},To=Object.is?Object.is:Yf,zt=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},hn=Number.isNaN?Number.isNaN:iu;function jn(t){return t.call.bind(t)}var ut=jn(Object.prototype.hasOwnProperty),Kt=jn(Object.prototype.propertyIsEnumerable),vi=jn(Object.prototype.toString),Y=fe.types,lu=Y.isAnyArrayBuffer,cu=Y.isArrayBufferView,bi=Y.isDate,Lt=Y.isMap,wi=Y.isRegExp,Bt=Y.isSet,pu=Y.isNativeError,hu=Y.isBoxedPrimitive,Si=Y.isNumberObject,Ei=Y.isStringObject,ki=Y.isBooleanObject,_i=Y.isBigIntObject,du=Y.isSymbolObject,yu=Y.isFloat32Array,gu=Y.isFloat64Array;function mu(t){if(t.length===0||t.length>10)return!0;for(var e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<48||r>57)return!0}return t.length===10&&t>=Math.pow(2,32)}function Ft(t){return Object.keys(t).filter(mu).concat(zt(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function No(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}var vu=!0,bu=!1,dn=0,Tn=1,Co=2,Mo=3;function wu(t,e){return uu?t.source===e.source&&t.flags===e.flags:RegExp.prototype.toString.call(t)===RegExp.prototype.toString.call(e)}function Su(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Eu(t,e){return t.byteLength!==e.byteLength?!1:No(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))===0}function ku(t,e){return t.byteLength===e.byteLength&&No(new Uint8Array(t),new Uint8Array(e))===0}function _u(t,e){return Si(t)?Si(e)&&To(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):Ei(t)?Ei(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):ki(t)?ki(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):_i(t)?_i(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):du(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}function te(t,e,r,n){if(t===e)return t!==0?!0:r?To(t,e):!0;if(r){if(ee(t)!=="object")return typeof t=="number"&&hn(t)&&hn(e);if(ee(e)!=="object"||t===null||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(t===null||ee(t)!=="object")return e===null||ee(e)!=="object"?t==e:!1;if(e===null||ee(e)!=="object")return!1}var i=vi(t),o=vi(e);if(i!==o)return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var a=Ft(t),s=Ft(e);return a.length!==s.length?!1:at(t,e,r,n,Tn,a)}if(i==="[object Object]"&&(!Lt(t)&&Lt(e)||!Bt(t)&&Bt(e)))return!1;if(bi(t)){if(!bi(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(wi(t)){if(!wi(e)||!wu(t,e))return!1}else if(pu(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else if(cu(t)){if(!r&&(yu(t)||gu(t))){if(!Su(t,e))return!1}else if(!Eu(t,e))return!1;var f=Ft(t),u=Ft(e);return f.length!==u.length?!1:at(t,e,r,n,dn,f)}else{if(Bt(t))return!Bt(e)||t.size!==e.size?!1:at(t,e,r,n,Co);if(Lt(t))return!Lt(e)||t.size!==e.size?!1:at(t,e,r,n,Mo);if(lu(t)){if(!ku(t,e))return!1}else if(hu(t)&&!_u(t,e))return!1}return at(t,e,r,n,dn)}function Ri(t,e){return e.filter(function(r){return Kt(t,r)})}function at(t,e,r,n,i,o){if(arguments.length===5){o=Object.keys(t);var a=Object.keys(e);if(o.length!==a.length)return!1}for(var s=0;s<o.length;s++)if(!ut(e,o[s]))return!1;if(r&&arguments.length===5){var f=zt(t);if(f.length!==0){var u=0;for(s=0;s<f.length;s++){var c=f[s];if(Kt(t,c)){if(!Kt(e,c))return!1;o.push(c),u++}else if(Kt(e,c))return!1}var p=zt(e);if(f.length!==p.length&&Ri(e,p).length!==u)return!1}else{var y=zt(e);if(y.length!==0&&Ri(e,y).length!==0)return!1}}if(o.length===0&&(i===dn||i===Tn&&t.length===0||t.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var m=n.val1.get(t);if(m!==void 0){var b=n.val2.get(e);if(b!==void 0)return m===b}n.position++}n.val1.set(t,n.position),n.val2.set(e,n.position);var w=ju(t,e,r,o,n,i);return n.val1.delete(t),n.val2.delete(e),w}function Ai(t,e,r,n){for(var i=sr(t),o=0;o<i.length;o++){var a=i[o];if(te(e,a,r,n))return t.delete(a),!0}return!1}function $o(t){switch(ee(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(hn(t))return!1}return!0}function Ru(t,e,r){var n=$o(r);return n!=null?n:e.has(n)&&!t.has(n)}function Au(t,e,r,n,i){var o=$o(r);if(o!=null)return o;var a=e.get(o);return a===void 0&&!e.has(o)||!te(n,a,!1,i)?!1:!t.has(o)&&te(n,a,!1,i)}function Ou(t,e,r,n){for(var i=null,o=sr(t),a=0;a<o.length;a++){var s=o[a];if(ee(s)==="object"&&s!==null)i===null&&(i=new Set),i.add(s);else if(!e.has(s)){if(r||!Ru(t,e,s))return!1;i===null&&(i=new Set),i.add(s)}}if(i!==null){for(var f=sr(e),u=0;u<f.length;u++){var c=f[u];if(ee(c)==="object"&&c!==null){if(!Ai(i,c,r,n))return!1}else if(!r&&!t.has(c)&&!Ai(i,c,r,n))return!1}return i.size===0}return!0}function Oi(t,e,r,n,i,o){for(var a=sr(t),s=0;s<a.length;s++){var f=a[s];if(te(r,f,i,o)&&te(n,e.get(f),i,o))return t.delete(f),!0}return!1}function Pu(t,e,r,n){for(var i=null,o=mi(t),a=0;a<o.length;a++){var s=yi(o[a],2),f=s[0],u=s[1];if(ee(f)==="object"&&f!==null)i===null&&(i=new Set),i.add(f);else{var c=e.get(f);if(c===void 0&&!e.has(f)||!te(u,c,r,n)){if(r||!Au(t,e,f,u,n))return!1;i===null&&(i=new Set),i.add(f)}}}if(i!==null){for(var p=mi(e),y=0;y<p.length;y++){var m=yi(p[y],2),b=m[0],w=m[1];if(ee(b)==="object"&&b!==null){if(!Oi(i,t,b,w,r,n))return!1}else if(!r&&(!t.has(b)||!te(t.get(b),w,!1,n))&&!Oi(i,t,b,w,!1,n))return!1}return i.size===0}return!0}function ju(t,e,r,n,i,o){var a=0;if(o===Co){if(!Ou(t,e,r,i))return!1}else if(o===Mo){if(!Pu(t,e,r,i))return!1}else if(o===Tn)for(;a<t.length;a++)if(ut(t,a)){if(!ut(e,a)||!te(t[a],e[a],r,i))return!1}else{if(ut(e,a))return!1;for(var s=Object.keys(t);a<s.length;a++){var f=s[a];if(!ut(e,f)||!te(t[f],e[f],r,i))return!1}return s.length===Object.keys(e).length}for(a=0;a<n.length;a++){var u=n[a];if(!te(t[u],e[u],r,i))return!1}return!0}function Tu(t,e){return te(t,e,bu)}function Nu(t,e){return te(t,e,vu)}var Cu={isDeepEqual:Tu,isDeepStrictEqual:Nu};function ae(t){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(t)}function Pi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$u(n.key),n)}}function Mu(t,e,r){return e&&Pi(t.prototype,e),r&&Pi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $u(t){var e=Iu(t,"string");return ae(e)==="symbol"?e:String(e)}function Iu(t,e){if(ae(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ae(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Du(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Lu=Sn,At=Lu.codes,ji=At.ERR_AMBIGUOUS_ARGUMENT,tt=At.ERR_INVALID_ARG_TYPE,Bu=At.ERR_INVALID_ARG_VALUE,Fu=At.ERR_INVALID_RETURN_VALUE,Re=At.ERR_MISSING_ARGS,Ae=df,xu=fe,Yt=xu.inspect,Io=fe.types,Uu=Io.isPromise,fr=Io.isRegExp,qu=Tf(),Do=On(),ur=hr("RegExp.prototype.test"),_e,gr;function Ot(){var t=Cu;_e=t.isDeepEqual,gr=t.isDeepStrictEqual}var Ti=!1,B=St.exports=Nn,mr={};function ue(t){throw t.message instanceof Error?t.message:new Ae(t)}function Lo(t,e,r,n,i){var o=arguments.length,a;if(o===0)a="Failed";else if(o===1)r=t,t=void 0;else{if(Ti===!1){Ti=!0;var s=S.process.emitWarning?S.process.emitWarning:console.warn.bind(console);s("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(n="!=")}if(r instanceof Error)throw r;var f={actual:t,expected:e,operator:n===void 0?"fail":n,stackStartFn:i||Lo};r!==void 0&&(f.message=r);var u=new Ae(f);throw a&&(u.message=a,u.generatedMessage=!0),u}B.fail=Lo;B.AssertionError=Ae;function Bo(t,e,r,n){if(!r){var i=!1;if(e===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new Ae({actual:r,expected:!0,message:n,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function Nn(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Bo.apply(void 0,[Nn,e.length].concat(e))}B.ok=Nn;B.equal=function t(e,r,n){if(arguments.length<2)throw new Re("actual","expected");e!=r&&ue({actual:e,expected:r,message:n,operator:"==",stackStartFn:t})};B.notEqual=function t(e,r,n){if(arguments.length<2)throw new Re("actual","expected");e==r&&ue({actual:e,expected:r,message:n,operator:"!=",stackStartFn:t})};B.deepEqual=function t(e,r,n){if(arguments.length<2)throw new Re("actual","expected");_e===void 0&&Ot(),_e(e,r)||ue({actual:e,expected:r,message:n,operator:"deepEqual",stackStartFn:t})};B.notDeepEqual=function t(e,r,n){if(arguments.length<2)throw new Re("actual","expected");_e===void 0&&Ot(),_e(e,r)&&ue({actual:e,expected:r,message:n,operator:"notDeepEqual",stackStartFn:t})};B.deepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Re("actual","expected");_e===void 0&&Ot(),gr(e,r)||ue({actual:e,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:t})};B.notDeepStrictEqual=Fo;function Fo(t,e,r){if(arguments.length<2)throw new Re("actual","expected");_e===void 0&&Ot(),gr(t,e)&&ue({actual:t,expected:e,message:r,operator:"notDeepStrictEqual",stackStartFn:Fo})}B.strictEqual=function t(e,r,n){if(arguments.length<2)throw new Re("actual","expected");Do(e,r)||ue({actual:e,expected:r,message:n,operator:"strictEqual",stackStartFn:t})};B.notStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Re("actual","expected");Do(e,r)&&ue({actual:e,expected:r,message:n,operator:"notStrictEqual",stackStartFn:t})};var Ni=Mu(function t(e,r,n){var i=this;Du(this,t),r.forEach(function(o){o in e&&(n!==void 0&&typeof n[o]=="string"&&fr(e[o])&&ur(e[o],n[o])?i[o]=n[o]:i[o]=e[o])})});function Wu(t,e,r,n,i,o){if(!(r in t)||!gr(t[r],e[r])){if(!n){var a=new Ni(t,i),s=new Ni(e,i,t),f=new Ae({actual:a,expected:s,operator:"deepStrictEqual",stackStartFn:o});throw f.actual=t,f.expected=e,f.operator=o.name,f}ue({actual:t,expected:e,message:n,operator:o.name,stackStartFn:o})}}function xo(t,e,r,n){if(typeof e!="function"){if(fr(e))return ur(e,t);if(arguments.length===2)throw new tt("expected",["Function","RegExp"],e);if(ae(t)!=="object"||t===null){var i=new Ae({actual:t,expected:e,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(e);if(e instanceof Error)o.push("name","message");else if(o.length===0)throw new Bu("error",e,"may not be an empty object");return _e===void 0&&Ot(),o.forEach(function(a){typeof t[a]=="string"&&fr(e[a])&&ur(e[a],t[a])||Wu(t,e,a,r,o,n)}),!0}return e.prototype!==void 0&&t instanceof e?!0:Error.isPrototypeOf(e)?!1:e.call({},t)===!0}function Uo(t){if(typeof t!="function")throw new tt("fn","Function",t);try{t()}catch(e){return e}return mr}function Ci(t){return Uu(t)||t!==null&&ae(t)==="object"&&typeof t.then=="function"&&typeof t.catch=="function"}function qo(t){return Promise.resolve().then(function(){var e;if(typeof t=="function"){if(e=t(),!Ci(e))throw new Fu("instance of Promise","promiseFn",e)}else if(Ci(t))e=t;else throw new tt("promiseFn",["Function","Promise"],t);return Promise.resolve().then(function(){return e}).then(function(){return mr}).catch(function(r){return r})})}function Wo(t,e,r,n){if(typeof r=="string"){if(arguments.length===4)throw new tt("error",["Object","Error","Function","RegExp"],r);if(ae(e)==="object"&&e!==null){if(e.message===r)throw new ji("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===r)throw new ji("error/message",'The error "'.concat(e,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&ae(r)!=="object"&&typeof r!="function")throw new tt("error",["Object","Error","Function","RegExp"],r);if(e===mr){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=t.name==="rejects"?"rejection":"exception";ue({actual:void 0,expected:r,operator:t.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:t})}if(r&&!xo(e,r,n,t))throw e}function Go(t,e,r,n){if(e!==mr){if(typeof r=="string"&&(n=r,r=void 0),!r||xo(e,r)){var i=n?": ".concat(n):".",o=t.name==="doesNotReject"?"rejection":"exception";ue({actual:e,expected:r,operator:t.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}B.throws=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Wo.apply(void 0,[t,Uo(e)].concat(n))};B.rejects=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return qo(e).then(function(o){return Wo.apply(void 0,[t,o].concat(n))})};B.doesNotThrow=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Go.apply(void 0,[t,Uo(e)].concat(n))};B.doesNotReject=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return qo(e).then(function(o){return Go.apply(void 0,[t,o].concat(n))})};B.ifError=function t(e){if(e!=null){var r="ifError got unwanted exception: ";ae(e)==="object"&&typeof e.message=="string"?e.message.length===0&&e.constructor?r+=e.constructor.name:r+=e.message:r+=Yt(e);var n=new Ae({actual:e,expected:null,operator:"ifError",message:r,stackStartFn:t}),i=e.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var a=n.stack.split(`
`),s=0;s<o.length;s++){var f=a.indexOf(o[s]);if(f!==-1){a=a.slice(0,f);break}}n.stack="".concat(a.join(`
`),`
`).concat(o.join(`
`))}throw n}};function Ho(t,e,r,n,i){if(!fr(e))throw new tt("regexp","RegExp",e);var o=i==="match";if(typeof t!="string"||ur(e,t)!==o){if(r instanceof Error)throw r;var a=!r;r=r||(typeof t!="string"?'The "string" argument must be of type string. Received type '+"".concat(ae(t)," (").concat(Yt(t),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(Yt(e),`. Input:

`).concat(Yt(t),`
`));var s=new Ae({actual:t,expected:e,message:r,operator:i,stackStartFn:n});throw s.generatedMessage=a,s}}B.match=function t(e,r,n){Ho(e,r,n,t,"match")};B.doesNotMatch=function t(e,r,n){Ho(e,r,n,t,"doesNotMatch")};function Vo(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Bo.apply(void 0,[Vo,e.length].concat(e))}B.strict=qu(Vo,B,{equal:B.strictEqual,deepEqual:B.deepStrictEqual,notEqual:B.notStrictEqual,notDeepEqual:B.notDeepStrictEqual});B.strict.strict=B.strict;var Pt={exports:{}},Je=typeof Reflect=="object"?Reflect:null,Mi=Je&&typeof Je.apply=="function"?Je.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Jt;Je&&typeof Je.ownKeys=="function"?Jt=Je.ownKeys:Object.getOwnPropertySymbols?Jt=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Jt=function(e){return Object.getOwnPropertyNames(e)};function Gu(t){console&&console.warn&&console.warn(t)}var zo=Number.isNaN||function(e){return e!==e};function D(){D.init.call(this)}Pt.exports=D;Pt.exports.once=Ku;D.EventEmitter=D;D.prototype._events=void 0;D.prototype._eventsCount=0;D.prototype._maxListeners=void 0;var $i=10;function vr(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(D,"defaultMaxListeners",{enumerable:!0,get:function(){return $i},set:function(t){if(typeof t!="number"||t<0||zo(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");$i=t}});D.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};D.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||zo(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ko(t){return t._maxListeners===void 0?D.defaultMaxListeners:t._maxListeners}D.prototype.getMaxListeners=function(){return Ko(this)};D.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var f=o[e];if(f===void 0)return!1;if(typeof f=="function")Mi(f,this,r);else for(var u=f.length,c=Zo(f,u),n=0;n<u;++n)Mi(c[n],this,r);return!0};function Yo(t,e,r,n){var i,o,a;if(vr(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),a===void 0)a=o[e]=r,++t._eventsCount;else if(typeof a=="function"?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=Ko(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,Gu(s)}return t}D.prototype.addListener=function(e,r){return Yo(this,e,r,!1)};D.prototype.on=D.prototype.addListener;D.prototype.prependListener=function(e,r){return Yo(this,e,r,!0)};function Hu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Jo(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Hu.bind(n);return i.listener=r,n.wrapFn=i,i}D.prototype.once=function(e,r){return vr(r),this.on(e,Jo(this,e,r)),this};D.prototype.prependOnceListener=function(e,r){return vr(r),this.prependListener(e,Jo(this,e,r)),this};D.prototype.removeListener=function(e,r){var n,i,o,a,s;if(vr(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){s=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():Vu(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};D.prototype.off=D.prototype.removeListener;D.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Qo(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?zu(i):Zo(i,i.length)}D.prototype.listeners=function(e){return Qo(this,e,!0)};D.prototype.rawListeners=function(e){return Qo(this,e,!1)};D.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Xo.call(t,e)};D.prototype.listenerCount=Xo;function Xo(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}D.prototype.eventNames=function(){return this._eventsCount>0?Jt(this._events):[]};function Zo(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Vu(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function zu(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Ku(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,o),n(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ea(t,e,o,{once:!0}),e!=="error"&&Yu(t,i,{once:!0})})}function Yu(t,e,r){typeof t.on=="function"&&ea(t,"error",e,r)}function ea(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ta=Pt.exports.EventEmitter;function Ii(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Di(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ii(Object(r),!0).forEach(function(n){Ju(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ii(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ju(t,e,r){return e=ra(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Li(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ra(n.key),n)}}function Xu(t,e,r){return e&&Li(t.prototype,e),r&&Li(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ra(t){var e=Zu(t,"string");return typeof e=="symbol"?e:String(e)}function Zu(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var el=pr,Qt=el.Buffer,tl=fe,yn=tl.inspect,rl=yn&&yn.custom||"inspect";function nl(t,e,r){Qt.prototype.copy.call(t,e,r)}var il=function(){function t(){Qu(this,t),this.head=null,this.tail=null,this.length=0}return Xu(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Qt.alloc(0);for(var n=Qt.allocUnsafe(r>>>0),i=this.head,o=0;i;)nl(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var a=n.data,s=r>a.length?a.length:r;if(s===a.length?o+=a:o+=a.slice(0,r),r-=s,r===0){s===a.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(s));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=Qt.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var a=i.data,s=r>a.length?a.length:r;if(a.copy(n,n.length-r,0,s),r-=s,r===0){s===a.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=a.slice(s));break}++o}return this.length-=o,n}},{key:rl,value:function(r,n){return yn(this,Di(Di({},n),{},{depth:0,customInspect:!1}))}}]),t}();function ol(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,S.process.nextTick(gn,this,t)):S.process.nextTick(gn,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?S.process.nextTick(Xt,r):(r._writableState.errorEmitted=!0,S.process.nextTick(Bi,r,o)):S.process.nextTick(Bi,r,o):e?(S.process.nextTick(Xt,r),e(o)):S.process.nextTick(Xt,r)}),this)}function Bi(t,e){gn(t,e),Xt(t)}function Xt(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function al(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function gn(t,e){t.emit("error",e)}function sl(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var na={destroy:ol,undestroy:al,errorOrDestroy:sl},De={};function fl(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var ia={};function ne(t,e,r){r||(r=Error);function n(o,a,s){return typeof e=="string"?e:e(o,a,s)}var i=function(o){fl(a,o);function a(s,f,u){return o.call(this,n(s,f,u))||this}return a}(r);i.prototype.name=r.name,i.prototype.code=t,ia[t]=i}function Fi(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function ul(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function ll(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function cl(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}ne("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);ne("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&ul(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(ll(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Fi(e,"type"));else{var o=cl(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(Fi(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);ne("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ne("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});ne("ERR_STREAM_PREMATURE_CLOSE","Premature close");ne("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});ne("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ne("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ne("ERR_STREAM_WRITE_AFTER_END","write after end");ne("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ne("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);ne("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");De.codes=ia;var pl=De.codes.ERR_INVALID_OPT_VALUE;function hl(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function dl(t,e,r,n){var i=hl(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new pl(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var oa={getHighWaterMark:dl},yl=gl;function gl(t,e){if(Ur("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Ur("throwDeprecation"))throw new Error(e);Ur("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Ur(t){try{if(!Ee.localStorage)return!1}catch{return!1}var e=Ee.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var aa=F;function sa(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Wl(e,t)}}var Qe;F.WritableState=jt;var ml={deprecate:yl},fa=ta,br=pr.Buffer,vl=(typeof Ee!="undefined"?Ee:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function bl(t){return br.from(t)}function wl(t){return br.isBuffer(t)||t instanceof vl}var Cn=na,Sl=oa,El=Sl.getHighWaterMark,Oe=De.codes,kl=Oe.ERR_INVALID_ARG_TYPE,_l=Oe.ERR_METHOD_NOT_IMPLEMENTED,Rl=Oe.ERR_MULTIPLE_CALLBACK,Al=Oe.ERR_STREAM_CANNOT_PIPE,Ol=Oe.ERR_STREAM_DESTROYED,Pl=Oe.ERR_STREAM_NULL_VALUES,jl=Oe.ERR_STREAM_WRITE_AFTER_END,Tl=Oe.ERR_UNKNOWN_ENCODING,rt=Cn.errorOrDestroy;he.exports(F,fa);function Nl(){}function jt(t,e,r){Qe=Qe||nt,t=t||{},typeof r!="boolean"&&(r=e instanceof Qe),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=El(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Bl(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new sa(this)}jt.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(jt.prototype,"buffer",{get:ml.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Zt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Zt=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function(e){return Zt.call(this,e)?!0:this!==F?!1:e&&e._writableState instanceof jt}})):Zt=function(e){return e instanceof this};function F(t){Qe=Qe||nt;var e=this instanceof Qe;if(!e&&!Zt.call(F,this))return new F(t);this._writableState=new jt(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),fa.call(this)}F.prototype.pipe=function(){rt(this,new Al)};function Cl(t,e){var r=new jl;rt(t,r),S.process.nextTick(e,r)}function Ml(t,e,r,n){var i;return r===null?i=new Pl:typeof r!="string"&&!e.objectMode&&(i=new kl("chunk",["string","Buffer"],r)),i?(rt(t,i),S.process.nextTick(n,i),!1):!0}F.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&wl(t);return o&&!br.isBuffer(t)&&(t=bl(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Nl),n.ending?Cl(this,r):(o||Ml(this,n,t,r))&&(n.pendingcb++,i=Il(this,n,o,t,e,r)),i};F.prototype.cork=function(){this._writableState.corked++};F.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&ua(this,t))};F.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Tl(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $l(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=br.from(e,r)),e}Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Il(t,e,r,n,i,o){if(!r){var a=$l(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var f=e.length<e.highWaterMark;if(f||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else mn(t,e,!1,s,n,i,o);return f}function mn(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Ol("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Dl(t,e,r,n,i){--e.pendingcb,r?(S.process.nextTick(i,n),S.process.nextTick(bt,t,e),t._writableState.errorEmitted=!0,rt(t,n)):(i(n),t._writableState.errorEmitted=!0,rt(t,n),bt(t,e))}function Ll(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Bl(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Rl;if(Ll(r),e)Dl(t,r,n,e,i);else{var o=la(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&ua(t,r),n?S.process.nextTick(xi,t,r,o,i):xi(t,r,o,i)}}function xi(t,e,r,n){r||Fl(t,e),e.pendingcb--,n(),bt(t,e)}function Fl(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function ua(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,s=!0;r;)i[a]=r,r.isBuf||(s=!1),r=r.next,a+=1;i.allBuffers=s,mn(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new sa(e),e.bufferedRequestCount=0}else{for(;r;){var f=r.chunk,u=r.encoding,c=r.callback,p=e.objectMode?1:f.length;if(mn(t,e,!1,p,f,u,c),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}F.prototype._write=function(t,e,r){r(new _l("_write()"))};F.prototype._writev=null;F.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||ql(this,n,r),this};Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function la(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function xl(t,e){t._final(function(r){e.pendingcb--,r&&rt(t,r),e.prefinished=!0,t.emit("prefinish"),bt(t,e)})}function Ul(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,S.process.nextTick(xl,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function bt(t,e){var r=la(e);if(r&&(Ul(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function ql(t,e,r){e.ending=!0,bt(t,e),r&&(e.finished?S.process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Wl(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});F.prototype.destroy=Cn.destroy;F.prototype._undestroy=Cn.undestroy;F.prototype._destroy=function(t,e){e(t)};var Gl=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},nt=le,ca=ha,vn=aa;he.exports(le,ca);for(var Ui=Gl(vn.prototype),qr=0;qr<Ui.length;qr++){var Wr=Ui[qr];le.prototype[Wr]||(le.prototype[Wr]=vn.prototype[Wr])}function le(t){if(!(this instanceof le))return new le(t);ca.call(this,t),vn.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Hl)))}Object.defineProperty(le.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(le.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(le.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Hl(){this._writableState.ended||S.process.nextTick(Vl,this)}function Vl(t){t.end()}Object.defineProperty(le.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var Mn={},bn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=pr,n=r.Buffer;function i(a,s){for(var f in a)s[f]=a[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o);function o(a,s,f){return n(a,s,f)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(a,s,f){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,s,f)},o.alloc=function(a,s,f){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return s!==void 0?typeof f=="string"?u.fill(s,f):u.fill(s):u.fill(0),u},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(bn,bn.exports);var $n=bn.exports.Buffer,qi=$n.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function zl(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Kl(t){var e=zl(t);if(typeof e!="string"&&($n.isEncoding===qi||!qi(t)))throw new Error("Unknown encoding: "+t);return e||t}Mn.StringDecoder=Tt;function Tt(t){this.encoding=Kl(t);var e;switch(this.encoding){case"utf16le":this.text=ec,this.end=tc,e=4;break;case"utf8":this.fillLast=Ql,e=4;break;case"base64":this.text=rc,this.end=nc,e=3;break;default:this.write=ic,this.end=oc;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=$n.allocUnsafe(e)}Tt.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Tt.prototype.end=Zl;Tt.prototype.text=Xl;Tt.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Gr(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Yl(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Gr(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Gr(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Gr(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Jl(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Ql(t){var e=this.lastTotal-this.lastNeed,r=Jl(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Xl(t,e){var r=Yl(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Zl(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function ec(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function tc(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function rc(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function nc(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function ic(t){return t.toString(this.encoding)}function oc(t){return t&&t.length?this.write(t):""}var Wi=De.codes.ERR_STREAM_PREMATURE_CLOSE;function ac(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function sc(){}function fc(t){return t.setHeader&&typeof t.abort=="function"}function pa(t,e,r){if(typeof e=="function")return pa(t,null,e);e||(e={}),r=ac(r||sc);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||s()},a=t._writableState&&t._writableState.finished,s=function(){i=!1,a=!0,n||r.call(t)},f=t._readableState&&t._readableState.endEmitted,u=function(){n=!1,f=!0,i||r.call(t)},c=function(b){r.call(t,b)},p=function(){var b;if(n&&!f)return(!t._readableState||!t._readableState.ended)&&(b=new Wi),r.call(t,b);if(i&&!a)return(!t._writableState||!t._writableState.ended)&&(b=new Wi),r.call(t,b)},y=function(){t.req.on("finish",s)};return fc(t)?(t.on("complete",s),t.on("abort",p),t.req?y():t.on("request",y)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",u),t.on("finish",s),e.error!==!1&&t.on("error",c),t.on("close",p),function(){t.removeListener("complete",s),t.removeListener("abort",p),t.removeListener("request",y),t.req&&t.req.removeListener("finish",s),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",s),t.removeListener("end",u),t.removeListener("error",c),t.removeListener("close",p)}}var In=pa,xt;function me(t,e,r){return e=uc(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uc(t){var e=lc(t,"string");return typeof e=="symbol"?e:String(e)}function lc(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cc=In,ve=Symbol("lastResolve"),Te=Symbol("lastReject"),dt=Symbol("error"),lr=Symbol("ended"),Ce=Symbol("lastPromise"),Dn=Symbol("handlePromise"),Me=Symbol("stream");function be(t,e){return{value:t,done:e}}function pc(t){var e=t[ve];if(e!==null){var r=t[Me].read();r!==null&&(t[Ce]=null,t[ve]=null,t[Te]=null,e(be(r,!1)))}}function hc(t){S.process.nextTick(pc,t)}function dc(t,e){return function(r,n){t.then(function(){if(e[lr]){r(be(void 0,!0));return}e[Dn](r,n)},n)}}var yc=Object.getPrototypeOf(function(){}),gc=Object.setPrototypeOf((xt={get stream(){return this[Me]},next:function(){var e=this,r=this[dt];if(r!==null)return Promise.reject(r);if(this[lr])return Promise.resolve(be(void 0,!0));if(this[Me].destroyed)return new Promise(function(a,s){S.process.nextTick(function(){e[dt]?s(e[dt]):a(be(void 0,!0))})});var n=this[Ce],i;if(n)i=new Promise(dc(n,this));else{var o=this[Me].read();if(o!==null)return Promise.resolve(be(o,!1));i=new Promise(this[Dn])}return this[Ce]=i,i}},me(xt,Symbol.asyncIterator,function(){return this}),me(xt,"return",function(){var e=this;return new Promise(function(r,n){e[Me].destroy(null,function(i){if(i){n(i);return}r(be(void 0,!0))})})}),xt),yc),mc=function(e){var r,n=Object.create(gc,(r={},me(r,Me,{value:e,writable:!0}),me(r,ve,{value:null,writable:!0}),me(r,Te,{value:null,writable:!0}),me(r,dt,{value:null,writable:!0}),me(r,lr,{value:e._readableState.endEmitted,writable:!0}),me(r,Dn,{value:function(o,a){var s=n[Me].read();s?(n[Ce]=null,n[ve]=null,n[Te]=null,o(be(s,!1))):(n[ve]=o,n[Te]=a)},writable:!0}),r));return n[Ce]=null,cc(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[Te];o!==null&&(n[Ce]=null,n[ve]=null,n[Te]=null,o(i)),n[dt]=i;return}var a=n[ve];a!==null&&(n[Ce]=null,n[ve]=null,n[Te]=null,a(be(void 0,!0))),n[lr]=!0}),e.on("readable",hc.bind(null,n)),n},vc=mc,bc=function(){throw new Error("Readable.from is not available in the browser")},ha=C,Xe;C.ReadableState=ya;Pt.exports.EventEmitter;var da=function(e,r){return e.listeners(r).length},Nt=ta,wr=pr.Buffer,wc=(typeof Ee!="undefined"?Ee:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function Sc(t){return wr.from(t)}function Ec(t){return wr.isBuffer(t)||t instanceof wc}var Hr=fe,A;Hr&&Hr.debuglog?A=Hr.debuglog("stream"):A=function(){};var kc=il,Ln=na,_c=oa,Rc=_c.getHighWaterMark,Sr=De.codes,Ac=Sr.ERR_INVALID_ARG_TYPE,Oc=Sr.ERR_STREAM_PUSH_AFTER_EOF,Pc=Sr.ERR_METHOD_NOT_IMPLEMENTED,jc=Sr.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Ze,Vr,zr;he.exports(C,Nt);var yt=Ln.errorOrDestroy,Kr=["error","close","destroy","pause","resume"];function Tc(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function ya(t,e,r){Xe=Xe||nt,t=t||{},typeof r!="boolean"&&(r=e instanceof Xe),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Rc(this,t,"readableHighWaterMark",r),this.buffer=new kc,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Ze||(Ze=Mn.StringDecoder),this.decoder=new Ze(t.encoding),this.encoding=t.encoding)}function C(t){if(Xe=Xe||nt,!(this instanceof C))return new C(t);var e=this instanceof Xe;this._readableState=new ya(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Nt.call(this)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});C.prototype.destroy=Ln.destroy;C.prototype._undestroy=Ln.undestroy;C.prototype._destroy=function(t,e){e(t)};C.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=wr.from(t,e),e=""),n=!0),ga(this,t,e,!1,n)};C.prototype.unshift=function(t){return ga(this,t,null,!0,!1)};function ga(t,e,r,n,i){A("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,Mc(t,o);else{var a;if(i||(a=Nc(o,e)),a)yt(t,a);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==wr.prototype&&(e=Sc(e)),n)o.endEmitted?yt(t,new jc):Yr(t,o,e,!0);else if(o.ended)yt(t,new Oc);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?Yr(t,o,e,!1):wn(t,o)):Yr(t,o,e,!1)}else n||(o.reading=!1,wn(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function Yr(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Er(t)),wn(t,e)}function Nc(t,e){var r;return!Ec(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Ac("chunk",["string","Buffer","Uint8Array"],e)),r}C.prototype.isPaused=function(){return this._readableState.flowing===!1};C.prototype.setEncoding=function(t){Ze||(Ze=Mn.StringDecoder);var e=new Ze(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Gi=1073741824;function Cc(t){return t>=Gi?t=Gi:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Hi(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=Cc(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}C.prototype.read=function(t){A("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return A("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Jr(this):Er(this),null;if(t=Hi(t,e),t===0&&e.ended)return e.length===0&&Jr(this),null;var n=e.needReadable;A("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,A("length less than watermark",n)),e.ended||e.reading?(n=!1,A("reading or ended",n)):n&&(A("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Hi(r,e)));var i;return t>0?i=ba(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Jr(this)),i!==null&&this.emit("data",i),i};function Mc(t,e){if(A("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Er(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,ma(t)))}}function Er(t){var e=t._readableState;A("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(A("emitReadable",e.flowing),e.emittedReadable=!0,S.process.nextTick(ma,t))}function ma(t){var e=t._readableState;A("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Bn(t)}function wn(t,e){e.readingMore||(e.readingMore=!0,S.process.nextTick($c,t,e))}function $c(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(A("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}C.prototype._read=function(t){yt(this,new Pc("_read()"))};C.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,A("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==S.process.stdout&&t!==S.process.stderr,o=i?s:w;n.endEmitted?S.process.nextTick(o):r.once("end",o),t.on("unpipe",a);function a(O,E){A("onunpipe"),O===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,c())}function s(){A("onend"),t.end()}var f=Ic(r);t.on("drain",f);var u=!1;function c(){A("cleanup"),t.removeListener("close",m),t.removeListener("finish",b),t.removeListener("drain",f),t.removeListener("error",y),t.removeListener("unpipe",a),r.removeListener("end",s),r.removeListener("end",w),r.removeListener("data",p),u=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&f()}r.on("data",p);function p(O){A("ondata");var E=t.write(O);A("dest.write",E),E===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&wa(n.pipes,t)!==-1)&&!u&&(A("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function y(O){A("onerror",O),w(),t.removeListener("error",y),da(t,"error")===0&&yt(t,O)}Tc(t,"error",y);function m(){t.removeListener("finish",b),w()}t.once("close",m);function b(){A("onfinish"),t.removeListener("close",m),w()}t.once("finish",b);function w(){A("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(A("pipe resume"),r.resume()),t};function Ic(t){return function(){var r=t._readableState;A("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&da(t,"data")&&(r.flowing=!0,Bn(t))}}C.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=wa(e.pipes,t);return a===-1?this:(e.pipes.splice(a,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};C.prototype.on=function(t,e){var r=Nt.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,A("on readable",n.length,n.reading),n.length?Er(this):n.reading||S.process.nextTick(Dc,this)),r};C.prototype.addListener=C.prototype.on;C.prototype.removeListener=function(t,e){var r=Nt.prototype.removeListener.call(this,t,e);return t==="readable"&&S.process.nextTick(va,this),r};C.prototype.removeAllListeners=function(t){var e=Nt.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&S.process.nextTick(va,this),e};function va(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Dc(t){A("readable nexttick read 0"),t.read(0)}C.prototype.resume=function(){var t=this._readableState;return t.flowing||(A("resume"),t.flowing=!t.readableListening,Lc(this,t)),t.paused=!1,this};function Lc(t,e){e.resumeScheduled||(e.resumeScheduled=!0,S.process.nextTick(Bc,t,e))}function Bc(t,e){A("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Bn(t),e.flowing&&!e.reading&&t.read(0)}C.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Bn(t){var e=t._readableState;for(A("flow",e.flowing);e.flowing&&t.read()!==null;);}C.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(A("wrapped end"),r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&e.push(a)}e.push(null)}),t.on("data",function(a){if(A("wrapped data"),r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var s=e.push(a);s||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(s){return function(){return t[s].apply(t,arguments)}}(i));for(var o=0;o<Kr.length;o++)t.on(Kr[o],this.emit.bind(this,Kr[o]));return this._read=function(a){A("wrapped _read",a),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(C.prototype[Symbol.asyncIterator]=function(){return Vr===void 0&&(Vr=vc),Vr(this)});Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});C._fromList=ba;Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ba(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Jr(t){var e=t._readableState;A("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,S.process.nextTick(Fc,e,t))}function Fc(t,e){if(A("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(C.from=function(t,e){return zr===void 0&&(zr=bc),zr(C,t,e)});function wa(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var Sa=de,kr=De.codes,xc=kr.ERR_METHOD_NOT_IMPLEMENTED,Uc=kr.ERR_MULTIPLE_CALLBACK,qc=kr.ERR_TRANSFORM_ALREADY_TRANSFORMING,Wc=kr.ERR_TRANSFORM_WITH_LENGTH_0,_r=nt;he.exports(de,_r);function Gc(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Uc);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function de(t){if(!(this instanceof de))return new de(t);_r.call(this,t),this._transformState={afterTransform:Gc.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Hc)}function Hc(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Vi(t,e,r)}):Vi(this,null,null)}de.prototype.push=function(t,e){return this._transformState.needTransform=!1,_r.prototype.push.call(this,t,e)};de.prototype._transform=function(t,e,r){r(new xc("_transform()"))};de.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};de.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};de.prototype._destroy=function(t,e){_r.prototype._destroy.call(this,t,function(r){e(r)})};function Vi(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Wc;if(t._transformState.transforming)throw new qc;return t.push(null)}var Vc=wt,Ea=Sa;he.exports(wt,Ea);function wt(t){if(!(this instanceof wt))return new wt(t);Ea.call(this,t)}wt.prototype._transform=function(t,e,r){r(null,t)};var Qr;function zc(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var ka=De.codes,Kc=ka.ERR_MISSING_ARGS,Yc=ka.ERR_STREAM_DESTROYED;function zi(t){if(t)throw t}function Jc(t){return t.setHeader&&typeof t.abort=="function"}function Qc(t,e,r,n){n=zc(n);var i=!1;t.on("close",function(){i=!0}),Qr===void 0&&(Qr=In),Qr(t,{readable:e,writable:r},function(a){if(a)return n(a);i=!0,n()});var o=!1;return function(a){if(!i&&!o){if(o=!0,Jc(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(a||new Yc("pipe"))}}}function Ki(t){t()}function Xc(t,e){return t.pipe(e)}function Zc(t){return!t.length||typeof t[t.length-1]!="function"?zi:t.pop()}function ep(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Zc(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Kc("streams");var i,o=e.map(function(a,s){var f=s<e.length-1,u=s>0;return Qc(a,f,u,function(c){i||(i=c),c&&o.forEach(Ki),!f&&(o.forEach(Ki),n(i))})});return e.reduce(Xc)}var tp=ep,rp=re,Fn=Pt.exports.EventEmitter,np=he.exports;np(re,Fn);re.Readable=ha;re.Writable=aa;re.Duplex=nt;re.Transform=Sa;re.PassThrough=Vc;re.finished=In;re.pipeline=tp;re.Stream=re;function re(){Fn.call(this)}re.prototype.pipe=function(t,e){var r=this;function n(c){t.writable&&t.write(c)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",a),r.on("close",s));var o=!1;function a(){o||(o=!0,t.end())}function s(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function f(c){if(u(),Fn.listenerCount(this,"error")===0)throw c}r.on("error",f),t.on("error",f);function u(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",s),r.removeListener("error",f),t.removeListener("error",f),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};var er=St.exports,ip=rp.Stream,op=fe,ap=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;function Xr(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ge(t,e,r,n,i){throw new er.AssertionError({message:op.format("%s (%s) is required",t,e),actual:i===void 0?typeof n:i(n),expected:e,operator:r||"===",stackStartFunction:ge.caller})}function Zr(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ge(){}var st={bool:{check:function(t){return typeof t=="boolean"}},func:{check:function(t){return typeof t=="function"}},string:{check:function(t){return typeof t=="string"}},object:{check:function(t){return typeof t=="object"&&t!==null}},number:{check:function(t){return typeof t=="number"&&!isNaN(t)}},finite:{check:function(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}},buffer:{check:function(t){return S.Buffer.isBuffer(t)},operator:"Buffer.isBuffer"},array:{check:function(t){return Array.isArray(t)},operator:"Array.isArray"},stream:{check:function(t){return t instanceof ip},operator:"instanceof",actual:Zr},date:{check:function(t){return t instanceof Date},operator:"instanceof",actual:Zr},regexp:{check:function(t){return t instanceof RegExp},operator:"instanceof",actual:Zr},uuid:{check:function(t){return typeof t=="string"&&ap.test(t)},operator:"isUUID"}};function _a(t){var e=Object.keys(st),r;return{}.NODE_NDEBUG?r=Ge:r=function(n,i){n||ge(i,"true",n)},e.forEach(function(n){if(t){r[n]=Ge;return}var i=st[n];r[n]=function(o,a){i.check(o)||ge(a,n,i.operator,o,i.actual)}}),e.forEach(function(n){var i="optional"+Xr(n);if(t){r[i]=Ge;return}var o=st[n];r[i]=function(a,s){a!=null&&(o.check(a)||ge(s,n,o.operator,a,o.actual))}}),e.forEach(function(n){var i="arrayOf"+Xr(n);if(t){r[i]=Ge;return}var o=st[n],a="["+n+"]";r[i]=function(s,f){Array.isArray(s)||ge(f,a,o.operator,s,o.actual);var u;for(u=0;u<s.length;u++)o.check(s[u])||ge(f,a,o.operator,s,o.actual)}}),e.forEach(function(n){var i="optionalArrayOf"+Xr(n);if(t){r[i]=Ge;return}var o=st[n],a="["+n+"]";r[i]=function(s,f){if(s!=null){Array.isArray(s)||ge(f,a,o.operator,s,o.actual);var u;for(u=0;u<s.length;u++)o.check(s[u])||ge(f,a,o.operator,s,o.actual)}}}),Object.keys(er).forEach(function(n){if(n==="AssertionError"){r[n]=er[n];return}if(t){r[n]=Ge;return}r[n]=er[n]}),r._setExports=_a,r}var sp=_a({}.NODE_NDEBUG),Rr={},lt=St.exports,fp=fe;Rr.sprintf=xn;Rr.printf=up;Rr.fprintf=Ra;function xn(t){var e=["([^%]*)","%","(['\\-+ #0]*?)","([1-9]\\d*)?","(\\.([1-9]\\d*))?","[lhjztL]*?","([diouxXfFeEgGaAcCsSp%jr])"].join(""),r=new RegExp(e),n=Array.prototype.slice.call(arguments,1),i=t,o,a,s,f,u,c,p,y,m,b="",w=1,O=0,E,R;for(lt.equal("string",typeof i,"first argument must be a format string");(m=r.exec(i))!==null;){if(b+=m[1],i=i.substring(m[0].length),R=m[0].substring(m[1].length),E=O+m[1].length+1,O+=m[0].length,o=m[2]||"",a=m[3]||0,s=m[4]||"",f=m[6],u=!1,p=!1,c=" ",f=="%"){b+="%";continue}if(n.length===0)throw ft(t,E,R,"has no matching argument (too few arguments passed)");if(y=n.shift(),w++,o.match(/[\' #]/))throw ft(t,E,R,"uses unsupported flags");if(s.length>0)throw ft(t,E,R,"uses non-zero precision (not supported)");switch(o.match(/-/)&&(u=!0),o.match(/0/)&&(c="0"),o.match(/\+/)&&(p=!0),f){case"s":if(y==null)throw ft(t,E,R,"attempted to print undefined or null as a string (argument "+w+" to sprintf)");b+=en(c,a,u,y.toString());break;case"d":y=Math.floor(y);case"f":p=p&&y>0?"+":"",b+=p+en(c,a,u,y.toString());break;case"x":b+=en(c,a,u,y.toString(16));break;case"j":a===0&&(a=10),b+=fp.inspect(y,!1,a);break;case"r":b+=Aa(y);break;default:throw ft(t,E,R,"is not supported")}}return b+=i,b}function ft(t,e,r,n){return lt.equal(typeof t,"string"),lt.equal(typeof r,"string"),lt.equal(typeof e,"number"),lt.equal(typeof n,"string"),new Error('format string "'+t+'": conversion specifier "'+r+'" at character '+e+" "+n)}function up(){var t=Array.prototype.slice.call(arguments);t.unshift(S.process.stdout),Ra.apply(null,t)}function Ra(t){var e=Array.prototype.slice.call(arguments,1);return t.write(xn.apply(this,e))}function en(t,e,r,n){for(var i=n;i.length<e;)r?i+=t:i=t+i;return i}function Aa(t){var e;if(!(t instanceof Error))throw new Error(xn("invalid type for %%r: %j",t));if(e="EXCEPTION: "+t.constructor.name+": "+t.stack,t.cause&&typeof t.cause=="function"){var r=t.cause();r&&(e+=`
Caused by: `+Aa(r))}return e}var z={};function lp(t){return Array.isArray?Array.isArray(t):Ar(t)==="[object Array]"}z.isArray=lp;function cp(t){return typeof t=="boolean"}z.isBoolean=cp;function pp(t){return t===null}z.isNull=pp;function hp(t){return t==null}z.isNullOrUndefined=hp;function dp(t){return typeof t=="number"}z.isNumber=dp;function yp(t){return typeof t=="string"}z.isString=yp;function gp(t){return typeof t=="symbol"}z.isSymbol=gp;function mp(t){return t===void 0}z.isUndefined=mp;function vp(t){return Ar(t)==="[object RegExp]"}z.isRegExp=vp;function bp(t){return typeof t=="object"&&t!==null}z.isObject=bp;function wp(t){return Ar(t)==="[object Date]"}z.isDate=wp;function Sp(t){return Ar(t)==="[object Error]"||t instanceof Error}z.isError=Sp;function Ep(t){return typeof t=="function"}z.isFunction=Ep;function kp(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t=="undefined"}z.isPrimitive=kp;z.isBuffer=S.Buffer.isBuffer;function Ar(t){return Object.prototype.toString.call(t)}var U=sp,Or=fe,_p=Rr,se=z.isError,Rp=_p.sprintf,x=N;N.VError=N;N.SError=gt;N.WError=Se;N.MultiError=it;function Un(t){var e,r,n,i,o;if(U.object(t,"args"),U.bool(t.strict,"args.strict"),U.array(t.argv,"args.argv"),e=t.argv,e.length===0)r={},n=[];else if(se(e[0]))r={cause:e[0]},n=e.slice(1);else if(typeof e[0]=="object"){r={};for(o in e[0])r[o]=e[0][o];n=e.slice(1)}else U.string(e[0],"first argument to VError, SError, or WError constructor must be a string, object, or Error"),r={},n=e;return U.object(r),!r.strict&&!t.strict&&(n=n.map(function(a){return a===null?"null":a===void 0?"undefined":a})),n.length===0?i="":i=Rp.apply(null,n),{options:r,shortmessage:i}}function N(){var t,e,r,n,i,o,a;if(t=Array.prototype.slice.call(arguments,0),!(this instanceof N))return e=Object.create(N.prototype),N.apply(e,arguments),e;if(r=Un({argv:t,strict:!1}),r.options.name&&(U.string(r.options.name,`error's "name" must be a string`),this.name=r.options.name),this.jse_shortmsg=r.shortmessage,o=r.shortmessage,n=r.options.cause,n&&(U.ok(se(n),"cause is not an Error"),this.jse_cause=n,r.options.skipCauseMessage||(o+=": "+n.message)),this.jse_info={},r.options.info)for(a in r.options.info)this.jse_info[a]=r.options.info[a];return this.message=o,Error.call(this,o),Error.captureStackTrace&&(i=r.options.constructorOpt||this.constructor,Error.captureStackTrace(this,i)),this}Or.inherits(N,Error);N.prototype.name="VError";N.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),e};N.prototype.cause=function(){var e=N.cause(this);return e===null?void 0:e};N.cause=function(t){return U.ok(se(t),"err must be an Error"),se(t.jse_cause)?t.jse_cause:null};N.info=function(t){var e,r,n;if(U.ok(se(t),"err must be an Error"),r=N.cause(t),r!==null?e=N.info(r):e={},typeof t.jse_info=="object"&&t.jse_info!==null)for(n in t.jse_info)e[n]=t.jse_info[n];return e};N.findCauseByName=function(t,e){var r;for(U.ok(se(t),"err must be an Error"),U.string(e,"name"),U.ok(e.length>0,"name cannot be empty"),r=t;r!==null;r=N.cause(r))if(U.ok(se(r)),r.name==e)return r;return null};N.hasCauseWithName=function(t,e){return N.findCauseByName(t,e)!==null};N.fullStack=function(t){U.ok(se(t),"err must be an Error");var e=N.cause(t);return e?t.stack+`
caused by: `+N.fullStack(e):t.stack};N.errorFromList=function(t){return U.arrayOfObject(t,"errors"),t.length===0?null:(t.forEach(function(e){U.ok(se(e))}),t.length==1?t[0]:new it(t))};N.errorForEach=function(t,e){U.ok(se(t),"err must be an Error"),U.func(e,"func"),t instanceof it?t.errors().forEach(function(n){e(n)}):e(t)};function gt(){var t,e,r,n;return t=Array.prototype.slice.call(arguments,0),this instanceof gt?(r=Un({argv:t,strict:!0}),n=r.options,N.call(this,n,"%s",r.shortmessage),this):(e=Object.create(gt.prototype),gt.apply(e,arguments),e)}Or.inherits(gt,N);function it(t){U.array(t,"list of errors"),U.ok(t.length>0,"must be at least one error"),this.ase_errors=t,N.call(this,{cause:t[0]},"first of %d error%s",t.length,t.length==1?"":"s")}Or.inherits(it,N);it.prototype.name="MultiError";it.prototype.errors=function(){return this.ase_errors.slice(0)};function Se(){var t,e,r,n;return t=Array.prototype.slice.call(arguments,0),this instanceof Se?(r=Un({argv:t,strict:!1}),n=r.options,n.skipCauseMessage=!0,N.call(this,n,"%s",r.shortmessage),this):(e=Object.create(Se.prototype),Se.apply(e,t),e)}Or.inherits(Se,N);Se.prototype.name="WError";Se.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),this.jse_cause&&this.jse_cause.message&&(e+="; caused by "+this.jse_cause.toString()),e};Se.prototype.cause=function(e){return se(e)&&(this.jse_cause=e),this.jse_cause};class v{constructor(e,r){this.x=e,this.y=r}clone(){return new v(this.x,this.y)}}const Oa=t=>{switch(t){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;default:throw new x(`Cannot map file "${t}" to number`)}},cr=t=>{switch(t){case 1:return"a";case 2:return"b";case 3:return"c";case 4:return"d";case 5:return"e";case 6:return"f";case 7:return"g";case 8:return"h";default:throw new x(`Cannot map "${t}" to file`)}},Ap=t=>["B","K","N","Q","R"].includes(t),Op=t=>["b","k","n","q","r"].includes(t),Pp=t=>["a","b","c","d","e","f","g","h"].includes(t),jp=t=>typeof t=="number"&&t>0&&t<=8,G=(t,e)=>t&&e&&t.file===e.file&&t.rank===e.rank,Tp=t=>{let e="";return e+=cr(t.file),e+=t.rank,e},$=t=>t===we.Black||t==we.DarkGrey?"black":"white",Np=t=>({file:t%8+1,rank:8-Math.floor(t/8)}),Yi=t=>(9-t.rank-1)*8+(t.file-1),He=(t,e)=>t.rank===(e==="white"?8:1);class Ji{constructor(){this.files=[],this.ranks=[],this.pieces=[],this.tokens=[]}isEmpty(){return!this.moveType&&this.files.length===0&&this.ranks.length===0&&this.pieces.length===0&&!this.castleSide&&typeof this.isDrawOffer=="undefined"&&typeof this.isGameOver=="undefined"}toNode(){if(this.isDrawOffer)return{sources:this.tokens,kind:"draw-offer"};if(this.isGameOver)return{sources:this.tokens,kind:"game-over",outcome:this.outcome};const e={from:{},to:{}};if(this.pieces[0]&&this.moveType!=="promotion"&&(e.piece=this.pieces[0]),e.kind="move",this.files.length===2)e.from.file=this.files[0],e.to.file=this.files[1];else if(this.files.length===1)e.to.file=this.files[0];else if(this.files.length!==0)throw new x(`Parsed ${this.files.length} columns for a single move`);if(this.ranks.length===2)e.from.rank=this.ranks[0],e.to.rank=this.ranks[1];else if(this.ranks.length===1)e.to.rank=this.ranks[0];else if(this.ranks.length!==0)throw new x(`Parsed ${this.ranks.length} ranks for a single move`);return this.moveType==="allegiance"?{...e,type:"allegiance",sources:this.tokens}:this.moveType==="capture"?{...e,type:"capture",sources:this.tokens}:this.moveType==="castle"?{...e,type:"castle",side:this.castleSide,sources:this.tokens}:this.moveType==="en-passant"?{...e,type:"en-passant",sources:this.tokens}:this.moveType==="promotion"?{...e,piece:null,type:"promotion",promotionTo:this.pieces[0],sources:this.tokens}:{...e,sources:this.tokens}}}const Cp=t=>{var c,p,y;let e=0;const r=["castle","draw-offer","piece","step-number","game-over","file","move-separator"],n=["step-number","move-separator"],i=new Set(r),o=(...m)=>{i.clear(),m.forEach(b=>i.add(b))};for(;e<t.length;){const m=t[e];if(!i.has(m.kind))throw new x(`Parse error on line ${(c=m.source)==null?void 0:c.row} column ${(p=m.source)==null?void 0:p.column}: Token kind "${m.kind}" was not expected after "${(y=t[e-1])==null?void 0:y.kind}"`);switch(m.kind){case"move-separator":o(...r,"step-number","capture");break;case"step-number":o(...r,"move-separator");break;case"promotion":o("piece");break;case"allegiance":case"capture":o("file");break;case"castle":case"double-check":case"check":case"en-passant":o(...r);break;case"checkmate":o("game-over","move-separator");break;case"file":o("rank","capture","allegiance","file");break;case"draw-offer":o(...r,"game-over");break;case"game-over":o("move-separator");break;case"rank":o(...r,"allegiance","capture","check","checkmate","double-check","en-passant","promotion");break;case"piece":o("capture","allegiance","check","checkmate","game-over","file","double-check","en-passant","promotion");break}e++}e=0;const a={kind:"root",children:[]};let s=new Ji;const f=()=>{s.isEmpty()||(a.children.push(s.toNode()),s=new Ji)},u=()=>{var m;return(m=t[e+1])==null?void 0:m.kind};for(;e<t.length;){const m=t[e];switch(n.includes(m.kind)||s.tokens.push(m),m.kind){case"move-separator":u()!=="en-passant"&&f();break;case"piece":s.pieces.push(m.value);break;case"allegiance":s.moveType="allegiance";break;case"capture":s.moveType="capture";break;case"castle":s.moveType="castle",s.castleSide=m.side,u()!=="move-separator"&&f();break;case"check":case"double-check":s.causesCheck=!0,s.isMate=!1,u()!=="move-separator"&&f();break;case"checkmate":s.causesCheck=!0,s.isMate=!0,u()!=="move-separator"&&f();break;case"file":s.files.push(m.value);break;case"rank":s.ranks.push(m.value),u()||f();break;case"draw-offer":s.isDrawOffer=!0,u()!=="move-separator"&&f();break;case"en-passant":s.moveType="en-passant",u()!=="move-separator"&&f();break;case"promotion":s.moveType="promotion";break;case"game-over":s.isGameOver=!0,s.outcome=m.outcome,u()!=="move-separator"&&f();break}e++}return a},Mp=t=>{const e=t.replace(/[]/gu,"-");let r=1,n=1,i=0;const o=[];for(;i<e.length;){const a=e[i],s=c=>e.substring(i,i+c.length)===c,f=c=>{let p="",y=i;for(;;){const m=e[y];if(y>=e.length||c(m)){y--;break}p+=m,y++}return p},u=(c,p)=>{o.push({...p,source:{column:n,row:r,length:c}}),i+=c,n+=c};if(a===`
`){r++,n=1,u(1,{kind:"move-separator"});continue}if(a==="\r"){n=1,i++;continue}if(s("e.p.")||s(" e.p.")){u(a===" "?5:4,{kind:"en-passant"});continue}if(a===" "||a===";"){u(1,{kind:"move-separator"});continue}if(s("O-O-O")||s("0-0-0")){u(5,{kind:"castle",side:"queen"});continue}if(s("O-O")||s("0-0")){u(3,{kind:"castle",side:"king"});continue}if(a==="+"||a==="\u2020"){u(1,{kind:"check"});continue}if(s("ch")){u(2,{kind:"check"});continue}if(/[#X]/gu.test(a)){u(1,{kind:"checkmate"});continue}if(s("mate")){u(4,{kind:"checkmate"});continue}if(s("dbl ch")){u(6,{kind:"double-check"});continue}if(s("++")){u(2,{kind:"double-check"});continue}if(s("0-1")){u(3,{kind:"game-over",outcome:"black"});continue}if(s("1-0")){u(3,{kind:"game-over",outcome:"white"});continue}if(s("\xBD-\xBD")){u(3,{kind:"game-over",outcome:"draw"});continue}if(s("1/2-1/2")){u(7,{kind:"game-over",outcome:"draw"});continue}if(s("0-0")){u(3,{kind:"game-over",outcome:"forfeit"});continue}if(s("\xBD-0")){u(3,{kind:"game-over",outcome:"forfeit-white"});continue}if(s("1/2-0")){u(5,{kind:"game-over",outcome:"forfeit-white"});continue}if(s("0-\xBD")){u(3,{kind:"game-over",outcome:"forfeit-black"});continue}if(s("0-1/2")){u(5,{kind:"game-over",outcome:"forfeit-black"});continue}if(/[\d]/gu.test(a)){const c=f(y=>!/[\d]/gu.test(y));if(e[i+c.length]==="."){u(c.length+1,{kind:"step-number",value:Number.parseInt(c,10)});continue}}if(/[1-8]/gu.test(a)){u(1,{kind:"rank",value:Number.parseInt(a,10)});continue}if(/[a-h]/gu.test(a)){u(1,{kind:"file",value:Oa(a)});continue}if(/[KQRBN]/gu.test(a)){u(1,{kind:"piece",value:a});continue}if(/[x:]/gu.test(a)){u(1,{kind:"capture"});continue}if(s("(=)")){u(3,{kind:"draw-offer"});continue}if(a==="="||a==="/"){u(1,{kind:"promotion"});continue}if(a==="("||a===")"){u(1,{kind:"promotion",bracket:a==="("?"open":"close"});continue}if(a===">"){u(1,{kind:"allegiance"});continue}throw new x(`Unsupported character at line ${r} column ${n}: "${a}"`)}return o},$p=t=>{switch(t.kind){case"draw-offer":return"(=)";case"game-over":{switch(t.outcome){case"black":return"0-1";case"white":return"1-0";case"draw":return"1/2-1/2";case"forfeit":return"0-0";case"forfeit-black":return"0-1/2";case"forfeit-white":return"1/2-0"}break}case"move":{const e=(r,n)=>{let i="";return t.piece&&(i+=t.piece),t.from.file&&(i+=`${cr(t.from.file)}`),t.from.rank&&(i+=`${t.from.rank}`),i+=r,t.type==="promotion"&&t.promotionTo&&(i+=`${t.promotionTo}`),t.to.file&&(i+=`${cr(t.to.file)}`),t.to.rank&&(i+=`${t.to.rank}`),n&&(i+=n),i};switch(t.type){case"allegiance":return e(">");case"capture":return e("x");case"castle":return t.side==="king"?"O-O":"O-O-O";case"en-passant":return e("x"," e.p.");case"promotion":return e("=");default:return e("")}}}},Ip=t=>{const e=[];return t.children.forEach((r,n)=>{const i=n%2===0;(a=>{i?e.push(a):e[e.length-1]+=` ${a}`})($p(r))}),e.filter(Boolean).map((r,n)=>`${n+1}. ${r}`).join(`
`).trim()};var Pa=(t=>(t[t.Ranks=0]="Ranks",t[t.ActiveColour=1]="ActiveColour",t[t.CastlingRights=2]="CastlingRights",t[t.EnPassantTargets=3]="EnPassantTargets",t[t.HalfmoveClock=4]="HalfmoveClock",t[t.FullmoveNumber=5]="FullmoveNumber",t))(Pa||{});class Qi{constructor(){this.allegianceMark=!1,this.castlingRights=[]}canSetPieceSide(){return!this.pieceSide}setPieceSide(e){if(!this.canSetPieceSide())throw new x("Cannot set piece side on WipNode, because it's already set");this.pieceSide=e}canSetPiece(){return!this.piece&&this.piece!==null}setPiece(e){if(!this.canSetPiece())throw new x("Cannot set piece on WipNode, because there is already one set");this.piece=e}canSetAllegianceMark(){return!this.allegianceMark}addAllegianceMark(){if(!this.canSetAllegianceMark())throw new x("Allegiance mark already set");this.allegianceMark=!0}pieceDataReady(){return!this.canSetPiece()&&!this.canSetPieceSide()}setActiveColour(e){this.activeColour=e}hasCastlingRights(){return this.castlingRights.length!==0}addCastlingRight(e){this.castlingRights.push(e)}canSetEnPassantFile(){return!this.enPassantFile}setEnPassantFile(e){if(!this.canSetEnPassantFile())throw new x("Cannot set en passant file on WipNode, because there is already one set");this.enPassantFile=e}canSetEnPassantRank(){return!this.enPassantRank}setEnPassantRank(e){if(!this.canSetEnPassantRank())throw new x("Cannot set en passant rank on WipNode, because there is already one set");this.enPassantRank=e}canSetHalfmoveClock(){return typeof this.halfmoveClock!="number"}setHalfmoveClock(e){this.halfmoveClock=e}canSetFullmoveNumber(){return typeof this.fullmoveNumber!="number"}setFullmoveNumber(e){this.fullmoveNumber=e}isEnPassantType(){return!!(this.enPassantFile&&this.enPassantRank)}toNode(){if(this.piece||this.piece===null)return this.pieceSide==="white"?{kind:"piece",value:{allegiance:this.allegianceMark?we.LightGrey:we.White,piece:this.piece?this.piece.toUpperCase():null}}:{kind:"piece",value:{allegiance:this.allegianceMark?we.DarkGrey:we.Black,piece:this.piece?this.piece.toUpperCase():null}};if(this.activeColour)return{kind:"active-colour",value:this.activeColour};if(this.castlingRights.length>0){const e=[],r=[];return this.castlingRights.includes("K")&&r.push("king"),this.castlingRights.includes("Q")&&r.push("queen"),this.castlingRights.includes("k")&&e.push("king"),this.castlingRights.includes("q")&&e.push("queen"),{kind:"castling-rights",value:{black:e,white:r}}}if(this.enPassantFile&&this.enPassantRank)return{kind:"en-passant-targets",value:{file:this.enPassantFile,rank:this.enPassantRank}};if(typeof this.halfmoveClock=="number")return{kind:"halfmove-clock",value:this.halfmoveClock};if(typeof this.fullmoveNumber=="number")return{kind:"fullmove-number",value:this.fullmoveNumber};throw new x(`Cannot create Node from WipNode, ${JSON.stringify({...this},null,2)}`)}}const Dp=t=>{const e={kind:"ast",children:[]};let r=0,n=0,i=new Qi;const o=f=>{e.children.push(f),r++},a=()=>{e.children.push(i.toNode()),i=new Qi},s=f=>{n=f,r++};for(;r<t.length;){const f=t[r],u=t[r+1];if(n===0){if((f.kind==="char"||f.kind==="number"||f.kind==="separator"||f.kind==="space")&&i.pieceDataReady()&&a(),f.kind==="char"&&Op(f.value)){i.setPieceSide("black"),i.setPiece(f.value),u||a(),r++;continue}if(f.kind==="char"&&Ap(f.value)){i.setPieceSide("white"),i.setPiece(f.value),u||a(),r++;continue}if(f.kind==="char"&&f.value==="p"){i.setPieceSide("black"),i.setPiece(null),u||a(),r++;continue}if(f.kind==="char"&&f.value==="P"){i.setPieceSide("white"),i.setPiece(null),u||a(),r++;continue}if(f.kind==="allegiance"){i.addAllegianceMark(),r++,u||a();continue}if(f.kind==="number"&&f.value>0&&f.value<=8){o({kind:"skip",value:f.value});continue}}switch(n){case 0:{if(f.kind==="separator"){r++;continue}if(f.kind==="space"){n=1,r++;continue}break}case 1:{if(f.kind==="char"&&f.value==="w"){i.setActiveColour("white"),r++;continue}if(f.kind==="char"&&f.value==="b"){i.setActiveColour("black"),r++;continue}if(f.kind==="space"){a(),s(2);continue}break}case 2:{if(f.kind==="char"&&(f.value==="q"||f.value==="Q"||f.value==="k"||f.value==="K")){i.addCastlingRight(f.value),r++;continue}if(f.kind==="hyphen"){r++;continue}if(f.kind==="space"){i.hasCastlingRights()&&a(),s(3);continue}break}case 3:{if(f.kind==="hyphen"){r++;continue}if(f.kind==="char"&&Pp(f.value)){i.setEnPassantFile(Oa(f.value)),r++;continue}if(f.kind==="number"&&jp(f.value)){i.setEnPassantRank(f.value),r++;continue}if(f.kind==="space"){i.isEnPassantType()&&a(),s(4);continue}break}case 4:{if(f.kind==="number"){i.setHalfmoveClock(f.value),r++;continue}if(f.kind==="space"){a(),s(5);continue}break}case 5:{f.kind==="number"&&(i.setFullmoveNumber(f.value),r++,a());continue}}throw new x(`Unhandled token: ${f.kind}, cursor ${r}, state: ${Pa[n]}`)}return e},Lp=t=>{let e=0;const r=[],n=(o,a)=>{r.push(a),e+=o},i=o=>{let a="",s=e;for(;;){const f=t[s];if(s>=t.length||o(f)){s--;break}a+=f,s++}return a};for(;e<t.length;){const o=t[e];if(o===">"){n(1,{kind:"allegiance"});continue}if(o==="/"){n(1,{kind:"separator"});continue}if(/\d/gu.test(o)){const a=i(s=>!/[\d]/gu.test(s));n(a.length,{kind:"number",value:Number.parseInt(a,10)});continue}if(o===" "){n(1,{kind:"space"});continue}if(o==="-"||o==="\u2013"){n(1,{kind:"hyphen"});continue}n(1,{kind:"char",value:o})}return r},qn={sections:["positions","active-colour","castlig-rights","en-passant-targets","halfmove-clock","fullmove-number"]},Bp=(t,e=qn)=>{let r="",n=0;t.children.forEach(w=>{var O;switch(w.kind){case"piece":{n>=8&&(r+="/",n=0);const E=$(w.value.allegiance),R=(O=w.value.piece)!=null?O:"p";r+=E==="white"?R.toUpperCase():R.toLowerCase(),(w.value.allegiance===we.DarkGrey||w.value.allegiance===we.LightGrey)&&(r+=">"),n++;break}case"skip":{n>=8&&(r+="/",n=0),r+=w.value,n+=w.value;break}}});const i=t.children.find(w=>w.kind==="active-colour");let o="";i?o=i.value==="white"?"w":"b":o="w";const a=t.children.find(w=>w.kind==="castling-rights");let s="";a?(a.value.white.includes("king")&&(s+="K"),a.value.white.includes("queen")&&(s+="Q"),a.value.black.includes("king")&&(s+="k"),a.value.black.includes("queen")&&(s+="q")):s="-";const f=t.children.find(w=>w.kind==="en-passant-targets");let u="";f?u=Tp(f.value):u="-";const c=t.children.find(w=>w.kind==="halfmove-clock");let p="0";c&&(p=String(c.value));const y=t.children.find(w=>w.kind==="fullmove-number");let m="0";return y&&(m=String(y.value)),[e.sections.includes("positions")&&r,e.sections.includes("active-colour")&&o,e.sections.includes("castlig-rights")&&s,e.sections.includes("en-passant-targets")&&u,e.sections.includes("halfmove-clock")&&p,e.sections.includes("fullmove-number")&&m].join(" ")};class Wn{constructor(){this.memory=[],this.clear()}clone(){const e=new Wn;return e.memory=[...this.memory],e.activeColour=this.activeColour,e.enPassantTarget={...this.enPassantTarget},e._castlingRights=[...this._castlingRights],e.halfmoveClock=this.halfmoveClock,e.fullmoveNumber=this.fullmoveNumber,e.moveHistory={kind:"root",children:[...this.moveHistory.children]},e}removeCastlingRights(e,r){const n=this._castlingRights.findIndex(i=>i.colour===e&&i.side===r);n!==-1&&this._castlingRights.splice(n,1)}castlingRights(e){return this._castlingRights.filter(r=>r.colour===e).map(r=>r.side)}clear(){this.activeColour="white",this.enPassantTarget=null,this._castlingRights=[],this.halfmoveClock=0,this.fullmoveNumber=0,this.moveHistory={kind:"root",children:[]},this.memory=Array.from({length:64}).fill(null)}dump(){const e=this.getSquares(),r=Array.from({length:8}).map(()=>Array.from({length:8}).map(()=>"."));let n="";e.filter(Boolean).forEach(i=>{var o,a,s,f;r[i.rank-1][i.file-1]=$(i.allegiance)==="white"?(a=(o=i.piece)==null?void 0:o.toUpperCase())!=null?a:"P":(f=(s=i.piece)==null?void 0:s.toLowerCase())!=null?f:"p"});for(let i=7;i>=0;i--)n+=`${i+1} `,n+=r[i].map(o=>o).join(" "),n+=`
`;return n+=`  ${r[0].map((i,o)=>cr(o+1)).join(" ")}`,n}getSquares(){return this.memory.map((e,r)=>e?{...e,...Np(r)}:null)}getSquare(e){if(!e)throw new x.VError("Attempted to get square with no coordinates");return this.memory[Yi(e)]}setSquare(e,r){this.memory[Yi(e)]=r}toAFEN(e=qn){const r={kind:"ast",children:[]};let n=0;if(e.sections.includes("positions")){for(let i=0;i<this.memory.length;i++)this.memory[i]?(n&&(r.children.push({kind:"skip",value:n}),n=0),r.children.push({kind:"piece",value:this.memory[i]})):n++,(i+1)%8===0&&n&&(r.children.push({kind:"skip",value:n}),n=0);n&&r.children.push({kind:"skip",value:n})}if(e.sections.includes("active-colour")&&r.children.push({kind:"active-colour",value:this.activeColour}),e.sections.includes("castlig-rights")){const i={kind:"castling-rights",value:{black:[],white:[]}},o=this.castlingRights("white"),a=this.castlingRights("black");o.includes("king")&&i.value.white.push("king"),o.includes("queen")&&i.value.white.push("queen"),a.includes("king")&&i.value.black.push("king"),a.includes("queen")&&i.value.black.push("queen"),(i.value.white.length>0||i.value.black.length>0)&&r.children.push(i)}return e.sections.includes("en-passant-targets")&&this.enPassantTarget&&r.children.push({kind:"en-passant-targets",value:this.enPassantTarget}),e.sections.includes("halfmove-clock")&&r.children.push({kind:"halfmove-clock",value:this.halfmoveClock}),e.sections.includes("fullmove-number")&&r.children.push({kind:"fullmove-number",value:this.fullmoveNumber}),r}fromAFEN(e){var n;this.clear();let r=0;for(const i of e.children){if(i.kind==="skip"){r+=i.value;continue}if(i.kind==="piece"){this.memory[r]=i.value,r++;continue}if(i.kind==="en-passant-targets"){this.enPassantTarget=i.value;continue}if(i.kind==="castling-rights"){i.value.black.forEach(o=>{this._castlingRights.push({colour:"black",side:o})}),i.value.white.forEach(o=>{this._castlingRights.push({colour:"white",side:o})});continue}if(i.kind==="active-colour"){this.activeColour=i.value;continue}if(i.kind==="fullmove-number"){this.fullmoveNumber=i.value;continue}if(i.kind==="halfmove-clock"){this.halfmoveClock=i.value;continue}throw new x.VError(`Unhandled node while importing AFEN: ${(n=i.kind)!=null?n:JSON.stringify(i,null,2)}`)}}}const Xi={VanillaDefault:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 0",GreyDefault:"r>n>b>q>kb>n>r>/p>p>p>p>p>p>p>p>/8/8/8/8/P>P>P>P>P>P>P>P>/R>N>B>Q>KB>N>R> w KQkq - 0 0"},we={Black:0,DarkGrey:1,LightGrey:2,White:3},Fp=["B","N","Q","R"];class tr{constructor(e,r){this.initialAfen=e,this.initialMoveHistory=r,this.memory=new Wn,e&&this.importAFEN(e),r&&this.importMoveHistory(r)}clone(){const e=new tr;return e.memory=this.memory.clone(),e}reset(){this.memory.clear(),this.initialAfen&&this.importAFEN(this.initialAfen),this.initialMoveHistory&&this.importMoveHistory(this.initialMoveHistory)}dump(){return this.memory.dump()}importAFEN(e){this.memory.fromAFEN(Dp(Lp(e)))}importMoveHistory(e){const r=Cp(Mp(e)),n=new tr(Xi.VanillaDefault);r.children.forEach(i=>{const o=n.findMoveIndex(i);if(o===-1)return;const a=n.executeMoveIndex(o);this.memory.moveHistory.children.push(a)})}toAFEN(e=qn){return Bp(this.memory.toAFEN(e))}getSquares(){return this.memory.getSquares()}get enPassantTarget(){return this.memory.enPassantTarget}get activeColour(){return this.memory.activeColour}get halfmoveClock(){return this.memory.halfmoveClock}get fullmoveNumber(){return this.memory.fullmoveNumber}get castlingRights(){return{black:this.memory.castlingRights("black"),white:this.memory.castlingRights("white")}}getMoveHistory(){return Ip(this.memory.moveHistory)}getMoveHistoryAst(){return this.memory.moveHistory}getPositionHistory(){const e=this.memory.moveHistory.children,r=new Map,n=new tr;n.importAFEN(Xi.VanillaDefault);for(const i of e){n.executeNode(i);const o=n.toAFEN({sections:["positions"]}),a=r.get(o);a?r.set(o,a+1):r.set(o,1)}return r}executeAllegianceMoveNode(e){this.memory.setSquare(e.node.to,{allegiance:e.fromSide==="white"?e.to.allegiance+1:e.to.allegiance-1,piece:e.to.piece})}executeCaptureMoveNode(e){this.memory.setSquare(e.node.to,e.from),this.memory.setSquare(e.node.from,null)}executeCastleMoveNode(e){const r=e.node.from,n=e.node.to,i=e.from;if(e.to)throw new x(`Castling cannot cause a capture on ${JSON.stringify(e.node.to)}`);this.memory.setSquare(n,i),this.memory.setSquare(r,null);const a=e.fromSide==="white"?1:8,s=e.node.side==="king"?{file:8,rank:a}:{file:1,rank:a},f=e.node.side==="king"?{file:6,rank:a}:{file:4,rank:a};this.memory.setSquare(f,this.memory.getSquare(s)),this.memory.setSquare(s,null)}executeEnPassantMoveNode(e){this.memory.setSquare({rank:e.fromSide==="white"?e.node.to.rank-1:e.node.to.rank+1,file:e.node.to.file},null),this.memory.setSquare(e.node.to,e.from),this.memory.setSquare(e.node.from,null)}executePromotionMoveNode(e){this.memory.setSquare(e.node.to,{allegiance:e.from.allegiance,piece:e.node.promotionTo}),this.memory.setSquare(e.node.from,null)}executeDefaultMoveNode(e){this.memory.setSquare(e.node.from,null),this.memory.setSquare(e.node.to,e.from),e.node.piece===null&&Math.abs(e.node.from.rank-e.node.to.rank)===2&&(this.memory.enPassantTarget={file:e.node.from.file,rank:e.fromSide==="white"?e.node.from.rank+1:e.node.from.rank-1})}executeMoveNode(e){if(!e.from.file)throw new x(`Cannot execute node without "from.file": ${JSON.stringify(e,null,2)}`);const r=this.memory.getSquare(e.from),n=this.memory.getSquare(e.to);if(!r)throw new x(`There is no piece on file ${e.from.file} rank ${e.from.rank}`);r.piece==="K"&&(this.memory.removeCastlingRights(this.activeColour,"king"),this.memory.removeCastlingRights(this.activeColour,"queen")),r.piece==="R"&&e.from.file===8&&this.memory.removeCastlingRights(this.activeColour,"king"),r.piece==="R"&&e.from.file===1&&this.memory.removeCastlingRights(this.activeColour,"queen"),this.memory.enPassantTarget=null;const i=$(r.allegiance),o=n?$(n.allegiance):null;switch(e.type){case"allegiance":this.executeAllegianceMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"capture":this.executeCaptureMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"castle":this.executeCastleMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"en-passant":this.executeEnPassantMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"promotion":this.executePromotionMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;default:this.executeDefaultMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break}switch(e.type){case"capture":case"en-passant":{this.memory.halfmoveClock=0;break}case null:{e.piece===null?this.memory.halfmoveClock=0:this.memory.halfmoveClock++;break}default:{this.memory.halfmoveClock++;break}}this.memory.activeColour==="black"&&this.memory.fullmoveNumber++,this.memory.activeColour=this.memory.activeColour==="white"?"black":"white"}executeNode(e){switch(e.kind){case"move":{this.executeMoveNode(e);break}default:return}this.memory.moveHistory.children.push(e)}executeMoveIndex(e){if(e<0)throw new x(`Move index must be positive, got ${e}`);const n=this.getValidMoves().at(e);if(!n)throw new x(`Move with index ${e} does not exist`);return this.executeNode(n),n}getSquare(e){return this.memory.getSquare(e)}findMoveIndex(e){const r=this.getValidMoves();let n=r;return e.kind==="draw-offer"&&(n=n.filter(i=>i.kind==="draw-offer")),e.kind==="game-over"&&(n=n.filter(i=>i.kind==="game-over"&&i.outcome===e.outcome)),e.kind==="move"&&(e.to&&Object.keys(e.to).length===2&&(n=n.filter(i=>i.kind==="move"&&G(i.to,e.to))),e.from&&Object.keys(e.from).length===2&&(n=n.filter(i=>i.kind==="move"&&G(i.from,e.from))),e.type&&(n=n.filter(i=>"type"in i&&i.type===e.type)),e.piece||e.piece===null?n=n.filter(i=>i.kind==="move"&&i.piece===e.piece):n.length>1&&!e.piece&&(n=n.filter(i=>i.kind==="move"&&i.piece===null)),e.type==="promotion"&&(n=n.filter(i=>"promotionTo"in i&&i.promotionTo===e.promotionTo&&G(i.to,e.to)&&G(i.from,e.from)))),n.length===1?r.indexOf(n[0]):-1}getCoordsRelative(e,r){const n={file:e.file+r.x,rank:e.rank+r.y};return n.file>8||n.file<=0||n.rank>8||n.rank<=0?null:n}traceCaptureSteps(e,r){const n=this.memory.getSquare(e);if(!n)return[];const i=[],o=new v(Math.sign(r.x),Math.sign(r.y));let a=e;for(;a=this.getCoordsRelative(a,o),!!a;){const s=this.memory.getSquare(a);if(!s){i.push({...a});continue}if($(s.allegiance)===$(n.allegiance))break;if($(s.allegiance)!==$(n.allegiance)){i.push({...a});break}i.push({...a})}return i}getAttackedCoordsBySide(e){const r=this.memory.getSquares().filter(i=>i&&$(i.allegiance)===e),n=[];return r.forEach(i=>{n.push(...this.getAttackedCoordsByCoords(i))}),n}getAttackedCoordsByCoords(e){const r=[],n=this.memory.getSquare(e);if(!n)return r;const i=$(n.allegiance);if(n.piece===null){const o=this.getCoordsRelative(e,new v(i==="white"?-1:1,i==="white"?1:-1)),a=this.getCoordsRelative(e,new v(i==="white"?1:-1,i==="white"?1:-1));return[o,a]}return n.piece==="R"?[...this.traceCaptureSteps(e,new v(1,0)),...this.traceCaptureSteps(e,new v(-1,0)),...this.traceCaptureSteps(e,new v(0,1)),...this.traceCaptureSteps(e,new v(0,-1))].filter(Boolean):n.piece==="N"?[this.getCoordsRelative(e,new v(1,2)),this.getCoordsRelative(e,new v(2,1)),this.getCoordsRelative(e,new v(2,-1)),this.getCoordsRelative(e,new v(1,-2)),this.getCoordsRelative(e,new v(-1,-2)),this.getCoordsRelative(e,new v(-2,-1)),this.getCoordsRelative(e,new v(-2,1)),this.getCoordsRelative(e,new v(-1,2))].filter(Boolean):n.piece==="B"?[...this.traceCaptureSteps(e,new v(1,1)),...this.traceCaptureSteps(e,new v(1,-1)),...this.traceCaptureSteps(e,new v(-1,-1)),...this.traceCaptureSteps(e,new v(-1,1))].filter(Boolean):n.piece==="Q"?[...this.traceCaptureSteps(e,new v(1,0)),...this.traceCaptureSteps(e,new v(-1,0)),...this.traceCaptureSteps(e,new v(0,1)),...this.traceCaptureSteps(e,new v(0,-1)),...this.traceCaptureSteps(e,new v(1,1)),...this.traceCaptureSteps(e,new v(1,-1)),...this.traceCaptureSteps(e,new v(-1,-1)),...this.traceCaptureSteps(e,new v(-1,1))].filter(Boolean):n.piece==="K"?[this.getCoordsRelative(e,new v(0,1)),this.getCoordsRelative(e,new v(1,1)),this.getCoordsRelative(e,new v(1,0)),this.getCoordsRelative(e,new v(1,-1)),this.getCoordsRelative(e,new v(0,-1)),this.getCoordsRelative(e,new v(-1,-1)),this.getCoordsRelative(e,new v(-1,0)),this.getCoordsRelative(e,new v(-1,1))].filter(Boolean):r}getPossibleMoves(){const e=[],r=this.memory.getSquares(),n=this.getAttackedCoordsBySide(this.activeColour==="white"?"black":"white");return this.memory.moveHistory.children.some(o=>o.kind==="game-over")?[]:(r.forEach(o=>{if(!o)return;const a=$(o.allegiance);if(o.piece===null){const s=this.getCoordsRelative(o,new v(0,a==="white"?1:-1)),f=this.getCoordsRelative(o,new v(a==="white"?-1:1,a==="white"?1:-1)),u=this.getCoordsRelative(o,new v(a==="white"?1:-1,a==="white"?1:-1)),c=p=>Fp.map(y=>({kind:"move",type:"promotion",from:o,to:p,piece:this.memory.getSquare(o).piece,promotionTo:y}));if(this.memory.enPassantTarget&&f&&G(this.memory.enPassantTarget,f)&&!He(f,a)&&e.push({kind:"move",type:"en-passant",from:o,to:this.memory.enPassantTarget,piece:this.memory.getSquare(o).piece}),this.memory.enPassantTarget&&u&&G(this.memory.enPassantTarget,u)&&!He(u,a)&&e.push({kind:"move",type:"en-passant",from:o,to:this.memory.enPassantTarget,piece:this.memory.getSquare(o).piece}),s&&!this.memory.getSquare(s)&&!He(s,a)&&e.push({kind:"move",type:null,piece:this.memory.getSquare(o).piece,from:o,to:s}),f){const p=this.memory.getSquare(f);p&&$(p.allegiance)!==a&&(He(f,a)?e.push(...c(f)):e.push({kind:"move",type:"capture",from:o,to:f,piece:this.memory.getSquare(o).piece},{kind:"move",type:"allegiance",from:o,to:f,piece:this.memory.getSquare(o).piece}))}if(u){const p=this.memory.getSquare(u);p&&$(p.allegiance)!==a&&(He(u,a)?e.push(...c(u)):e.push({kind:"move",type:"capture",from:o,to:u,piece:this.memory.getSquare(o).piece},{kind:"move",type:"allegiance",from:o,to:u,piece:this.memory.getSquare(o).piece}))}if(o.rank===2&&a==="white"||o.rank===7&&a==="black"){const p=this.getCoordsRelative(o,new v(0,a==="white"?2:-2));!this.memory.getSquare(s)&&!this.memory.getSquare(p)&&e.push({kind:"move",type:null,from:o,to:p,piece:this.memory.getSquare(o).piece})}!this.getSquare(s)&&He(s,a)&&e.push(...c(s))}if(o.piece==="R"){const s=[...this.traceCaptureSteps(o,new v(1,0)),...this.traceCaptureSteps(o,new v(-1,0)),...this.traceCaptureSteps(o,new v(0,1)),...this.traceCaptureSteps(o,new v(0,-1))];e.push(...s.map(f=>{const u=this.memory.getSquare(f);return{kind:"move",type:u?"capture":null,from:o,to:f,piece:o.piece}}),...s.map(f=>this.memory.getSquare(f)?{kind:"move",type:"allegiance",from:o,to:f,piece:o.piece}:null).filter(Boolean))}if(o.piece==="N"&&[this.getCoordsRelative(o,new v(1,2)),this.getCoordsRelative(o,new v(2,1)),this.getCoordsRelative(o,new v(2,-1)),this.getCoordsRelative(o,new v(1,-2)),this.getCoordsRelative(o,new v(-1,-2)),this.getCoordsRelative(o,new v(-2,-1)),this.getCoordsRelative(o,new v(-2,1)),this.getCoordsRelative(o,new v(-1,2))].filter(Boolean).forEach(f=>{const u=this.memory.getSquare(f);u&&$(u.allegiance)===a||(e.push({kind:"move",type:u?"capture":null,from:o,to:f,piece:o.piece}),u&&e.push({kind:"move",type:"allegiance",from:o,to:f,piece:o.piece}))}),o.piece==="B"){const s=[...this.traceCaptureSteps(o,new v(1,1)),...this.traceCaptureSteps(o,new v(1,-1)),...this.traceCaptureSteps(o,new v(-1,-1)),...this.traceCaptureSteps(o,new v(-1,1))];e.push(...s.map(f=>{const u=this.memory.getSquare(f);return{kind:"move",type:u?"capture":null,from:o,to:f,piece:o.piece}}),...s.map(f=>this.memory.getSquare(f)?{kind:"move",type:"allegiance",from:o,to:f,piece:o.piece}:null).filter(Boolean))}if(o.piece==="Q"){const s=[...this.traceCaptureSteps(o,new v(1,0)),...this.traceCaptureSteps(o,new v(-1,0)),...this.traceCaptureSteps(o,new v(0,1)),...this.traceCaptureSteps(o,new v(0,-1)),...this.traceCaptureSteps(o,new v(1,1)),...this.traceCaptureSteps(o,new v(1,-1)),...this.traceCaptureSteps(o,new v(-1,-1)),...this.traceCaptureSteps(o,new v(-1,1))];e.push(...s.map(f=>{const u=this.memory.getSquare(f);return{kind:"move",type:u?"capture":null,from:o,to:f,piece:o.piece}}),...s.map(f=>this.memory.getSquare(f)?{kind:"move",type:"allegiance",from:o,to:f,piece:o.piece}:null).filter(Boolean))}if(o.piece==="K"){[this.getCoordsRelative(o,new v(0,1)),this.getCoordsRelative(o,new v(1,1)),this.getCoordsRelative(o,new v(1,0)),this.getCoordsRelative(o,new v(1,-1)),this.getCoordsRelative(o,new v(0,-1)),this.getCoordsRelative(o,new v(-1,-1)),this.getCoordsRelative(o,new v(-1,0)),this.getCoordsRelative(o,new v(-1,1))].filter(Boolean).forEach(p=>{const y=this.memory.getSquare(p);y&&$(y.allegiance)===a||(e.push({kind:"move",type:y?"capture":null,from:o,to:p,piece:o.piece}),y&&e.push({kind:"move",type:"allegiance",from:o,to:p,piece:o.piece}))});const f=this.memory.castlingRights("white"),u=n.some(p=>G(o,p));if(this.activeColour==="white"&&f.length>0){const p=this.memory.getSquare({file:1,rank:1}),y=this.memory.getSquare({file:2,rank:1}),m=this.memory.getSquare({file:3,rank:1}),b=this.memory.getSquare({file:4,rank:1}),w=this.memory.getSquare({file:6,rank:1}),O=this.memory.getSquare({file:7,rank:1}),E=this.memory.getSquare({file:8,rank:1}),R=n.some(k=>G(k,{file:2,rank:1})),q=n.some(k=>G(k,{file:3,rank:1})),ie=n.some(k=>G(k,{file:4,rank:1})),X=n.some(k=>G(k,{file:6,rank:1})),W=n.some(k=>G(k,{file:7,rank:1}));f.forEach(k=>{k==="king"&&!u&&!w&&!O&&E&&E.piece==="R"&&$(E.allegiance)==="white"&&!X&&!W&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new v(2,0)),piece:this.memory.getSquare(o).piece,side:"king"}),k==="queen"&&!u&&!y&&!m&&!b&&p&&p.piece==="R"&&$(p.allegiance)==="white"&&!R&&!q&&!ie&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new v(-2,0)),piece:this.memory.getSquare(o).piece,side:"queen"})})}const c=this.memory.castlingRights("black");if(this.activeColour==="black"&&c.length>0){const p=this.memory.getSquare({file:1,rank:8}),y=this.memory.getSquare({file:2,rank:8}),m=this.memory.getSquare({file:3,rank:8}),b=this.memory.getSquare({file:4,rank:8}),w=this.memory.getSquare({file:6,rank:8}),O=this.memory.getSquare({file:7,rank:8}),E=this.memory.getSquare({file:8,rank:8}),R=n.some(k=>G(k,{file:2,rank:8})),q=n.some(k=>G(k,{file:3,rank:8})),ie=n.some(k=>G(k,{file:4,rank:8})),X=n.some(k=>G(k,{file:6,rank:8})),W=n.some(k=>G(k,{file:7,rank:8}));c.forEach(k=>{k==="king"&&!u&&!w&&!O&&E&&E.piece==="R"&&$(E.allegiance)==="black"&&!X&&!W&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new v(2,0)),piece:this.memory.getSquare(o).piece,side:"king"}),k==="queen"&&!u&&!y&&!m&&!b&&p&&p.piece==="R"&&$(p.allegiance)==="black"&&!R&&!q&&!ie&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new v(-2,0)),piece:this.memory.getSquare(o).piece,side:"queen"})})}}}),e)}getGameOverNode(e,r){const n=this.getCheckMovesFromList(e),i=this.getSquares().filter(Boolean),o=this.activeColour,a=this.activeColour==="white"?"black":"white",s=(b,w)=>i.reduce((O,E)=>!w&&w!==null&&$(E.allegiance)===b||E.piece===w&&$(E.allegiance)===b?O+1:O,0),f=n.some(b=>{const w=this.memory.getSquare(b.to);return $(w.allegiance)===o});if(f&&r.length===0)return{kind:"game-over",outcome:a,reason:"Checkmate"};if(!f&&r.length===0)return{kind:"game-over",outcome:"draw",reason:"Stalemate"};const u=s(o),c=s(a);if(u===1&&c===1){const b=i.find(O=>$(O.allegiance)===a);if(i.find(O=>$(O.allegiance)===o).piece==="K"&&b.piece==="K")return{kind:"game-over",outcome:"draw",reason:"Insufficient material (king vs king)"}}if(u<=2&&c<=2){const b=i.find(R=>$(R.allegiance)===a&&R.piece==="K"),w=i.find(R=>$(R.allegiance)===a&&R.piece!=="K"),O=i.find(R=>$(R.allegiance)===o&&R.piece==="K"),E=i.find(R=>$(R.allegiance)===o&&R.piece!=="K");if(O&&b&&(!E||E.piece==="N"||E.piece==="B")&&(!w||w.piece==="N"||w.piece==="B"))return{kind:"game-over",outcome:"draw",reason:"Insufficient material (king + minor vs king + minor)"}}if(this.halfmoveClock>=100)return{kind:"game-over",outcome:"draw",reason:"50 move-rule"};const p=this.getPositionHistory(),y=this.toAFEN({sections:["positions"]});if((p.get(y)||0)>=3)return{kind:"game-over",outcome:"draw",reason:"Repetition"}}getCheckMoves(){const e=this.getPossibleMoves();return this.getCheckMovesFromList(e)}getCheckMovesFromList(e){return e.filter(r=>{if(r.kind!=="move"||!r.to)return;const n=this.memory.getSquare(r.to);return n&&n.piece==="K"})}getValidMovesFromList(e,r){const n=e.filter(o=>{if(o.kind!=="move")return!0;if(r.from&&!G(r.from,o.from))return!1;const a=this.memory.getSquare(o.from);if($(a.allegiance)!==this.activeColour)return!1;const s=this.clone();s.executeNode(o);const f=s.getPossibleMoves();return s.getCheckMovesFromList(f).every(c=>{const p=s.memory.getSquare(c.to);return $(p.allegiance)!==this.activeColour})}),i=this.getGameOverNode(e,n);return i?[i]:n}getValidMoves(e){const r=this.getPossibleMoves();return this.getValidMovesFromList(r,{from:e,side:this.activeColour})}}export{Xi as A,tr as B,we as P,Ip as a,$ as b,G as c,cr as f,He as i,Cp as p,Mp as t,$p as w};
//# sourceMappingURL=board.83a5ff1c.js.map
