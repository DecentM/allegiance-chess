import{Q as n}from"./chess-piece.4b496144.js";import{b as y,a as l}from"./QList.9ea54519.js";import{A as g,K as _,ar as x,r as b,a as k,k as C,w as H,B as i,C as m,D as o,G as t,N as a,H as v,I,u as N,P as w}from"./index.fe3eab49.js";import{u as O}from"./use-quasar.99f72ebc.js";import{u as q,_ as A,C as Q,G as B,a as M}from"./board-worker.f38206e2.js";import{H as c}from"./hex.35b62a4c.js";import"./use-dark.5e6dfafa.js";import"./QCard.c16dec65.js";import"./QScrollObserver.5bde1185.js";import"./focus-manager.202af5b7.js";import"./QSeparator.d0546d37.js";import"./notify.f41eb723.js";import"./exports.305f64b8.js";const j=g({__name:"pen-pal-game",setup(S){const u=_(),p=x(),d=b([]),e=q({autoplayFor:d}),s=k(()=>{try{const r=Array.isArray(u.params.state)?u.params.state[0]:u.params.state;return JSON.parse(c.hexToUtf8(r))}catch{return{afen:"",history:""}}});C(()=>{e.reset(),s.value.afen&&e.importAfen(s.value.afen),s.value.history&&e.importMoveHistory(s.value.history)});const f=r=>{e.executeMoveIndex(r)};H(e.loading,r=>{r||p.push({path:`/play/pen-pal/${c.utf8ToHex(JSON.stringify({afen:e.afen.value,history:e.moveHistory.value}))}`})});const h=O();return(r,G)=>(i(),m(A,null,{board:o(()=>[t(Q,{onExecuteNodeIndex:f,board:a(e),perspective:a(e).activeColour.value,"active-colour":a(e).activeColour.value,"check-moves":a(e).checkMoves.value,"en-passant-target":a(e).enPassantTarget.value,"move-history-ast":a(e).moveHistoryAst.value,squares:a(e).squares.value,"valid-moves":a(e).validMoves.value,"play-as":["white","black"],"rounded-borders":a(h).screen.gt.xs,loading:a(e).loading.value},null,8,["board","perspective","active-colour","check-moves","en-passant-target","move-history-ast","squares","valid-moves","rounded-borders","loading"])]),sidebar:o(()=>[t(B,{"move-history":a(e).moveHistoryAst.value,"active-colour":a(e).activeColour.value,"own-colour":a(e).activeColour.value,afen:a(e).afen.value,"game-over":a(e).gameOver.value},{default:o(()=>[t(y,null,{default:o(()=>[t(l,{class:"q-mt-sm q-mb-sm"},{default:o(()=>[t(n,null,{default:o(()=>[v("Opening")]),_:1}),t(n,{caption:"",lines:"2"},{default:o(()=>[v(I(a(e).opening.value||"unknown"),1)]),_:1})]),_:1}),t(l,{side:""},{default:o(()=>[t(N,{name:"book"})]),_:1})]),_:1})]),_:1},8,["move-history","active-colour","own-colour","afen","game-over"])]),default:o(()=>[a(e).gameOver.value?(i(),m(M,{key:0,node:a(e).gameOver.value},null,8,["node"])):w("",!0)]),_:1}))}});export{j as default};
//# sourceMappingURL=pen-pal-game.54fef0c2.js.map
