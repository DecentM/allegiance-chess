import{Q as h}from"./selection.31f4f0c7.js";import{B as _,Q as b}from"./chess-piece.0b1aefb5.js";import{Q as c,a as i}from"./QCard.5d378843.js";import{_ as w,a as N}from"./afen-info.2ba03f15.js";import{u as x}from"./use-quasar.77f7fb29.js";import{M as Q,o as B,a as d,r as E,N as g,O as A,P as t,S as a,ab as F,U as k}from"./index.3c0fead1.js";import"./use-dark.ff948b39.js";import"./QList.e44e87f7.js";import"./focus-manager.202af5b7.js";const C={class:"col-lg col-md-12 full-width"},$=Q({__name:"online-game",props:{connection:{}},setup(u){const o=u;B(()=>{o.connection.disconnect()});const n=d(()=>{const e=new _;return e.importAFEN(o.connection.boardAFEN.value),e}),m=e=>{const s=n.value.findMoveIndex(e);s!==-1&&(n.value.executeMoveIndex(s),o.connection.sendMessage({type:"afen-update",value:n.value.toAFEN()}))},r=E(800),v=x(),f=e=>{if(v.screen.gt.md){r.value=e.width-e.width/8-200;return}r.value=e.width-e.width/8},p=d(()=>o.connection.serverSide.value?o.connection.mode.value==="server"?o.connection.serverSide.value:o.connection.serverSide.value==="white"?"black":"white":null);return(e,s)=>(g(),A(c,{flat:""},{default:t(()=>[a(i,{class:"row"},{default:t(()=>{var l;return[a(h,{onResize:f}),a(w,{"model-value":e.connection.boardAFEN.value,width:r.value,onExecuteNode:m,board:n.value,perspective:(l=p.value)!=null?l:"white","play-as":["white","black"]},null,8,["model-value","width","board","perspective"]),F("div",C,[a(c,{flat:"",bordered:"",class:"full-height"},{default:t(()=>[a(i,{class:"bg-primary q-mb-md"},{default:t(()=>[a(b,null,{default:t(()=>[k("Board information")]),_:1})]),_:1}),a(N,{"model-value":e.connection.boardAFEN.value},null,8,["model-value"])]),_:1})])]}),_:1})]),_:1}))}});export{$ as default};
