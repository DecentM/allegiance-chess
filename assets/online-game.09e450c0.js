import{Q as h,a as l}from"./QCard.f4e8267a.js";import{B as w}from"./board.64d623de.js";import{u as b}from"./use-quasar.66729495.js";import{_ as g,G as x}from"./game-sidebar.04882da5.js";import{E as _,o as y,a as u,F as z,G as E,I as a,L as s,aj as N,T as v,S as c}from"./index.8d9c83aa.js";import"./use-dark.20efcb0d.js";import"./QList.c12061ea.js";import"./QScrollObserver.fbcc7a2d.js";import"./focus-manager.202af5b7.js";import"./chess-piece.4f2e33e2.js";const H=_({__name:"online-game",props:{connection:{}},setup(p){const n=p;y(()=>{n.connection.disconnect()});const r=u(()=>{const o=new w;return o.importAFEN(n.connection.boardAFEN.value),o.importMoveHistory(n.connection.moveHistory.value),o}),f=o=>{const i=r.value.findMoveIndex(o);i!==-1&&n.connection.sendMessage({type:"execute-node-index",value:i})},e=b(),d=u(()=>{let o=e.screen.width;return e.screen.gt.xs&&(o=e.screen.width-65),e.screen.gt.sm&&(o=e.screen.sizes.sm),e.screen.gt.md&&(o=e.screen.sizes.md-265),e.screen.gt.lg&&(o=e.screen.sizes.lg-265),Math.min(o,e.screen.height)}),m=u(()=>n.connection.serverSide.value?n.connection.mode.value==="server"?n.connection.serverSide.value:n.connection.serverSide.value==="white"?"black":"white":null);return(o,i)=>(z(),E(h,{flat:"",class:"full-width"},{default:a(()=>[s(l,{horizontal:c(e).screen.gt.sm,class:v({"q-px-none":c(e).screen.lt.sm})},{default:a(()=>[s(l,{style:N({width:`${d.value}px`}),class:v({"q-px-none":c(e).screen.lt.sm})},{default:a(()=>{var t;return[s(g,{"model-value":o.connection.boardAFEN.value,width:d.value,onExecuteNode:f,board:r.value,perspective:(t=m.value)!=null?t:"white","play-as":["white","black"],"rounded-borders":c(e).screen.gt.xs},null,8,["model-value","width","board","perspective","rounded-borders"])]}),_:1},8,["style","class"]),s(l,{class:"q-mb-md full-width"},{default:a(()=>{var t;return[s(x,{"move-history":r.value.getMoveHistoryAst(),"active-colour":r.value.activeColour,"own-colour":(t=m.value)!=null?t:"white",afen:o.connection.boardAFEN.value},null,8,["move-history","active-colour","own-colour","afen"])]}),_:1})]),_:1},8,["horizontal","class"])]),_:1}))}});export{H as default};
//# sourceMappingURL=online-game.09e450c0.js.map
