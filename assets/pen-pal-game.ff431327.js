import{Q as y,a as c}from"./QCard.c3ed8815.js";import{E as x,P as _,ak as g,a as s,F as w,G as A,I as i,L as o,aj as H,S as b}from"./index.b26b4eb7.js";import{B as z}from"./board.491a1fbe.js";import{_ as C,G as N}from"./game-sidebar.b8e83da4.js";import{H as n}from"./hex.4bef00f9.js";import{F as E,u as F}from"./board-audio.22cbfa7b.js";import{u as M}from"./use-quasar.ae99f3d9.js";import"./use-dark.99ca0532.js";import"./QList.8f852660.js";import"./QScrollObserver.ce19f802.js";import"./focus-manager.202af5b7.js";import"./chess-piece.bcee3528.js";const p=200,j=x({__name:"pen-pal-game",setup(B){const r=_(),d=g(),f=s(()=>{const e=Array.isArray(r.params.state)?r.params.state[0]:r.params.state;return e?n.hexToUtf8(e):E.VanillaDefault}),v=s(()=>{const e=Array.isArray(r.params.history)?r.params.history[0]:r.params.history;return e?n.hexToUtf8(e):""}),t=s(()=>{const e=new z;return e.importAFEN(f.value),e.importMoveHistory(v.value),e}),u=F(),h=e=>{const l=t.value.findMoveIndex(e);l!==-1&&(t.value.executeMoveIndex(l),u==null||u.playNode(e),d.push({path:`/play/pen-pal/${n.utf8ToHex(t.value.toAFEN())}/${n.utf8ToHex(t.value.getMoveHistory())}`}))},a=M(),m=s(()=>{let e=a.screen.width;return a.screen.gt.sm&&(e=a.screen.sizes.sm),a.screen.gt.md&&(e=a.screen.sizes.md-p),a.screen.gt.lg&&(e=a.screen.sizes.lg-p),Math.min(e-75,a.screen.height-75)});return(e,l)=>(w(),A(y,{flat:"",class:"full-width"},{default:i(()=>[o(c,{horizontal:b(a).screen.gt.sm},{default:i(()=>[o(c,{style:H({width:`${m.value}px`})},{default:i(()=>[o(C,{onExecuteNode:h,board:t.value,perspective:t.value.activeColour,"play-as":["white","black"],width:m.value},null,8,["board","perspective","width"])]),_:1},8,["style"]),o(c,{class:"q-mb-md full-width"},{default:i(()=>[o(N,{"move-history":t.value.getMoveHistoryAst(),"active-colour":t.value.activeColour,"own-colour":t.value.activeColour,afen:t.value.toAFEN()},null,8,["move-history","active-colour","own-colour","afen"])]),_:1})]),_:1},8,["horizontal"])]),_:1}))}});export{j as default};
//# sourceMappingURL=pen-pal-game.ff431327.js.map
