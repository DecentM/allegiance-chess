import{Q as g,a as l}from"./QCard.8c23c8bb.js";import{B as b}from"./board.6f1b443f.js";import{u as y}from"./use-quasar.0cd60ac6.js";import{_ as x,G as N,a as _}from"./game-over-dialog.5d178565.js";import{A as z,o as C,a as u,B as v,C as p,D as a,G as r,aj as A,N as f,M as c,O as B}from"./index.7de82e62.js";import"./use-dark.66249588.js";import"./QList.3c032228.js";import"./QScrollObserver.22c24198.js";import"./focus-manager.202af5b7.js";import"./chess-piece.7f2f0ece.js";const D=z({__name:"online-game",props:{connection:{}},setup(h){const n=h;C(()=>{n.connection.disconnect()});const s=u(()=>{const e=new b;return e.importAFEN(n.connection.boardAFEN.value),e.importMoveHistory(n.connection.moveHistory.value),e}),w=e=>{const i=s.value.findMoveIndex(e);i!==-1&&n.connection.sendMessage({type:"execute-node-index",value:i})},o=y(),d=u(()=>{let e=o.screen.width;return o.screen.gt.xs&&(e=o.screen.width-65),o.screen.gt.sm&&(e=o.screen.sizes.sm),o.screen.gt.md&&(e=o.screen.sizes.md-265),o.screen.gt.lg&&(e=o.screen.sizes.lg-265),Math.min(e,o.screen.height)}),m=u(()=>n.connection.serverSide.value?n.connection.mode.value==="server"?n.connection.serverSide.value:n.connection.serverSide.value==="white"?"black":"white":null);return(e,i)=>(v(),p(g,{flat:"",class:"full-width"},{default:a(()=>[r(l,{horizontal:c(o).screen.gt.sm,class:f({"q-px-none":c(o).screen.lt.sm})},{default:a(()=>[r(l,{style:A({width:`${d.value}px`}),class:f({"q-px-none":c(o).screen.lt.sm})},{default:a(()=>{var t;return[r(x,{"model-value":e.connection.boardAFEN.value,width:d.value,onExecuteNode:w,board:s.value,perspective:(t=m.value)!=null?t:"white","play-as":["white","black"],"rounded-borders":c(o).screen.gt.xs},null,8,["model-value","width","board","perspective","rounded-borders"])]}),_:1},8,["style","class"]),r(l,{class:"q-mb-md full-width"},{default:a(()=>{var t;return[r(N,{"move-history":s.value.getMoveHistoryAst(),"active-colour":s.value.activeColour,"own-colour":(t=m.value)!=null?t:"white",afen:e.connection.boardAFEN.value},null,8,["move-history","active-colour","own-colour","afen"])]}),_:1})]),_:1},8,["horizontal","class"]),e.connection.gameOver.value?(v(),p(_,{key:0,node:e.connection.gameOver.value},null,8,["node"])):B("",!0)]),_:1}))}});export{D as default};
//# sourceMappingURL=online-game.213c8b9e.js.map
