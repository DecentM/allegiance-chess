import{Q as x,a as u}from"./QCard.78fa8550.js";import{u as w}from"./use-quasar.3e6ad70c.js";import{u as y,a as g,_,G as b,b as k}from"./board-worker.b8c1d317.js";import{A as C,o as q,a as M,k as S,w as z,B as d,C as m,D as l,G as s,aj as B,M as e,P as p,O}from"./index.90ee8eaf.js";import"./use-dark.665573af.js";import"./QList.f8fe278d.js";import"./QScrollObserver.43ca2596.js";import"./focus-manager.202af5b7.js";import"./chess-piece.2d3aa9e8.js";import"./QSeparator.e2862eb2.js";const $=C({__name:"online-game",props:{connection:{}},setup(f){const a=f;q(()=>{a.connection.disconnect()});const r=w(),i=y(),v=M(()=>a.connection.serverSide.value?a.connection.mode.value==="server"?a.connection.serverSide.value:a.connection.serverSide.value==="white"?"black":"white":null),o=g({autoplayFor:[]});S(()=>o.reset());const h=n=>{a.connection.sendMessage({type:"execute-node-index",value:n})};return z(a.connection.moveHistory,n=>{const c=n.at(-1);typeof c=="number"&&o.executeMoveIndex(c)}),(n,c)=>(d(),m(x,{flat:"",class:"full-width"},{default:l(()=>[s(u,{horizontal:e(r).screen.gt.sm,class:p({"q-px-none":e(r).screen.lt.sm})},{default:l(()=>[s(u,{style:B({width:`${e(i)}px`}),class:p({"q-px-none":e(r).screen.lt.sm})},{default:l(()=>{var t;return[s(_,{"model-value":e(o).afen.value,"valid-moves":e(o).validMoves.value,width:e(i),onExecuteNodeIndex:h,board:e(o),perspective:(t=v.value)!=null?t:"white","play-as":["white","black"],"rounded-borders":e(r).screen.gt.xs,"active-colour":e(o).activeColour.value,"check-moves":e(o).checkMoves.value,"en-passant-target":e(o).enPassantTarget.value,"move-history-ast":e(o).moveHistoryAst.value,squares:e(o).squares.value},null,8,["model-value","valid-moves","width","board","perspective","rounded-borders","active-colour","check-moves","en-passant-target","move-history-ast","squares"])]}),_:1},8,["style","class"]),s(u,{class:"q-mb-md full-width"},{default:l(()=>{var t;return[s(b,{"move-history":e(o).moveHistoryAst.value,"active-colour":e(o).activeColour.value,"own-colour":(t=v.value)!=null?t:"white",afen:e(o).afen.value,"game-over":e(o).gameOver.value},null,8,["move-history","active-colour","own-colour","afen","game-over"])]}),_:1})]),_:1},8,["horizontal","class"]),e(o).gameOver.value?(d(),m(k,{key:0,node:e(o).gameOver.value},null,8,["node"])):O("",!0)]),_:1}))}});export{$ as default};
//# sourceMappingURL=online-game.bc947514.js.map
