import{Q as f,a as c}from"./QCard.c3ed8815.js";import{B as h}from"./board.491a1fbe.js";import{u as w}from"./use-quasar.ae99f3d9.js";import{_ as g,G as _}from"./game-sidebar.b8e83da4.js";import{E as b,o as y,a as l,F as x,G as z,I as s,L as r,aj as E,S as N}from"./index.b26b4eb7.js";import"./use-dark.99ca0532.js";import"./QList.8f852660.js";import"./QScrollObserver.ce19f802.js";import"./focus-manager.202af5b7.js";import"./chess-piece.bcee3528.js";const m=200,q=b({__name:"online-game",props:{connection:{}},setup(v){const t=v;y(()=>{t.connection.disconnect()});const a=l(()=>{const e=new h;return e.importAFEN(t.connection.boardAFEN.value),e.importMoveHistory(t.connection.moveHistory.value),e}),p=e=>{const i=a.value.findMoveIndex(e);i!==-1&&t.connection.sendMessage({type:"execute-node-index",value:i})},o=w(),u=l(()=>{let e=o.screen.width;return o.screen.gt.sm&&(e=o.screen.sizes.sm),o.screen.gt.md&&(e=o.screen.sizes.md-m),o.screen.gt.lg&&(e=o.screen.sizes.lg-m),Math.min(e-75,o.screen.height-75)}),d=l(()=>t.connection.serverSide.value?t.connection.mode.value==="server"?t.connection.serverSide.value:t.connection.serverSide.value==="white"?"black":"white":null);return(e,i)=>(x(),z(f,{flat:"",class:"full-width"},{default:s(()=>[r(c,{horizontal:N(o).screen.gt.sm},{default:s(()=>[r(c,{style:E({width:`${u.value}px`})},{default:s(()=>{var n;return[r(g,{"model-value":e.connection.boardAFEN.value,width:u.value,onExecuteNode:p,board:a.value,perspective:(n=d.value)!=null?n:"white","play-as":["white","black"]},null,8,["model-value","width","board","perspective"])]}),_:1},8,["style"]),r(c,{class:"q-mb-md full-width"},{default:s(()=>{var n;return[r(_,{"move-history":a.value.getMoveHistoryAst(),"active-colour":a.value.activeColour,"own-colour":(n=d.value)!=null?n:"white",afen:e.connection.boardAFEN.value},null,8,["move-history","active-colour","own-colour","afen"])]}),_:1})]),_:1},8,["horizontal"])]),_:1}))}});export{q as default};
//# sourceMappingURL=online-game.015014c6.js.map
