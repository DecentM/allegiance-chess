import{Q as w,a as m}from"./QCard.8c23c8bb.js";import{A,K as C,ak as b,a as n,B as h,C as x,D as l,G as o,aj as N,N as y,M as r,O as z}from"./index.7de82e62.js";import{A as H,B as M}from"./board.6f1b443f.js";import{_ as B,G as k,a as E}from"./game-over-dialog.5d178565.js";import{H as i}from"./hex.54fc85ab.js";import{u as G}from"./use-quasar.0cd60ac6.js";import{a as q,u as Q}from"./board-audio.d9e6d0f3.js";import"./use-dark.66249588.js";import"./QList.3c032228.js";import"./QScrollObserver.22c24198.js";import"./focus-manager.202af5b7.js";import"./chess-piece.7f2f0ece.js";const J=A({__name:"pen-pal-game",setup(T){const s=C(),_=b(),p=n(()=>{const e=Array.isArray(s.params.state)?s.params.state[0]:s.params.state;return e?i.hexToUtf8(e):H.VanillaDefault}),d=n(()=>{const e=Array.isArray(s.params.history)?s.params.history[0]:s.params.history;return e?i.hexToUtf8(e):""}),t=n(()=>{const e=new M;return p.value&&e.importAFEN(p.value),d.value&&e.importMoveHistory(d.value),e}),u=q(),g=e=>{const c=t.value.findMoveIndex(e);c!==-1&&(t.value.executeMoveIndex(c),u==null||u.playNode(e),_.push({path:`/play/pen-pal/${i.utf8ToHex(t.value.toAFEN())}/${i.utf8ToHex(t.value.getMoveHistory())}`}))},{gameOver:f}=Q(t),a=G(),v=n(()=>{let e=a.screen.width;return a.screen.gt.xs&&(e=a.screen.width-65),a.screen.gt.sm&&(e=a.screen.sizes.sm),a.screen.gt.md&&(e=a.screen.sizes.md-265),a.screen.gt.lg&&(e=a.screen.sizes.lg-265),Math.min(e,a.screen.height)});return(e,c)=>(h(),x(w,{flat:"",class:"full-width"},{default:l(()=>[o(m,{horizontal:r(a).screen.gt.sm,class:y({"q-px-none":r(a).screen.lt.sm})},{default:l(()=>[o(m,{style:N({width:`${v.value}px`}),class:y({"q-px-none":r(a).screen.lt.sm})},{default:l(()=>[o(B,{onExecuteNode:g,board:t.value,perspective:t.value.activeColour,"play-as":["white","black"],width:v.value,"rounded-borders":r(a).screen.gt.xs},null,8,["board","perspective","width","rounded-borders"])]),_:1},8,["style","class"]),o(m,{class:"q-mb-md full-width"},{default:l(()=>[o(k,{"move-history":t.value.getMoveHistoryAst(),"active-colour":t.value.activeColour,"own-colour":t.value.activeColour,afen:t.value.toAFEN()},null,8,["move-history","active-colour","own-colour","afen"])]),_:1})]),_:1},8,["horizontal","class"]),r(f)?(h(),x(E,{key:0,node:r(f)},null,8,["node"])):z("",!0)]),_:1}))}});export{J as default};
//# sourceMappingURL=pen-pal-game.0ef7d665.js.map
