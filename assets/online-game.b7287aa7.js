import{Q as p,a as c}from"./QCard.426336fc.js";import{B as f}from"./board.bb55146e.js";import{_ as h,G as w}from"./game-sidebar.a994f273.js";import{u as _}from"./use-quasar.99ff1232.js";import{M as x,f as y,a as l,N as b,O as g,P as a,S as r,ae as N}from"./index.d8f19860.js";import"./use-dark.c383a348.js";import"./QList.1534be3b.js";import"./selection.c358ce69.js";import"./focus-manager.202af5b7.js";import"./chess-piece.bd0ff5fa.js";const H=x({__name:"online-game",props:{connection:{}},setup(m){const o=m;y(()=>{o.connection.disconnect()});const s=l(()=>{const t=new f;return t.importAFEN(o.connection.boardAFEN.value),t.importMoveHistory(o.connection.moveHistory.value),t}),v=t=>{const i=s.value.findMoveIndex(t);i!==-1&&o.connection.sendMessage({type:"execute-node-index",value:i})},e=_(),u=l(()=>e.screen.gt.lg?e.screen.sizes.lg:e.screen.gt.md?e.screen.sizes.md:e.screen.gt.sm?e.screen.sizes.sm:e.screen.gt.xs?e.screen.width/2:e.screen.width/3),d=l(()=>o.connection.serverSide.value?o.connection.mode.value==="server"?o.connection.serverSide.value:o.connection.serverSide.value==="white"?"black":"white":null);return(t,i)=>(b(),g(p,{flat:"",class:"full-width"},{default:a(()=>[r(c,{horizontal:""},{default:a(()=>[r(c,{style:N({width:`${u.value}px`})},{default:a(()=>{var n;return[r(h,{"model-value":t.connection.boardAFEN.value,width:u.value,onExecuteNode:v,board:s.value,perspective:(n=d.value)!=null?n:"white","play-as":["white","black"]},null,8,["model-value","width","board","perspective"])]}),_:1},8,["style"]),r(c,{class:"q-mb-md full-width"},{default:a(()=>{var n;return[r(w,{"move-history":s.value.getMoveHistoryAst(),"active-colour":s.value.activeColour,"own-colour":(n=d.value)!=null?n:"white"},null,8,["move-history","active-colour","own-colour"])]}),_:1})]),_:1})]),_:1}))}});export{H as default};
