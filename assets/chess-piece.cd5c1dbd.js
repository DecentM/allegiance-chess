import{d as A,ah as Zr,M as ft,a as st,N as te,Q as Se,ab as M,_ as je,aa as ut,ad as en,ae as tn,W as Zn,ai as ya,O as wt,a0 as _t}from"./index.d1d7854b.js";var de=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},or={exports:{}},wi={},Re={},ga={},_i=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},ru=_i,Si=function(){return ru()&&!!Symbol.toStringTag},fo=typeof Symbol!="undefined"&&Symbol,nu=_i,iu=function(){return typeof fo!="function"||typeof Symbol!="function"||typeof fo("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:nu()},uo={foo:{}},ou=Object,au=function(){return{__proto__:uo}.foo===uo.foo&&!({__proto__:null}instanceof ou)},su="Function.prototype.bind called on incompatible ",jn=Array.prototype.slice,fu=Object.prototype.toString,uu="[object Function]",lu=function(e){var r=this;if(typeof r!="function"||fu.call(r)!==uu)throw new TypeError(su+r);for(var n=jn.call(arguments,1),i,o=function(){if(this instanceof i){var y=r.apply(this,n.concat(jn.call(arguments)));return Object(y)===y?y:this}else return r.apply(e,n.concat(jn.call(arguments)))},a=Math.max(0,r.length-n.length),f=[],u=0;u<a;u++)f.push("$"+u);if(i=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i},cu=lu,Ei=Function.prototype.bind||cu,pu=Ei,hu=pu.call(Function.call,Object.prototype.hasOwnProperty),C,Lt=SyntaxError,va=Function,jt=TypeError,Pn=function(t){try{return va('"use strict"; return ('+t+").constructor;")()}catch{}},ot=Object.getOwnPropertyDescriptor;if(ot)try{ot({},"")}catch{ot=null}var Tn=function(){throw new jt},du=ot?function(){try{return arguments.callee,Tn}catch{try{return ot(arguments,"callee").get}catch{return Tn}}}():Tn,St=iu(),yu=au(),X=Object.getPrototypeOf||(yu?function(t){return t.__proto__}:null),kt={},gu=typeof Uint8Array=="undefined"||!X?C:X(Uint8Array),at={"%AggregateError%":typeof AggregateError=="undefined"?C:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?C:ArrayBuffer,"%ArrayIteratorPrototype%":St&&X?X([][Symbol.iterator]()):C,"%AsyncFromSyncIteratorPrototype%":C,"%AsyncFunction%":kt,"%AsyncGenerator%":kt,"%AsyncGeneratorFunction%":kt,"%AsyncIteratorPrototype%":kt,"%Atomics%":typeof Atomics=="undefined"?C:Atomics,"%BigInt%":typeof BigInt=="undefined"?C:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?C:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?C:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?C:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?C:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?C:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?C:FinalizationRegistry,"%Function%":va,"%GeneratorFunction%":kt,"%Int8Array%":typeof Int8Array=="undefined"?C:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?C:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?C:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":St&&X?X(X([][Symbol.iterator]())):C,"%JSON%":typeof JSON=="object"?JSON:C,"%Map%":typeof Map=="undefined"?C:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!St||!X?C:X(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?C:Promise,"%Proxy%":typeof Proxy=="undefined"?C:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?C:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?C:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!St||!X?C:X(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?C:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":St&&X?X(""[Symbol.iterator]()):C,"%Symbol%":St?Symbol:C,"%SyntaxError%":Lt,"%ThrowTypeError%":du,"%TypedArray%":gu,"%TypeError%":jt,"%Uint8Array%":typeof Uint8Array=="undefined"?C:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?C:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?C:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?C:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?C:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?C:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?C:WeakSet};if(X)try{null.error}catch(t){var vu=X(X(t));at["%Error.prototype%"]=vu}var mu=function t(e){var r;if(e==="%AsyncFunction%")r=Pn("async function () {}");else if(e==="%GeneratorFunction%")r=Pn("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Pn("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&X&&(r=X(i.prototype))}return at[e]=r,r},lo={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ar=Ei,Gr=hu,bu=ar.call(Function.call,Array.prototype.concat),wu=ar.call(Function.apply,Array.prototype.splice),co=ar.call(Function.call,String.prototype.replace),Vr=ar.call(Function.call,String.prototype.slice),_u=ar.call(Function.call,RegExp.prototype.exec),Su=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Eu=/\\(\\)?/g,Au=function(e){var r=Vr(e,0,1),n=Vr(e,-1);if(r==="%"&&n!=="%")throw new Lt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Lt("invalid intrinsic syntax, expected opening `%`");var i=[];return co(e,Su,function(o,a,f,u){i[i.length]=f?co(u,Eu,"$1"):a||o}),i},Ru=function(e,r){var n=e,i;if(Gr(lo,n)&&(i=lo[n],n="%"+i[0]+"%"),Gr(at,n)){var o=at[n];if(o===kt&&(o=mu(n)),typeof o=="undefined"&&!r)throw new jt("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Lt("intrinsic "+e+" does not exist!")},sr=function(e,r){if(typeof e!="string"||e.length===0)throw new jt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new jt('"allowMissing" argument must be a boolean');if(_u(/^%?[^%]*%?$/,e)===null)throw new Lt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Au(e),i=n.length>0?n[0]:"",o=Ru("%"+i+"%",r),a=o.name,f=o.value,u=!1,l=o.alias;l&&(i=l[0],wu(n,bu([0,1],l)));for(var y=1,g=!0;y<n.length;y+=1){var b=n[y],E=Vr(b,0,1),_=Vr(b,-1);if((E==='"'||E==="'"||E==="`"||_==='"'||_==="'"||_==="`")&&E!==_)throw new Lt("property names with quotes must have matching quotes");if((b==="constructor"||!g)&&(u=!0),i+="."+b,a="%"+i+"%",Gr(at,a))f=at[a];else if(f!=null){if(!(b in f)){if(!r)throw new jt("base intrinsic for "+e+" exists, but the property is not available.");return}if(ot&&y+1>=n.length){var R=ot(f,b);g=!!R,g&&"get"in R&&!("originalValue"in R.get)?f=R.get:f=f[b]}else g=Gr(f,b),f=f[b];g&&!u&&(at[a]=f)}}return f},fr={exports:{}};(function(t){var e=Ei,r=sr,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),a=r("%Object.getOwnPropertyDescriptor%",!0),f=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}t.exports=function(g){var b=o(e,i,arguments);if(a&&f){var E=a(b,"length");E.configurable&&f(b,"length",{value:1+u(0,g.length-(arguments.length-1))})}return b};var l=function(){return o(e,n,arguments)};f?f(t.exports,"apply",{value:l}):t.exports.apply=l})(fr);var ma=sr,ba=fr.exports,ku=ba(ma("String.prototype.indexOf")),rn=function(e,r){var n=ma(e,!!r);return typeof n=="function"&&ku(e,".prototype.")>-1?ba(n):n},Ou=Si(),ju=rn,ei=ju("Object.prototype.toString"),nn=function(e){return Ou&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:ei(e)==="[object Arguments]"},wa=function(e){return nn(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&ei(e)!=="[object Array]"&&ei(e.callee)==="[object Function]"},Pu=function(){return nn(arguments)}();nn.isLegacyArguments=wa;var Tu=Pu?nn:wa,Cu=Object.prototype.toString,Nu=Function.prototype.toString,Mu=/^\s*(?:function)?\*/,_a=Si(),Cn=Object.getPrototypeOf,Lu=function(){if(!_a)return!1;try{return Function("return function*() {}")()}catch{}},Nn,$u=function(e){if(typeof e!="function")return!1;if(Mu.test(Nu.call(e)))return!0;if(!_a){var r=Cu.call(e);return r==="[object GeneratorFunction]"}if(!Cn)return!1;if(typeof Nn=="undefined"){var n=Lu();Nn=n?Cn(n):!1}return Cn(e)===Nn},Sa=Function.prototype.toString,Ot=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,ti,Tr;if(typeof Ot=="function"&&typeof Object.defineProperty=="function")try{ti=Object.defineProperty({},"length",{get:function(){throw Tr}}),Tr={},Ot(function(){throw 42},null,ti)}catch(t){t!==Tr&&(Ot=null)}else Ot=null;var Iu=/^\s*class\b/,ri=function(e){try{var r=Sa.call(e);return Iu.test(r)}catch{return!1}},Mn=function(e){try{return ri(e)?!1:(Sa.call(e),!0)}catch{return!1}},Cr=Object.prototype.toString,Fu="[object Object]",Du="[object Function]",Bu="[object GeneratorFunction]",xu="[object HTMLAllCollection]",Uu="[object HTML document.all class]",qu="[object HTMLCollection]",Wu=typeof Symbol=="function"&&!!Symbol.toStringTag,Gu=!(0 in[,]),ni=function(){return!1};if(typeof document=="object"){var Vu=document.all;Cr.call(Vu)===Cr.call(document.all)&&(ni=function(e){if((Gu||!e)&&(typeof e=="undefined"||typeof e=="object"))try{var r=Cr.call(e);return(r===xu||r===Uu||r===qu||r===Fu)&&e("")==null}catch{}return!1})}var Hu=Ot?function(e){if(ni(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Ot(e,null,ti)}catch(r){if(r!==Tr)return!1}return!ri(e)&&Mn(e)}:function(e){if(ni(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Wu)return Mn(e);if(ri(e))return!1;var r=Cr.call(e);return r!==Du&&r!==Bu&&!/^\[object HTML/.test(r)?!1:Mn(e)},zu=Hu,Ku=Object.prototype.toString,Ea=Object.prototype.hasOwnProperty,Yu=function(e,r,n){for(var i=0,o=e.length;i<o;i++)Ea.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Ju=function(e,r,n){for(var i=0,o=e.length;i<o;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},Qu=function(e,r,n){for(var i in e)Ea.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Xu=function(e,r,n){if(!zu(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Ku.call(e)==="[object Array]"?Yu(e,r,i):typeof e=="string"?Ju(e,r,i):Qu(e,r,i)},Zu=Xu,Ln=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],el=typeof globalThis=="undefined"?de:globalThis,tl=function(){for(var e=[],r=0;r<Ln.length;r++)typeof el[Ln[r]]=="function"&&(e[e.length]=Ln[r]);return e},rl=sr,Nr=rl("%Object.getOwnPropertyDescriptor%",!0);if(Nr)try{Nr([],"length")}catch{Nr=null}var Aa=Nr,Hr=Zu,nl=tl,po=fr.exports,Ai=rn,Mr=Aa,il=Ai("Object.prototype.toString"),Ra=Si(),ho=typeof globalThis=="undefined"?de:globalThis,ii=nl(),Ri=Ai("String.prototype.slice"),$n=Object.getPrototypeOf,ol=Ai("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},zr={__proto__:null};Ra&&Mr&&$n?Hr(ii,function(t){var e=new ho[t];if(Symbol.toStringTag in e){var r=$n(e),n=Mr(r,Symbol.toStringTag);if(!n){var i=$n(r);n=Mr(i,Symbol.toStringTag)}zr["$"+t]=po(n.get)}}):Hr(ii,function(t){var e=new ho[t];zr["$"+t]=po(e.slice)});var al=function(e){var r=!1;return Hr(zr,function(n,i){if(!r)try{"$"+n(e)===i&&(r=Ri(i,1))}catch{}}),r},sl=function(e){var r=!1;return Hr(zr,function(n,i){if(!r)try{n(e),r=Ri(i,1)}catch{}}),r},ka=function(e){if(!e||typeof e!="object")return!1;if(!Ra){var r=Ri(il(e),8,-1);return ol(ii,r)>-1?r:r!=="Object"?!1:sl(e)}return Mr?al(e):null},fl=ka,ul=function(e){return!!fl(e)};(function(t){var e=Tu,r=$u,n=ka,i=ul;function o(v){return v.call.bind(v)}var a=typeof BigInt!="undefined",f=typeof Symbol!="undefined",u=o(Object.prototype.toString),l=o(Number.prototype.valueOf),y=o(String.prototype.valueOf),g=o(Boolean.prototype.valueOf);if(a)var b=o(BigInt.prototype.valueOf);if(f)var E=o(Symbol.prototype.valueOf);function _(v,yt){if(typeof v!="object")return!1;try{return yt(v),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function R(v){return typeof Promise!="undefined"&&v instanceof Promise||v!==null&&typeof v=="object"&&typeof v.then=="function"&&typeof v.catch=="function"}t.isPromise=R;function B(v){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(v):i(v)||h(v)}t.isArrayBufferView=B;function T(v){return n(v)==="Uint8Array"}t.isUint8Array=T;function q(v){return n(v)==="Uint8ClampedArray"}t.isUint8ClampedArray=q;function V(v){return n(v)==="Uint16Array"}t.isUint16Array=V;function oe(v){return n(v)==="Uint32Array"}t.isUint32Array=oe;function ne(v){return n(v)==="Int8Array"}t.isInt8Array=ne;function G(v){return n(v)==="Int16Array"}t.isInt16Array=G;function k(v){return n(v)==="Int32Array"}t.isInt32Array=k;function Y(v){return n(v)==="Float32Array"}t.isFloat32Array=Y;function ae(v){return n(v)==="Float64Array"}t.isFloat64Array=ae;function Te(v){return n(v)==="BigInt64Array"}t.isBigInt64Array=Te;function Oe(v){return n(v)==="BigUint64Array"}t.isBigUint64Array=Oe;function ce(v){return u(v)==="[object Map]"}ce.working=typeof Map!="undefined"&&ce(new Map);function ct(v){return typeof Map=="undefined"?!1:ce.working?ce(v):v instanceof Map}t.isMap=ct;function be(v){return u(v)==="[object Set]"}be.working=typeof Set!="undefined"&&be(new Set);function Ie(v){return typeof Set=="undefined"?!1:be.working?be(v):v instanceof Set}t.isSet=Ie;function Fe(v){return u(v)==="[object WeakMap]"}Fe.working=typeof WeakMap!="undefined"&&Fe(new WeakMap);function Ut(v){return typeof WeakMap=="undefined"?!1:Fe.working?Fe(v):v instanceof WeakMap}t.isWeakMap=Ut;function De(v){return u(v)==="[object WeakSet]"}De.working=typeof WeakSet!="undefined"&&De(new WeakSet);function we(v){return De(v)}t.isWeakSet=we;function L(v){return u(v)==="[object ArrayBuffer]"}L.working=typeof ArrayBuffer!="undefined"&&L(new ArrayBuffer);function pt(v){return typeof ArrayBuffer=="undefined"?!1:L.working?L(v):v instanceof ArrayBuffer}t.isArrayBuffer=pt;function p(v){return u(v)==="[object DataView]"}p.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&p(new DataView(new ArrayBuffer(1),0,1));function h(v){return typeof DataView=="undefined"?!1:p.working?p(v):v instanceof DataView}t.isDataView=h;var m=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function O(v){return u(v)==="[object SharedArrayBuffer]"}function $(v){return typeof m=="undefined"?!1:(typeof O.working=="undefined"&&(O.working=O(new m)),O.working?O(v):v instanceof m)}t.isSharedArrayBuffer=$;function D(v){return u(v)==="[object AsyncFunction]"}t.isAsyncFunction=D;function j(v){return u(v)==="[object Map Iterator]"}t.isMapIterator=j;function N(v){return u(v)==="[object Set Iterator]"}t.isSetIterator=N;function x(v){return u(v)==="[object Generator]"}t.isGeneratorObject=x;function Z(v){return u(v)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=Z;function Ce(v){return _(v,l)}t.isNumberObject=Ce;function ht(v){return _(v,y)}t.isStringObject=ht;function Ne(v){return _(v,g)}t.isBooleanObject=Ne;function Qe(v){return a&&_(v,b)}t.isBigIntObject=Qe;function dt(v){return f&&_(v,E)}t.isSymbolObject=dt;function gr(v){return Ce(v)||ht(v)||Ne(v)||Qe(v)||dt(v)}t.isBoxedPrimitive=gr;function mn(v){return typeof Uint8Array!="undefined"&&(pt(v)||$(v))}t.isAnyArrayBuffer=mn,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(v){Object.defineProperty(t,v,{enumerable:!1,value:function(){throw new Error(v+" is not supported in userland")}})})})(ga);var ll=function(e){return e instanceof A.Buffer},Le={exports:{}};typeof Object.create=="function"?Le.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Le.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};(function(t){var e=Object.getOwnPropertyDescriptors||function(h){for(var m=Object.keys(h),O={},$=0;$<m.length;$++)O[m[$]]=Object.getOwnPropertyDescriptor(h,m[$]);return O},r=/%[sdj%]/g;t.format=function(p){if(!ne(p)){for(var h=[],m=0;m<arguments.length;m++)h.push(a(arguments[m]));return h.join(" ")}for(var m=1,O=arguments,$=O.length,D=String(p).replace(r,function(N){if(N==="%%")return"%";if(m>=$)return N;switch(N){case"%s":return String(O[m++]);case"%d":return Number(O[m++]);case"%j":try{return JSON.stringify(O[m++])}catch{return"[Circular]"}default:return N}}),j=O[m];m<$;j=O[++m])q(j)||!ae(j)?D+=" "+j:D+=" "+a(j);return D},t.deprecate=function(p,h){if(typeof A.process!="undefined"&&A.process.noDeprecation===!0)return p;if(typeof A.process=="undefined")return function(){return t.deprecate(p,h).apply(this,arguments)};var m=!1;function O(){if(!m){if(A.process.throwDeprecation)throw new Error(h);A.process.traceDeprecation?console.trace(h):console.error(h),m=!0}return p.apply(this,arguments)}return O};var n={},i=/^$/;if({}.NODE_DEBUG){var o={}.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}t.debuglog=function(p){if(p=p.toUpperCase(),!n[p])if(i.test(p)){var h=A.process.pid;n[p]=function(){var m=t.format.apply(t,arguments);console.error("%s %d: %s",p,h,m)}}else n[p]=function(){};return n[p]};function a(p,h){var m={seen:[],stylize:u};return arguments.length>=3&&(m.depth=arguments[2]),arguments.length>=4&&(m.colors=arguments[3]),T(h)?m.showHidden=h:h&&t._extend(m,h),k(m.showHidden)&&(m.showHidden=!1),k(m.depth)&&(m.depth=2),k(m.colors)&&(m.colors=!1),k(m.customInspect)&&(m.customInspect=!0),m.colors&&(m.stylize=f),y(m,p,m.depth)}t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function f(p,h){var m=a.styles[h];return m?"\x1B["+a.colors[m][0]+"m"+p+"\x1B["+a.colors[m][1]+"m":p}function u(p,h){return p}function l(p){var h={};return p.forEach(function(m,O){h[m]=!0}),h}function y(p,h,m){if(p.customInspect&&h&&ce(h.inspect)&&h.inspect!==t.inspect&&!(h.constructor&&h.constructor.prototype===h)){var O=h.inspect(m,p);return ne(O)||(O=y(p,O,m)),O}var $=g(p,h);if($)return $;var D=Object.keys(h),j=l(D);if(p.showHidden&&(D=Object.getOwnPropertyNames(h)),Oe(h)&&(D.indexOf("message")>=0||D.indexOf("description")>=0))return b(h);if(D.length===0){if(ce(h)){var N=h.name?": "+h.name:"";return p.stylize("[Function"+N+"]","special")}if(Y(h))return p.stylize(RegExp.prototype.toString.call(h),"regexp");if(Te(h))return p.stylize(Date.prototype.toString.call(h),"date");if(Oe(h))return b(h)}var x="",Z=!1,Ce=["{","}"];if(B(h)&&(Z=!0,Ce=["[","]"]),ce(h)){var ht=h.name?": "+h.name:"";x=" [Function"+ht+"]"}if(Y(h)&&(x=" "+RegExp.prototype.toString.call(h)),Te(h)&&(x=" "+Date.prototype.toUTCString.call(h)),Oe(h)&&(x=" "+b(h)),D.length===0&&(!Z||h.length==0))return Ce[0]+x+Ce[1];if(m<0)return Y(h)?p.stylize(RegExp.prototype.toString.call(h),"regexp"):p.stylize("[Object]","special");p.seen.push(h);var Ne;return Z?Ne=E(p,h,m,j,D):Ne=D.map(function(Qe){return _(p,h,m,j,Qe,Z)}),p.seen.pop(),R(Ne,x,Ce)}function g(p,h){if(k(h))return p.stylize("undefined","undefined");if(ne(h)){var m="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return p.stylize(m,"string")}if(oe(h))return p.stylize(""+h,"number");if(T(h))return p.stylize(""+h,"boolean");if(q(h))return p.stylize("null","null")}function b(p){return"["+Error.prototype.toString.call(p)+"]"}function E(p,h,m,O,$){for(var D=[],j=0,N=h.length;j<N;++j)De(h,String(j))?D.push(_(p,h,m,O,String(j),!0)):D.push("");return $.forEach(function(x){x.match(/^\d+$/)||D.push(_(p,h,m,O,x,!0))}),D}function _(p,h,m,O,$,D){var j,N,x;if(x=Object.getOwnPropertyDescriptor(h,$)||{value:h[$]},x.get?x.set?N=p.stylize("[Getter/Setter]","special"):N=p.stylize("[Getter]","special"):x.set&&(N=p.stylize("[Setter]","special")),De(O,$)||(j="["+$+"]"),N||(p.seen.indexOf(x.value)<0?(q(m)?N=y(p,x.value,null):N=y(p,x.value,m-1),N.indexOf(`
`)>-1&&(D?N=N.split(`
`).map(function(Z){return"  "+Z}).join(`
`).slice(2):N=`
`+N.split(`
`).map(function(Z){return"   "+Z}).join(`
`))):N=p.stylize("[Circular]","special")),k(j)){if(D&&$.match(/^\d+$/))return N;j=JSON.stringify(""+$),j.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(j=j.slice(1,-1),j=p.stylize(j,"name")):(j=j.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),j=p.stylize(j,"string"))}return j+": "+N}function R(p,h,m){var O=p.reduce(function($,D){return D.indexOf(`
`)>=0,$+D.replace(/\u001b\[\d\d?m/g,"").length+1},0);return O>60?m[0]+(h===""?"":h+`
 `)+" "+p.join(`,
  `)+" "+m[1]:m[0]+h+" "+p.join(", ")+" "+m[1]}t.types=ga;function B(p){return Array.isArray(p)}t.isArray=B;function T(p){return typeof p=="boolean"}t.isBoolean=T;function q(p){return p===null}t.isNull=q;function V(p){return p==null}t.isNullOrUndefined=V;function oe(p){return typeof p=="number"}t.isNumber=oe;function ne(p){return typeof p=="string"}t.isString=ne;function G(p){return typeof p=="symbol"}t.isSymbol=G;function k(p){return p===void 0}t.isUndefined=k;function Y(p){return ae(p)&&be(p)==="[object RegExp]"}t.isRegExp=Y,t.types.isRegExp=Y;function ae(p){return typeof p=="object"&&p!==null}t.isObject=ae;function Te(p){return ae(p)&&be(p)==="[object Date]"}t.isDate=Te,t.types.isDate=Te;function Oe(p){return ae(p)&&(be(p)==="[object Error]"||p instanceof Error)}t.isError=Oe,t.types.isNativeError=Oe;function ce(p){return typeof p=="function"}t.isFunction=ce;function ct(p){return p===null||typeof p=="boolean"||typeof p=="number"||typeof p=="string"||typeof p=="symbol"||typeof p=="undefined"}t.isPrimitive=ct,t.isBuffer=ll;function be(p){return Object.prototype.toString.call(p)}function Ie(p){return p<10?"0"+p.toString(10):p.toString(10)}var Fe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ut(){var p=new Date,h=[Ie(p.getHours()),Ie(p.getMinutes()),Ie(p.getSeconds())].join(":");return[p.getDate(),Fe[p.getMonth()],h].join(" ")}t.log=function(){console.log("%s - %s",Ut(),t.format.apply(t,arguments))},t.inherits=Le.exports,t._extend=function(p,h){if(!h||!ae(h))return p;for(var m=Object.keys(h),O=m.length;O--;)p[m[O]]=h[m[O]];return p};function De(p,h){return Object.prototype.hasOwnProperty.call(p,h)}var we=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;t.promisify=function(h){if(typeof h!="function")throw new TypeError('The "original" argument must be of type Function');if(we&&h[we]){var m=h[we];if(typeof m!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(m,we,{value:m,enumerable:!1,writable:!1,configurable:!0}),m}function m(){for(var O,$,D=new Promise(function(x,Z){O=x,$=Z}),j=[],N=0;N<arguments.length;N++)j.push(arguments[N]);j.push(function(x,Z){x?$(x):O(Z)});try{h.apply(this,j)}catch(x){$(x)}return D}return Object.setPrototypeOf(m,Object.getPrototypeOf(h)),we&&Object.defineProperty(m,we,{value:m,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(m,e(h))},t.promisify.custom=we;function L(p,h){if(!p){var m=new Error("Promise was rejected with a falsy value");m.reason=p,p=m}return h(p)}function pt(p){if(typeof p!="function")throw new TypeError('The "original" argument must be of type Function');function h(){for(var m=[],O=0;O<arguments.length;O++)m.push(arguments[O]);var $=m.pop();if(typeof $!="function")throw new TypeError("The last argument must be of type Function");var D=this,j=function(){return $.apply(D,arguments)};p.apply(this,m).then(function(N){A.process.nextTick(j.bind(null,null,N))},function(N){A.process.nextTick(L.bind(null,N,j))})}return Object.setPrototypeOf(h,Object.getPrototypeOf(p)),Object.defineProperties(h,e(p)),h}t.callbackify=pt})(Re);function He(t){return He=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(t)}function yo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pl(n.key),n)}}function cl(t,e,r){return e&&yo(t.prototype,e),r&&yo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function pl(t){var e=hl(t,"string");return He(e)==="symbol"?e:String(e)}function hl(t,e){if(He(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(He(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oi(t,e)}function oi(t,e){return oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oi(t,e)}function gl(t){var e=bl();return function(){var n=Kr(t),i;if(e){var o=Kr(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return vl(this,i)}}function vl(t,e){if(e&&(He(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ml(t)}function ml(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kr(t){return Kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kr(t)}var Oa={},Pt,In;function ur(t,e,r){r||(r=Error);function n(o,a,f){return typeof e=="string"?e:e(o,a,f)}var i=function(o){yl(f,o);var a=gl(f);function f(u,l,y){var g;return dl(this,f),g=a.call(this,n(u,l,y)),g.code=t,g}return cl(f)}(r);Oa[t]=i}function go(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function wl(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function _l(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Sl(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}ur("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);ur("ERR_INVALID_ARG_TYPE",function(t,e,r){Pt===void 0&&(Pt=or.exports),Pt(typeof t=="string","'name' must be a string");var n;typeof e=="string"&&wl(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(_l(t," argument"))i="The ".concat(t," ").concat(n," ").concat(go(e,"type"));else{var o=Sl(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(go(e,"type"))}return i+=". Received type ".concat(He(r)),i},TypeError);ur("ERR_INVALID_ARG_VALUE",function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";In===void 0&&(In=Re);var n=In.inspect(e);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(r,". Received ").concat(n)},TypeError);ur("ERR_INVALID_RETURN_VALUE",function(t,e,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(He(r)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(n,".")},TypeError);ur("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];Pt===void 0&&(Pt=or.exports),Pt(e.length>0,"At least one arg needs to be specified");var n="The ",i=e.length;switch(e=e.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(e[0]," argument");break;case 2:n+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:n+=e.slice(0,i-1).join(", "),n+=", and ".concat(e[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError);wi.codes=Oa;function vo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vo(Object(r),!0).forEach(function(n){El(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vo(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function El(t,e,r){return e=ja(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Al(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ja(n.key),n)}}function Rl(t,e,r){return e&&bo(t.prototype,e),r&&bo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ja(t){var e=kl(t,"string");return le(e)==="symbol"?e:String(e)}function kl(t,e){if(le(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(le(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ol(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tr(t,e)}function jl(t){var e=Ta();return function(){var n=rr(t),i;if(e){var o=rr(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Pa(this,i)}}function Pa(t,e){if(e&&(le(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ai(t)}function ai(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function si(t){var e=typeof Map=="function"?new Map:void 0;return si=function(n){if(n===null||!Pl(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Lr(n,arguments,rr(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),tr(i,n)},si(t)}function Lr(t,e,r){return Ta()?Lr=Reflect.construct.bind():Lr=function(i,o,a){var f=[null];f.push.apply(f,o);var u=Function.bind.apply(i,f),l=new u;return a&&tr(l,a.prototype),l},Lr.apply(null,arguments)}function Ta(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pl(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function tr(t,e){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tr(t,e)}function rr(t){return rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rr(t)}function le(t){return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(t)}var Tl=Re,fi=Tl.inspect,Cl=wi,Nl=Cl.codes.ERR_INVALID_ARG_TYPE;function wo(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Ml(t,e){if(e=Math.floor(e),t.length==0||e==0)return"";var r=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+=t.substring(0,r-t.length),t}var _e="",Yt="",Jt="",ee="",rt={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},Ll=10;function _o(t){var e=Object.keys(t),r=Object.create(Object.getPrototypeOf(t));return e.forEach(function(n){r[n]=t[n]}),Object.defineProperty(r,"message",{value:t.message}),r}function Qt(t){return fi(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function $l(t,e,r){var n="",i="",o=0,a="",f=!1,u=Qt(t),l=u.split(`
`),y=Qt(e).split(`
`),g=0,b="";if(r==="strictEqual"&&le(t)==="object"&&le(e)==="object"&&t!==null&&e!==null&&(r="strictEqualObject"),l.length===1&&y.length===1&&l[0]!==y[0]){var E=l[0].length+y[0].length;if(E<=Ll){if((le(t)!=="object"||t===null)&&(le(e)!=="object"||e===null)&&(t!==0||e!==0))return"".concat(rt[r],`

`)+"".concat(l[0]," !== ").concat(y[0],`
`)}else if(r!=="strictEqualObject"){var _=A.process.stderr&&A.process.stderr.isTTY?A.process.stderr.columns:80;if(E<_){for(;l[0][g]===y[0][g];)g++;g>2&&(b=`
  `.concat(Ml(" ",g),"^"),g=0)}}}for(var R=l[l.length-1],B=y[y.length-1];R===B&&(g++<2?a=`
  `.concat(R).concat(a):n=R,l.pop(),y.pop(),!(l.length===0||y.length===0));)R=l[l.length-1],B=y[y.length-1];var T=Math.max(l.length,y.length);if(T===0){var q=u.split(`
`);if(q.length>30)for(q[26]="".concat(_e,"...").concat(ee);q.length>27;)q.pop();return"".concat(rt.notIdentical,`

`).concat(q.join(`
`),`
`)}g>3&&(a=`
`.concat(_e,"...").concat(ee).concat(a),f=!0),n!==""&&(a=`
  `.concat(n).concat(a),n="");var V=0,oe=rt[r]+`
`.concat(Yt,"+ actual").concat(ee," ").concat(Jt,"- expected").concat(ee),ne=" ".concat(_e,"...").concat(ee," Lines skipped");for(g=0;g<T;g++){var G=g-o;if(l.length<g+1)G>1&&g>2&&(G>4?(i+=`
`.concat(_e,"...").concat(ee),f=!0):G>3&&(i+=`
  `.concat(y[g-2]),V++),i+=`
  `.concat(y[g-1]),V++),o=g,n+=`
`.concat(Jt,"-").concat(ee," ").concat(y[g]),V++;else if(y.length<g+1)G>1&&g>2&&(G>4?(i+=`
`.concat(_e,"...").concat(ee),f=!0):G>3&&(i+=`
  `.concat(l[g-2]),V++),i+=`
  `.concat(l[g-1]),V++),o=g,i+=`
`.concat(Yt,"+").concat(ee," ").concat(l[g]),V++;else{var k=y[g],Y=l[g],ae=Y!==k&&(!wo(Y,",")||Y.slice(0,-1)!==k);ae&&wo(k,",")&&k.slice(0,-1)===Y&&(ae=!1,Y+=","),ae?(G>1&&g>2&&(G>4?(i+=`
`.concat(_e,"...").concat(ee),f=!0):G>3&&(i+=`
  `.concat(l[g-2]),V++),i+=`
  `.concat(l[g-1]),V++),o=g,i+=`
`.concat(Yt,"+").concat(ee," ").concat(Y),n+=`
`.concat(Jt,"-").concat(ee," ").concat(k),V+=2):(i+=n,n="",(G===1||g===0)&&(i+=`
  `.concat(Y),V++))}if(V>20&&g<T-2)return"".concat(oe).concat(ne,`
`).concat(i,`
`).concat(_e,"...").concat(ee).concat(n,`
`)+"".concat(_e,"...").concat(ee)}return"".concat(oe).concat(f?ne:"",`
`).concat(i).concat(n).concat(a).concat(b)}var Il=function(t,e){Ol(n,t);var r=jl(n);function n(i){var o;if(Al(this,n),le(i)!=="object"||i===null)throw new Nl("options","Object",i);var a=i.message,f=i.operator,u=i.stackStartFn,l=i.actual,y=i.expected,g=Error.stackTraceLimit;if(Error.stackTraceLimit=0,a!=null)o=r.call(this,String(a));else if(A.process.stderr&&A.process.stderr.isTTY&&(A.process.stderr&&A.process.stderr.getColorDepth&&A.process.stderr.getColorDepth()!==1?(_e="\x1B[34m",Yt="\x1B[32m",ee="\x1B[39m",Jt="\x1B[31m"):(_e="",Yt="",ee="",Jt="")),le(l)==="object"&&l!==null&&le(y)==="object"&&y!==null&&"stack"in l&&l instanceof Error&&"stack"in y&&y instanceof Error&&(l=_o(l),y=_o(y)),f==="deepStrictEqual"||f==="strictEqual")o=r.call(this,$l(l,y,f));else if(f==="notDeepStrictEqual"||f==="notStrictEqual"){var b=rt[f],E=Qt(l).split(`
`);if(f==="notStrictEqual"&&le(l)==="object"&&l!==null&&(b=rt.notStrictEqualObject),E.length>30)for(E[26]="".concat(_e,"...").concat(ee);E.length>27;)E.pop();E.length===1?o=r.call(this,"".concat(b," ").concat(E[0])):o=r.call(this,"".concat(b,`

`).concat(E.join(`
`),`
`))}else{var _=Qt(l),R="",B=rt[f];f==="notDeepEqual"||f==="notEqual"?(_="".concat(rt[f],`

`).concat(_),_.length>1024&&(_="".concat(_.slice(0,1021),"..."))):(R="".concat(Qt(y)),_.length>512&&(_="".concat(_.slice(0,509),"...")),R.length>512&&(R="".concat(R.slice(0,509),"...")),f==="deepEqual"||f==="equal"?_="".concat(B,`

`).concat(_,`

should equal

`):R=" ".concat(f," ").concat(R)),o=r.call(this,"".concat(_).concat(R))}return Error.stackTraceLimit=g,o.generatedMessage=!a,Object.defineProperty(ai(o),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),o.code="ERR_ASSERTION",o.actual=l,o.expected=y,o.operator=f,Error.captureStackTrace&&Error.captureStackTrace(ai(o),u),o.stack,o.name="AssertionError",Pa(o)}return Rl(n,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(o,a){return fi(this,mo(mo({},a),{},{customInspect:!1,depth:0}))}}]),n}(si(Error),fi.custom),Fl=Il,So=Object.prototype.toString,Ca=function(e){var r=So.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&So.call(e.callee)==="[object Function]"),n},Na;if(!Object.keys){var Er=Object.prototype.hasOwnProperty,Eo=Object.prototype.toString,Dl=Ca,Ao=Object.prototype.propertyIsEnumerable,Bl=!Ao.call({toString:null},"toString"),xl=Ao.call(function(){},"prototype"),Ar=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Fn=function(t){var e=t.constructor;return e&&e.prototype===t},Ul={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},ql=function(){if(typeof window=="undefined")return!1;for(var t in window)try{if(!Ul["$"+t]&&Er.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{Fn(window[t])}catch{return!0}}catch{return!0}return!1}(),Wl=function(t){if(typeof window=="undefined"||!ql)return Fn(t);try{return Fn(t)}catch{return!1}};Na=function(e){var r=e!==null&&typeof e=="object",n=Eo.call(e)==="[object Function]",i=Dl(e),o=r&&Eo.call(e)==="[object String]",a=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var f=xl&&n;if(o&&e.length>0&&!Er.call(e,0))for(var u=0;u<e.length;++u)a.push(String(u));if(i&&e.length>0)for(var l=0;l<e.length;++l)a.push(String(l));else for(var y in e)!(f&&y==="prototype")&&Er.call(e,y)&&a.push(String(y));if(Bl)for(var g=Wl(e),b=0;b<Ar.length;++b)!(g&&Ar[b]==="constructor")&&Er.call(e,Ar[b])&&a.push(Ar[b]);return a}}var Gl=Na,Vl=Array.prototype.slice,Hl=Ca,Ro=Object.keys,$r=Ro?function(e){return Ro(e)}:Gl,ko=Object.keys;$r.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Hl(n)?ko(Vl.call(n)):ko(n)})}else Object.keys=$r;return Object.keys||$r};var Ma=$r,zl=Ma,La=_i(),$a=rn,Oo=Object,Kl=$a("Array.prototype.push"),jo=$a("Object.prototype.propertyIsEnumerable"),Yl=La?Object.getOwnPropertySymbols:null,Jl=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=Oo(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var o=Oo(arguments[i]),a=zl(o),f=La&&(Object.getOwnPropertySymbols||Yl);if(f)for(var u=f(o),l=0;l<u.length;++l){var y=u[l];jo(o,y)&&Kl(a,y)}for(var g=0;g<a.length;++g){var b=a[g];if(jo(o,b)){var E=o[b];n[b]=E}}}return n},Dn=Jl,Ql=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var a in i)o+=a;return t!==o},Xl=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},Zl=function(){return!Object.assign||Ql()||Xl()?Dn:Object.assign},Po=function(t){return t!==t},Ia=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||Po(e)&&Po(r))},ec=Ia,ki=function(){return typeof Object.is=="function"?Object.is:ec},tc=sr,ui=tc("%Object.defineProperty%",!0),li=function(){if(ui)try{return ui({},"a",{value:1}),!0}catch{return!1}return!1};li.hasArrayLengthDefineBug=function(){if(!li())return null;try{return ui([],"length",{value:1}).length!==1}catch{return!0}};var Fa=li,rc=Fa(),Oi=sr,To=rc&&Oi("%Object.defineProperty%",!0),nc=Oi("%SyntaxError%"),Et=Oi("%TypeError%"),Co=Aa,ic=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Et("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Et("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Et("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Et("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Et("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Et("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,u=!!Co&&Co(e,r);if(To)To(e,r,{configurable:a===null&&u?u.configurable:!a,enumerable:i===null&&u?u.enumerable:!i,value:n,writable:o===null&&u?u.writable:!o});else if(f||!i&&!o&&!a)e[r]=n;else throw new nc("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},oc=Ma,ac=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",sc=Object.prototype.toString,fc=Array.prototype.concat,No=ic,uc=function(t){return typeof t=="function"&&sc.call(t)==="[object Function]"},Da=Fa(),lc=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!uc(n)||!n())return}Da?No(t,e,r,!0):No(t,e,r)},Ba=function(t,e){var r=arguments.length>2?arguments[2]:{},n=oc(e);ac&&(n=fc.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)lc(t,n[i],e[n[i]],r[n[i]])};Ba.supportsDescriptors=!!Da;var on=Ba,cc=ki,pc=on,hc=function(){var e=cc();return pc(Object,{is:e},{is:function(){return Object.is!==e}}),e},dc=on,yc=fr.exports,gc=Ia,xa=ki,vc=hc,Ua=yc(xa(),Object);dc(Ua,{getPolyfill:xa,implementation:gc,shim:vc});var mc=Ua,qa=function(e){return e!==e},bc=qa,Wa=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:bc},wc=on,_c=Wa,Sc=function(){var e=_c();return wc(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e},Ec=fr.exports,Ac=on,Rc=qa,Ga=Wa,kc=Sc,Va=Ec(Ga(),Number);Ac(Va,{getPolyfill:Ga,implementation:Rc,shim:kc});var Oc=Va;function Mo(t,e){return Cc(t)||Tc(t,e)||Pc(t,e)||jc()}function jc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pc(t,e){if(!!t){if(typeof t=="string")return Lo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lo(t,e)}}function Lo(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tc(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,f=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(f.push(n.value),f.length!==e);u=!0);}catch(y){l=!0,i=y}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return f}}function Cc(t){if(Array.isArray(t))return t}function he(t){return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(t)}var Nc=/a/g.flags!==void 0,Yr=function(e){var r=[];return e.forEach(function(n){return r.push(n)}),r},$o=function(e){var r=[];return e.forEach(function(n,i){return r.push([i,n])}),r},Ha=Object.is?Object.is:mc,Ir=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},ci=Number.isNaN?Number.isNaN:Oc;function ji(t){return t.call.bind(t)}var zt=ji(Object.prototype.hasOwnProperty),Fr=ji(Object.prototype.propertyIsEnumerable),Io=ji(Object.prototype.toString),fe=Re.types,Mc=fe.isAnyArrayBuffer,Lc=fe.isArrayBufferView,Fo=fe.isDate,Rr=fe.isMap,Do=fe.isRegExp,kr=fe.isSet,$c=fe.isNativeError,Ic=fe.isBoxedPrimitive,Bo=fe.isNumberObject,xo=fe.isStringObject,Uo=fe.isBooleanObject,qo=fe.isBigIntObject,Fc=fe.isSymbolObject,Dc=fe.isFloat32Array,Bc=fe.isFloat64Array;function xc(t){if(t.length===0||t.length>10)return!0;for(var e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<48||r>57)return!0}return t.length===10&&t>=Math.pow(2,32)}function Or(t){return Object.keys(t).filter(xc).concat(Ir(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function za(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}var Uc=!0,qc=!1,pi=0,Pi=1,Ka=2,Ya=3;function Wc(t,e){return Nc?t.source===e.source&&t.flags===e.flags:RegExp.prototype.toString.call(t)===RegExp.prototype.toString.call(e)}function Gc(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Vc(t,e){return t.byteLength!==e.byteLength?!1:za(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))===0}function Hc(t,e){return t.byteLength===e.byteLength&&za(new Uint8Array(t),new Uint8Array(e))===0}function zc(t,e){return Bo(t)?Bo(e)&&Ha(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):xo(t)?xo(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):Uo(t)?Uo(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):qo(t)?qo(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):Fc(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}function ge(t,e,r,n){if(t===e)return t!==0?!0:r?Ha(t,e):!0;if(r){if(he(t)!=="object")return typeof t=="number"&&ci(t)&&ci(e);if(he(e)!=="object"||t===null||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(t===null||he(t)!=="object")return e===null||he(e)!=="object"?t==e:!1;if(e===null||he(e)!=="object")return!1}var i=Io(t),o=Io(e);if(i!==o)return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var a=Or(t),f=Or(e);return a.length!==f.length?!1:Gt(t,e,r,n,Pi,a)}if(i==="[object Object]"&&(!Rr(t)&&Rr(e)||!kr(t)&&kr(e)))return!1;if(Fo(t)){if(!Fo(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(Do(t)){if(!Do(e)||!Wc(t,e))return!1}else if($c(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else if(Lc(t)){if(!r&&(Dc(t)||Bc(t))){if(!Gc(t,e))return!1}else if(!Vc(t,e))return!1;var u=Or(t),l=Or(e);return u.length!==l.length?!1:Gt(t,e,r,n,pi,u)}else{if(kr(t))return!kr(e)||t.size!==e.size?!1:Gt(t,e,r,n,Ka);if(Rr(t))return!Rr(e)||t.size!==e.size?!1:Gt(t,e,r,n,Ya);if(Mc(t)){if(!Hc(t,e))return!1}else if(Ic(t)&&!zc(t,e))return!1}return Gt(t,e,r,n,pi)}function Wo(t,e){return e.filter(function(r){return Fr(t,r)})}function Gt(t,e,r,n,i,o){if(arguments.length===5){o=Object.keys(t);var a=Object.keys(e);if(o.length!==a.length)return!1}for(var f=0;f<o.length;f++)if(!zt(e,o[f]))return!1;if(r&&arguments.length===5){var u=Ir(t);if(u.length!==0){var l=0;for(f=0;f<u.length;f++){var y=u[f];if(Fr(t,y)){if(!Fr(e,y))return!1;o.push(y),l++}else if(Fr(e,y))return!1}var g=Ir(e);if(u.length!==g.length&&Wo(e,g).length!==l)return!1}else{var b=Ir(e);if(b.length!==0&&Wo(e,b).length!==0)return!1}}if(o.length===0&&(i===pi||i===Pi&&t.length===0||t.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var E=n.val1.get(t);if(E!==void 0){var _=n.val2.get(e);if(_!==void 0)return E===_}n.position++}n.val1.set(t,n.position),n.val2.set(e,n.position);var R=Xc(t,e,r,o,n,i);return n.val1.delete(t),n.val2.delete(e),R}function Go(t,e,r,n){for(var i=Yr(t),o=0;o<i.length;o++){var a=i[o];if(ge(e,a,r,n))return t.delete(a),!0}return!1}function Ja(t){switch(he(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(ci(t))return!1}return!0}function Kc(t,e,r){var n=Ja(r);return n!=null?n:e.has(n)&&!t.has(n)}function Yc(t,e,r,n,i){var o=Ja(r);if(o!=null)return o;var a=e.get(o);return a===void 0&&!e.has(o)||!ge(n,a,!1,i)?!1:!t.has(o)&&ge(n,a,!1,i)}function Jc(t,e,r,n){for(var i=null,o=Yr(t),a=0;a<o.length;a++){var f=o[a];if(he(f)==="object"&&f!==null)i===null&&(i=new Set),i.add(f);else if(!e.has(f)){if(r||!Kc(t,e,f))return!1;i===null&&(i=new Set),i.add(f)}}if(i!==null){for(var u=Yr(e),l=0;l<u.length;l++){var y=u[l];if(he(y)==="object"&&y!==null){if(!Go(i,y,r,n))return!1}else if(!r&&!t.has(y)&&!Go(i,y,r,n))return!1}return i.size===0}return!0}function Vo(t,e,r,n,i,o){for(var a=Yr(t),f=0;f<a.length;f++){var u=a[f];if(ge(r,u,i,o)&&ge(n,e.get(u),i,o))return t.delete(u),!0}return!1}function Qc(t,e,r,n){for(var i=null,o=$o(t),a=0;a<o.length;a++){var f=Mo(o[a],2),u=f[0],l=f[1];if(he(u)==="object"&&u!==null)i===null&&(i=new Set),i.add(u);else{var y=e.get(u);if(y===void 0&&!e.has(u)||!ge(l,y,r,n)){if(r||!Yc(t,e,u,l,n))return!1;i===null&&(i=new Set),i.add(u)}}}if(i!==null){for(var g=$o(e),b=0;b<g.length;b++){var E=Mo(g[b],2),_=E[0],R=E[1];if(he(_)==="object"&&_!==null){if(!Vo(i,t,_,R,r,n))return!1}else if(!r&&(!t.has(_)||!ge(t.get(_),R,!1,n))&&!Vo(i,t,_,R,!1,n))return!1}return i.size===0}return!0}function Xc(t,e,r,n,i,o){var a=0;if(o===Ka){if(!Jc(t,e,r,i))return!1}else if(o===Ya){if(!Qc(t,e,r,i))return!1}else if(o===Pi)for(;a<t.length;a++)if(zt(t,a)){if(!zt(e,a)||!ge(t[a],e[a],r,i))return!1}else{if(zt(e,a))return!1;for(var f=Object.keys(t);a<f.length;a++){var u=f[a];if(!zt(e,u)||!ge(t[u],e[u],r,i))return!1}return f.length===Object.keys(e).length}for(a=0;a<n.length;a++){var l=n[a];if(!ge(t[l],e[l],r,i))return!1}return!0}function Zc(t,e){return ge(t,e,qc)}function ep(t,e){return ge(t,e,Uc)}var tp={isDeepEqual:Zc,isDeepStrictEqual:ep};function Ee(t){return Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(t)}function Ho(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,np(n.key),n)}}function rp(t,e,r){return e&&Ho(t.prototype,e),r&&Ho(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function np(t){var e=ip(t,"string");return Ee(e)==="symbol"?e:String(e)}function ip(t,e){if(Ee(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ee(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function op(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ap=wi,lr=ap.codes,zo=lr.ERR_AMBIGUOUS_ARGUMENT,$t=lr.ERR_INVALID_ARG_TYPE,sp=lr.ERR_INVALID_ARG_VALUE,fp=lr.ERR_INVALID_RETURN_VALUE,Ke=lr.ERR_MISSING_ARGS,Ye=Fl,up=Re,Dr=up.inspect,Qa=Re.types,lp=Qa.isPromise,Jr=Qa.isRegExp,cp=Zl(),Xa=ki(),Qr=rn("RegExp.prototype.test"),ze,an;function cr(){var t=tp;ze=t.isDeepEqual,an=t.isDeepStrictEqual}var Ko=!1,W=or.exports=Ti,sn={};function ke(t){throw t.message instanceof Error?t.message:new Ye(t)}function Za(t,e,r,n,i){var o=arguments.length,a;if(o===0)a="Failed";else if(o===1)r=t,t=void 0;else{if(Ko===!1){Ko=!0;var f=A.process.emitWarning?A.process.emitWarning:console.warn.bind(console);f("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(n="!=")}if(r instanceof Error)throw r;var u={actual:t,expected:e,operator:n===void 0?"fail":n,stackStartFn:i||Za};r!==void 0&&(u.message=r);var l=new Ye(u);throw a&&(l.message=a,l.generatedMessage=!0),l}W.fail=Za;W.AssertionError=Ye;function es(t,e,r,n){if(!r){var i=!1;if(e===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new Ye({actual:r,expected:!0,message:n,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function Ti(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];es.apply(void 0,[Ti,e.length].concat(e))}W.ok=Ti;W.equal=function t(e,r,n){if(arguments.length<2)throw new Ke("actual","expected");e!=r&&ke({actual:e,expected:r,message:n,operator:"==",stackStartFn:t})};W.notEqual=function t(e,r,n){if(arguments.length<2)throw new Ke("actual","expected");e==r&&ke({actual:e,expected:r,message:n,operator:"!=",stackStartFn:t})};W.deepEqual=function t(e,r,n){if(arguments.length<2)throw new Ke("actual","expected");ze===void 0&&cr(),ze(e,r)||ke({actual:e,expected:r,message:n,operator:"deepEqual",stackStartFn:t})};W.notDeepEqual=function t(e,r,n){if(arguments.length<2)throw new Ke("actual","expected");ze===void 0&&cr(),ze(e,r)&&ke({actual:e,expected:r,message:n,operator:"notDeepEqual",stackStartFn:t})};W.deepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Ke("actual","expected");ze===void 0&&cr(),an(e,r)||ke({actual:e,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:t})};W.notDeepStrictEqual=ts;function ts(t,e,r){if(arguments.length<2)throw new Ke("actual","expected");ze===void 0&&cr(),an(t,e)&&ke({actual:t,expected:e,message:r,operator:"notDeepStrictEqual",stackStartFn:ts})}W.strictEqual=function t(e,r,n){if(arguments.length<2)throw new Ke("actual","expected");Xa(e,r)||ke({actual:e,expected:r,message:n,operator:"strictEqual",stackStartFn:t})};W.notStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Ke("actual","expected");Xa(e,r)&&ke({actual:e,expected:r,message:n,operator:"notStrictEqual",stackStartFn:t})};var Yo=rp(function t(e,r,n){var i=this;op(this,t),r.forEach(function(o){o in e&&(n!==void 0&&typeof n[o]=="string"&&Jr(e[o])&&Qr(e[o],n[o])?i[o]=n[o]:i[o]=e[o])})});function pp(t,e,r,n,i,o){if(!(r in t)||!an(t[r],e[r])){if(!n){var a=new Yo(t,i),f=new Yo(e,i,t),u=new Ye({actual:a,expected:f,operator:"deepStrictEqual",stackStartFn:o});throw u.actual=t,u.expected=e,u.operator=o.name,u}ke({actual:t,expected:e,message:n,operator:o.name,stackStartFn:o})}}function rs(t,e,r,n){if(typeof e!="function"){if(Jr(e))return Qr(e,t);if(arguments.length===2)throw new $t("expected",["Function","RegExp"],e);if(Ee(t)!=="object"||t===null){var i=new Ye({actual:t,expected:e,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(e);if(e instanceof Error)o.push("name","message");else if(o.length===0)throw new sp("error",e,"may not be an empty object");return ze===void 0&&cr(),o.forEach(function(a){typeof t[a]=="string"&&Jr(e[a])&&Qr(e[a],t[a])||pp(t,e,a,r,o,n)}),!0}return e.prototype!==void 0&&t instanceof e?!0:Error.isPrototypeOf(e)?!1:e.call({},t)===!0}function ns(t){if(typeof t!="function")throw new $t("fn","Function",t);try{t()}catch(e){return e}return sn}function Jo(t){return lp(t)||t!==null&&Ee(t)==="object"&&typeof t.then=="function"&&typeof t.catch=="function"}function is(t){return Promise.resolve().then(function(){var e;if(typeof t=="function"){if(e=t(),!Jo(e))throw new fp("instance of Promise","promiseFn",e)}else if(Jo(t))e=t;else throw new $t("promiseFn",["Function","Promise"],t);return Promise.resolve().then(function(){return e}).then(function(){return sn}).catch(function(r){return r})})}function os(t,e,r,n){if(typeof r=="string"){if(arguments.length===4)throw new $t("error",["Object","Error","Function","RegExp"],r);if(Ee(e)==="object"&&e!==null){if(e.message===r)throw new zo("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===r)throw new zo("error/message",'The error "'.concat(e,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&Ee(r)!=="object"&&typeof r!="function")throw new $t("error",["Object","Error","Function","RegExp"],r);if(e===sn){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=t.name==="rejects"?"rejection":"exception";ke({actual:void 0,expected:r,operator:t.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:t})}if(r&&!rs(e,r,n,t))throw e}function as(t,e,r,n){if(e!==sn){if(typeof r=="string"&&(n=r,r=void 0),!r||rs(e,r)){var i=n?": ".concat(n):".",o=t.name==="doesNotReject"?"rejection":"exception";ke({actual:e,expected:r,operator:t.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}W.throws=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];os.apply(void 0,[t,ns(e)].concat(n))};W.rejects=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return is(e).then(function(o){return os.apply(void 0,[t,o].concat(n))})};W.doesNotThrow=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];as.apply(void 0,[t,ns(e)].concat(n))};W.doesNotReject=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return is(e).then(function(o){return as.apply(void 0,[t,o].concat(n))})};W.ifError=function t(e){if(e!=null){var r="ifError got unwanted exception: ";Ee(e)==="object"&&typeof e.message=="string"?e.message.length===0&&e.constructor?r+=e.constructor.name:r+=e.message:r+=Dr(e);var n=new Ye({actual:e,expected:null,operator:"ifError",message:r,stackStartFn:t}),i=e.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var a=n.stack.split(`
`),f=0;f<o.length;f++){var u=a.indexOf(o[f]);if(u!==-1){a=a.slice(0,u);break}}n.stack="".concat(a.join(`
`),`
`).concat(o.join(`
`))}throw n}};function ss(t,e,r,n,i){if(!Jr(e))throw new $t("regexp","RegExp",e);var o=i==="match";if(typeof t!="string"||Qr(e,t)!==o){if(r instanceof Error)throw r;var a=!r;r=r||(typeof t!="string"?'The "string" argument must be of type string. Received type '+"".concat(Ee(t)," (").concat(Dr(t),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(Dr(e),`. Input:

`).concat(Dr(t),`
`));var f=new Ye({actual:t,expected:e,message:r,operator:i,stackStartFn:n});throw f.generatedMessage=a,f}}W.match=function t(e,r,n){ss(e,r,n,t,"match")};W.doesNotMatch=function t(e,r,n){ss(e,r,n,t,"doesNotMatch")};function fs(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];es.apply(void 0,[fs,e.length].concat(e))}W.strict=cp(fs,W,{equal:W.strictEqual,deepEqual:W.deepStrictEqual,notEqual:W.notStrictEqual,notDeepEqual:W.notDeepStrictEqual});W.strict.strict=W.strict;var pr={exports:{}},Tt=typeof Reflect=="object"?Reflect:null,Qo=Tt&&typeof Tt.apply=="function"?Tt.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Br;Tt&&typeof Tt.ownKeys=="function"?Br=Tt.ownKeys:Object.getOwnPropertySymbols?Br=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Br=function(e){return Object.getOwnPropertyNames(e)};function hp(t){console&&console.warn&&console.warn(t)}var us=Number.isNaN||function(e){return e!==e};function U(){U.init.call(this)}pr.exports=U;pr.exports.once=vp;U.EventEmitter=U;U.prototype._events=void 0;U.prototype._eventsCount=0;U.prototype._maxListeners=void 0;var Xo=10;function fn(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(U,"defaultMaxListeners",{enumerable:!0,get:function(){return Xo},set:function(t){if(typeof t!="number"||t<0||us(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Xo=t}});U.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};U.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||us(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ls(t){return t._maxListeners===void 0?U.defaultMaxListeners:t._maxListeners}U.prototype.getMaxListeners=function(){return ls(this)};U.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var f=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw f.context=a,f}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")Qo(u,this,r);else for(var l=u.length,y=ys(u,l),n=0;n<l;++n)Qo(y[n],this,r);return!0};function cs(t,e,r,n){var i,o,a;if(fn(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),a===void 0)a=o[e]=r,++t._eventsCount;else if(typeof a=="function"?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=ls(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=a.length,hp(f)}return t}U.prototype.addListener=function(e,r){return cs(this,e,r,!1)};U.prototype.on=U.prototype.addListener;U.prototype.prependListener=function(e,r){return cs(this,e,r,!0)};function dp(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ps(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=dp.bind(n);return i.listener=r,n.wrapFn=i,i}U.prototype.once=function(e,r){return fn(r),this.on(e,ps(this,e,r)),this};U.prototype.prependOnceListener=function(e,r){return fn(r),this.prependListener(e,ps(this,e,r)),this};U.prototype.removeListener=function(e,r){var n,i,o,a,f;if(fn(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){f=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():yp(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,f||r)}return this};U.prototype.off=U.prototype.removeListener;U.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function hs(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?gp(i):ys(i,i.length)}U.prototype.listeners=function(e){return hs(this,e,!0)};U.prototype.rawListeners=function(e){return hs(this,e,!1)};U.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ds.call(t,e)};U.prototype.listenerCount=ds;function ds(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}U.prototype.eventNames=function(){return this._eventsCount>0?Br(this._events):[]};function ys(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function yp(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function gp(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function vp(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,o),n(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}gs(t,e,o,{once:!0}),e!=="error"&&mp(t,i,{once:!0})})}function mp(t,e,r){typeof t.on=="function"&&gs(t,"error",e,r)}function gs(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var vs=pr.exports.EventEmitter;function Zo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ea(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zo(Object(r),!0).forEach(function(n){bp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zo(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bp(t,e,r){return e=ms(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ta(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ms(n.key),n)}}function _p(t,e,r){return e&&ta(t.prototype,e),r&&ta(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ms(t){var e=Sp(t,"string");return typeof e=="symbol"?e:String(e)}function Sp(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ep=Zr,xr=Ep.Buffer,Ap=Re,hi=Ap.inspect,Rp=hi&&hi.custom||"inspect";function kp(t,e,r){xr.prototype.copy.call(t,e,r)}var Op=function(){function t(){wp(this,t),this.head=null,this.tail=null,this.length=0}return _p(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return xr.alloc(0);for(var n=xr.allocUnsafe(r>>>0),i=this.head,o=0;i;)kp(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var a=n.data,f=r>a.length?a.length:r;if(f===a.length?o+=a:o+=a.slice(0,r),r-=f,r===0){f===a.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(f));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=xr.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var a=i.data,f=r>a.length?a.length:r;if(a.copy(n,n.length-r,0,f),r-=f,r===0){f===a.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=a.slice(f));break}++o}return this.length-=o,n}},{key:Rp,value:function(r,n){return hi(this,ea(ea({},n),{},{depth:0,customInspect:!1}))}}]),t}();function jp(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,A.process.nextTick(di,this,t)):A.process.nextTick(di,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?A.process.nextTick(Ur,r):(r._writableState.errorEmitted=!0,A.process.nextTick(ra,r,o)):A.process.nextTick(ra,r,o):e?(A.process.nextTick(Ur,r),e(o)):A.process.nextTick(Ur,r)}),this)}function ra(t,e){di(t,e),Ur(t)}function Ur(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Pp(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function di(t,e){t.emit("error",e)}function Tp(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var bs={destroy:jp,undestroy:Pp,errorOrDestroy:Tp},lt={};function Cp(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var ws={};function me(t,e,r){r||(r=Error);function n(o,a,f){return typeof e=="string"?e:e(o,a,f)}var i=function(o){Cp(a,o);function a(f,u,l){return o.call(this,n(f,u,l))||this}return a}(r);i.prototype.name=r.name,i.prototype.code=t,ws[t]=i}function na(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Np(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Mp(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Lp(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}me("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);me("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&Np(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Mp(t," argument"))i="The ".concat(t," ").concat(n," ").concat(na(e,"type"));else{var o=Lp(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(na(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);me("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");me("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});me("ERR_STREAM_PREMATURE_CLOSE","Premature close");me("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});me("ERR_MULTIPLE_CALLBACK","Callback called multiple times");me("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");me("ERR_STREAM_WRITE_AFTER_END","write after end");me("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);me("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);me("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");lt.codes=ws;var $p=lt.codes.ERR_INVALID_OPT_VALUE;function Ip(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Fp(t,e,r,n){var i=Ip(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new $p(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var _s={getHighWaterMark:Fp},Dp=Bp;function Bp(t,e){if(Bn("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Bn("throwDeprecation"))throw new Error(e);Bn("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Bn(t){try{if(!de.localStorage)return!1}catch{return!1}var e=de.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var Ss=z;function Es(t){var e=this;this.next=null,this.entry=null,this.finish=function(){ph(e,t)}}var Ct;z.WritableState=hr;var xp={deprecate:Dp},As=vs,un=Zr.Buffer,Up=(typeof de!="undefined"?de:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function qp(t){return un.from(t)}function Wp(t){return un.isBuffer(t)||t instanceof Up}var Ci=bs,Gp=_s,Vp=Gp.getHighWaterMark,Je=lt.codes,Hp=Je.ERR_INVALID_ARG_TYPE,zp=Je.ERR_METHOD_NOT_IMPLEMENTED,Kp=Je.ERR_MULTIPLE_CALLBACK,Yp=Je.ERR_STREAM_CANNOT_PIPE,Jp=Je.ERR_STREAM_DESTROYED,Qp=Je.ERR_STREAM_NULL_VALUES,Xp=Je.ERR_STREAM_WRITE_AFTER_END,Zp=Je.ERR_UNKNOWN_ENCODING,It=Ci.errorOrDestroy;Le.exports(z,As);function eh(){}function hr(t,e,r){Ct=Ct||Ft,t=t||{},typeof r!="boolean"&&(r=e instanceof Ct),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Vp(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){sh(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Es(this)}hr.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(hr.prototype,"buffer",{get:xp.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var qr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(qr=Function.prototype[Symbol.hasInstance],Object.defineProperty(z,Symbol.hasInstance,{value:function(e){return qr.call(this,e)?!0:this!==z?!1:e&&e._writableState instanceof hr}})):qr=function(e){return e instanceof this};function z(t){Ct=Ct||Ft;var e=this instanceof Ct;if(!e&&!qr.call(z,this))return new z(t);this._writableState=new hr(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),As.call(this)}z.prototype.pipe=function(){It(this,new Yp)};function th(t,e){var r=new Xp;It(t,r),A.process.nextTick(e,r)}function rh(t,e,r,n){var i;return r===null?i=new Qp:typeof r!="string"&&!e.objectMode&&(i=new Hp("chunk",["string","Buffer"],r)),i?(It(t,i),A.process.nextTick(n,i),!1):!0}z.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&Wp(t);return o&&!un.isBuffer(t)&&(t=qp(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=eh),n.ending?th(this,r):(o||rh(this,n,t,r))&&(n.pendingcb++,i=ih(this,n,o,t,e,r)),i};z.prototype.cork=function(){this._writableState.corked++};z.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Rs(this,t))};z.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Zp(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function nh(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=un.from(e,r)),e}Object.defineProperty(z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ih(t,e,r,n,i,o){if(!r){var a=nh(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var f=e.objectMode?1:n.length;e.length+=f;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else yi(t,e,!1,f,n,i,o);return u}function yi(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Jp("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function oh(t,e,r,n,i){--e.pendingcb,r?(A.process.nextTick(i,n),A.process.nextTick(nr,t,e),t._writableState.errorEmitted=!0,It(t,n)):(i(n),t._writableState.errorEmitted=!0,It(t,n),nr(t,e))}function ah(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function sh(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Kp;if(ah(r),e)oh(t,r,n,e,i);else{var o=ks(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Rs(t,r),n?A.process.nextTick(ia,t,r,o,i):ia(t,r,o,i)}}function ia(t,e,r,n){r||fh(t,e),e.pendingcb--,n(),nr(t,e)}function fh(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Rs(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,f=!0;r;)i[a]=r,r.isBuf||(f=!1),r=r.next,a+=1;i.allBuffers=f,yi(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Es(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,y=r.callback,g=e.objectMode?1:u.length;if(yi(t,e,!1,g,u,l,y),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}z.prototype._write=function(t,e,r){r(new zp("_write()"))};z.prototype._writev=null;z.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||ch(this,n,r),this};Object.defineProperty(z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ks(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function uh(t,e){t._final(function(r){e.pendingcb--,r&&It(t,r),e.prefinished=!0,t.emit("prefinish"),nr(t,e)})}function lh(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,A.process.nextTick(uh,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function nr(t,e){var r=ks(e);if(r&&(lh(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function ch(t,e,r){e.ending=!0,nr(t,e),r&&(e.finished?A.process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function ph(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});z.prototype.destroy=Ci.destroy;z.prototype._undestroy=Ci.undestroy;z.prototype._destroy=function(t,e){e(t)};var hh=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},Ft=Pe,Os=Ps,gi=Ss;Le.exports(Pe,Os);for(var oa=hh(gi.prototype),xn=0;xn<oa.length;xn++){var Un=oa[xn];Pe.prototype[Un]||(Pe.prototype[Un]=gi.prototype[Un])}function Pe(t){if(!(this instanceof Pe))return new Pe(t);Os.call(this,t),gi.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",dh)))}Object.defineProperty(Pe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Pe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Pe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function dh(){this._writableState.ended||A.process.nextTick(yh,this)}function yh(t){t.end()}Object.defineProperty(Pe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var Ni={},vi={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Zr,n=r.Buffer;function i(a,f){for(var u in a)f[u]=a[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o);function o(a,f,u){return n(a,f,u)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(a,f,u){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,f,u)},o.alloc=function(a,f,u){if(typeof a!="number")throw new TypeError("Argument must be a number");var l=n(a);return f!==void 0?typeof u=="string"?l.fill(f,u):l.fill(f):l.fill(0),l},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(vi,vi.exports);var Mi=vi.exports.Buffer,aa=Mi.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function gh(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function vh(t){var e=gh(t);if(typeof e!="string"&&(Mi.isEncoding===aa||!aa(t)))throw new Error("Unknown encoding: "+t);return e||t}Ni.StringDecoder=dr;function dr(t){this.encoding=vh(t);var e;switch(this.encoding){case"utf16le":this.text=Eh,this.end=Ah,e=4;break;case"utf8":this.fillLast=wh,e=4;break;case"base64":this.text=Rh,this.end=kh,e=3;break;default:this.write=Oh,this.end=jh;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Mi.allocUnsafe(e)}dr.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};dr.prototype.end=Sh;dr.prototype.text=_h;dr.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function qn(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function mh(t,e,r){var n=e.length-1;if(n<r)return 0;var i=qn(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=qn(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=qn(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function bh(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function wh(t){var e=this.lastTotal-this.lastNeed,r=bh(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function _h(t,e){var r=mh(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Sh(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Eh(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Ah(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Rh(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function kh(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Oh(t){return t.toString(this.encoding)}function jh(t){return t&&t.length?this.write(t):""}var sa=lt.codes.ERR_STREAM_PREMATURE_CLOSE;function Ph(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function Th(){}function Ch(t){return t.setHeader&&typeof t.abort=="function"}function js(t,e,r){if(typeof e=="function")return js(t,null,e);e||(e={}),r=Ph(r||Th);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||f()},a=t._writableState&&t._writableState.finished,f=function(){i=!1,a=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,u=!0,i||r.call(t)},y=function(_){r.call(t,_)},g=function(){var _;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(_=new sa),r.call(t,_);if(i&&!a)return(!t._writableState||!t._writableState.ended)&&(_=new sa),r.call(t,_)},b=function(){t.req.on("finish",f)};return Ch(t)?(t.on("complete",f),t.on("abort",g),t.req?b():t.on("request",b)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",l),t.on("finish",f),e.error!==!1&&t.on("error",y),t.on("close",g),function(){t.removeListener("complete",f),t.removeListener("abort",g),t.removeListener("request",b),t.req&&t.req.removeListener("finish",f),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",f),t.removeListener("end",l),t.removeListener("error",y),t.removeListener("close",g)}}var Li=js,jr;function qe(t,e,r){return e=Nh(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nh(t){var e=Mh(t,"string");return typeof e=="symbol"?e:String(e)}function Mh(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lh=Li,We=Symbol("lastResolve"),tt=Symbol("lastReject"),Xt=Symbol("error"),Xr=Symbol("ended"),nt=Symbol("lastPromise"),$i=Symbol("handlePromise"),it=Symbol("stream");function Ge(t,e){return{value:t,done:e}}function $h(t){var e=t[We];if(e!==null){var r=t[it].read();r!==null&&(t[nt]=null,t[We]=null,t[tt]=null,e(Ge(r,!1)))}}function Ih(t){A.process.nextTick($h,t)}function Fh(t,e){return function(r,n){t.then(function(){if(e[Xr]){r(Ge(void 0,!0));return}e[$i](r,n)},n)}}var Dh=Object.getPrototypeOf(function(){}),Bh=Object.setPrototypeOf((jr={get stream(){return this[it]},next:function(){var e=this,r=this[Xt];if(r!==null)return Promise.reject(r);if(this[Xr])return Promise.resolve(Ge(void 0,!0));if(this[it].destroyed)return new Promise(function(a,f){A.process.nextTick(function(){e[Xt]?f(e[Xt]):a(Ge(void 0,!0))})});var n=this[nt],i;if(n)i=new Promise(Fh(n,this));else{var o=this[it].read();if(o!==null)return Promise.resolve(Ge(o,!1));i=new Promise(this[$i])}return this[nt]=i,i}},qe(jr,Symbol.asyncIterator,function(){return this}),qe(jr,"return",function(){var e=this;return new Promise(function(r,n){e[it].destroy(null,function(i){if(i){n(i);return}r(Ge(void 0,!0))})})}),jr),Dh),xh=function(e){var r,n=Object.create(Bh,(r={},qe(r,it,{value:e,writable:!0}),qe(r,We,{value:null,writable:!0}),qe(r,tt,{value:null,writable:!0}),qe(r,Xt,{value:null,writable:!0}),qe(r,Xr,{value:e._readableState.endEmitted,writable:!0}),qe(r,$i,{value:function(o,a){var f=n[it].read();f?(n[nt]=null,n[We]=null,n[tt]=null,o(Ge(f,!1))):(n[We]=o,n[tt]=a)},writable:!0}),r));return n[nt]=null,Lh(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[tt];o!==null&&(n[nt]=null,n[We]=null,n[tt]=null,o(i)),n[Xt]=i;return}var a=n[We];a!==null&&(n[nt]=null,n[We]=null,n[tt]=null,a(Ge(void 0,!0))),n[Xr]=!0}),e.on("readable",Ih.bind(null,n)),n},Uh=xh,qh=function(){throw new Error("Readable.from is not available in the browser")},Ps=F,Nt;F.ReadableState=Cs;pr.exports.EventEmitter;var Ts=function(e,r){return e.listeners(r).length},yr=vs,ln=Zr.Buffer,Wh=(typeof de!="undefined"?de:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function Gh(t){return ln.from(t)}function Vh(t){return ln.isBuffer(t)||t instanceof Wh}var Wn=Re,P;Wn&&Wn.debuglog?P=Wn.debuglog("stream"):P=function(){};var Hh=Op,Ii=bs,zh=_s,Kh=zh.getHighWaterMark,cn=lt.codes,Yh=cn.ERR_INVALID_ARG_TYPE,Jh=cn.ERR_STREAM_PUSH_AFTER_EOF,Qh=cn.ERR_METHOD_NOT_IMPLEMENTED,Xh=cn.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Mt,Gn,Vn;Le.exports(F,yr);var Zt=Ii.errorOrDestroy,Hn=["error","close","destroy","pause","resume"];function Zh(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Cs(t,e,r){Nt=Nt||Ft,t=t||{},typeof r!="boolean"&&(r=e instanceof Nt),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Kh(this,t,"readableHighWaterMark",r),this.buffer=new Hh,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Mt||(Mt=Ni.StringDecoder),this.decoder=new Mt(t.encoding),this.encoding=t.encoding)}function F(t){if(Nt=Nt||Ft,!(this instanceof F))return new F(t);var e=this instanceof Nt;this._readableState=new Cs(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),yr.call(this)}Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});F.prototype.destroy=Ii.destroy;F.prototype._undestroy=Ii.undestroy;F.prototype._destroy=function(t,e){e(t)};F.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=ln.from(t,e),e=""),n=!0),Ns(this,t,e,!1,n)};F.prototype.unshift=function(t){return Ns(this,t,null,!0,!1)};function Ns(t,e,r,n,i){P("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,rd(t,o);else{var a;if(i||(a=ed(o,e)),a)Zt(t,a);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==ln.prototype&&(e=Gh(e)),n)o.endEmitted?Zt(t,new Xh):zn(t,o,e,!0);else if(o.ended)Zt(t,new Jh);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?zn(t,o,e,!1):mi(t,o)):zn(t,o,e,!1)}else n||(o.reading=!1,mi(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function zn(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&pn(t)),mi(t,e)}function ed(t,e){var r;return!Vh(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Yh("chunk",["string","Buffer","Uint8Array"],e)),r}F.prototype.isPaused=function(){return this._readableState.flowing===!1};F.prototype.setEncoding=function(t){Mt||(Mt=Ni.StringDecoder);var e=new Mt(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var fa=1073741824;function td(t){return t>=fa?t=fa:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function ua(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=td(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}F.prototype.read=function(t){P("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return P("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Kn(this):pn(this),null;if(t=ua(t,e),t===0&&e.ended)return e.length===0&&Kn(this),null;var n=e.needReadable;P("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,P("length less than watermark",n)),e.ended||e.reading?(n=!1,P("reading or ended",n)):n&&(P("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=ua(r,e)));var i;return t>0?i=$s(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Kn(this)),i!==null&&this.emit("data",i),i};function rd(t,e){if(P("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?pn(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Ms(t)))}}function pn(t){var e=t._readableState;P("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(P("emitReadable",e.flowing),e.emittedReadable=!0,A.process.nextTick(Ms,t))}function Ms(t){var e=t._readableState;P("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Fi(t)}function mi(t,e){e.readingMore||(e.readingMore=!0,A.process.nextTick(nd,t,e))}function nd(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(P("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}F.prototype._read=function(t){Zt(this,new Qh("_read()"))};F.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,P("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==A.process.stdout&&t!==A.process.stderr,o=i?f:R;n.endEmitted?A.process.nextTick(o):r.once("end",o),t.on("unpipe",a);function a(B,T){P("onunpipe"),B===r&&T&&T.hasUnpiped===!1&&(T.hasUnpiped=!0,y())}function f(){P("onend"),t.end()}var u=id(r);t.on("drain",u);var l=!1;function y(){P("cleanup"),t.removeListener("close",E),t.removeListener("finish",_),t.removeListener("drain",u),t.removeListener("error",b),t.removeListener("unpipe",a),r.removeListener("end",f),r.removeListener("end",R),r.removeListener("data",g),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",g);function g(B){P("ondata");var T=t.write(B);P("dest.write",T),T===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&Is(n.pipes,t)!==-1)&&!l&&(P("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function b(B){P("onerror",B),R(),t.removeListener("error",b),Ts(t,"error")===0&&Zt(t,B)}Zh(t,"error",b);function E(){t.removeListener("finish",_),R()}t.once("close",E);function _(){P("onfinish"),t.removeListener("close",E),R()}t.once("finish",_);function R(){P("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(P("pipe resume"),r.resume()),t};function id(t){return function(){var r=t._readableState;P("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Ts(t,"data")&&(r.flowing=!0,Fi(t))}}F.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=Is(e.pipes,t);return a===-1?this:(e.pipes.splice(a,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};F.prototype.on=function(t,e){var r=yr.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,P("on readable",n.length,n.reading),n.length?pn(this):n.reading||A.process.nextTick(od,this)),r};F.prototype.addListener=F.prototype.on;F.prototype.removeListener=function(t,e){var r=yr.prototype.removeListener.call(this,t,e);return t==="readable"&&A.process.nextTick(Ls,this),r};F.prototype.removeAllListeners=function(t){var e=yr.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&A.process.nextTick(Ls,this),e};function Ls(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function od(t){P("readable nexttick read 0"),t.read(0)}F.prototype.resume=function(){var t=this._readableState;return t.flowing||(P("resume"),t.flowing=!t.readableListening,ad(this,t)),t.paused=!1,this};function ad(t,e){e.resumeScheduled||(e.resumeScheduled=!0,A.process.nextTick(sd,t,e))}function sd(t,e){P("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Fi(t),e.flowing&&!e.reading&&t.read(0)}F.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Fi(t){var e=t._readableState;for(P("flow",e.flowing);e.flowing&&t.read()!==null;);}F.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(P("wrapped end"),r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&e.push(a)}e.push(null)}),t.on("data",function(a){if(P("wrapped data"),r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var f=e.push(a);f||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(f){return function(){return t[f].apply(t,arguments)}}(i));for(var o=0;o<Hn.length;o++)t.on(Hn[o],this.emit.bind(this,Hn[o]));return this._read=function(a){P("wrapped _read",a),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(F.prototype[Symbol.asyncIterator]=function(){return Gn===void 0&&(Gn=Uh),Gn(this)});Object.defineProperty(F.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(F.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(F.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});F._fromList=$s;Object.defineProperty(F.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function $s(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Kn(t){var e=t._readableState;P("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,A.process.nextTick(fd,e,t))}function fd(t,e){if(P("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(F.from=function(t,e){return Vn===void 0&&(Vn=qh),Vn(F,t,e)});function Is(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var Fs=$e,hn=lt.codes,ud=hn.ERR_METHOD_NOT_IMPLEMENTED,ld=hn.ERR_MULTIPLE_CALLBACK,cd=hn.ERR_TRANSFORM_ALREADY_TRANSFORMING,pd=hn.ERR_TRANSFORM_WITH_LENGTH_0,dn=Ft;Le.exports($e,dn);function hd(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new ld);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function $e(t){if(!(this instanceof $e))return new $e(t);dn.call(this,t),this._transformState={afterTransform:hd.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",dd)}function dd(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){la(t,e,r)}):la(this,null,null)}$e.prototype.push=function(t,e){return this._transformState.needTransform=!1,dn.prototype.push.call(this,t,e)};$e.prototype._transform=function(t,e,r){r(new ud("_transform()"))};$e.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};$e.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};$e.prototype._destroy=function(t,e){dn.prototype._destroy.call(this,t,function(r){e(r)})};function la(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new pd;if(t._transformState.transforming)throw new cd;return t.push(null)}var yd=ir,Ds=Fs;Le.exports(ir,Ds);function ir(t){if(!(this instanceof ir))return new ir(t);Ds.call(this,t)}ir.prototype._transform=function(t,e,r){r(null,t)};var Yn;function gd(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Bs=lt.codes,vd=Bs.ERR_MISSING_ARGS,md=Bs.ERR_STREAM_DESTROYED;function ca(t){if(t)throw t}function bd(t){return t.setHeader&&typeof t.abort=="function"}function wd(t,e,r,n){n=gd(n);var i=!1;t.on("close",function(){i=!0}),Yn===void 0&&(Yn=Li),Yn(t,{readable:e,writable:r},function(a){if(a)return n(a);i=!0,n()});var o=!1;return function(a){if(!i&&!o){if(o=!0,bd(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(a||new md("pipe"))}}}function pa(t){t()}function _d(t,e){return t.pipe(e)}function Sd(t){return!t.length||typeof t[t.length-1]!="function"?ca:t.pop()}function Ed(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Sd(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new vd("streams");var i,o=e.map(function(a,f){var u=f<e.length-1,l=f>0;return wd(a,u,l,function(y){i||(i=y),y&&o.forEach(pa),!u&&(o.forEach(pa),n(i))})});return e.reduce(_d)}var Ad=Ed,Rd=ve,Di=pr.exports.EventEmitter,kd=Le.exports;kd(ve,Di);ve.Readable=Ps;ve.Writable=Ss;ve.Duplex=Ft;ve.Transform=Fs;ve.PassThrough=yd;ve.finished=Li;ve.pipeline=Ad;ve.Stream=ve;function ve(){Di.call(this)}ve.prototype.pipe=function(t,e){var r=this;function n(y){t.writable&&t.write(y)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",a),r.on("close",f));var o=!1;function a(){o||(o=!0,t.end())}function f(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function u(y){if(l(),Di.listenerCount(this,"error")===0)throw y}r.on("error",u),t.on("error",u);function l(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",f),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};var Wr=or.exports,Od=Rd.Stream,jd=Re,Pd=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;function Jn(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ue(t,e,r,n,i){throw new Wr.AssertionError({message:jd.format("%s (%s) is required",t,e),actual:i===void 0?typeof n:i(n),expected:e,operator:r||"===",stackStartFunction:Ue.caller})}function Qn(t){return Object.prototype.toString.call(t).slice(8,-1)}function At(){}var Vt={bool:{check:function(t){return typeof t=="boolean"}},func:{check:function(t){return typeof t=="function"}},string:{check:function(t){return typeof t=="string"}},object:{check:function(t){return typeof t=="object"&&t!==null}},number:{check:function(t){return typeof t=="number"&&!isNaN(t)}},finite:{check:function(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}},buffer:{check:function(t){return A.Buffer.isBuffer(t)},operator:"Buffer.isBuffer"},array:{check:function(t){return Array.isArray(t)},operator:"Array.isArray"},stream:{check:function(t){return t instanceof Od},operator:"instanceof",actual:Qn},date:{check:function(t){return t instanceof Date},operator:"instanceof",actual:Qn},regexp:{check:function(t){return t instanceof RegExp},operator:"instanceof",actual:Qn},uuid:{check:function(t){return typeof t=="string"&&Pd.test(t)},operator:"isUUID"}};function xs(t){var e=Object.keys(Vt),r;return{}.NODE_NDEBUG?r=At:r=function(n,i){n||Ue(i,"true",n)},e.forEach(function(n){if(t){r[n]=At;return}var i=Vt[n];r[n]=function(o,a){i.check(o)||Ue(a,n,i.operator,o,i.actual)}}),e.forEach(function(n){var i="optional"+Jn(n);if(t){r[i]=At;return}var o=Vt[n];r[i]=function(a,f){a!=null&&(o.check(a)||Ue(f,n,o.operator,a,o.actual))}}),e.forEach(function(n){var i="arrayOf"+Jn(n);if(t){r[i]=At;return}var o=Vt[n],a="["+n+"]";r[i]=function(f,u){Array.isArray(f)||Ue(u,a,o.operator,f,o.actual);var l;for(l=0;l<f.length;l++)o.check(f[l])||Ue(u,a,o.operator,f,o.actual)}}),e.forEach(function(n){var i="optionalArrayOf"+Jn(n);if(t){r[i]=At;return}var o=Vt[n],a="["+n+"]";r[i]=function(f,u){if(f!=null){Array.isArray(f)||Ue(u,a,o.operator,f,o.actual);var l;for(l=0;l<f.length;l++)o.check(f[l])||Ue(u,a,o.operator,f,o.actual)}}}),Object.keys(Wr).forEach(function(n){if(n==="AssertionError"){r[n]=Wr[n];return}if(t){r[n]=At;return}r[n]=Wr[n]}),r._setExports=xs,r}var Td=xs({}.NODE_NDEBUG),yn={},Kt=or.exports,Cd=Re;yn.sprintf=Bi;yn.printf=Nd;yn.fprintf=Us;function Bi(t){var e=["([^%]*)","%","(['\\-+ #0]*?)","([1-9]\\d*)?","(\\.([1-9]\\d*))?","[lhjztL]*?","([diouxXfFeEgGaAcCsSp%jr])"].join(""),r=new RegExp(e),n=Array.prototype.slice.call(arguments,1),i=t,o,a,f,u,l,y,g,b,E,_="",R=1,B=0,T,q;for(Kt.equal("string",typeof i,"first argument must be a format string");(E=r.exec(i))!==null;){if(_+=E[1],i=i.substring(E[0].length),q=E[0].substring(E[1].length),T=B+E[1].length+1,B+=E[0].length,o=E[2]||"",a=E[3]||0,f=E[4]||"",u=E[6],l=!1,g=!1,y=" ",u=="%"){_+="%";continue}if(n.length===0)throw Ht(t,T,q,"has no matching argument (too few arguments passed)");if(b=n.shift(),R++,o.match(/[\' #]/))throw Ht(t,T,q,"uses unsupported flags");if(f.length>0)throw Ht(t,T,q,"uses non-zero precision (not supported)");switch(o.match(/-/)&&(l=!0),o.match(/0/)&&(y="0"),o.match(/\+/)&&(g=!0),u){case"s":if(b==null)throw Ht(t,T,q,"attempted to print undefined or null as a string (argument "+R+" to sprintf)");_+=Xn(y,a,l,b.toString());break;case"d":b=Math.floor(b);case"f":g=g&&b>0?"+":"",_+=g+Xn(y,a,l,b.toString());break;case"x":_+=Xn(y,a,l,b.toString(16));break;case"j":a===0&&(a=10),_+=Cd.inspect(b,!1,a);break;case"r":_+=qs(b);break;default:throw Ht(t,T,q,"is not supported")}}return _+=i,_}function Ht(t,e,r,n){return Kt.equal(typeof t,"string"),Kt.equal(typeof r,"string"),Kt.equal(typeof e,"number"),Kt.equal(typeof n,"string"),new Error('format string "'+t+'": conversion specifier "'+r+'" at character '+e+" "+n)}function Nd(){var t=Array.prototype.slice.call(arguments);t.unshift(A.process.stdout),Us.apply(null,t)}function Us(t){var e=Array.prototype.slice.call(arguments,1);return t.write(Bi.apply(this,e))}function Xn(t,e,r,n){for(var i=n;i.length<e;)r?i+=t:i=t+i;return i}function qs(t){var e;if(!(t instanceof Error))throw new Error(Bi("invalid type for %%r: %j",t));if(e="EXCEPTION: "+t.constructor.name+": "+t.stack,t.cause&&typeof t.cause=="function"){var r=t.cause();r&&(e+=`
Caused by: `+qs(r))}return e}var ie={};function Md(t){return Array.isArray?Array.isArray(t):gn(t)==="[object Array]"}ie.isArray=Md;function Ld(t){return typeof t=="boolean"}ie.isBoolean=Ld;function $d(t){return t===null}ie.isNull=$d;function Id(t){return t==null}ie.isNullOrUndefined=Id;function Fd(t){return typeof t=="number"}ie.isNumber=Fd;function Dd(t){return typeof t=="string"}ie.isString=Dd;function Bd(t){return typeof t=="symbol"}ie.isSymbol=Bd;function xd(t){return t===void 0}ie.isUndefined=xd;function Ud(t){return gn(t)==="[object RegExp]"}ie.isRegExp=Ud;function qd(t){return typeof t=="object"&&t!==null}ie.isObject=qd;function Wd(t){return gn(t)==="[object Date]"}ie.isDate=Wd;function Gd(t){return gn(t)==="[object Error]"||t instanceof Error}ie.isError=Gd;function Vd(t){return typeof t=="function"}ie.isFunction=Vd;function Hd(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t=="undefined"}ie.isPrimitive=Hd;ie.isBuffer=A.Buffer.isBuffer;function gn(t){return Object.prototype.toString.call(t)}var K=Td,vn=Re,zd=yn,Ae=ie.isError,Kd=zd.sprintf,re=I;I.VError=I;I.SError=er;I.WError=Ve;I.MultiError=Dt;function xi(t){var e,r,n,i,o;if(K.object(t,"args"),K.bool(t.strict,"args.strict"),K.array(t.argv,"args.argv"),e=t.argv,e.length===0)r={},n=[];else if(Ae(e[0]))r={cause:e[0]},n=e.slice(1);else if(typeof e[0]=="object"){r={};for(o in e[0])r[o]=e[0][o];n=e.slice(1)}else K.string(e[0],"first argument to VError, SError, or WError constructor must be a string, object, or Error"),r={},n=e;return K.object(r),!r.strict&&!t.strict&&(n=n.map(function(a){return a===null?"null":a===void 0?"undefined":a})),n.length===0?i="":i=Kd.apply(null,n),{options:r,shortmessage:i}}function I(){var t,e,r,n,i,o,a;if(t=Array.prototype.slice.call(arguments,0),!(this instanceof I))return e=Object.create(I.prototype),I.apply(e,arguments),e;if(r=xi({argv:t,strict:!1}),r.options.name&&(K.string(r.options.name,`error's "name" must be a string`),this.name=r.options.name),this.jse_shortmsg=r.shortmessage,o=r.shortmessage,n=r.options.cause,n&&(K.ok(Ae(n),"cause is not an Error"),this.jse_cause=n,r.options.skipCauseMessage||(o+=": "+n.message)),this.jse_info={},r.options.info)for(a in r.options.info)this.jse_info[a]=r.options.info[a];return this.message=o,Error.call(this,o),Error.captureStackTrace&&(i=r.options.constructorOpt||this.constructor,Error.captureStackTrace(this,i)),this}vn.inherits(I,Error);I.prototype.name="VError";I.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),e};I.prototype.cause=function(){var e=I.cause(this);return e===null?void 0:e};I.cause=function(t){return K.ok(Ae(t),"err must be an Error"),Ae(t.jse_cause)?t.jse_cause:null};I.info=function(t){var e,r,n;if(K.ok(Ae(t),"err must be an Error"),r=I.cause(t),r!==null?e=I.info(r):e={},typeof t.jse_info=="object"&&t.jse_info!==null)for(n in t.jse_info)e[n]=t.jse_info[n];return e};I.findCauseByName=function(t,e){var r;for(K.ok(Ae(t),"err must be an Error"),K.string(e,"name"),K.ok(e.length>0,"name cannot be empty"),r=t;r!==null;r=I.cause(r))if(K.ok(Ae(r)),r.name==e)return r;return null};I.hasCauseWithName=function(t,e){return I.findCauseByName(t,e)!==null};I.fullStack=function(t){K.ok(Ae(t),"err must be an Error");var e=I.cause(t);return e?t.stack+`
caused by: `+I.fullStack(e):t.stack};I.errorFromList=function(t){return K.arrayOfObject(t,"errors"),t.length===0?null:(t.forEach(function(e){K.ok(Ae(e))}),t.length==1?t[0]:new Dt(t))};I.errorForEach=function(t,e){K.ok(Ae(t),"err must be an Error"),K.func(e,"func"),t instanceof Dt?t.errors().forEach(function(n){e(n)}):e(t)};function er(){var t,e,r,n;return t=Array.prototype.slice.call(arguments,0),this instanceof er?(r=xi({argv:t,strict:!0}),n=r.options,I.call(this,n,"%s",r.shortmessage),this):(e=Object.create(er.prototype),er.apply(e,arguments),e)}vn.inherits(er,I);function Dt(t){K.array(t,"list of errors"),K.ok(t.length>0,"must be at least one error"),this.ase_errors=t,I.call(this,{cause:t[0]},"first of %d error%s",t.length,t.length==1?"":"s")}vn.inherits(Dt,I);Dt.prototype.name="MultiError";Dt.prototype.errors=function(){return this.ase_errors.slice(0)};function Ve(){var t,e,r,n;return t=Array.prototype.slice.call(arguments,0),this instanceof Ve?(r=xi({argv:t,strict:!1}),n=r.options,n.skipCauseMessage=!0,I.call(this,n,"%s",r.shortmessage),this):(e=Object.create(Ve.prototype),Ve.apply(e,t),e)}vn.inherits(Ve,I);Ve.prototype.name="WError";Ve.prototype.toString=function(){var e=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e+=": "+this.message),this.jse_cause&&this.jse_cause.message&&(e+="; caused by "+this.jse_cause.toString()),e};Ve.prototype.cause=function(e){return Ae(e)&&(this.jse_cause=e),this.jse_cause};const xe={White:"white",Black:"black",Draw:"draw",Forfeit:"forfeit",ForfeitWhite:"forfeit-white",ForfeitBlack:"forfeit-black"};class w{constructor(e,r){this.x=e,this.y=r}clone(){return new w(this.x,this.y)}}var bi={exports:{}};(function(t,e){var r=200,n="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",f="[object Boolean]",u="[object Date]",l="[object Error]",y="[object Function]",g="[object GeneratorFunction]",b="[object Map]",E="[object Number]",_="[object Object]",R="[object Promise]",B="[object RegExp]",T="[object Set]",q="[object String]",V="[object Symbol]",oe="[object WeakMap]",ne="[object ArrayBuffer]",G="[object DataView]",k="[object Float32Array]",Y="[object Float64Array]",ae="[object Int8Array]",Te="[object Int16Array]",Oe="[object Int32Array]",ce="[object Uint8Array]",ct="[object Uint8ClampedArray]",be="[object Uint16Array]",Ie="[object Uint32Array]",Fe=/[\\^$.*+?()[\]{}|]/g,Ut=/\w*$/,De=/^\[object .+?Constructor\]$/,we=/^(?:0|[1-9]\d*)$/,L={};L[o]=L[a]=L[ne]=L[G]=L[f]=L[u]=L[k]=L[Y]=L[ae]=L[Te]=L[Oe]=L[b]=L[E]=L[_]=L[B]=L[T]=L[q]=L[V]=L[ce]=L[ct]=L[be]=L[Ie]=!0,L[l]=L[y]=L[oe]=!1;var pt=typeof de=="object"&&de&&de.Object===Object&&de,p=typeof self=="object"&&self&&self.Object===Object&&self,h=pt||p||Function("return this")(),m=e&&!e.nodeType&&e,O=m&&!0&&t&&!t.nodeType&&t,$=O&&O.exports===m;function D(s,c){return s.set(c[0],c[1]),s}function j(s,c){return s.add(c),s}function N(s,c){for(var d=-1,S=s?s.length:0;++d<S&&c(s[d],d,s)!==!1;);return s}function x(s,c){for(var d=-1,S=c.length,J=s.length;++d<S;)s[J+d]=c[d];return s}function Z(s,c,d,S){var J=-1,se=s?s.length:0;for(S&&se&&(d=s[++J]);++J<se;)d=c(d,s[J],J,s);return d}function Ce(s,c){for(var d=-1,S=Array(s);++d<s;)S[d]=c(d);return S}function ht(s,c){return s==null?void 0:s[c]}function Ne(s){var c=!1;if(s!=null&&typeof s.toString!="function")try{c=!!(s+"")}catch{}return c}function Qe(s){var c=-1,d=Array(s.size);return s.forEach(function(S,J){d[++c]=[J,S]}),d}function dt(s,c){return function(d){return s(c(d))}}function gr(s){var c=-1,d=Array(s.size);return s.forEach(function(S){d[++c]=S}),d}var mn=Array.prototype,v=Function.prototype,yt=Object.prototype,vr=h["__core-js_shared__"],Wi=function(){var s=/[^.]+$/.exec(vr&&vr.keys&&vr.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Gi=v.toString,Be=yt.hasOwnProperty,mr=yt.toString,Hs=RegExp("^"+Gi.call(Be).replace(Fe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vi=$?h.Buffer:void 0,Hi=h.Symbol,zi=h.Uint8Array,zs=dt(Object.getPrototypeOf,Object),Ks=Object.create,Ys=yt.propertyIsEnumerable,Js=mn.splice,Ki=Object.getOwnPropertySymbols,Qs=Vi?Vi.isBuffer:void 0,Xs=dt(Object.keys,Object),bn=mt(h,"DataView"),qt=mt(h,"Map"),wn=mt(h,"Promise"),_n=mt(h,"Set"),Sn=mt(h,"WeakMap"),Wt=mt(Object,"create"),Zs=et(bn),ef=et(qt),tf=et(wn),rf=et(_n),nf=et(Sn),Yi=Hi?Hi.prototype:void 0,Ji=Yi?Yi.valueOf:void 0;function Xe(s){var c=-1,d=s?s.length:0;for(this.clear();++c<d;){var S=s[c];this.set(S[0],S[1])}}function of(){this.__data__=Wt?Wt(null):{}}function af(s){return this.has(s)&&delete this.__data__[s]}function sf(s){var c=this.__data__;if(Wt){var d=c[s];return d===n?void 0:d}return Be.call(c,s)?c[s]:void 0}function ff(s){var c=this.__data__;return Wt?c[s]!==void 0:Be.call(c,s)}function uf(s,c){var d=this.__data__;return d[s]=Wt&&c===void 0?n:c,this}Xe.prototype.clear=of,Xe.prototype.delete=af,Xe.prototype.get=sf,Xe.prototype.has=ff,Xe.prototype.set=uf;function Me(s){var c=-1,d=s?s.length:0;for(this.clear();++c<d;){var S=s[c];this.set(S[0],S[1])}}function lf(){this.__data__=[]}function cf(s){var c=this.__data__,d=br(c,s);if(d<0)return!1;var S=c.length-1;return d==S?c.pop():Js.call(c,d,1),!0}function pf(s){var c=this.__data__,d=br(c,s);return d<0?void 0:c[d][1]}function hf(s){return br(this.__data__,s)>-1}function df(s,c){var d=this.__data__,S=br(d,s);return S<0?d.push([s,c]):d[S][1]=c,this}Me.prototype.clear=lf,Me.prototype.delete=cf,Me.prototype.get=pf,Me.prototype.has=hf,Me.prototype.set=df;function gt(s){var c=-1,d=s?s.length:0;for(this.clear();++c<d;){var S=s[c];this.set(S[0],S[1])}}function yf(){this.__data__={hash:new Xe,map:new(qt||Me),string:new Xe}}function gf(s){return wr(this,s).delete(s)}function vf(s){return wr(this,s).get(s)}function mf(s){return wr(this,s).has(s)}function bf(s,c){return wr(this,s).set(s,c),this}gt.prototype.clear=yf,gt.prototype.delete=gf,gt.prototype.get=vf,gt.prototype.has=mf,gt.prototype.set=bf;function vt(s){this.__data__=new Me(s)}function wf(){this.__data__=new Me}function _f(s){return this.__data__.delete(s)}function Sf(s){return this.__data__.get(s)}function Ef(s){return this.__data__.has(s)}function Af(s,c){var d=this.__data__;if(d instanceof Me){var S=d.__data__;if(!qt||S.length<r-1)return S.push([s,c]),this;d=this.__data__=new gt(S)}return d.set(s,c),this}vt.prototype.clear=wf,vt.prototype.delete=_f,vt.prototype.get=Sf,vt.prototype.has=Ef,vt.prototype.set=Af;function Rf(s,c){var d=Rn(s)||Yf(s)?Ce(s.length,String):[],S=d.length,J=!!S;for(var se in s)(c||Be.call(s,se))&&!(J&&(se=="length"||Vf(se,S)))&&d.push(se);return d}function Qi(s,c,d){var S=s[c];(!(Be.call(s,c)&&to(S,d))||d===void 0&&!(c in s))&&(s[c]=d)}function br(s,c){for(var d=s.length;d--;)if(to(s[d][0],c))return d;return-1}function kf(s,c){return s&&Xi(c,kn(c),s)}function En(s,c,d,S,J,se,pe){var ue;if(S&&(ue=se?S(s,J,se,pe):S(s)),ue!==void 0)return ue;if(!_r(s))return s;var io=Rn(s);if(io){if(ue=qf(s),!c)return Bf(s,ue)}else{var bt=Ze(s),oo=bt==y||bt==g;if(Qf(s))return Nf(s,c);if(bt==_||bt==o||oo&&!se){if(Ne(s))return se?s:{};if(ue=Wf(oo?{}:s),!c)return xf(s,kf(ue,s))}else{if(!L[bt])return se?s:{};ue=Gf(s,bt,En,c)}}pe||(pe=new vt);var ao=pe.get(s);if(ao)return ao;if(pe.set(s,ue),!io)var so=d?Uf(s):kn(s);return N(so||s,function(On,Sr){so&&(Sr=On,On=s[Sr]),Qi(ue,Sr,En(On,c,d,S,Sr,s,pe))}),ue}function Of(s){return _r(s)?Ks(s):{}}function jf(s,c,d){var S=c(s);return Rn(s)?S:x(S,d(s))}function Pf(s){return mr.call(s)}function Tf(s){if(!_r(s)||zf(s))return!1;var c=no(s)||Ne(s)?Hs:De;return c.test(et(s))}function Cf(s){if(!eo(s))return Xs(s);var c=[];for(var d in Object(s))Be.call(s,d)&&d!="constructor"&&c.push(d);return c}function Nf(s,c){if(c)return s.slice();var d=new s.constructor(s.length);return s.copy(d),d}function An(s){var c=new s.constructor(s.byteLength);return new zi(c).set(new zi(s)),c}function Mf(s,c){var d=c?An(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.byteLength)}function Lf(s,c,d){var S=c?d(Qe(s),!0):Qe(s);return Z(S,D,new s.constructor)}function $f(s){var c=new s.constructor(s.source,Ut.exec(s));return c.lastIndex=s.lastIndex,c}function If(s,c,d){var S=c?d(gr(s),!0):gr(s);return Z(S,j,new s.constructor)}function Ff(s){return Ji?Object(Ji.call(s)):{}}function Df(s,c){var d=c?An(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.length)}function Bf(s,c){var d=-1,S=s.length;for(c||(c=Array(S));++d<S;)c[d]=s[d];return c}function Xi(s,c,d,S){d||(d={});for(var J=-1,se=c.length;++J<se;){var pe=c[J],ue=S?S(d[pe],s[pe],pe,d,s):void 0;Qi(d,pe,ue===void 0?s[pe]:ue)}return d}function xf(s,c){return Xi(s,Zi(s),c)}function Uf(s){return jf(s,kn,Zi)}function wr(s,c){var d=s.__data__;return Hf(c)?d[typeof c=="string"?"string":"hash"]:d.map}function mt(s,c){var d=ht(s,c);return Tf(d)?d:void 0}var Zi=Ki?dt(Ki,Object):eu,Ze=Pf;(bn&&Ze(new bn(new ArrayBuffer(1)))!=G||qt&&Ze(new qt)!=b||wn&&Ze(wn.resolve())!=R||_n&&Ze(new _n)!=T||Sn&&Ze(new Sn)!=oe)&&(Ze=function(s){var c=mr.call(s),d=c==_?s.constructor:void 0,S=d?et(d):void 0;if(S)switch(S){case Zs:return G;case ef:return b;case tf:return R;case rf:return T;case nf:return oe}return c});function qf(s){var c=s.length,d=s.constructor(c);return c&&typeof s[0]=="string"&&Be.call(s,"index")&&(d.index=s.index,d.input=s.input),d}function Wf(s){return typeof s.constructor=="function"&&!eo(s)?Of(zs(s)):{}}function Gf(s,c,d,S){var J=s.constructor;switch(c){case ne:return An(s);case f:case u:return new J(+s);case G:return Mf(s,S);case k:case Y:case ae:case Te:case Oe:case ce:case ct:case be:case Ie:return Df(s,S);case b:return Lf(s,S,d);case E:case q:return new J(s);case B:return $f(s);case T:return If(s,S,d);case V:return Ff(s)}}function Vf(s,c){return c=c==null?i:c,!!c&&(typeof s=="number"||we.test(s))&&s>-1&&s%1==0&&s<c}function Hf(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function zf(s){return!!Wi&&Wi in s}function eo(s){var c=s&&s.constructor,d=typeof c=="function"&&c.prototype||yt;return s===d}function et(s){if(s!=null){try{return Gi.call(s)}catch{}try{return s+""}catch{}}return""}function Kf(s){return En(s,!0,!0)}function to(s,c){return s===c||s!==s&&c!==c}function Yf(s){return Jf(s)&&Be.call(s,"callee")&&(!Ys.call(s,"callee")||mr.call(s)==o)}var Rn=Array.isArray;function ro(s){return s!=null&&Xf(s.length)&&!no(s)}function Jf(s){return Zf(s)&&ro(s)}var Qf=Qs||tu;function no(s){var c=_r(s)?mr.call(s):"";return c==y||c==g}function Xf(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=i}function _r(s){var c=typeof s;return!!s&&(c=="object"||c=="function")}function Zf(s){return!!s&&typeof s=="object"}function kn(s){return ro(s)?Rf(s):Cf(s)}function eu(){return[]}function tu(){return!1}t.exports=Kf})(bi,bi.exports);var Pr=bi.exports;const Yd=t=>{let e=0;const r=[],n=(o,a)=>{r.push(a),e+=o},i=o=>{let a="",f=e;for(;;){const u=t[f];if(f>=t.length||o(u)){f--;break}a+=u,f++}return a};for(;e<t.length;){const o=t[e];if(o===">"){n(1,{kind:"allegiance"});continue}if(o==="/"){n(1,{kind:"separator"});continue}if(/\d/gu.test(o)){const a=i(f=>!/[\d]/gu.test(f));n(a.length,{kind:"number",value:Number.parseInt(a,10)});continue}if(o===" "){n(1,{kind:"space"});continue}if(o==="-"||o==="\u2013"){n(1,{kind:"hyphen"});continue}n(1,{kind:"char",value:o})}return r},Jd=t=>{switch(t){case"a":return 1;case"b":return 2;case"c":return 3;case"d":return 4;case"e":return 5;case"f":return 6;case"g":return 7;case"h":return 8;default:throw new re(`Cannot map file "${t}" to number`)}},ha=t=>{switch(t){case 1:return"a";case 2:return"b";case 3:return"c";case 4:return"d";case 5:return"e";case 6:return"f";case 7:return"g";case 8:return"h";default:throw new re(`Cannot map "${t}" to file`)}},Qd=t=>["B","K","N","Q","R"].includes(t),Xd=t=>["b","k","n","q","r"].includes(t),Zd=t=>["a","b","c","d","e","f","g","h"].includes(t),ey=t=>typeof t=="number"&&t>0&&t<=8;var Ws=(t=>(t[t.Ranks=0]="Ranks",t[t.ActiveColour=1]="ActiveColour",t[t.CastlingRights=2]="CastlingRights",t[t.EnPassantTargets=3]="EnPassantTargets",t[t.HalfmoveClock=4]="HalfmoveClock",t[t.FullmoveNumber=5]="FullmoveNumber",t))(Ws||{});class da{constructor(){this.allegianceMark=!1,this.castlingRights=[]}canSetPieceSide(){return!this.pieceSide}setPieceSide(e){if(!this.canSetPieceSide())throw new re("Cannot set piece side on WipNode, because it's already set");this.pieceSide=e}canSetPiece(){return!this.piece&&this.piece!==null}setPiece(e){if(!this.canSetPiece())throw new re("Cannot set piece on WipNode, because there is already one set");this.piece=e}canSetAllegianceMark(){return!this.allegianceMark}addAllegianceMark(){if(!this.canSetAllegianceMark())throw new re("Allegiance mark already set");this.allegianceMark=!0}pieceDataReady(){return!this.canSetPiece()&&!this.canSetPieceSide()}setActiveColour(e){this.activeColour=e}hasCastlingRights(){return this.castlingRights.length!==0}addCastlingRight(e){this.castlingRights.push(e)}canSetEnPassantFile(){return!this.enPassantFile}setEnPassantFile(e){if(!this.canSetEnPassantFile())throw new re("Cannot set en passant file on WipNode, because there is already one set");this.enPassantFile=e}canSetEnPassantRank(){return!this.enPassantRank}setEnPassantRank(e){if(!this.canSetEnPassantRank())throw new re("Cannot set en passant rank on WipNode, because there is already one set");this.enPassantRank=e}canSetHalfmoveClock(){return typeof this.halfmoveClock!="number"}setHalfmoveClock(e){this.halfmoveClock=e}canSetFullmoveNumber(){return typeof this.fullmoveNumber!="number"}setFullmoveNumber(e){this.fullmoveNumber=e}isEnPassantType(){return!!(this.enPassantFile&&this.enPassantRank)}toNode(){if(this.piece||this.piece===null)return this.pieceSide==="white"?{kind:"piece",value:{allegiance:this.allegianceMark?ye.LightGrey:ye.White,piece:this.piece?this.piece.toUpperCase():null}}:{kind:"piece",value:{allegiance:this.allegianceMark?ye.DarkGrey:ye.Black,piece:this.piece?this.piece.toUpperCase():null}};if(this.activeColour)return{kind:"active-colour",value:this.activeColour};if(this.castlingRights.length>0){const e=[],r=[];return this.castlingRights.includes("K")&&r.push("king"),this.castlingRights.includes("Q")&&r.push("queen"),this.castlingRights.includes("k")&&e.push("king"),this.castlingRights.includes("q")&&e.push("queen"),{kind:"castling-rights",value:{black:e,white:r}}}if(this.enPassantFile&&this.enPassantRank)return{kind:"en-passant-targets",value:{file:this.enPassantFile,rank:this.enPassantRank}};if(typeof this.halfmoveClock=="number")return{kind:"halfmove-clock",value:this.halfmoveClock};if(typeof this.fullmoveNumber=="number")return{kind:"fullmove-number",value:this.fullmoveNumber};throw new re(`Cannot create Node from WipNode, ${JSON.stringify({...this},null,2)}`)}}const ty=t=>{const e={kind:"ast",children:[]};let r=0,n=0,i=new da;const o=u=>{e.children.push(u),r++},a=()=>{e.children.push(i.toNode()),i=new da},f=u=>{n=u,r++};for(;r<t.length;){const u=t[r],l=t[r+1];if(n===0){if((u.kind==="char"||u.kind==="number"||u.kind==="separator"||u.kind==="space")&&i.pieceDataReady()&&a(),u.kind==="char"&&Xd(u.value)){i.setPieceSide("black"),i.setPiece(u.value),l||a(),r++;continue}if(u.kind==="char"&&Qd(u.value)){i.setPieceSide("white"),i.setPiece(u.value),l||a(),r++;continue}if(u.kind==="char"&&u.value==="p"){i.setPieceSide("black"),i.setPiece(null),l||a(),r++;continue}if(u.kind==="char"&&u.value==="P"){i.setPieceSide("white"),i.setPiece(null),l||a(),r++;continue}if(u.kind==="allegiance"){i.addAllegianceMark(),r++,l||a();continue}if(u.kind==="number"&&u.value>0&&u.value<=8){o({kind:"skip",value:u.value});continue}}switch(n){case 0:{if(u.kind==="separator"){r++;continue}if(u.kind==="space"){n=1,r++;continue}break}case 1:{if(u.kind==="char"&&u.value==="w"){i.setActiveColour("white"),r++;continue}if(u.kind==="char"&&u.value==="b"){i.setActiveColour("black"),r++;continue}if(u.kind==="space"){a(),f(2);continue}break}case 2:{if(u.kind==="char"&&(u.value==="q"||u.value==="Q"||u.value==="k"||u.value==="K")){i.addCastlingRight(u.value),r++;continue}if(u.kind==="hyphen"){r++;continue}if(u.kind==="space"){i.hasCastlingRights()&&a(),f(3);continue}break}case 3:{if(u.kind==="hyphen"){r++;continue}if(u.kind==="char"&&Zd(u.value)){i.setEnPassantFile(Jd(u.value)),r++;continue}if(u.kind==="number"&&ey(u.value)){i.setEnPassantRank(u.value),r++;continue}if(u.kind==="space"){i.isEnPassantType()&&a(),f(4);continue}break}case 4:{if(u.kind==="number"){i.setHalfmoveClock(u.value),r++;continue}if(u.kind==="space"){a(),f(5);continue}break}case 5:{u.kind==="number"&&(i.setFullmoveNumber(u.value),r++,a());continue}}throw new re(`Unhandled token: ${u.kind}, cursor ${r}, state: ${Ws[n]}`)}return e},H=t=>t===ye.Black||t==ye.DarkGrey?"black":"white";class Ui{constructor(){this.memory=[],this.clear()}clone(){const e=new Ui;return e.memory=Pr(this.memory),e.activeColour=this.activeColour,e.enPassantTarget=Pr(this.enPassantTarget),e._castlingRights=Pr(this._castlingRights),e.halfmoveClock=this.halfmoveClock,e.fullmoveNumber=this.fullmoveNumber,e.moveHistory=Pr(this.moveHistory),e}removeCastlingRights(e,r){const n=this._castlingRights.findIndex(i=>i.colour===e&&i.side===r);n!==-1&&this._castlingRights.splice(n,1)}castlingRights(e){return this._castlingRights.filter(r=>r.colour===e).map(r=>r.side)}clear(){this.memory=[],this.activeColour="white",this.enPassantTarget=null,this._castlingRights=[],this.halfmoveClock=0,this.fullmoveNumber=0,this.moveHistory=[];for(let e=0;e<8;e++){this.memory[e]=[];for(let r=0;r<8;r++)this.memory[e][r]=null}}dump(){const e=this.getSquares(),r=Array.from({length:8}).map(()=>Array.from({length:8}).map(()=>"."));let n="";e.filter(Boolean).forEach(i=>{var o,a,f,u;r[i.rank-1][i.file-1]=H(i.allegiance)==="white"?(a=(o=i.piece)==null?void 0:o.toUpperCase())!=null?a:"P":(u=(f=i.piece)==null?void 0:f.toLowerCase())!=null?u:"p"});for(let i=7;i>=0;i--)n+=`${i+1} `,n+=r[i].map(o=>o).join(" "),n+=`
`;return n+=`  ${r[0].map((i,o)=>ha(o+1)).join(" ")}`,n}getSquares(){const e=[];return this.memory.forEach((r,n)=>{r.forEach((i,o)=>{if(!i){e.push(null);return}e.push({allegiance:i.allegiance,piece:i.piece,file:o+1,rank:n+1})})}),e}getSquare(e){if(!e)throw new re.VError("Attempted to get square with no coordinates");return this.memory[e.rank-1][e.file-1]}setSquare(e,r){this.memory[e.rank-1][e.file-1]=r}toAFEN(){const e=[],r=this.castlingRights("black"),n=this.castlingRights("white");let i=0;for(let f=this.memory.length-1;f>=0;f--){const u=this.memory[f];let l="";u.forEach(y=>{var R,B;if(!y){i++;return}i&&(l+=`${i}`,i=0);const g=H(y.allegiance),b=y.allegiance===ye.DarkGrey||y.allegiance===ye.LightGrey,E=g==="white"?"P":"p";l+=(g==="white"?(R=y.piece)==null?void 0:R.toUpperCase():(B=y.piece)==null?void 0:B.toLowerCase())||E,b&&(l+=">")}),i&&(l+=`${i}`,i=0),e.push(l)}let o="";r.includes("king")&&(o+="k"),r.includes("queen")&&(o+="q"),n.includes("king")&&(o+="K"),n.includes("queen")&&(o+="Q");const a=this.enPassantTarget?`${ha(this.enPassantTarget.file)}${this.enPassantTarget.rank}`:"-";return[e.join("/"),this.activeColour==="white"?"w":"b",o||"-",a,this.halfmoveClock,this.fullmoveNumber].join(" ")}importAFEN(e){this.clear();const r=Yd(e),n=ty(r);let i=8,o=1;n.children.forEach(a=>{var f;if(o>8&&(i--,o=1),a.kind==="piece"){this.setSquare({file:o,rank:i},a.value),o++;return}if(a.kind==="skip"){o+=a.value;return}if(a.kind==="en-passant-targets"){this.enPassantTarget=a.value;return}if(a.kind==="castling-rights"){a.value.black.forEach(u=>{this._castlingRights.push({colour:"black",side:u})}),a.value.white.forEach(u=>{this._castlingRights.push({colour:"white",side:u})});return}if(a.kind==="active-colour"){this.activeColour=a.value;return}if(a.kind==="fullmove-number"){this.fullmoveNumber=a.value;return}if(a.kind==="halfmove-clock"){this.halfmoveClock=a.value;return}throw new re.VError(`Unhandled node while importing AFEN: ${(f=a.kind)!=null?f:JSON.stringify(a,null,2)}`)})}}const Q=(t,e)=>t&&e&&t.file===e.file&&t.rank===e.rank,Rt=(t,e)=>t.rank===(e==="white"?8:1),ye={Black:0,DarkGrey:1,LightGrey:2,White:3},ry=["B","N","Q","R"];class Gs{clone(){const e=new Gs;return e.memory=this.memory.clone(),e}dump(){return this.memory.dump()}importAFEN(e){this.memory.importAFEN(e)}toAFEN(){return this.memory.toAFEN()}getSquares(){return this.memory.getSquares()}get enPassantTarget(){return this.memory.enPassantTarget}get activeColour(){return this.memory.activeColour}get halfmoveClock(){return this.memory.halfmoveClock}get fullmoveNumber(){return this.memory.fullmoveNumber}get castlingRights(){return{black:this.memory.castlingRights("black"),white:this.memory.castlingRights("white")}}constructor(){this.memory=new Ui}executeAllegianceMoveNode(e){this.memory.setSquare(e.node.to,{allegiance:e.fromSide==="white"?e.to.allegiance+1:e.to.allegiance-1,piece:e.to.piece})}executeCaptureMoveNode(e){this.memory.setSquare(e.node.to,e.from),this.memory.setSquare(e.node.from,null)}executeCastleMoveNode(e){const r=e.node.from,n=e.node.to,i=e.from;if(e.to)throw new re(`Castling cannot cause a capture on ${JSON.stringify(e.node.to)}`);this.memory.setSquare(n,i),this.memory.setSquare(r,null);const a=e.fromSide==="white"?1:8,f=e.node.side==="king"?{file:8,rank:a}:{file:1,rank:a},u=e.node.side==="king"?{file:6,rank:a}:{file:4,rank:a};this.memory.setSquare(u,this.memory.getSquare(f)),this.memory.setSquare(f,null)}executeEnPassantMoveNode(e){this.memory.setSquare({rank:e.fromSide==="white"?e.node.to.rank-1:e.node.to.rank+1,file:e.node.to.file},null),this.memory.setSquare(e.node.to,e.from),this.memory.setSquare(e.node.from,null)}executePromotionMoveNode(e){this.memory.setSquare(e.node.to,{allegiance:e.from.allegiance,piece:e.node.promotionTo}),this.memory.setSquare(e.node.from,null)}executeDefaultMoveNode(e){this.memory.setSquare(e.node.from,null),this.memory.setSquare(e.node.to,e.from),e.node.piece===null&&Math.abs(e.node.from.rank-e.node.to.rank)===2&&(this.memory.enPassantTarget={file:e.node.from.file,rank:e.fromSide==="white"?e.node.from.rank+1:e.node.from.rank-1})}executeMoveNode(e){if(!e.from.file)throw new re(`Cannot execute node without "from.file": ${JSON.stringify(e,null,2)}`);const r=this.memory.getSquare(e.from),n=this.memory.getSquare(e.to);if(!r)throw new re(`There is no piece on file ${e.from.file} rank ${e.from.rank}`);r.piece==="K"&&(this.memory.removeCastlingRights(this.activeColour,"king"),this.memory.removeCastlingRights(this.activeColour,"queen")),r.piece==="R"&&e.from.file===8&&this.memory.removeCastlingRights(this.activeColour,"king"),r.piece==="R"&&e.from.file===1&&this.memory.removeCastlingRights(this.activeColour,"queen"),this.memory.enPassantTarget=null;const i=H(r.allegiance),o=n?H(n.allegiance):null;switch(e.type){case"allegiance":this.executeAllegianceMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"capture":this.executeCaptureMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"castle":this.executeCastleMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"en-passant":this.executeEnPassantMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;case"promotion":this.executePromotionMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break;default:this.executeDefaultMoveNode({from:r,to:n,fromSide:i,toSide:o,node:e});break}this.memory.activeColour==="black"&&this.memory.halfmoveClock++,this.memory.fullmoveNumber++,this.memory.activeColour=this.memory.activeColour==="white"?"black":"white"}executeNode(e){switch(e.kind){case"move":{this.executeMoveNode(e);break}}this.memory.moveHistory.push(e)}executeMoveIndex(e){if(e<0)throw new re(`Move index must be positive, got ${e}`);const n=this.getValidMoves().at(e);if(!n)throw new re(`Move with index ${e} does not exist`);this.executeNode(n)}getSquare(e){return this.memory.getSquare(e)}findMoveIndex(e){const r=this.getValidMoves();let n=r;return e.kind==="draw-offer"&&(n=n.filter(i=>i.kind==="draw-offer")),e.kind==="game-over"&&(n=n.filter(i=>i.kind==="game-over"&&i.outcome===e.outcome)),e.kind==="move"&&(e.to&&Object.keys(e.to).length===2&&(n=n.filter(i=>i.kind==="move"&&Q(i.to,e.to))),e.from&&Object.keys(e.from).length===2&&(n=n.filter(i=>i.kind==="move"&&Q(i.from,e.from))),e.type&&(n=n.filter(i=>"type"in i&&i.type===e.type)),e.piece||e.piece===null?n=n.filter(i=>i.kind==="move"&&i.piece===e.piece):n.length>1&&!e.piece&&(n=n.filter(i=>i.kind==="move"&&i.piece===null)),e.type==="promotion"&&(n=n.filter(i=>"promotionTo"in i&&i.promotionTo===e.promotionTo&&Q(i.to,e.to)&&Q(i.from,e.from)))),n.length===1?r.indexOf(n[0]):-1}getCoordsRelative(e,r){const n={file:e.file+r.x,rank:e.rank+r.y};return n.file>8||n.file<=0||n.rank>8||n.rank<=0?null:n}traceCaptureSteps(e,r){if(Math.abs(r.x)!==Math.abs(r.y)&&r.x!==0&&r.y!==0)throw new re("Cannot trace in a non-continuous direction");const n=this.memory.getSquare(e);if(!n)return[];const i=[],o=new w(Math.sign(r.x),Math.sign(r.y));let a=e;for(;a=this.getCoordsRelative(a,o),!!a;){const f=this.memory.getSquare(a);if(!f){i.push({...a});continue}if(H(f.allegiance)===H(n.allegiance))break;if(H(f.allegiance)!==H(n.allegiance)){i.push({...a});break}i.push({...a})}return i}getAttackedCoordsBySide(e){const r=this.memory.getSquares().filter(i=>i&&H(i.allegiance)===e),n=[];return r.forEach(i=>{n.push(...this.getAttackedCoordsByCoords(i))}),n}getAttackedCoordsByCoords(e){const r=[],n=this.memory.getSquare(e);if(!n)return r;const i=H(n.allegiance);if(n.piece===null){const o=this.getCoordsRelative(e,new w(i==="white"?-1:1,i==="white"?1:-1)),a=this.getCoordsRelative(e,new w(i==="white"?1:-1,i==="white"?1:-1));return[o,a]}return n.piece==="R"?[...this.traceCaptureSteps(e,new w(1,0)),...this.traceCaptureSteps(e,new w(-1,0)),...this.traceCaptureSteps(e,new w(0,1)),...this.traceCaptureSteps(e,new w(0,-1))].filter(Boolean):n.piece==="N"?[this.getCoordsRelative(e,new w(1,2)),this.getCoordsRelative(e,new w(2,1)),this.getCoordsRelative(e,new w(2,-1)),this.getCoordsRelative(e,new w(1,-2)),this.getCoordsRelative(e,new w(-1,-2)),this.getCoordsRelative(e,new w(-2,-1)),this.getCoordsRelative(e,new w(-2,1)),this.getCoordsRelative(e,new w(-1,2))].filter(Boolean):n.piece==="B"?[...this.traceCaptureSteps(e,new w(1,1)),...this.traceCaptureSteps(e,new w(1,-1)),...this.traceCaptureSteps(e,new w(-1,-1)),...this.traceCaptureSteps(e,new w(-1,1))].filter(Boolean):n.piece==="Q"?[...this.traceCaptureSteps(e,new w(1,0)),...this.traceCaptureSteps(e,new w(-1,0)),...this.traceCaptureSteps(e,new w(0,1)),...this.traceCaptureSteps(e,new w(0,-1)),...this.traceCaptureSteps(e,new w(1,1)),...this.traceCaptureSteps(e,new w(1,-1)),...this.traceCaptureSteps(e,new w(-1,-1)),...this.traceCaptureSteps(e,new w(-1,1))].filter(Boolean):n.piece==="K"?[this.getCoordsRelative(e,new w(0,1)),this.getCoordsRelative(e,new w(1,1)),this.getCoordsRelative(e,new w(1,0)),this.getCoordsRelative(e,new w(1,-1)),this.getCoordsRelative(e,new w(0,-1)),this.getCoordsRelative(e,new w(-1,-1)),this.getCoordsRelative(e,new w(-1,0)),this.getCoordsRelative(e,new w(-1,1))].filter(Boolean):r}getPossibleMoves(){const e=[],r=this.memory.getSquares(),n=this.getAttackedCoordsBySide(this.activeColour==="white"?"black":"white");return this.memory.moveHistory.some(o=>o.kind==="game-over")||(this.memory.activeColour==="black"&&e.push({kind:"game-over",outcome:xe.White},{kind:"game-over",outcome:xe.Draw},{kind:"game-over",outcome:xe.Forfeit},{kind:"game-over",outcome:xe.ForfeitWhite}),this.memory.activeColour==="white"&&e.push({kind:"game-over",outcome:xe.Black},{kind:"game-over",outcome:xe.Draw},{kind:"game-over",outcome:xe.Forfeit},{kind:"game-over",outcome:xe.ForfeitBlack}),e.push({kind:"draw-offer"})),r.forEach(o=>{if(!o)return;const a=H(o.allegiance);if(o.piece===null){const f=this.getCoordsRelative(o,new w(0,a==="white"?1:-1)),u=this.getCoordsRelative(o,new w(a==="white"?-1:1,a==="white"?1:-1)),l=this.getCoordsRelative(o,new w(a==="white"?1:-1,a==="white"?1:-1)),y=g=>ry.map(b=>({kind:"move",type:"promotion",from:o,to:g,piece:this.memory.getSquare(o).piece,promotionTo:b}));if(this.memory.enPassantTarget&&u&&Q(this.memory.enPassantTarget,u)&&!Rt(u,a)&&e.push({kind:"move",type:"en-passant",from:o,to:this.memory.enPassantTarget,piece:this.memory.getSquare(o).piece}),this.memory.enPassantTarget&&l&&Q(this.memory.enPassantTarget,l)&&!Rt(l,a)&&e.push({kind:"move",type:"en-passant",from:o,to:this.memory.enPassantTarget,piece:this.memory.getSquare(o).piece}),f&&!this.memory.getSquare(f)&&!Rt(f,a)&&e.push({kind:"move",type:null,piece:this.memory.getSquare(o).piece,from:o,to:f}),u){const g=this.memory.getSquare(u);g&&H(g.allegiance)!==a&&(Rt(u,a)?e.push(...y(u)):e.push({kind:"move",type:"capture",from:o,to:u,piece:this.memory.getSquare(o).piece},{kind:"move",type:"allegiance",from:o,to:u,piece:this.memory.getSquare(o).piece}))}if(l){const g=this.memory.getSquare(l);g&&H(g.allegiance)!==a&&(Rt(l,a)?e.push(...y(l)):e.push({kind:"move",type:"capture",from:o,to:l,piece:this.memory.getSquare(o).piece},{kind:"move",type:"allegiance",from:o,to:l,piece:this.memory.getSquare(o).piece}))}if(o.rank===2&&a==="white"||o.rank===7&&a==="black"){const g=this.getCoordsRelative(o,new w(0,a==="white"?2:-2));!this.memory.getSquare(f)&&!this.memory.getSquare(g)&&e.push({kind:"move",type:null,from:o,to:g,piece:this.memory.getSquare(o).piece})}Rt(f,a)&&e.push(...y(f))}if(o.piece==="R"){const f=[...this.traceCaptureSteps(o,new w(1,0)),...this.traceCaptureSteps(o,new w(-1,0)),...this.traceCaptureSteps(o,new w(0,1)),...this.traceCaptureSteps(o,new w(0,-1))];e.push(...f.map(u=>{const l=this.memory.getSquare(u);return{kind:"move",type:l?"capture":null,from:o,to:u,piece:o.piece}}),...f.map(u=>this.memory.getSquare(u)?{kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}:null).filter(Boolean))}if(o.piece==="N"&&[this.getCoordsRelative(o,new w(1,2)),this.getCoordsRelative(o,new w(2,1)),this.getCoordsRelative(o,new w(2,-1)),this.getCoordsRelative(o,new w(1,-2)),this.getCoordsRelative(o,new w(-1,-2)),this.getCoordsRelative(o,new w(-2,-1)),this.getCoordsRelative(o,new w(-2,1)),this.getCoordsRelative(o,new w(-1,2))].filter(Boolean).forEach(u=>{const l=this.memory.getSquare(u);l&&H(l.allegiance)===a||(e.push({kind:"move",type:l?"capture":null,from:o,to:u,piece:o.piece}),l&&e.push({kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}))}),o.piece==="B"){const f=[...this.traceCaptureSteps(o,new w(1,1)),...this.traceCaptureSteps(o,new w(1,-1)),...this.traceCaptureSteps(o,new w(-1,-1)),...this.traceCaptureSteps(o,new w(-1,1))];e.push(...f.map(u=>{const l=this.memory.getSquare(u);return{kind:"move",type:l?"capture":null,from:o,to:u,piece:o.piece}}),...f.map(u=>this.memory.getSquare(u)?{kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}:null).filter(Boolean))}if(o.piece==="Q"){const f=[...this.traceCaptureSteps(o,new w(1,0)),...this.traceCaptureSteps(o,new w(-1,0)),...this.traceCaptureSteps(o,new w(0,1)),...this.traceCaptureSteps(o,new w(0,-1)),...this.traceCaptureSteps(o,new w(1,1)),...this.traceCaptureSteps(o,new w(1,-1)),...this.traceCaptureSteps(o,new w(-1,-1)),...this.traceCaptureSteps(o,new w(-1,1))];e.push(...f.map(u=>{const l=this.memory.getSquare(u);return{kind:"move",type:l?"capture":null,from:o,to:u,piece:o.piece}}),...f.map(u=>this.memory.getSquare(u)?{kind:"move",type:"allegiance",from:o,to:u,piece:o.piece}:null).filter(Boolean))}if(o.piece==="K"){[this.getCoordsRelative(o,new w(0,1)),this.getCoordsRelative(o,new w(1,1)),this.getCoordsRelative(o,new w(1,0)),this.getCoordsRelative(o,new w(1,-1)),this.getCoordsRelative(o,new w(0,-1)),this.getCoordsRelative(o,new w(-1,-1)),this.getCoordsRelative(o,new w(-1,0)),this.getCoordsRelative(o,new w(-1,1))].filter(Boolean).forEach(g=>{const b=this.memory.getSquare(g);b&&H(b.allegiance)===a||(e.push({kind:"move",type:b?"capture":null,from:o,to:g,piece:o.piece}),b&&e.push({kind:"move",type:"allegiance",from:o,to:g,piece:o.piece}))});const u=this.memory.castlingRights("white"),l=n.some(g=>Q(o,g));if(this.activeColour==="white"&&u.length>0){const g=this.memory.getSquare({file:1,rank:1}),b=this.memory.getSquare({file:2,rank:1}),E=this.memory.getSquare({file:3,rank:1}),_=this.memory.getSquare({file:4,rank:1}),R=this.memory.getSquare({file:6,rank:1}),B=this.memory.getSquare({file:7,rank:1}),T=this.memory.getSquare({file:8,rank:1}),q=n.some(k=>Q(k,{file:2,rank:1})),V=n.some(k=>Q(k,{file:3,rank:1})),oe=n.some(k=>Q(k,{file:4,rank:1})),ne=n.some(k=>Q(k,{file:6,rank:1})),G=n.some(k=>Q(k,{file:7,rank:1}));u.forEach(k=>{k==="king"&&!l&&!R&&!B&&T&&T.piece==="R"&&H(T.allegiance)==="white"&&!ne&&!G&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new w(2,0)),piece:this.memory.getSquare(o).piece,side:"king"}),k==="queen"&&!l&&!b&&!E&&!_&&g&&g.piece==="R"&&H(g.allegiance)==="white"&&!q&&!V&&!oe&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new w(-2,0)),piece:this.memory.getSquare(o).piece,side:"queen"})})}const y=this.memory.castlingRights("black");if(this.activeColour==="black"&&y.length>0){const g=this.memory.getSquare({file:1,rank:8}),b=this.memory.getSquare({file:2,rank:8}),E=this.memory.getSquare({file:3,rank:8}),_=this.memory.getSquare({file:4,rank:8}),R=this.memory.getSquare({file:6,rank:8}),B=this.memory.getSquare({file:7,rank:8}),T=this.memory.getSquare({file:8,rank:8}),q=n.some(k=>Q(k,{file:2,rank:8})),V=n.some(k=>Q(k,{file:3,rank:8})),oe=n.some(k=>Q(k,{file:4,rank:8})),ne=n.some(k=>Q(k,{file:6,rank:8})),G=n.some(k=>Q(k,{file:7,rank:8}));y.forEach(k=>{k==="king"&&!l&&!R&&!B&&T&&T.piece==="R"&&H(T.allegiance)==="black"&&!ne&&!G&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new w(2,0)),piece:this.memory.getSquare(o).piece,side:"king"}),k==="queen"&&!l&&!b&&!E&&!_&&g&&g.piece==="R"&&H(g.allegiance)==="black"&&!q&&!V&&!oe&&e.push({kind:"move",type:"castle",from:o,to:this.getCoordsRelative(o,new w(-2,0)),piece:this.memory.getSquare(o).piece,side:"queen"})})}}}),e}getCheckMoves(){return this.getPossibleMoves().filter(r=>{if(r.kind!=="move"||!r.to)return;const n=this.memory.getSquare(r.to);return n&&n.piece==="K"})}getValidMoves(e){return this.getPossibleMoves().filter(n=>{if(n.kind!=="move")return!0;if(e&&!Q(e,n.from))return!1;const i=this.memory.getSquare(n.from);if(H(i.allegiance)!==this.memory.activeColour)return!1;const o=this.clone();return o.executeNode(n),o.getCheckMoves().every(f=>{if(f.kind!=="move")return!1;const u=o.memory.getSquare(f.to);return H(u.allegiance)!==this.memory.activeColour})})}}const qi=t=>(en("data-v-0af0cd9c"),t=t(),tn(),t),ny={xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 46 46"},iy={opacity:"1",fill:"none","fill-rule":"evenodd","fill-opacity":"1",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1",transform:"translate(0,0.6)"},oy=qi(()=>M("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"},null,-1)),ay=qi(()=>M("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"},null,-1)),sy=qi(()=>M("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"},null,-1)),fy=[oy,ay,sy],uy=ft({__name:"bishop-icon",props:{variant:{},colour:{}},setup(t){const e=t,r=st(()=>({primary:e.variant==="white"?"#000000":"#FFFFFF",secondary:e.variant==="white"?"#FFFFFF":"#000000"}));return(n,i)=>(te(),Se("svg",ny,[M("g",iy,[M("g",{style:je([{fill:n.colour},{stroke:"#000000","stroke-linecap":"butt"}])},fy,4),M("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:je([{fill:"none","stroke-linejoin":"miter"},{stroke:r.value.primary}])},null,4)])]))}});var ly=ut(uy,[["__scopeId","data-v-0af0cd9c"]]);const Vs=t=>(en("data-v-5296c147"),t=t(),tn(),t),cy={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 46 46"},py=["stroke-width"],hy=Vs(()=>M("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none","stroke-linejoin":"miter"},stroke:"#000000"},null,-1)),dy=["stroke"],yy=Vs(()=>M("path",{d:"M 20,8 L 25,8",style:{fill:"none","stroke-linejoin":"miter"},stroke:"#000000"},null,-1)),gy=["stroke"],vy=ft({__name:"king-icon",props:{variant:{},colour:{}},setup(t){const e=t,r=st(()=>({primary:e.variant==="white"?"#000000":"#FFFFFF",secondary:e.variant==="white"?"#FFFFFF":"#000000"}));return(n,i)=>(te(),Se("svg",cy,[M("g",{fill:"none","fill-opacity":"1","fill-rule":"evenodd",stroke:"#000000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":n.variant==="white"?1.5:1.1,"stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"},[hy,M("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:je([{fill:n.colour},{"fill-opacity":"1","stroke-linecap":"butt","stroke-linejoin":"miter"}])},null,4),M("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",stroke:r.value.primary,style:je({fill:n.colour})},null,12,dy),yy,M("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none"},stroke:r.value.primary},null,8,gy)],8,py)]))}});var my=ut(vy,[["__scopeId","data-v-5296c147"]]);const by={xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 46 46"},wy=["stroke"],_y=["stroke","fill"],Sy=["stroke"],Ey=ft({__name:"knight-icon",props:{variant:{},colour:{}},setup(t){const e=t,r=st(()=>({primary:e.variant==="white"?"#000000":"#FFFFFF",secondary:e.variant==="white"?"#FFFFFF":"#000000"}));return(n,i)=>(te(),Se("svg",by,[M("g",{opacity:"1",fill:"none","fill-opacity":"1","fill-rule":"evenodd","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1",stroke:r.value.primary,transform:"translate(0,0.3)"},[M("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",stroke:"#000000",style:je({fill:n.colour})},null,4),M("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",stroke:"#000000",style:je({fill:n.colour})},null,4),M("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",stroke:r.value.primary,fill:r.value.primary},null,8,_y),M("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",stroke:r.value.primary},null,8,Sy)],8,wy)]))}});var Ay=ut(Ey,[["__scopeId","data-v-3c89697a"]]);const Ry={xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 46 46"},ky=ft({__name:"pawn-icon",props:{variant:{},colour:{}},setup(t){return(e,r)=>(te(),Se("svg",Ry,[M("path",{d:`m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5
    16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H
    34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59
    27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4
    -4,-4 z`,style:je([{fill:e.colour},{opacity:"1","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}])},null,4)]))}});var Oy=ut(ky,[["__scopeId","data-v-f20361a2"]]);const Bt=t=>(en("data-v-638aa7b4"),t=t(),tn(),t),jy={xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 46 46"},Py=ya('<circle cx="6" cy="12" r="2" data-v-638aa7b4></circle><circle cx="14" cy="9" r="2" data-v-638aa7b4></circle><circle cx="22.5" cy="8" r="2" data-v-638aa7b4></circle><circle cx="31" cy="9" r="2" data-v-638aa7b4></circle><circle cx="39" cy="12" r="2" data-v-638aa7b4></circle><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z" data-v-638aa7b4></path><path d="m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z" data-v-638aa7b4></path><path d="M 11.5,30 C 15,29 30,29 33.5,30" data-v-638aa7b4></path>',8),Ty={key:0,d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5"},Cy=Bt(()=>M("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"},null,-1)),Ny=Bt(()=>M("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5"},null,-1)),My=["stroke"],Ly=Bt(()=>M("path",{d:"M 11,29 A 35,35 1 0 1 34,29"},null,-1)),$y=Bt(()=>M("path",{d:"M 12.5,31.5 L 32.5,31.5"},null,-1)),Iy=Bt(()=>M("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"},null,-1)),Fy=Bt(()=>M("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"},null,-1)),Dy=[Ly,$y,Iy,Fy],By=ft({__name:"queen-icon",props:{variant:{},colour:{}},setup(t){const e=t,r=st(()=>({primary:e.variant==="white"?"#000000":"#FFFFFF",secondary:e.variant==="white"?"#FFFFFF":"#000000"}));return(n,i)=>(te(),Se("svg",jy,[M("g",{style:je([{fill:n.colour},{"stroke-width":"1.5","stroke-linejoin":"round"}]),stroke:"#000000"},[Py,n.variant==="white"?(te(),Se("path",Ty)):(te(),Se(Zn,{key:1},[Cy,Ny,M("g",{stroke:r.value.primary},Dy,8,My)],64))],4)]))}});var xy=ut(By,[["__scopeId","data-v-638aa7b4"]]);const xt=t=>(en("data-v-4714c79c"),t=t(),tn(),t),Uy={xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 46 46"},qy=xt(()=>M("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{"stroke-linecap":"butt"}},null,-1)),Wy=xt(()=>M("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{"stroke-linecap":"butt"}},null,-1)),Gy=xt(()=>M("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{"stroke-linecap":"butt"}},null,-1)),Vy=xt(()=>M("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"},null,-1)),Hy=xt(()=>M("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{"stroke-linecap":"butt","stroke-linejoin":"miter"}},null,-1)),zy=xt(()=>M("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"},null,-1)),Ky=["stroke"],Yy=ya('<path d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z " style="stroke-linecap:butt;" data-v-4714c79c></path><path d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z " style="stroke-linecap:butt;stroke-linejoin:miter;" data-v-4714c79c></path><path d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z " style="stroke-linecap:butt;" data-v-4714c79c></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z " style="stroke-linecap:butt;" data-v-4714c79c></path><path d="M 12,35.5 L 33,35.5 L 33,35.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;" data-v-4714c79c></path><path d="M 13,31.5 L 32,31.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;" data-v-4714c79c></path><path d="M 14,29.5 L 31,29.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;" data-v-4714c79c></path><path d="M 14,16.5 L 31,16.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;" data-v-4714c79c></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;" data-v-4714c79c></path>',9),Jy=ft({__name:"rook-icon",props:{variant:{},colour:{}},setup(t){const e=t,r=st(()=>({primary:e.variant==="white"?"#000000":"#FFFFFF",secondary:e.variant==="white"?"#FFFFFF":"#000000"}));return(n,i)=>(te(),Se("svg",Uy,[M("g",{style:je({fill:n.colour}),opacity:"1","fill-opacity":"1","fill-rule":"evenodd","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1",stroke:"#000000",transform:"translate(0,0.3)"},[qy,Wy,n.variant==="white"?(te(),Se(Zn,{key:0},[Gy,Vy,Hy,zy,M("path",{d:"M 11,14 L 34,14",style:{fill:"none","stroke-linejoin":"miter"},stroke:r.value.primary},null,8,Ky)],64)):(te(),Se(Zn,{key:1},[Yy],64))],4)]))}});var Qy=ut(Jy,[["__scopeId","data-v-4714c79c"]]);const Xy=ft({__name:"chess-piece",props:{piece:{},allegiance:{},size:{}},emits:["click"],setup(t,{emit:e}){const r=t,n=st(()=>H(r.allegiance)),i=st(()=>{switch(r.allegiance){case ye.Black:return"#000";case ye.DarkGrey:return"#444";case ye.LightGrey:return"#999";case ye.White:return"#FFF";default:return""}});return(o,a)=>(te(),Se("div",{class:"chess-piece-svg",onClick:a[0]||(a[0]=f=>e("click",f)),style:je({height:`${o.size}px`,width:`${o.size}px`})},[o.piece===null?(te(),wt(Oy,{key:0,class:"piece",variant:n.value,colour:i.value},null,8,["variant","colour"])):_t("",!0),o.piece==="B"?(te(),wt(ly,{key:1,class:"piece",variant:n.value,colour:i.value,size:o.size},null,8,["variant","colour","size"])):_t("",!0),o.piece==="K"?(te(),wt(my,{key:2,class:"piece",variant:n.value,colour:i.value},null,8,["variant","colour"])):_t("",!0),o.piece==="N"?(te(),wt(Ay,{key:3,class:"piece",variant:n.value,colour:i.value},null,8,["variant","colour"])):_t("",!0),o.piece==="Q"?(te(),wt(xy,{key:4,class:"piece",variant:n.value,colour:i.value},null,8,["variant","colour"])):_t("",!0),o.piece==="R"?(te(),wt(Qy,{key:5,class:"piece",variant:n.value,colour:i.value},null,8,["variant","colour"])):_t("",!0)],4))}});var eg=ut(Xy,[["__scopeId","data-v-3c3086f4"]]);export{Gs as B,eg as C,H as a,Q as c,ha as f,Rt as i};
