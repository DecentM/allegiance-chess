import{Q as w,a as c}from"./QCard.74c18b57.js";import{A as C,K as b,as as g,a as m,B as h,C as x,D as n,G as r,aj as H,M as o,P as y,O as N}from"./index.602bb614.js";import{A as B,B as z}from"./board.83a5ff1c.js";import{u as E,_ as G,G as M,a as k}from"./board-size.19a9ac46.js";import{H as l}from"./hex.607a6e33.js";import{u as q}from"./use-quasar.4a23ba96.js";import{a as Q,u as S}from"./board-audio.5e3fbaba.js";import"./use-dark.e969e9a4.js";import"./QList.885b2d0d.js";import"./QScrollObserver.467c6677.js";import"./focus-manager.202af5b7.js";import"./chess-piece.3af92ba3.js";import"./QSeparator.556bfaa1.js";const W=C({__name:"pen-pal-game",setup(T){const t=b(),_=g(),p=m(()=>{const e=Array.isArray(t.params.state)?t.params.state[0]:t.params.state;return e?l.hexToUtf8(e):B.VanillaDefault}),d=m(()=>{const e=Array.isArray(t.params.history)?t.params.history[0]:t.params.history;return e?l.hexToUtf8(e):""}),a=m(()=>{const e=new z;return p.value&&e.importAFEN(p.value),d.value&&e.importMoveHistory(d.value),e}),u=Q(),A=e=>{const v=a.value.executeMoveIndex(e);u==null||u.playNode(v),_.push({path:`/play/pen-pal/${l.utf8ToHex(a.value.toAFEN())}/${l.utf8ToHex(a.value.getMoveHistory())}`})},{gameOver:i}=S(a),s=q(),f=E();return(e,v)=>(h(),x(w,{flat:"",class:"full-width"},{default:n(()=>[r(c,{horizontal:o(s).screen.gt.sm,class:y({"q-px-none":o(s).screen.lt.sm})},{default:n(()=>[r(c,{style:H({width:`${o(f)}px`}),class:y({"q-px-none":o(s).screen.lt.sm})},{default:n(()=>[r(G,{onExecuteNodeIndex:A,board:a.value,perspective:a.value.activeColour,"play-as":["white","black"],width:o(f),"rounded-borders":o(s).screen.gt.xs},null,8,["board","perspective","width","rounded-borders"])]),_:1},8,["style","class"]),r(c,{class:"q-mb-md full-width"},{default:n(()=>[r(M,{"move-history":a.value.getMoveHistoryAst(),"active-colour":a.value.activeColour,"own-colour":a.value.activeColour,afen:a.value.toAFEN(),"game-over":o(i)},null,8,["move-history","active-colour","own-colour","afen","game-over"])]),_:1})]),_:1},8,["horizontal","class"]),o(i)?(h(),x(k,{key:0,node:o(i)},null,8,["node"])):N("",!0)]),_:1}))}});export{W as default};
//# sourceMappingURL=pen-pal-game.f8d8c571.js.map
