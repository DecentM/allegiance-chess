import{u as p}from"./use-quasar.834f62df.js";import{u as f,_ as h,C as g,G as x,a as y}from"./board-worker.042fd36c.js";import{A as b,o as k,a as w,k as _,w as C,B as c,C as i,D as s,G as l,N as o,P as B}from"./index.2b5d496c.js";import"./QCard.6b2ceb2f.js";import"./use-dark.77020126.js";import"./QList.8a64edb0.js";import"./QScrollObserver.1f4fba2c.js";import"./focus-manager.202af5b7.js";import"./chess-piece.ab3d4145.js";import"./QSeparator.cedfd9ad.js";import"./notify.5c7bb6ab.js";import"./exports.7be5d522.js";const V=b({__name:"online-game",props:{connection:{}},setup(v){const a=v;k(()=>{a.connection.disconnect()});const d=p(),u=w(()=>a.connection.serverSide.value?a.connection.mode.value==="server"?a.connection.serverSide.value:a.connection.serverSide.value==="white"?"black":"white":null),e=f({autoplayFor:[]});_(()=>e.reset());const m=t=>{a.connection.sendMessage({type:"execute-node-index",value:t})};return C(a.connection.moveHistory,t=>{const n=t.at(-1);typeof n=="number"&&e.executeMoveIndex(n)}),(t,n)=>(c(),i(h,null,{board:s(()=>{var r;return[l(g,{onExecuteNodeIndex:m,"model-value":o(e).afen.value,"valid-moves":o(e).validMoves.value,board:o(e),perspective:(r=u.value)!=null?r:"white","play-as":["white","black"],"rounded-borders":o(d).screen.gt.xs,"active-colour":o(e).activeColour.value,"check-moves":o(e).checkMoves.value,"en-passant-target":o(e).enPassantTarget.value,"move-history-ast":o(e).moveHistoryAst.value,squares:o(e).squares.value,loading:o(e).loading.value},null,8,["model-value","valid-moves","board","perspective","rounded-borders","active-colour","check-moves","en-passant-target","move-history-ast","squares","loading"])]}),sidebar:s(()=>{var r;return[l(x,{"move-history":o(e).moveHistoryAst.value,"active-colour":o(e).activeColour.value,"own-colour":(r=u.value)!=null?r:"white",afen:o(e).afen.value,"game-over":o(e).gameOver.value},null,8,["move-history","active-colour","own-colour","afen","game-over"])]}),default:s(()=>[o(e).gameOver.value?(c(),i(y,{key:0,node:o(e).gameOver.value},null,8,["node"])):B("",!0)]),_:1}))}});export{V as default};
//# sourceMappingURL=online-game.28e39842.js.map
