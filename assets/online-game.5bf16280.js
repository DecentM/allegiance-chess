import{u as p}from"./use-quasar.2fa9459c.js";import{u as f,_ as h,C as g,G as x,a as y}from"./board-worker.a8beafab.js";import{A as b,o as k,a as w,k as _,w as C,B as c,C as i,D as s,G as l,M as o,O as M}from"./index.002e3fe2.js";import"./QCard.e2202615.js";import"./use-dark.074d2bda.js";import"./QList.b7a5073c.js";import"./QScrollObserver.706bd3d0.js";import"./focus-manager.202af5b7.js";import"./chess-piece.b155a9d7.js";import"./QSeparator.2ddac7a8.js";import"./notify.675acca3.js";import"./exports.eefa32a1.js";const F=b({__name:"online-game",props:{connection:{}},setup(v){const a=v;k(()=>{a.connection.disconnect()});const d=p(),u=w(()=>a.connection.serverSide.value?a.connection.mode.value==="server"?a.connection.serverSide.value:a.connection.serverSide.value==="white"?"black":"white":null),e=f({autoplayFor:[]});_(()=>e.reset());const m=t=>{a.connection.sendMessage({type:"execute-node-index",value:t})};return C(a.connection.moveHistory,t=>{const n=t.at(-1);typeof n=="number"&&e.executeMoveIndex(n)}),(t,n)=>(c(),i(h,null,{board:s(()=>{var r;return[l(g,{onExecuteNodeIndex:m,"model-value":o(e).afen.value,"valid-moves":o(e).validMoves.value,board:o(e),perspective:(r=u.value)!=null?r:"white","play-as":["white","black"],"rounded-borders":o(d).screen.gt.xs,"active-colour":o(e).activeColour.value,"check-moves":o(e).checkMoves.value,"en-passant-target":o(e).enPassantTarget.value,"move-history-ast":o(e).moveHistoryAst.value,squares:o(e).squares.value,loading:o(e).loading.value},null,8,["model-value","valid-moves","board","perspective","rounded-borders","active-colour","check-moves","en-passant-target","move-history-ast","squares","loading"])]}),sidebar:s(()=>{var r;return[l(x,{"move-history":o(e).moveHistoryAst.value,"active-colour":o(e).activeColour.value,"own-colour":(r=u.value)!=null?r:"white",afen:o(e).afen.value,"game-over":o(e).gameOver.value},null,8,["move-history","active-colour","own-colour","afen","game-over"])]}),default:s(()=>[o(e).gameOver.value?(c(),i(y,{key:0,node:o(e).gameOver.value},null,8,["node"])):M("",!0)]),_:1}))}});export{F as default};
//# sourceMappingURL=online-game.5bf16280.js.map
