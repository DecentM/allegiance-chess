import{Q as y,a as m}from"./QCard.f4e8267a.js";import{E as _,P as g,ak as w,a as o,F as b,G as A,I as n,L as a,aj as z,T as d,S as l}from"./index.8d9c83aa.js";import{B as C}from"./board.64d623de.js";import{_ as H,G as N}from"./game-sidebar.04882da5.js";import{H as i}from"./hex.9046fccc.js";import{F as E,u as F}from"./board-audio.22cbfa7b.js";import{u as M}from"./use-quasar.66729495.js";import"./use-dark.20efcb0d.js";import"./QList.c12061ea.js";import"./QScrollObserver.fbcc7a2d.js";import"./focus-manager.202af5b7.js";import"./chess-piece.4f2e33e2.js";const j=_({__name:"pen-pal-game",setup(B){const r=g(),f=w(),v=o(()=>{const e=Array.isArray(r.params.state)?r.params.state[0]:r.params.state;return e?i.hexToUtf8(e):E.VanillaDefault}),h=o(()=>{const e=Array.isArray(r.params.history)?r.params.history[0]:r.params.history;return e?i.hexToUtf8(e):""}),s=o(()=>{const e=new C;return e.importAFEN(v.value),e.importMoveHistory(h.value),e}),u=F(),x=e=>{const c=s.value.findMoveIndex(e);c!==-1&&(s.value.executeMoveIndex(c),u==null||u.playNode(e),f.push({path:`/play/pen-pal/${i.utf8ToHex(s.value.toAFEN())}/${i.utf8ToHex(s.value.getMoveHistory())}`}))},t=M(),p=o(()=>{let e=t.screen.width;return t.screen.gt.xs&&(e=t.screen.width-65),t.screen.gt.sm&&(e=t.screen.sizes.sm),t.screen.gt.md&&(e=t.screen.sizes.md-265),t.screen.gt.lg&&(e=t.screen.sizes.lg-265),Math.min(e,t.screen.height)});return(e,c)=>(b(),A(y,{flat:"",class:"full-width"},{default:n(()=>[a(m,{horizontal:l(t).screen.gt.sm,class:d({"q-px-none":l(t).screen.lt.sm})},{default:n(()=>[a(m,{style:z({width:`${p.value}px`}),class:d({"q-px-none":l(t).screen.lt.sm})},{default:n(()=>[a(H,{onExecuteNode:x,board:s.value,perspective:s.value.activeColour,"play-as":["white","black"],width:p.value,"rounded-borders":l(t).screen.gt.xs},null,8,["board","perspective","width","rounded-borders"])]),_:1},8,["style","class"]),a(m,{class:"q-mb-md full-width"},{default:n(()=>[a(N,{"move-history":s.value.getMoveHistoryAst(),"active-colour":s.value.activeColour,"own-colour":s.value.activeColour,afen:s.value.toAFEN()},null,8,["move-history","active-colour","own-colour","afen"])]),_:1})]),_:1},8,["horizontal","class"])]),_:1}))}});export{j as default};
//# sourceMappingURL=pen-pal-game.20035554.js.map
