{"version":3,"file":"selection.ff63ad85.js","sources":["../../../../../../../node_modules/quasar/src/composables/private/use-model-toggle.js","../../../../../../../node_modules/quasar/src/utils/scroll.js","../../../../../../../node_modules/quasar/src/composables/private/use-timeout.js","../../../../../../../node_modules/quasar/src/utils/private/selection.js"],"sourcesContent":["import { watch, nextTick, onMounted, getCurrentInstance } from 'vue'\n\nimport { vmHasRouter } from '../../utils/private/vm.js'\n\nexport const useModelToggleProps = {\n  modelValue: {\n    type: Boolean,\n    default: null\n  },\n\n  'onUpdate:modelValue': [ Function, Array ]\n}\n\nexport const useModelToggleEmits = [\n  'beforeShow', 'show', 'beforeHide', 'hide'\n]\n\n// handleShow/handleHide -> removeTick(), self (& emit show)\n\nexport default function ({\n  showing,\n  canShow, // optional\n  hideOnRouteChange, // optional\n  handleShow, // optional\n  handleHide, // optional\n  processOnMount // optional\n}) {\n  const vm = getCurrentInstance()\n  const { props, emit, proxy } = vm\n\n  let payload\n\n  function toggle (evt) {\n    if (showing.value === true) {\n      hide(evt)\n    }\n    else {\n      show(evt)\n    }\n  }\n\n  function show (evt) {\n    if (\n      props.disable === true\n      || (evt !== void 0 && evt.qAnchorHandled === true)\n      || (canShow !== void 0 && canShow(evt) !== true)\n    ) {\n      return\n    }\n\n    const listener = props[ 'onUpdate:modelValue' ] !== void 0\n\n    if (listener === true && __QUASAR_SSR_SERVER__ !== true) {\n      emit('update:modelValue', true)\n      payload = evt\n      nextTick(() => {\n        if (payload === evt) {\n          payload = void 0\n        }\n      })\n    }\n\n    if (props.modelValue === null || listener === false || __QUASAR_SSR_SERVER__) {\n      processShow(evt)\n    }\n  }\n\n  function processShow (evt) {\n    if (showing.value === true) {\n      return\n    }\n\n    showing.value = true\n\n    emit('beforeShow', evt)\n\n    if (handleShow !== void 0) {\n      handleShow(evt)\n    }\n    else {\n      emit('show', evt)\n    }\n  }\n\n  function hide (evt) {\n    if (__QUASAR_SSR_SERVER__ || props.disable === true) {\n      return\n    }\n\n    const listener = props[ 'onUpdate:modelValue' ] !== void 0\n\n    if (listener === true && __QUASAR_SSR_SERVER__ !== true) {\n      emit('update:modelValue', false)\n      payload = evt\n      nextTick(() => {\n        if (payload === evt) {\n          payload = void 0\n        }\n      })\n    }\n\n    if (props.modelValue === null || listener === false || __QUASAR_SSR_SERVER__) {\n      processHide(evt)\n    }\n  }\n\n  function processHide (evt) {\n    if (showing.value === false) {\n      return\n    }\n\n    showing.value = false\n\n    emit('beforeHide', evt)\n\n    if (handleHide !== void 0) {\n      handleHide(evt)\n    }\n    else {\n      emit('hide', evt)\n    }\n  }\n\n  function processModelChange (val) {\n    if (props.disable === true && val === true) {\n      if (props[ 'onUpdate:modelValue' ] !== void 0) {\n        emit('update:modelValue', false)\n      }\n    }\n    else if ((val === true) !== showing.value) {\n      const fn = val === true ? processShow : processHide\n      fn(payload)\n    }\n  }\n\n  watch(() => props.modelValue, processModelChange)\n\n  if (hideOnRouteChange !== void 0 && vmHasRouter(vm) === true) {\n    watch(() => proxy.$route.fullPath, () => {\n      if (hideOnRouteChange.value === true && showing.value === true) {\n        hide()\n      }\n    })\n  }\n\n  processOnMount === true && onMounted(() => {\n    processModelChange(props.modelValue)\n  })\n\n  // expose public methods\n  const publicMethods = { show, hide, toggle }\n  Object.assign(proxy, publicMethods)\n\n  return publicMethods\n}\n","import { css, getElement } from './dom.js'\n\nconst scrollTargets = __QUASAR_SSR_SERVER__\n  ? []\n  : [ null, document, document.body, document.scrollingElement, document.documentElement ]\n\nexport function getScrollTarget (el, targetEl) {\n  let target = getElement(targetEl)\n\n  if (target === void 0) {\n    if (el === void 0 || el === null) {\n      return window\n    }\n\n    target = el.closest('.scroll,.scroll-y,.overflow-auto')\n  }\n\n  return scrollTargets.includes(target)\n    ? window\n    : target\n}\n\nexport function getScrollHeight (el) {\n  return (el === window ? document.body : el).scrollHeight\n}\n\nexport function getScrollWidth (el) {\n  return (el === window ? document.body : el).scrollWidth\n}\n\nexport function getVerticalScrollPosition (scrollTarget) {\n  return scrollTarget === window\n    ? window.pageYOffset || window.scrollY || document.body.scrollTop || 0\n    : scrollTarget.scrollTop\n}\n\nexport function getHorizontalScrollPosition (scrollTarget) {\n  return scrollTarget === window\n    ? window.pageXOffset || window.scrollX || document.body.scrollLeft || 0\n    : scrollTarget.scrollLeft\n}\n\nexport function animVerticalScrollTo (el, to, duration = 0 /* , prevTime */) {\n  const prevTime = arguments[ 3 ] === void 0 ? performance.now() : arguments[ 3 ]\n  const pos = getVerticalScrollPosition(el)\n\n  if (duration <= 0) {\n    if (pos !== to) {\n      setScroll(el, to)\n    }\n    return\n  }\n\n  requestAnimationFrame(nowTime => {\n    const frameTime = nowTime - prevTime\n    const newPos = pos + (to - pos) / Math.max(frameTime, duration) * frameTime\n    setScroll(el, newPos)\n    if (newPos !== to) {\n      animVerticalScrollTo(el, to, duration - frameTime, nowTime)\n    }\n  })\n}\n\nexport function animHorizontalScrollTo (el, to, duration = 0 /* , prevTime */) {\n  const prevTime = arguments[ 3 ] === void 0 ? performance.now() : arguments[ 3 ]\n  const pos = getHorizontalScrollPosition(el)\n\n  if (duration <= 0) {\n    if (pos !== to) {\n      setHorizontalScroll(el, to)\n    }\n    return\n  }\n\n  requestAnimationFrame(nowTime => {\n    const frameTime = nowTime - prevTime\n    const newPos = pos + (to - pos) / Math.max(frameTime, duration) * frameTime\n    setHorizontalScroll(el, newPos)\n    if (newPos !== to) {\n      animHorizontalScrollTo(el, to, duration - frameTime, nowTime)\n    }\n  })\n}\n\nfunction setScroll (scrollTarget, offset) {\n  if (scrollTarget === window) {\n    window.scrollTo(window.pageXOffset || window.scrollX || document.body.scrollLeft || 0, offset)\n    return\n  }\n  scrollTarget.scrollTop = offset\n}\n\nfunction setHorizontalScroll (scrollTarget, offset) {\n  if (scrollTarget === window) {\n    window.scrollTo(offset, window.pageYOffset || window.scrollY || document.body.scrollTop || 0)\n    return\n  }\n  scrollTarget.scrollLeft = offset\n}\n\nexport function setVerticalScrollPosition (scrollTarget, offset, duration) {\n  if (duration) {\n    animVerticalScrollTo(scrollTarget, offset, duration)\n    return\n  }\n  setScroll(scrollTarget, offset)\n}\n\nexport function setHorizontalScrollPosition (scrollTarget, offset, duration) {\n  if (duration) {\n    animHorizontalScrollTo(scrollTarget, offset, duration)\n    return\n  }\n  setHorizontalScroll(scrollTarget, offset)\n}\n\nlet size\nexport function getScrollbarWidth () {\n  if (size !== undefined) {\n    return size\n  }\n\n  const\n    inner = document.createElement('p'),\n    outer = document.createElement('div')\n\n  css(inner, {\n    width: '100%',\n    height: '200px'\n  })\n  css(outer, {\n    position: 'absolute',\n    top: '0px',\n    left: '0px',\n    visibility: 'hidden',\n    width: '200px',\n    height: '150px',\n    overflow: 'hidden'\n  })\n\n  outer.appendChild(inner)\n\n  document.body.appendChild(outer)\n\n  const w1 = inner.offsetWidth\n  outer.style.overflow = 'scroll'\n  let w2 = inner.offsetWidth\n\n  if (w1 === w2) {\n    w2 = outer.clientWidth\n  }\n\n  outer.remove()\n  size = w1 - w2\n\n  return size\n}\n\nexport function hasScrollbar (el, onY = true) {\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) {\n    return false\n  }\n\n  return onY\n    ? (\n        el.scrollHeight > el.clientHeight && (\n          el.classList.contains('scroll')\n          || el.classList.contains('overflow-auto')\n          || [ 'auto', 'scroll' ].includes(window.getComputedStyle(el)[ 'overflow-y' ])\n        )\n      )\n    : (\n        el.scrollWidth > el.clientWidth && (\n          el.classList.contains('scroll')\n          || el.classList.contains('overflow-auto')\n          || [ 'auto', 'scroll' ].includes(window.getComputedStyle(el)[ 'overflow-x' ])\n        )\n      )\n}\n\nexport default {\n  getScrollTarget,\n\n  getScrollHeight,\n  getScrollWidth,\n\n  getVerticalScrollPosition,\n  getHorizontalScrollPosition,\n\n  animVerticalScrollTo,\n  animHorizontalScrollTo,\n\n  setVerticalScrollPosition,\n  setHorizontalScrollPosition,\n\n  getScrollbarWidth,\n  hasScrollbar\n}\n","import { onDeactivated, onBeforeUnmount, getCurrentInstance } from 'vue'\n\nimport { vmIsDestroyed } from '../../utils/private/vm.js'\n\n/*\n * Usage:\n *    registerTimeout(fn[, delay])\n *    removeTimeout()\n */\n\nexport default function () {\n  let timer = null\n  const vm = getCurrentInstance()\n\n  function removeTimeout () {\n    if (timer !== null) {\n      clearTimeout(timer)\n      timer = null\n    }\n  }\n\n  onDeactivated(removeTimeout)\n  onBeforeUnmount(removeTimeout)\n\n  return {\n    removeTimeout,\n\n    registerTimeout (fn, delay) {\n      removeTimeout(timer)\n\n      if (vmIsDestroyed(vm) === false) {\n        timer = setTimeout(fn, delay)\n      }\n    }\n  }\n}\n","import Platform from '../../plugins/Platform.js'\n\nexport function clearSelection () {\n  if (window.getSelection !== void 0) {\n    const selection = window.getSelection()\n    if (selection.empty !== void 0) {\n      selection.empty()\n    }\n    else if (selection.removeAllRanges !== void 0) {\n      selection.removeAllRanges()\n      Platform.is.mobile !== true && selection.addRange(document.createRange())\n    }\n  }\n  else if (document.selection !== void 0) {\n    document.selection.empty()\n  }\n}\n"],"names":["useModelToggleProps","useModelToggleEmits","useModelToggle","showing","canShow","hideOnRouteChange","handleShow","handleHide","processOnMount","vm","getCurrentInstance","props","emit","proxy","payload","toggle","evt","hide","show","listener","nextTick","processShow","processHide","processModelChange","val","watch","vmHasRouter","onMounted","publicMethods","scrollTargets","getScrollTarget","el","targetEl","target","getElement","getVerticalScrollPosition","scrollTarget","getHorizontalScrollPosition","size","getScrollbarWidth","inner","outer","css","w1","w2","hasScrollbar","onY","useTimeout","timer","removeTimeout","onDeactivated","onBeforeUnmount","fn","delay","vmIsDestroyed","clearSelection","selection","Platform"],"mappings":"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"}