import{Q as B,a as i}from"./QCard.48432b71.js";import{Q as x}from"./chess-piece.fd369796.js";import{b as N,a as k}from"./QList.52506fc9.js";import{A as I,r as l,a as q,k as z,o as A,B as v,C as p,D as a,M as t,N as C,G as o,aj as E,H as M,I as G,u as D,O as Q}from"./index.20402850.js";import{u as H}from"./use-quasar.ebd7aa5a.js";import{B as V,A as W}from"./board.2d996438.js";import{u as L,_ as O,G as j,a as $}from"./board-size.69919051.js";import{a as F,u as P}from"./board-audio.1cf9f8cb.js";import"./use-dark.a81810da.js";import"./QScrollObserver.e0082266.js";import"./focus-manager.202af5b7.js";function T(){return new Worker("/assets/bot-worker.278e6ce7.js",{type:"module"})}const re=I({__name:"bot-game",setup(U){const f=l(""),_=l(""),b=l("white"),y=l(0),n=l(),m=F(),s=l(),u=q(()=>new V(f.value||W.VanillaDefault,_.value)),{gameOver:c}=P(u),h=r=>{var w;const e=r.data;switch(e.type){case"board-update":f.value=e.afen,_.value=e.moveHistory,b.value=e.activeColour,y.value=e.boardScore;break;case"node-execution":m==null||m.playNode(e.node);break}e.type==="board-update"&&e.activeColour!==n.value&&!c.value&&((w=s.value)==null||w.postMessage({type:"bot-move"}))};z(()=>{s.value=new T,s.value.addEventListener("message",h),s.value.postMessage({type:"reset"}),n.value=Math.random()>.5?"white":"black"}),A(()=>{var r,e;(r=s.value)==null||r.removeEventListener("message",h),(e=s.value)==null||e.postMessage({type:"reset"})});const S=r=>{var e;(e=s.value)==null||e.postMessage({type:"execute-move-index",index:r})},d=H(),g=L();return(r,e)=>(v(),p(B,{flat:"",class:"full-width"},{default:a(()=>[n.value?(v(),p(i,{key:0,horizontal:t(d).screen.gt.sm,class:C({"q-px-none":t(d).screen.lt.sm})},{default:a(()=>[o(i,{style:E({width:`${t(g)}px`}),class:C({"q-px-none":t(d).screen.lt.sm})},{default:a(()=>[o(O,{onExecuteNodeIndex:S,board:u.value,perspective:n.value,"play-as":["white","black"],width:t(g),"rounded-borders":t(d).screen.gt.xs},null,8,["board","perspective","width","rounded-borders"])]),_:1},8,["style","class"]),o(i,{class:"q-mb-md full-width"},{default:a(()=>[o(j,{"move-history":u.value.getMoveHistoryAst(),"active-colour":b.value,"own-colour":n.value,afen:u.value.toAFEN(),"game-over":t(c)},{default:a(()=>[o(N,null,{default:a(()=>[o(k,{class:"q-mt-sm q-mb-sm"},{default:a(()=>[o(x,null,{default:a(()=>[M("Evaluation")]),_:1}),o(x,{caption:"",lines:"2"},{default:a(()=>[M(G(y.value),1)]),_:1})]),_:1}),o(k,{side:""},{default:a(()=>[o(D,{name:"exposure_plus_1"})]),_:1})]),_:1})]),_:1},8,["move-history","active-colour","own-colour","afen","game-over"])]),_:1})]),_:1},8,["horizontal","class"])):Q("",!0),t(c)?(v(),p($,{key:1,node:t(c)},null,8,["node"])):Q("",!0)]),_:1}))}});export{re as default};
//# sourceMappingURL=bot-game.84e58f74.js.map
