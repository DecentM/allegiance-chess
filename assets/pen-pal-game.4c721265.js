import{Q as w,a as c}from"./QCard.7b376b72.js";import{A as C,K as b,ak as N,a as m,B as h,C as x,D as n,G as r,aj as H,M as o,N as y,O as g}from"./index.b271fcf9.js";import{A as B,B as z}from"./board.c16f8167.js";import{u as M,_ as k,G as E,a as G}from"./board-size.5e61317b.js";import{H as l}from"./hex.3d30e428.js";import{u as q}from"./use-quasar.70ee791f.js";import{a as Q,u as S}from"./board-audio.8be8d5e3.js";import"./use-dark.fb55bdf3.js";import"./QList.6317c7be.js";import"./QScrollObserver.751e0e8d.js";import"./focus-manager.202af5b7.js";import"./chess-piece.049befa3.js";const L=C({__name:"pen-pal-game",setup(T){const t=b(),_=N(),p=m(()=>{const e=Array.isArray(t.params.state)?t.params.state[0]:t.params.state;return e?l.hexToUtf8(e):B.VanillaDefault}),d=m(()=>{const e=Array.isArray(t.params.history)?t.params.history[0]:t.params.history;return e?l.hexToUtf8(e):""}),a=m(()=>{const e=new z;return p.value&&e.importAFEN(p.value),d.value&&e.importMoveHistory(d.value),e}),u=Q(),A=e=>{const i=a.value.findMoveIndex(e);i!==-1&&(a.value.executeMoveIndex(i),u==null||u.playNode(e),_.push({path:`/play/pen-pal/${l.utf8ToHex(a.value.toAFEN())}/${l.utf8ToHex(a.value.getMoveHistory())}`}))},{gameOver:f}=S(a),s=q(),v=M();return(e,i)=>(h(),x(w,{flat:"",class:"full-width"},{default:n(()=>[r(c,{horizontal:o(s).screen.gt.sm,class:y({"q-px-none":o(s).screen.lt.sm})},{default:n(()=>[r(c,{style:H({width:`${o(v)}px`}),class:y({"q-px-none":o(s).screen.lt.sm})},{default:n(()=>[r(k,{onExecuteNode:A,board:a.value,perspective:a.value.activeColour,"play-as":["white","black"],width:o(v),"rounded-borders":o(s).screen.gt.xs},null,8,["board","perspective","width","rounded-borders"])]),_:1},8,["style","class"]),r(c,{class:"q-mb-md full-width"},{default:n(()=>[r(E,{"move-history":a.value.getMoveHistoryAst(),"active-colour":a.value.activeColour,"own-colour":a.value.activeColour,afen:a.value.toAFEN()},null,8,["move-history","active-colour","own-colour","afen"])]),_:1})]),_:1},8,["horizontal","class"]),o(f)?(h(),x(G,{key:0,node:o(f)},null,8,["node"])):g("",!0)]),_:1}))}});export{L as default};
//# sourceMappingURL=pen-pal-game.4c721265.js.map
